<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="15">
  <HTTPTask id="22" hostname="learning2.pflb.ru:56902" path="/login" url="http://learning2.pflb.ru:56902/login" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52233" connectionId="2084" origin="Primary" encodingType="ANSI" startDateTime="2020-02-23T18:01:14.402+04:00" startTime="4653" endTime="4704" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Requested-With" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="dnt" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9sb2dpbiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyLw0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="sessionExpired" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZmFsc2U=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bnVsbA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="filterSetting" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>873</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTsgbW9kZT1ibG9jaw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Pragma" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Frame-Options" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0FNRU9SSUdJTg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Language" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ODcz</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KWC1Db250ZW50LVR5cGUtT3B0aW9uczogbm9zbmlmZg0KWC1YU1MtUHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ0KUHJhZ21hOiBuby1jYWNoZQ0KRXhwaXJlczogMA0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpMYXN0LU1vZGlmaWVkOiBUdWUsIDI3IE5vdiAyMDE4IDE0OjAzOjQzIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sO2NoYXJzZXQ9VVRGLTgNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQpDb250ZW50LUxlbmd0aDogODczDQpEYXRlOiBTdW4sIDIzIEZlYiAyMDIwIDE0OjAxOjQxIEdNVA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InJ1Ij4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCIvPgogICAgPG1ldGEgaHR0cC1lcXVpdj0iWC1VQS1Db21wYXRpYmxlIiBjb250ZW50PSJJRT1lZGdlLCBjaHJvbWU9MSIgLz4KICAgIDx0aXRsZT7QkNCy0YLQvtGA0LjQt9Cw0YbQuNGPPC90aXRsZT4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iY3NzL2NvcmUvbWF0ZXJpYWxfaWNvbnMuY3NzIj4KICAgIDxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9ImNzcy9jb3JlL21hdGVyaWFsaXplLmNzcyIgbWVkaWE9InNjcmVlbixwcm9qZWN0aW9uIi8+CiAgICA8bGluayB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3Mvc3R5bGUuY3NzIj4KPC9oZWFkPgo8Ym9keT4KPGRpdiBpZD0ibG9naW5fcGFnZV93cmFwcGVyIj48L2Rpdj4KPC9ib2R5Pgo8c2NyaXB0IHNyYz0ianMvY29yZS9sZWdhY3kuanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0ianMvY29yZS9qcXVlcnktMy4xLjEuanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0ianMvY29yZS9kdXN0LmpzIj48L3NjcmlwdD4KPHNjcmlwdCBzcmM9ImpzL2NvcmUvanF1ZXJ5LmNvb2tpZS5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9ImpzL2NvcmUvbWF0ZXJpYWxpemUuanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSJqcy9wYWdlL2F1dGhvcmlzYXRpb24uanMiPjwvc2NyaXB0Pgo8L2h0bWw+</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
    <HTTPTask id="23" hostname="learning2.pflb.ru:56902" path="/css/core/material_icons.css" url="http://learning2.pflb.ru:56902/css/core/material_icons.css" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52234" connectionId="2108" origin="HTML" encodingType="ANSI" ordinal="1" startDateTime="2020-02-23T18:01:14.454+04:00" startTime="4705" endTime="4758" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9jc3MvY29yZS9tYXRlcmlhbF9pY29ucy5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi9sb2dpbg0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1201</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7Y2hhcnNldD1VVEYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTIwMQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IHRleHQvY3NzO2NoYXJzZXQ9VVRGLTgNCkNvbnRlbnQtTGVuZ3RoOiAxMjAxDQpEYXRlOiBTdW4sIDIzIEZlYiAyMDIwIDE0OjAxOjQxIEdNVA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogJ01hdGVyaWFsIEljb25zJzsKICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBzcmM6IHVybCgnLi4vZm9udHMvbWF0ZXJpYWxfaWNvbnMvTWF0ZXJpYWxJY29ucy1SZWd1bGFyLmVvdCcpOyAvKiBGb3IgSUU2LTggKi8KICAgIHNyYzogbG9jYWwoJ01hdGVyaWFsIEljb25zJyksCiAgICBsb2NhbCgnTWF0ZXJpYWxJY29ucy1SZWd1bGFyJyksCiAgICB1cmwoJy4uL2ZvbnRzL21hdGVyaWFsX2ljb25zL01hdGVyaWFsSWNvbnMtUmVndWxhci53b2ZmMicpIGZvcm1hdCgnd29mZjInKSwKICAgIHVybCgnLi4vZm9udHMvbWF0ZXJpYWxfaWNvbnMvTWF0ZXJpYWxJY29ucy1SZWd1bGFyLndvZmYnKSBmb3JtYXQoJ3dvZmYnKSwKICAgIHVybCgnLi4vZm9udHMvbWF0ZXJpYWxfaWNvbnMvTWF0ZXJpYWxJY29ucy1SZWd1bGFyLnR0ZicpIGZvcm1hdCgndHJ1ZXR5cGUnKSwKICAgIHVybCgnLi4vZm9udHMvbWF0ZXJpYWxfaWNvbnMvTWF0ZXJpYWxJY29ucy1SZWd1bGFyLnN2ZycpIGZvcm1hdCgnc3ZnJyk7Cn0KCi5tYXRlcmlhbC1pY29ucyB7CiAgICBmb250LWZhbWlseTogJ01hdGVyaWFsIEljb25zJzsKICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICBmb250LXNpemU6IDI0cHg7CiAgICBsaW5lLWhlaWdodDogMTsKICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7CiAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB3b3JkLXdyYXA6IG5vcm1hbDsKICAgIGRpcmVjdGlvbjogbHRyOwogICAgLXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKCiAgICAvKiBTdXBwb3J0IGZvciBhbGwgV2ViS2l0IGJyb3dzZXJzLiAqLwogICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgICAvKiBTdXBwb3J0IGZvciBTYWZhcmkgYW5kIENocm9tZS4gKi8KICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7CgogICAgLyogU3VwcG9ydCBmb3IgRmlyZWZveC4gKi8KICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CgogICAgLyogU3VwcG9ydCBmb3IgSUUuICovCiAgICBmb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKfQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="24" hostname="learning2.pflb.ru:56902" path="/css/core/materialize.css" url="http://learning2.pflb.ru:56902/css/core/materialize.css" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52235" connectionId="2148" origin="HTML" encodingType="ANSI" ordinal="2" startDateTime="2020-02-23T18:01:14.454+04:00" startTime="4705" endTime="5020" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9jc3MvY29yZS9tYXRlcmlhbGl6ZS5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi9sb2dpbg0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>177560</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7Y2hhcnNldD1VVEYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTc3NTYw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IHRleHQvY3NzO2NoYXJzZXQ9VVRGLTgNCkNvbnRlbnQtTGVuZ3RoOiAxNzc1NjANCkRhdGU6IFN1biwgMjMgRmViIDIwMjAgMTQ6MDE6NDEgR01UDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIE1hdGVyaWFsaXplIHYwLjk5LjAgKGh0dHA6Ly9tYXRlcmlhbGl6ZWNzcy5jb20pCiAqIENvcHlyaWdodCAyMDE0LTIwMTcgTWF0ZXJpYWxpemUKICogTUlUIExpY2Vuc2UgKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Eb2dmYWxvL21hdGVyaWFsaXplL21hc3Rlci9MSUNFTlNFKQogKi8KLm1hdGVyaWFsaXplLXJlZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U1MWMyMyAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLXRleHQgewogIGNvbG9yOiAjZTUxYzIzICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRlYWViICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7CiAgY29sb3I6ICNmZGVhZWIgIWltcG9ydGFudDsKfQoKLm1hdGVyaWFsaXplLXJlZC5saWdodGVuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmOGMxYzMgIWltcG9ydGFudDsKfQoKLm1hdGVyaWFsaXplLXJlZC10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI2Y4YzFjMyAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLmxpZ2h0ZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YzOTg5YiAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLXRleHQudGV4dC1saWdodGVuLTMgewogIGNvbG9yOiAjZjM5ODliICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWU2ZTczICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7CiAgY29sb3I6ICNlZTZlNzMgIWltcG9ydGFudDsKfQoKLm1hdGVyaWFsaXplLXJlZC5saWdodGVuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNlYTQ1NGIgIWltcG9ydGFudDsKfQoKLm1hdGVyaWFsaXplLXJlZC10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogI2VhNDU0YiAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDAxODFlICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWRhcmtlbi0xIHsKICBjb2xvcjogI2QwMTgxZSAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjkxNTFiICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWRhcmtlbi0yIHsKICBjb2xvcjogI2I5MTUxYiAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTIxMzE4ICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogI2EyMTMxOCAhaW1wb3J0YW50Owp9CgoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGIxMDE0ICFpbXBvcnRhbnQ7Cn0KCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWRhcmtlbi00IHsKICBjb2xvcjogIzhiMTAxNCAhaW1wb3J0YW50Owp9CgoucmVkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7Cn0KCi5yZWQtdGV4dCB7CiAgY29sb3I6ICNGNDQzMzYgIWltcG9ydGFudDsKfQoKLnJlZC5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNGRkVCRUUgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI0ZGRUJFRSAhaW1wb3J0YW50Owp9CgoucmVkLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGQ0REMiAhaW1wb3J0YW50Owp9CgoucmVkLXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjRkZDREQyICFpbXBvcnRhbnQ7Cn0KCi5yZWQubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUY5QTlBICFpbXBvcnRhbnQ7Cn0KCi5yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNFRjlBOUEgIWltcG9ydGFudDsKfQoKLnJlZC5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNFNTczNzMgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogI0U1NzM3MyAhaW1wb3J0YW50Owp9CgoucmVkLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0VGNTM1MCAhaW1wb3J0YW50Owp9CgoucmVkLXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjRUY1MzUwICFpbXBvcnRhbnQ7Cn0KCi5yZWQuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNFNTM5MzUgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjRTUzOTM1ICFpbXBvcnRhbnQ7Cn0KCi5yZWQuZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNEMzJGMkYgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjRDMyRjJGICFpbXBvcnRhbnQ7Cn0KCi5yZWQuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNDNjI4MjggIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjQzYyODI4ICFpbXBvcnRhbnQ7Cn0KCi5yZWQuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNCNzFDMUMgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjQjcxQzFDICFpbXBvcnRhbnQ7Cn0KCi5yZWQuYWNjZW50LTEgewogIGJhY2tncm91bmQtY29sb3I6ICNGRjhBODAgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjRkY4QTgwICFpbXBvcnRhbnQ7Cn0KCi5yZWQuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNGRjUyNTIgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtYWNjZW50LTIgewogIGNvbG9yOiAjRkY1MjUyICFpbXBvcnRhbnQ7Cn0KCi5yZWQuYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICNGRjE3NDQgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjRkYxNzQ0ICFpbXBvcnRhbnQ7Cn0KCi5yZWQuYWNjZW50LTQgewogIGJhY2tncm91bmQtY29sb3I6ICNENTAwMDAgIWltcG9ydGFudDsKfQoKLnJlZC10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjRDUwMDAwICFpbXBvcnRhbnQ7Cn0KCi5waW5rIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTkxZTYzICFpbXBvcnRhbnQ7Cn0KCi5waW5rLXRleHQgewogIGNvbG9yOiAjZTkxZTYzICFpbXBvcnRhbnQ7Cn0KCi5waW5rLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZjZTRlYyAhaW1wb3J0YW50Owp9CgoucGluay10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2ZjZTRlYyAhaW1wb3J0YW50Owp9CgoucGluay5saWdodGVuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmOGJiZDAgIWltcG9ydGFudDsKfQoKLnBpbmstdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNmOGJiZDAgIWltcG9ydGFudDsKfQoKLnBpbmsubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ4ZmIxICFpbXBvcnRhbnQ7Cn0KCi5waW5rLXRleHQudGV4dC1saWdodGVuLTMgewogIGNvbG9yOiAjZjQ4ZmIxICFpbXBvcnRhbnQ7Cn0KCi5waW5rLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YwNjI5MiAhaW1wb3J0YW50Owp9CgoucGluay10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogI2YwNjI5MiAhaW1wb3J0YW50Owp9CgoucGluay5saWdodGVuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNlYzQwN2EgIWltcG9ydGFudDsKfQoKLnBpbmstdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICNlYzQwN2EgIWltcG9ydGFudDsKfQoKLnBpbmsuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNkODFiNjAgIWltcG9ydGFudDsKfQoKLnBpbmstdGV4dC50ZXh0LWRhcmtlbi0xIHsKICBjb2xvcjogI2Q4MWI2MCAhaW1wb3J0YW50Owp9CgoucGluay5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2MyMTg1YiAhaW1wb3J0YW50Owp9CgoucGluay10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjYzIxODViICFpbXBvcnRhbnQ7Cn0KCi5waW5rLmRhcmtlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWQxNDU3ICFpbXBvcnRhbnQ7Cn0KCi5waW5rLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICNhZDE0NTcgIWltcG9ydGFudDsKfQoKLnBpbmsuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICM4ODBlNGYgIWltcG9ydGFudDsKfQoKLnBpbmstdGV4dC50ZXh0LWRhcmtlbi00IHsKICBjb2xvcjogIzg4MGU0ZiAhaW1wb3J0YW50Owp9CgoucGluay5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmODBhYiAhaW1wb3J0YW50Owp9CgoucGluay10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjZmY4MGFiICFpbXBvcnRhbnQ7Cn0KCi5waW5rLmFjY2VudC0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY0MDgxICFpbXBvcnRhbnQ7Cn0KCi5waW5rLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICNmZjQwODEgIWltcG9ydGFudDsKfQoKLnBpbmsuYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICNmNTAwNTcgIWltcG9ydGFudDsKfQoKLnBpbmstdGV4dC50ZXh0LWFjY2VudC0zIHsKICBjb2xvcjogI2Y1MDA1NyAhaW1wb3J0YW50Owp9CgoucGluay5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M1MTE2MiAhaW1wb3J0YW50Owp9CgoucGluay10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjYzUxMTYyICFpbXBvcnRhbnQ7Cn0KCi5wdXJwbGUgewogIGJhY2tncm91bmQtY29sb3I6ICM5YzI3YjAgIWltcG9ydGFudDsKfQoKLnB1cnBsZS10ZXh0IHsKICBjb2xvcjogIzljMjdiMCAhaW1wb3J0YW50Owp9CgoucHVycGxlLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YzZTVmNSAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZjNlNWY1ICFpbXBvcnRhbnQ7Cn0KCi5wdXJwbGUubGlnaHRlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTFiZWU3ICFpbXBvcnRhbnQ7Cn0KCi5wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNlMWJlZTcgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNjZTkzZDggIWltcG9ydGFudDsKfQoKLnB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsKICBjb2xvcjogI2NlOTNkOCAhaW1wb3J0YW50Owp9CgoucHVycGxlLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2JhNjhjOCAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjYmE2OGM4ICFpbXBvcnRhbnQ7Cn0KCi5wdXJwbGUubGlnaHRlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWI0N2JjICFpbXBvcnRhbnQ7Cn0KCi5wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICNhYjQ3YmMgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzhlMjRhYSAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1kYXJrZW4tMSB7CiAgY29sb3I6ICM4ZTI0YWEgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzdiMWZhMiAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICM3YjFmYTIgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5kYXJrZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzZhMWI5YSAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICM2YTFiOWEgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzRhMTQ4YyAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1kYXJrZW4tNCB7CiAgY29sb3I6ICM0YTE0OGMgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VhODBmYyAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICNlYTgwZmMgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5hY2NlbnQtMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2UwNDBmYiAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICNlMDQwZmIgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Q1MDBmOSAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1hY2NlbnQtMyB7CiAgY29sb3I6ICNkNTAwZjkgIWltcG9ydGFudDsKfQoKLnB1cnBsZS5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2FhMDBmZiAhaW1wb3J0YW50Owp9CgoucHVycGxlLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICNhYTAwZmYgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjczYWI3ICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0IHsKICBjb2xvcjogIzY3M2FiNyAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWRlN2Y2ICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2VkZTdmNiAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUubGlnaHRlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDFjNGU5ICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI2QxYzRlOSAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjM5ZGRiICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsKICBjb2xvcjogI2IzOWRkYiAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTU3NWNkICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogIzk1NzVjZCAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUubGlnaHRlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2U1N2MyICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzdlNTdjMiAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICM1ZTM1YjEgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tMSB7CiAgY29sb3I6ICM1ZTM1YjEgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTEyZGE4ICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjNTEyZGE4ICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS5kYXJrZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzQ1MjdhMCAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUtdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzQ1MjdhMCAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICMzMTFiOTIgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tNCB7CiAgY29sb3I6ICMzMTFiOTIgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjM4OGZmICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjYjM4OGZmICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS5hY2NlbnQtMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzdjNGRmZiAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUtdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzdjNGRmZiAhaW1wb3J0YW50Owp9CgouZGVlcC1wdXJwbGUuYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICM2NTFmZmYgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLXRleHQudGV4dC1hY2NlbnQtMyB7CiAgY29sb3I6ICM2NTFmZmYgIWltcG9ydGFudDsKfQoKLmRlZXAtcHVycGxlLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjIwMGVhICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjNjIwMGVhICFpbXBvcnRhbnQ7Cn0KCi5pbmRpZ28gewogIGJhY2tncm91bmQtY29sb3I6ICMzZjUxYjUgIWltcG9ydGFudDsKfQoKLmluZGlnby10ZXh0IHsKICBjb2xvcjogIzNmNTFiNSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZWFmNiAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZThlYWY2ICFpbXBvcnRhbnQ7Cn0KCi5pbmRpZ28ubGlnaHRlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzVjYWU5ICFpbXBvcnRhbnQ7Cn0KCi5pbmRpZ28tdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNjNWNhZTkgIWltcG9ydGFudDsKfQoKLmluZGlnby5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM5ZmE4ZGEgIWltcG9ydGFudDsKfQoKLmluZGlnby10ZXh0LnRleHQtbGlnaHRlbi0zIHsKICBjb2xvcjogIzlmYThkYSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzc5ODZjYiAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjNzk4NmNiICFpbXBvcnRhbnQ7Cn0KCi5pbmRpZ28ubGlnaHRlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWM2YmMwICFpbXBvcnRhbnQ7Cn0KCi5pbmRpZ28tdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICM1YzZiYzAgIWltcG9ydGFudDsKfQoKLmluZGlnby5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzM5NDlhYiAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1kYXJrZW4tMSB7CiAgY29sb3I6ICMzOTQ5YWIgIWltcG9ydGFudDsKfQoKLmluZGlnby5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzMwM2Y5ZiAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICMzMDNmOWYgIWltcG9ydGFudDsKfQoKLmluZGlnby5kYXJrZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI4MzU5MyAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICMyODM1OTMgIWltcG9ydGFudDsKfQoKLmluZGlnby5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzFhMjM3ZSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1kYXJrZW4tNCB7CiAgY29sb3I6ICMxYTIzN2UgIWltcG9ydGFudDsKfQoKLmluZGlnby5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzhjOWVmZiAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICM4YzllZmYgIWltcG9ydGFudDsKfQoKLmluZGlnby5hY2NlbnQtMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzUzNmRmZSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICM1MzZkZmUgIWltcG9ydGFudDsKfQoKLmluZGlnby5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzNkNWFmZSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtMyB7CiAgY29sb3I6ICMzZDVhZmUgIWltcG9ydGFudDsKfQoKLmluZGlnby5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzMwNGZmZSAhaW1wb3J0YW50Owp9CgouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICMzMDRmZmUgIWltcG9ydGFudDsKfQoKLmJsdWUgewogIGJhY2tncm91bmQtY29sb3I6ICMyMTk2RjMgIWltcG9ydGFudDsKfQoKLmJsdWUtdGV4dCB7CiAgY29sb3I6ICMyMTk2RjMgIWltcG9ydGFudDsKfQoKLmJsdWUubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTNGMkZEICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjRTNGMkZEICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0JCREVGQiAhaW1wb3J0YW50Owp9CgouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI0JCREVGQiAhaW1wb3J0YW50Owp9CgouYmx1ZS5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM5MENBRjkgIWltcG9ydGFudDsKfQoKLmJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICM5MENBRjkgIWltcG9ydGFudDsKfQoKLmJsdWUubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjRCNUY2ICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjNjRCNUY2ICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzQyQTVGNSAhaW1wb3J0YW50Owp9CgouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzQyQTVGNSAhaW1wb3J0YW50Owp9CgouYmx1ZS5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzFFODhFNSAhaW1wb3J0YW50Owp9CgouYmx1ZS10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjMUU4OEU1ICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTk3NkQyICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICMxOTc2RDIgIWltcG9ydGFudDsKfQoKLmJsdWUuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICMxNTY1QzAgIWltcG9ydGFudDsKfQoKLmJsdWUtdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzE1NjVDMCAhaW1wb3J0YW50Owp9CgouYmx1ZS5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzBENDdBMSAhaW1wb3J0YW50Owp9CgouYmx1ZS10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMEQ0N0ExICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODJCMUZGICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICM4MkIxRkYgIWltcG9ydGFudDsKfQoKLmJsdWUuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICM0NDhBRkYgIWltcG9ydGFudDsKfQoKLmJsdWUtdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzQ0OEFGRiAhaW1wb3J0YW50Owp9CgouYmx1ZS5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI5NzlGRiAhaW1wb3J0YW50Owp9CgouYmx1ZS10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjMjk3OUZGICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjk2MkZGICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICMyOTYyRkYgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUgewogIGJhY2tncm91bmQtY29sb3I6ICMwM2E5ZjQgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUtdGV4dCB7CiAgY29sb3I6ICMwM2E5ZjQgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTFmNWZlICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZTFmNWZlICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2IzZTVmYyAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI2IzZTVmYyAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM4MWQ0ZmEgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICM4MWQ0ZmEgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGZjM2Y3ICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjNGZjM2Y3ICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI5YjZmNiAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzI5YjZmNiAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAzOWJlNSAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjMDM5YmU1ICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDI4OGQxICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICMwMjg4ZDEgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICMwMjc3YmQgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzAyNzdiZCAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAxNTc5YiAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMDE1NzliICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODBkOGZmICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICM4MGQ4ZmYgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICM0MGM0ZmYgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzQwYzRmZiAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYjBmZiAhaW1wb3J0YW50Owp9CgoubGlnaHQtYmx1ZS10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjMDBiMGZmICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA5MWVhICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ibHVlLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICMwMDkxZWEgIWltcG9ydGFudDsKfQoKLmN5YW4gewogIGJhY2tncm91bmQtY29sb3I6ICMwMGJjZDQgIWltcG9ydGFudDsKfQoKLmN5YW4tdGV4dCB7CiAgY29sb3I6ICMwMGJjZDQgIWltcG9ydGFudDsKfQoKLmN5YW4ubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2IyZWJmMiAhaW1wb3J0YW50Owp9CgouY3lhbi10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI2IyZWJmMiAhaW1wb3J0YW50Owp9CgouY3lhbi5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM4MGRlZWEgIWltcG9ydGFudDsKfQoKLmN5YW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICM4MGRlZWEgIWltcG9ydGFudDsKfQoKLmN5YW4ubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGRkMGUxICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjNGRkMGUxICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YzZkYSAhaW1wb3J0YW50Owp9CgouY3lhbi10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzI2YzZkYSAhaW1wb3J0YW50Owp9CgouY3lhbi5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYWNjMSAhaW1wb3J0YW50Owp9CgouY3lhbi10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjMDBhY2MxICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA5N2E3ICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICMwMDk3YTcgIWltcG9ydGFudDsKfQoKLmN5YW4uZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDgzOGYgIWltcG9ydGFudDsKfQoKLmN5YW4tdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzAwODM4ZiAhaW1wb3J0YW50Owp9CgouY3lhbi5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjA2NCAhaW1wb3J0YW50Owp9CgouY3lhbi10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMDA2MDY0ICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODRmZmZmICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICM4NGZmZmYgIWltcG9ydGFudDsKfQoKLmN5YW4uYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICMxOGZmZmYgIWltcG9ydGFudDsKfQoKLmN5YW4tdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzE4ZmZmZiAhaW1wb3J0YW50Owp9CgouY3lhbi5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwZTVmZiAhaW1wb3J0YW50Owp9CgouY3lhbi10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjMDBlNWZmICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiOGQ0ICFpbXBvcnRhbnQ7Cn0KCi5jeWFuLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICMwMGI4ZDQgIWltcG9ydGFudDsKfQoKLnRlYWwgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDk2ODggIWltcG9ydGFudDsKfQoKLnRlYWwtdGV4dCB7CiAgY29sb3I6ICMwMDk2ODggIWltcG9ydGFudDsKfQoKLnRlYWwubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmMmYxICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZTBmMmYxICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2IyZGZkYiAhaW1wb3J0YW50Owp9CgoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI2IyZGZkYiAhaW1wb3J0YW50Owp9CgoudGVhbC5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM4MGNiYzQgIWltcG9ydGFudDsKfQoKLnRlYWwtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICM4MGNiYzQgIWltcG9ydGFudDsKfQoKLnRlYWwubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGRiNmFjICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjNGRiNmFjICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YSAhaW1wb3J0YW50Owp9CgoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzI2YTY5YSAhaW1wb3J0YW50Owp9CgoudGVhbC5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwODk3YiAhaW1wb3J0YW50Owp9CgoudGVhbC10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjMDA4OTdiICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3OTZiICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICMwMDc5NmIgIWltcG9ydGFudDsKfQoKLnRlYWwuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDY5NWMgIWltcG9ydGFudDsKfQoKLnRlYWwtdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzAwNjk1YyAhaW1wb3J0YW50Owp9CgoudGVhbC5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ0MCAhaW1wb3J0YW50Owp9CgoudGVhbC10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMDA0ZDQwICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTdmZmViICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLXRleHQudGV4dC1hY2NlbnQtMSB7CiAgY29sb3I6ICNhN2ZmZWIgIWltcG9ydGFudDsKfQoKLnRlYWwuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICM2NGZmZGEgIWltcG9ydGFudDsKfQoKLnRlYWwtdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzY0ZmZkYSAhaW1wb3J0YW50Owp9CgoudGVhbC5hY2NlbnQtMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzFkZTliNiAhaW1wb3J0YW50Owp9CgoudGVhbC10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjMWRlOWI2ICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiZmE1ICFpbXBvcnRhbnQ7Cn0KCi50ZWFsLXRleHQudGV4dC1hY2NlbnQtNCB7CiAgY29sb3I6ICMwMGJmYTUgIWltcG9ydGFudDsKfQoKLmdyZWVuIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0IHsKICBjb2xvcjogIzRDQUY1MCAhaW1wb3J0YW50Owp9CgouZ3JlZW4ubGlnaHRlbi01IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRThGNUU5ICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI0U4RjVFOSAhaW1wb3J0YW50Owp9CgouZ3JlZW4ubGlnaHRlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjQzhFNkM5ICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi00IHsKICBjb2xvcjogI0M4RTZDOSAhaW1wb3J0YW50Owp9CgouZ3JlZW4ubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjQTVENkE3ICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi0zIHsKICBjb2xvcjogI0E1RDZBNyAhaW1wb3J0YW50Owp9CgouZ3JlZW4ubGlnaHRlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODFDNzg0ICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogIzgxQzc4NCAhaW1wb3J0YW50Owp9CgouZ3JlZW4ubGlnaHRlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjZCQjZBICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi0xIHsKICBjb2xvcjogIzY2QkI2QSAhaW1wb3J0YW50Owp9CgouZ3JlZW4uZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICM0M0EwNDcgIWltcG9ydGFudDsKfQoKLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tMSB7CiAgY29sb3I6ICM0M0EwNDcgIWltcG9ydGFudDsKfQoKLmdyZWVuLmRhcmtlbi0yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzg4RTNDICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjMzg4RTNDICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi5kYXJrZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzJFN0QzMiAhaW1wb3J0YW50Owp9CgouZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi0zIHsKICBjb2xvcjogIzJFN0QzMiAhaW1wb3J0YW50Owp9CgouZ3JlZW4uZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICMxQjVFMjAgIWltcG9ydGFudDsKfQoKLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tNCB7CiAgY29sb3I6ICMxQjVFMjAgIWltcG9ydGFudDsKfQoKLmdyZWVuLmFjY2VudC0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjQjlGNkNBICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjQjlGNkNBICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi5hY2NlbnQtMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzY5RjBBRSAhaW1wb3J0YW50Owp9CgouZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC0yIHsKICBjb2xvcjogIzY5RjBBRSAhaW1wb3J0YW50Owp9CgouZ3JlZW4uYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICMwMEU2NzYgIWltcG9ydGFudDsKfQoKLmdyZWVuLXRleHQudGV4dC1hY2NlbnQtMyB7CiAgY29sb3I6ICMwMEU2NzYgIWltcG9ydGFudDsKfQoKLmdyZWVuLmFjY2VudC00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBDODUzICFpbXBvcnRhbnQ7Cn0KCi5ncmVlbi10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjMDBDODUzICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzhiYzM0YSAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dCB7CiAgY29sb3I6ICM4YmMzNGEgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjhlOSAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7CiAgY29sb3I6ICNmMWY4ZTkgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2RjZWRjOCAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNkY2VkYzggIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M1ZTFhNSAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNjNWUxYTUgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2FlZDU4MSAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7CiAgY29sb3I6ICNhZWQ1ODEgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzljY2M2NSAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICM5Y2NjNjUgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmRhcmtlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2NiMzQyICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjN2NiMzQyICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzY4OWYzOCAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi0yIHsKICBjb2xvcjogIzY4OWYzOCAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4uZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICM1NThiMmYgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICM1NThiMmYgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmRhcmtlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzM2OTFlICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMzM2OTFlICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2NjZmY5MCAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC0xIHsKICBjb2xvcjogI2NjZmY5MCAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4uYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNiMmZmNTkgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICNiMmZmNTkgIWltcG9ydGFudDsKfQoKLmxpZ2h0LWdyZWVuLmFjY2VudC0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzZmZjAzICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjNzZmZjAzICFpbXBvcnRhbnQ7Cn0KCi5saWdodC1ncmVlbi5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzY0ZGQxNyAhaW1wb3J0YW50Owp9CgoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC00IHsKICBjb2xvcjogIzY0ZGQxNyAhaW1wb3J0YW50Owp9CgoubGltZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2NkZGMzOSAhaW1wb3J0YW50Owp9CgoubGltZS10ZXh0IHsKICBjb2xvcjogI2NkZGMzOSAhaW1wb3J0YW50Owp9CgoubGltZS5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNmOWZiZTcgIWltcG9ydGFudDsKfQoKLmxpbWUtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7CiAgY29sb3I6ICNmOWZiZTcgIWltcG9ydGFudDsKfQoKLmxpbWUubGlnaHRlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmNGMzICFpbXBvcnRhbnQ7Cn0KCi5saW1lLXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjZjBmNGMzICFpbXBvcnRhbnQ7Cn0KCi5saW1lLmxpZ2h0ZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U2ZWU5YyAhaW1wb3J0YW50Owp9CgoubGltZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsKICBjb2xvcjogI2U2ZWU5YyAhaW1wb3J0YW50Owp9CgoubGltZS5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNkY2U3NzUgIWltcG9ydGFudDsKfQoKLmxpbWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7CiAgY29sb3I6ICNkY2U3NzUgIWltcG9ydGFudDsKfQoKLmxpbWUubGlnaHRlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlMTU3ICFpbXBvcnRhbnQ7Cn0KCi5saW1lLXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjZDRlMTU3ICFpbXBvcnRhbnQ7Cn0KCi5saW1lLmRhcmtlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzBjYTMzICFpbXBvcnRhbnQ7Cn0KCi5saW1lLXRleHQudGV4dC1kYXJrZW4tMSB7CiAgY29sb3I6ICNjMGNhMzMgIWltcG9ydGFudDsKfQoKLmxpbWUuZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNhZmI0MmIgIWltcG9ydGFudDsKfQoKLmxpbWUtdGV4dC50ZXh0LWRhcmtlbi0yIHsKICBjb2xvcjogI2FmYjQyYiAhaW1wb3J0YW50Owp9CgoubGltZS5kYXJrZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzllOWQyNCAhaW1wb3J0YW50Owp9CgoubGltZS10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjOWU5ZDI0ICFpbXBvcnRhbnQ7Cn0KCi5saW1lLmRhcmtlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODI3NzE3ICFpbXBvcnRhbnQ7Cn0KCi5saW1lLXRleHQudGV4dC1kYXJrZW4tNCB7CiAgY29sb3I6ICM4Mjc3MTcgIWltcG9ydGFudDsKfQoKLmxpbWUuYWNjZW50LTEgewogIGJhY2tncm91bmQtY29sb3I6ICNmNGZmODEgIWltcG9ydGFudDsKfQoKLmxpbWUtdGV4dC50ZXh0LWFjY2VudC0xIHsKICBjb2xvcjogI2Y0ZmY4MSAhaW1wb3J0YW50Owp9CgoubGltZS5hY2NlbnQtMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZmY0MSAhaW1wb3J0YW50Owp9CgoubGltZS10ZXh0LnRleHQtYWNjZW50LTIgewogIGNvbG9yOiAjZWVmZjQxICFpbXBvcnRhbnQ7Cn0KCi5saW1lLmFjY2VudC0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzZmZjAwICFpbXBvcnRhbnQ7Cn0KCi5saW1lLXRleHQudGV4dC1hY2NlbnQtMyB7CiAgY29sb3I6ICNjNmZmMDAgIWltcG9ydGFudDsKfQoKLmxpbWUuYWNjZW50LTQgewogIGJhY2tncm91bmQtY29sb3I6ICNhZWVhMDAgIWltcG9ydGFudDsKfQoKLmxpbWUtdGV4dC50ZXh0LWFjY2VudC00IHsKICBjb2xvcjogI2FlZWEwMCAhaW1wb3J0YW50Owp9CgoueWVsbG93IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlYjNiICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3ctdGV4dCB7CiAgY29sb3I6ICNmZmViM2IgIWltcG9ydGFudDsKfQoKLnllbGxvdy5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTcgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2ZmZmRlNyAhaW1wb3J0YW50Owp9CgoueWVsbG93LmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjljNCAhaW1wb3J0YW50Owp9CgoueWVsbG93LXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjZmZmOWM0ICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmNTlkICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3ctdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNmZmY1OWQgIWltcG9ydGFudDsKfQoKLnllbGxvdy5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmYxNzYgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogI2ZmZjE3NiAhaW1wb3J0YW50Owp9CgoueWVsbG93LmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZWU1OCAhaW1wb3J0YW50Owp9CgoueWVsbG93LXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjZmZlZTU4ICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNmZGQ4MzUgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjZmRkODM1ICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmYmMwMmQgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjZmJjMDJkICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNmOWE4MjUgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjZjlhODI1ICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmNTdmMTcgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjZjU3ZjE3ICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuYWNjZW50LTEgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmOGQgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjZmZmZjhkICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmMDAgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtYWNjZW50LTIgewogIGNvbG9yOiAjZmZmZjAwICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmVhMDAgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjZmZlYTAwICFpbXBvcnRhbnQ7Cn0KCi55ZWxsb3cuYWNjZW50LTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmQ2MDAgIWltcG9ydGFudDsKfQoKLnllbGxvdy10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjZmZkNjAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYzEwNyAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dCB7CiAgY29sb3I6ICNmZmMxMDcgIWltcG9ydGFudDsKfQoKLmFtYmVyLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhlMSAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7CiAgY29sb3I6ICNmZmY4ZTEgIWltcG9ydGFudDsKfQoKLmFtYmVyLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZWNiMyAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNmZmVjYjMgIWltcG9ydGFudDsKfQoKLmFtYmVyLmxpZ2h0ZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTA4MiAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNmZmUwODIgIWltcG9ydGFudDsKfQoKLmFtYmVyLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZDU0ZiAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7CiAgY29sb3I6ICNmZmQ1NGYgIWltcG9ydGFudDsKfQoKLmFtYmVyLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmY2EyOCAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICNmZmNhMjggIWltcG9ydGFudDsKfQoKLmFtYmVyLmRhcmtlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMzAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjZmZiMzAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYTAwMCAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWRhcmtlbi0yIHsKICBjb2xvcjogI2ZmYTAwMCAhaW1wb3J0YW50Owp9CgouYW1iZXIuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNmZjhmMDAgIWltcG9ydGFudDsKfQoKLmFtYmVyLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICNmZjhmMDAgIWltcG9ydGFudDsKfQoKLmFtYmVyLmRhcmtlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY2ZjAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjZmY2ZjAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTU3ZiAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWFjY2VudC0xIHsKICBjb2xvcjogI2ZmZTU3ZiAhaW1wb3J0YW50Owp9CgouYW1iZXIuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmQ3NDAgIWltcG9ydGFudDsKfQoKLmFtYmVyLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICNmZmQ3NDAgIWltcG9ydGFudDsKfQoKLmFtYmVyLmFjY2VudC0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjNDAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjZmZjNDAwICFpbXBvcnRhbnQ7Cn0KCi5hbWJlci5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYWIwMCAhaW1wb3J0YW50Owp9CgouYW1iZXItdGV4dC50ZXh0LWFjY2VudC00IHsKICBjb2xvcjogI2ZmYWIwMCAhaW1wb3J0YW50Owp9Cgoub3JhbmdlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5ODAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UtdGV4dCB7CiAgY29sb3I6ICNmZjk4MDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmYzZTAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2ZmZjNlMCAhaW1wb3J0YW50Owp9Cgoub3JhbmdlLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTBiMiAhaW1wb3J0YW50Owp9Cgoub3JhbmdlLXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjZmZlMGIyICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjYzgwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNmZmNjODAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmI3NGQgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogI2ZmYjc0ZCAhaW1wb3J0YW50Owp9Cgoub3JhbmdlLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYTcyNiAhaW1wb3J0YW50Owp9Cgoub3JhbmdlLXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjZmZhNzI2ICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNmYjhjMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjZmI4YzAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmNTdjMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjZjU3YzAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNlZjZjMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjZWY2YzAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNlNjUxMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjZTY1MTAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuYWNjZW50LTEgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmQxODAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTEgewogIGNvbG9yOiAjZmZkMTgwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmFiNDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTIgewogIGNvbG9yOiAjZmZhYjQwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuYWNjZW50LTMgewogIGJhY2tncm91bmQtY29sb3I6ICNmZjkxMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjZmY5MTAwICFpbXBvcnRhbnQ7Cn0KCi5vcmFuZ2UuYWNjZW50LTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmZjZkMDAgIWltcG9ydGFudDsKfQoKLm9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTQgewogIGNvbG9yOiAjZmY2ZDAwICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNTcyMiAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dCB7CiAgY29sb3I6ICNmZjU3MjIgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZiZTllNyAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7CiAgY29sb3I6ICNmYmU5ZTcgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmY2NiYyAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNmZmNjYmMgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tMyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYWI5MSAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNmZmFiOTEgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmOGE2NSAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7CiAgY29sb3I6ICNmZjhhNjUgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNzA0MyAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICNmZjcwNDMgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmRhcmtlbi0xIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ1MTFlICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjZjQ1MTFlICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U2NGExOSAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWRhcmtlbi0yIHsKICBjb2xvcjogI2U2NGExOSAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNkODQzMTUgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICNkODQzMTUgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmRhcmtlbi00IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmYzNjBjICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjYmYzNjBjICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS5hY2NlbnQtMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmOWU4MCAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWFjY2VudC0xIHsKICBjb2xvcjogI2ZmOWU4MCAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UuYWNjZW50LTIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZjZlNDAgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLXRleHQudGV4dC1hY2NlbnQtMiB7CiAgY29sb3I6ICNmZjZlNDAgIWltcG9ydGFudDsKfQoKLmRlZXAtb3JhbmdlLmFjY2VudC0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYzZDAwICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTMgewogIGNvbG9yOiAjZmYzZDAwICFpbXBvcnRhbnQ7Cn0KCi5kZWVwLW9yYW5nZS5hY2NlbnQtNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2RkMmMwMCAhaW1wb3J0YW50Owp9CgouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWFjY2VudC00IHsKICBjb2xvcjogI2RkMmMwMCAhaW1wb3J0YW50Owp9CgouYnJvd24gewogIGJhY2tncm91bmQtY29sb3I6ICM3OTU1NDggIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQgewogIGNvbG9yOiAjNzk1NTQ4ICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNlZmViZTkgIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1saWdodGVuLTUgewogIGNvbG9yOiAjZWZlYmU5ICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5saWdodGVuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNkN2NjYzggIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjZDdjY2M4ICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5saWdodGVuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICNiY2FhYTQgIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1saWdodGVuLTMgewogIGNvbG9yOiAjYmNhYWE0ICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICNhMTg4N2YgIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1saWdodGVuLTIgewogIGNvbG9yOiAjYTE4ODdmICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5saWdodGVuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICM4ZDZlNjMgIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjOGQ2ZTYzICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5kYXJrZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzZkNGM0MSAhaW1wb3J0YW50Owp9CgouYnJvd24tdGV4dC50ZXh0LWRhcmtlbi0xIHsKICBjb2xvcjogIzZkNGM0MSAhaW1wb3J0YW50Owp9CgouYnJvd24uZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICM1ZDQwMzcgIWltcG9ydGFudDsKfQoKLmJyb3duLXRleHQudGV4dC1kYXJrZW4tMiB7CiAgY29sb3I6ICM1ZDQwMzcgIWltcG9ydGFudDsKfQoKLmJyb3duLmRhcmtlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGUzNDJlICFpbXBvcnRhbnQ7Cn0KCi5icm93bi10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjNGUzNDJlICFpbXBvcnRhbnQ7Cn0KCi5icm93bi5kYXJrZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzNlMjcyMyAhaW1wb3J0YW50Owp9CgouYnJvd24tdGV4dC50ZXh0LWRhcmtlbi00IHsKICBjb2xvcjogIzNlMjcyMyAhaW1wb3J0YW50Owp9CgouYmx1ZS1ncmV5IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjA3ZDhiICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXktdGV4dCB7CiAgY29sb3I6ICM2MDdkOGIgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS5saWdodGVuLTUgewogIGJhY2tncm91bmQtY29sb3I6ICNlY2VmZjEgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2VjZWZmMSAhaW1wb3J0YW50Owp9CgouYmx1ZS1ncmV5LmxpZ2h0ZW4tNCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2NmZDhkYyAhaW1wb3J0YW50Owp9CgouYmx1ZS1ncmV5LXRleHQudGV4dC1saWdodGVuLTQgewogIGNvbG9yOiAjY2ZkOGRjICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXkubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjBiZWM1ICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7CiAgY29sb3I6ICNiMGJlYzUgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS5saWdodGVuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICM5MGE0YWUgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogIzkwYTRhZSAhaW1wb3J0YW50Owp9CgouYmx1ZS1ncmV5LmxpZ2h0ZW4tMSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzc4OTA5YyAhaW1wb3J0YW50Owp9CgouYmx1ZS1ncmV5LXRleHQudGV4dC1saWdodGVuLTEgewogIGNvbG9yOiAjNzg5MDljICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXkuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICM1NDZlN2EgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTEgewogIGNvbG9yOiAjNTQ2ZTdhICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXkuZGFya2VuLTIgewogIGJhY2tncm91bmQtY29sb3I6ICM0NTVhNjQgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjNDU1YTY0ICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXkuZGFya2VuLTMgewogIGJhY2tncm91bmQtY29sb3I6ICMzNzQ3NGYgIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTMgewogIGNvbG9yOiAjMzc0NzRmICFpbXBvcnRhbnQ7Cn0KCi5ibHVlLWdyZXkuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICMyNjMyMzggIWltcG9ydGFudDsKfQoKLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTQgewogIGNvbG9yOiAjMjYzMjM4ICFpbXBvcnRhbnQ7Cn0KCi5ncmV5IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWU5ZTllICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LXRleHQgewogIGNvbG9yOiAjOWU5ZTllICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LmxpZ2h0ZW4tNSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYSAhaW1wb3J0YW50Owp9CgouZ3JleS10ZXh0LnRleHQtbGlnaHRlbi01IHsKICBjb2xvcjogI2ZhZmFmYSAhaW1wb3J0YW50Owp9CgouZ3JleS5saWdodGVuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsKfQoKLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7CiAgY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsKfQoKLmdyZXkubGlnaHRlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlZWVlICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LXRleHQudGV4dC1saWdodGVuLTMgewogIGNvbG9yOiAjZWVlZWVlICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LmxpZ2h0ZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMCAhaW1wb3J0YW50Owp9CgouZ3JleS10ZXh0LnRleHQtbGlnaHRlbi0yIHsKICBjb2xvcjogI2UwZTBlMCAhaW1wb3J0YW50Owp9CgouZ3JleS5saWdodGVuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICNiZGJkYmQgIWltcG9ydGFudDsKfQoKLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7CiAgY29sb3I6ICNiZGJkYmQgIWltcG9ydGFudDsKfQoKLmdyZXkuZGFya2VuLTEgewogIGJhY2tncm91bmQtY29sb3I6ICM3NTc1NzUgIWltcG9ydGFudDsKfQoKLmdyZXktdGV4dC50ZXh0LWRhcmtlbi0xIHsKICBjb2xvcjogIzc1NzU3NSAhaW1wb3J0YW50Owp9CgouZ3JleS5kYXJrZW4tMiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzYxNjE2MSAhaW1wb3J0YW50Owp9CgouZ3JleS10ZXh0LnRleHQtZGFya2VuLTIgewogIGNvbG9yOiAjNjE2MTYxICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LmRhcmtlbi0zIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI0MjQyICFpbXBvcnRhbnQ7Cn0KCi5ncmV5LXRleHQudGV4dC1kYXJrZW4tMyB7CiAgY29sb3I6ICM0MjQyNDIgIWltcG9ydGFudDsKfQoKLmdyZXkuZGFya2VuLTQgewogIGJhY2tncm91bmQtY29sb3I6ICMyMTIxMjEgIWltcG9ydGFudDsKfQoKLmdyZXktdGV4dC50ZXh0LWRhcmtlbi00IHsKICBjb2xvcjogIzIxMjEyMSAhaW1wb3J0YW50Owp9CgouYmxhY2sgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDAgIWltcG9ydGFudDsKfQoKLmJsYWNrLXRleHQgewogIGNvbG9yOiAjMDAwMDAwICFpbXBvcnRhbnQ7Cn0KCi53aGl0ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50Owp9Cgoud2hpdGUtdGV4dCB7CiAgY29sb3I6ICNGRkZGRkYgIWltcG9ydGFudDsKfQoKLnRyYW5zcGFyZW50IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9CgoudHJhbnNwYXJlbnQtdGV4dCB7CiAgY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Cn0KCi8qISBub3JtYWxpemUuY3NzIHYzLjAuMyB8IE1JVCBMaWNlbnNlIHwgZ2l0aHViLmNvbS9uZWNvbGFzL25vcm1hbGl6ZS5jc3MgKi8KLyoqCiAqIDEuIFNldCBkZWZhdWx0IGZvbnQgZmFtaWx5IHRvIHNhbnMtc2VyaWYuCiAqIDIuIFByZXZlbnQgaU9TIGFuZCBJRSB0ZXh0IHNpemUgYWRqdXN0IGFmdGVyIGRldmljZSBvcmllbnRhdGlvbiBjaGFuZ2UsCiAqICAgIHdpdGhvdXQgZGlzYWJsaW5nIHVzZXIgem9vbS4KICovCmh0bWwgewogIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOwogIC8qIDEgKi8KICAtbXMtdGV4dC1zaXplLWFkanVzdDogMTAwJTsKICAvKiAyICovCiAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogIC8qIDIgKi8KfQoKLyoqCiAqIFJlbW92ZSBkZWZhdWx0IG1hcmdpbi4KICovCmJvZHkgewogIG1hcmdpbjogMDsKfQoKLyogSFRNTDUgZGlzcGxheSBkZWZpbml0aW9ucwogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwovKioKICogQ29ycmVjdCBgYmxvY2tgIGRpc3BsYXkgbm90IGRlZmluZWQgZm9yIGFueSBIVE1MNSBlbGVtZW50IGluIElFIDgvOS4KICogQ29ycmVjdCBgYmxvY2tgIGRpc3BsYXkgbm90IGRlZmluZWQgZm9yIGBkZXRhaWxzYCBvciBgc3VtbWFyeWAgaW4gSUUgMTAvMTEKICogYW5kIEZpcmVmb3guCiAqIENvcnJlY3QgYGJsb2NrYCBkaXNwbGF5IG5vdCBkZWZpbmVkIGZvciBgbWFpbmAgaW4gSUUgMTEuCiAqLwphcnRpY2xlLAphc2lkZSwKZGV0YWlscywKZmlnY2FwdGlvbiwKZmlndXJlLApmb290ZXIsCmhlYWRlciwKaGdyb3VwLAptYWluLAptZW51LApuYXYsCnNlY3Rpb24sCnN1bW1hcnkgewogIGRpc3BsYXk6IGJsb2NrOwp9CgovKioKICogMS4gQ29ycmVjdCBgaW5saW5lLWJsb2NrYCBkaXNwbGF5IG5vdCBkZWZpbmVkIGluIElFIDgvOS4KICogMi4gTm9ybWFsaXplIHZlcnRpY2FsIGFsaWdubWVudCBvZiBgcHJvZ3Jlc3NgIGluIENocm9tZSwgRmlyZWZveCwgYW5kIE9wZXJhLgogKi8KYXVkaW8sCmNhbnZhcywKcHJvZ3Jlc3MsCnZpZGVvIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgLyogMSAqLwogIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTsKICAvKiAyICovCn0KCi8qKgogKiBQcmV2ZW50IG1vZGVybiBicm93c2VycyBmcm9tIGRpc3BsYXlpbmcgYGF1ZGlvYCB3aXRob3V0IGNvbnRyb2xzLgogKiBSZW1vdmUgZXhjZXNzIGhlaWdodCBpbiBpT1MgNSBkZXZpY2VzLgogKi8KYXVkaW86bm90KFtjb250cm9sc10pIHsKICBkaXNwbGF5OiBub25lOwogIGhlaWdodDogMDsKfQoKLyoqCiAqIEFkZHJlc3MgYFtoaWRkZW5dYCBzdHlsaW5nIG5vdCBwcmVzZW50IGluIElFIDgvOS8xMC4KICogSGlkZSB0aGUgYHRlbXBsYXRlYCBlbGVtZW50IGluIElFIDgvOS8xMC8xMSwgU2FmYXJpLCBhbmQgRmlyZWZveCA8IDIyLgogKi8KW2hpZGRlbl0sCnRlbXBsYXRlIHsKICBkaXNwbGF5OiBub25lOwp9CgovKiBMaW5rcwogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwovKioKICogUmVtb3ZlIHRoZSBncmF5IGJhY2tncm91bmQgY29sb3IgZnJvbSBhY3RpdmUgbGlua3MgaW4gSUUgMTAuCiAqLwphIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLyoqCiAqIEltcHJvdmUgcmVhZGFiaWxpdHkgb2YgZm9jdXNlZCBlbGVtZW50cyB3aGVuIHRoZXkgYXJlIGFsc28gaW4gYW4KICogYWN0aXZlL2hvdmVyIHN0YXRlLgogKi8KYTphY3RpdmUsCmE6aG92ZXIgewogIG91dGxpbmU6IDA7Cn0KCi8qIFRleHQtbGV2ZWwgc2VtYW50aWNzCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi8qKgogKiBBZGRyZXNzIHN0eWxpbmcgbm90IHByZXNlbnQgaW4gSUUgOC85LzEwLzExLCBTYWZhcmksIGFuZCBDaHJvbWUuCiAqLwphYmJyW3RpdGxlXSB7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZDsKfQoKLyoqCiAqIEFkZHJlc3Mgc3R5bGUgc2V0IHRvIGBib2xkZXJgIGluIEZpcmVmb3ggNCssIFNhZmFyaSwgYW5kIENocm9tZS4KICovCmIsCnN0cm9uZyB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi8qKgogKiBBZGRyZXNzIHN0eWxpbmcgbm90IHByZXNlbnQgaW4gU2FmYXJpIGFuZCBDaHJvbWUuCiAqLwpkZm4gewogIGZvbnQtc3R5bGU6IGl0YWxpYzsKfQoKLyoqCiAqIEFkZHJlc3MgdmFyaWFibGUgYGgxYCBmb250LXNpemUgYW5kIG1hcmdpbiB3aXRoaW4gYHNlY3Rpb25gIGFuZCBgYXJ0aWNsZWAKICogY29udGV4dHMgaW4gRmlyZWZveCA0KywgU2FmYXJpLCBhbmQgQ2hyb21lLgogKi8KaDEgewogIGZvbnQtc2l6ZTogMmVtOwogIG1hcmdpbjogMC42N2VtIDA7Cn0KCi8qKgogKiBBZGRyZXNzIHN0eWxpbmcgbm90IHByZXNlbnQgaW4gSUUgOC85LgogKi8KbWFyayB7CiAgYmFja2dyb3VuZDogI2ZmMDsKICBjb2xvcjogIzAwMDsKfQoKLyoqCiAqIEFkZHJlc3MgaW5jb25zaXN0ZW50IGFuZCB2YXJpYWJsZSBmb250IHNpemUgaW4gYWxsIGJyb3dzZXJzLgogKi8Kc21hbGwgewogIGZvbnQtc2l6ZTogODAlOwp9CgovKioKICogUHJldmVudCBgc3ViYCBhbmQgYHN1cGAgYWZmZWN0aW5nIGBsaW5lLWhlaWdodGAgaW4gYWxsIGJyb3dzZXJzLgogKi8Kc3ViLApzdXAgewogIGZvbnQtc2l6ZTogNzUlOwogIGxpbmUtaGVpZ2h0OiAwOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7Cn0KCnN1cCB7CiAgdG9wOiAtMC41ZW07Cn0KCnN1YiB7CiAgYm90dG9tOiAtMC4yNWVtOwp9CgovKiBFbWJlZGRlZCBjb250ZW50CiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi8qKgogKiBSZW1vdmUgYm9yZGVyIHdoZW4gaW5zaWRlIGBhYCBlbGVtZW50IGluIElFIDgvOS8xMC4KICovCmltZyB7CiAgYm9yZGVyOiAwOwp9CgovKioKICogQ29ycmVjdCBvdmVyZmxvdyBub3QgaGlkZGVuIGluIElFIDkvMTAvMTEuCiAqLwpzdmc6bm90KDpyb290KSB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLyogR3JvdXBpbmcgY29udGVudAogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwovKioKICogQWRkcmVzcyBtYXJnaW4gbm90IHByZXNlbnQgaW4gSUUgOC85IGFuZCBTYWZhcmkuCiAqLwpmaWd1cmUgewogIG1hcmdpbjogMWVtIDQwcHg7Cn0KCi8qKgogKiBBZGRyZXNzIGRpZmZlcmVuY2VzIGJldHdlZW4gRmlyZWZveCBhbmQgb3RoZXIgYnJvd3NlcnMuCiAqLwpociB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIGhlaWdodDogMDsKfQoKLyoqCiAqIENvbnRhaW4gb3ZlcmZsb3cgaW4gYWxsIGJyb3dzZXJzLgogKi8KcHJlIHsKICBvdmVyZmxvdzogYXV0bzsKfQoKLyoqCiAqIEFkZHJlc3Mgb2RkIGBlbWAtdW5pdCBmb250IHNpemUgcmVuZGVyaW5nIGluIGFsbCBicm93c2Vycy4KICovCmNvZGUsCmtiZCwKcHJlLApzYW1wIHsKICBmb250LWZhbWlseTogbW9ub3NwYWNlLCBtb25vc3BhY2U7CiAgZm9udC1zaXplOiAxZW07Cn0KCi8qIEZvcm1zCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi8qKgogKiBLbm93biBsaW1pdGF0aW9uOiBieSBkZWZhdWx0LCBDaHJvbWUgYW5kIFNhZmFyaSBvbiBPUyBYIGFsbG93IHZlcnkgbGltaXRlZAogKiBzdHlsaW5nIG9mIGBzZWxlY3RgLCB1bmxlc3MgYSBgYm9yZGVyYCBwcm9wZXJ0eSBpcyBzZXQuCiAqLwovKioKICogMS4gQ29ycmVjdCBjb2xvciBub3QgYmVpbmcgaW5oZXJpdGVkLgogKiAgICBLbm93biBpc3N1ZTogYWZmZWN0cyBjb2xvciBvZiBkaXNhYmxlZCBlbGVtZW50cy4KICogMi4gQ29ycmVjdCBmb250IHByb3BlcnRpZXMgbm90IGJlaW5nIGluaGVyaXRlZC4KICogMy4gQWRkcmVzcyBtYXJnaW5zIHNldCBkaWZmZXJlbnRseSBpbiBGaXJlZm94IDQrLCBTYWZhcmksIGFuZCBDaHJvbWUuCiAqLwpidXR0b24sCmlucHV0LApvcHRncm91cCwKc2VsZWN0LAp0ZXh0YXJlYSB7CiAgY29sb3I6IGluaGVyaXQ7CiAgLyogMSAqLwogIGZvbnQ6IGluaGVyaXQ7CiAgLyogMiAqLwogIG1hcmdpbjogMDsKICAvKiAzICovCn0KCi8qKgogKiBBZGRyZXNzIGBvdmVyZmxvd2Agc2V0IHRvIGBoaWRkZW5gIGluIElFIDgvOS8xMC8xMS4KICovCmJ1dHRvbiB7CiAgb3ZlcmZsb3c6IHZpc2libGU7Cn0KCi8qKgogKiBBZGRyZXNzIGluY29uc2lzdGVudCBgdGV4dC10cmFuc2Zvcm1gIGluaGVyaXRhbmNlIGZvciBgYnV0dG9uYCBhbmQgYHNlbGVjdGAuCiAqIEFsbCBvdGhlciBmb3JtIGNvbnRyb2wgZWxlbWVudHMgZG8gbm90IGluaGVyaXQgYHRleHQtdHJhbnNmb3JtYCB2YWx1ZXMuCiAqIENvcnJlY3QgYGJ1dHRvbmAgc3R5bGUgaW5oZXJpdGFuY2UgaW4gRmlyZWZveCwgSUUgOC85LzEwLzExLCBhbmQgT3BlcmEuCiAqIENvcnJlY3QgYHNlbGVjdGAgc3R5bGUgaW5oZXJpdGFuY2UgaW4gRmlyZWZveC4KICovCmJ1dHRvbiwKc2VsZWN0IHsKICB0ZXh0LXRyYW5zZm9ybTogbm9uZTsKfQoKLyoqCiAqIDEuIEF2b2lkIHRoZSBXZWJLaXQgYnVnIGluIEFuZHJvaWQgNC4wLiogd2hlcmUgKDIpIGRlc3Ryb3lzIG5hdGl2ZSBgYXVkaW9gCiAqICAgIGFuZCBgdmlkZW9gIGNvbnRyb2xzLgogKiAyLiBDb3JyZWN0IGluYWJpbGl0eSB0byBzdHlsZSBjbGlja2FibGUgYGlucHV0YCB0eXBlcyBpbiBpT1MuCiAqIDMuIEltcHJvdmUgdXNhYmlsaXR5IGFuZCBjb25zaXN0ZW5jeSBvZiBjdXJzb3Igc3R5bGUgYmV0d2VlbiBpbWFnZS10eXBlCiAqICAgIGBpbnB1dGAgYW5kIG90aGVycy4KICovCmJ1dHRvbiwKaHRtbCBpbnB1dFt0eXBlPSJidXR0b24iXSwKaW5wdXRbdHlwZT0icmVzZXQiXSwKaW5wdXRbdHlwZT0ic3VibWl0Il0gewogIC13ZWJraXQtYXBwZWFyYW5jZTogYnV0dG9uOwogIC8qIDIgKi8KICBjdXJzb3I6IHBvaW50ZXI7CiAgLyogMyAqLwp9CgovKioKICogUmUtc2V0IGRlZmF1bHQgY3Vyc29yIGZvciBkaXNhYmxlZCBlbGVtZW50cy4KICovCmJ1dHRvbltkaXNhYmxlZF0sCmh0bWwgaW5wdXRbZGlzYWJsZWRdIHsKICBjdXJzb3I6IGRlZmF1bHQ7Cn0KCi8qKgogKiBSZW1vdmUgaW5uZXIgcGFkZGluZyBhbmQgYm9yZGVyIGluIEZpcmVmb3ggNCsuCiAqLwpidXR0b246Oi1tb3otZm9jdXMtaW5uZXIsCmlucHV0OjotbW96LWZvY3VzLWlubmVyIHsKICBib3JkZXI6IDA7CiAgcGFkZGluZzogMDsKfQoKLyoqCiAqIEFkZHJlc3MgRmlyZWZveCA0KyBzZXR0aW5nIGBsaW5lLWhlaWdodGAgb24gYGlucHV0YCB1c2luZyBgIWltcG9ydGFudGAgaW4KICogdGhlIFVBIHN0eWxlc2hlZXQuCiAqLwppbnB1dCB7CiAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKfQoKLyoqCiAqIEl0J3MgcmVjb21tZW5kZWQgdGhhdCB5b3UgZG9uJ3QgYXR0ZW1wdCB0byBzdHlsZSB0aGVzZSBlbGVtZW50cy4KICogRmlyZWZveCdzIGltcGxlbWVudGF0aW9uIGRvZXNuJ3QgcmVzcGVjdCBib3gtc2l6aW5nLCBwYWRkaW5nLCBvciB3aWR0aC4KICoKICogMS4gQWRkcmVzcyBib3ggc2l6aW5nIHNldCB0byBgY29udGVudC1ib3hgIGluIElFIDgvOS8xMC4KICogMi4gUmVtb3ZlIGV4Y2VzcyBwYWRkaW5nIGluIElFIDgvOS8xMC4KICovCmlucHV0W3R5cGU9ImNoZWNrYm94Il0sCmlucHV0W3R5cGU9InJhZGlvIl0gewogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgLyogMSAqLwogIHBhZGRpbmc6IDA7CiAgLyogMiAqLwp9CgovKioKICogRml4IHRoZSBjdXJzb3Igc3R5bGUgZm9yIENocm9tZSdzIGluY3JlbWVudC9kZWNyZW1lbnQgYnV0dG9ucy4gRm9yIGNlcnRhaW4KICogYGZvbnQtc2l6ZWAgdmFsdWVzIG9mIHRoZSBgaW5wdXRgLCBpdCBjYXVzZXMgdGhlIGN1cnNvciBzdHlsZSBvZiB0aGUKICogZGVjcmVtZW50IGJ1dHRvbiB0byBjaGFuZ2UgZnJvbSBgZGVmYXVsdGAgdG8gYHRleHRgLgogKi8KaW5wdXRbdHlwZT0ibnVtYmVyIl06Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24sCmlucHV0W3R5cGU9Im51bWJlciJdOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uIHsKICBoZWlnaHQ6IGF1dG87Cn0KCi8qKgogKiAxLiBBZGRyZXNzIGBhcHBlYXJhbmNlYCBzZXQgdG8gYHNlYXJjaGZpZWxkYCBpbiBTYWZhcmkgYW5kIENocm9tZS4KICogMi4gQWRkcmVzcyBgYm94LXNpemluZ2Agc2V0IHRvIGBib3JkZXItYm94YCBpbiBTYWZhcmkgYW5kIENocm9tZS4KICovCmlucHV0W3R5cGU9InNlYXJjaCJdIHsKICAtd2Via2l0LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsKICAvKiAxICovCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIC8qIDIgKi8KfQoKLyoqCiAqIFJlbW92ZSBpbm5lciBwYWRkaW5nIGFuZCBzZWFyY2ggY2FuY2VsIGJ1dHRvbiBpbiBTYWZhcmkgYW5kIENocm9tZSBvbiBPUyBYLgogKiBTYWZhcmkgKGJ1dCBub3QgQ2hyb21lKSBjbGlwcyB0aGUgY2FuY2VsIGJ1dHRvbiB3aGVuIHRoZSBzZWFyY2ggaW5wdXQgaGFzCiAqIHBhZGRpbmcgKGFuZCBgdGV4dGZpZWxkYCBhcHBlYXJhbmNlKS4KICovCmlucHV0W3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uLAppbnB1dFt0eXBlPSJzZWFyY2giXTo6LXdlYmtpdC1zZWFyY2gtZGVjb3JhdGlvbiB7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwp9CgovKioKICogRGVmaW5lIGNvbnNpc3RlbnQgYm9yZGVyLCBtYXJnaW4sIGFuZCBwYWRkaW5nLgogKi8KZmllbGRzZXQgewogIGJvcmRlcjogMXB4IHNvbGlkICNjMGMwYzA7CiAgbWFyZ2luOiAwIDJweDsKICBwYWRkaW5nOiAwLjM1ZW0gMC42MjVlbSAwLjc1ZW07Cn0KCi8qKgogKiAxLiBDb3JyZWN0IGBjb2xvcmAgbm90IGJlaW5nIGluaGVyaXRlZCBpbiBJRSA4LzkvMTAvMTEuCiAqIDIuIFJlbW92ZSBwYWRkaW5nIHNvIHBlb3BsZSBhcmVuJ3QgY2F1Z2h0IG91dCBpZiB0aGV5IHplcm8gb3V0IGZpZWxkc2V0cy4KICovCmxlZ2VuZCB7CiAgYm9yZGVyOiAwOwogIC8qIDEgKi8KICBwYWRkaW5nOiAwOwogIC8qIDIgKi8KfQoKLyoqCiAqIFJlbW92ZSBkZWZhdWx0IHZlcnRpY2FsIHNjcm9sbGJhciBpbiBJRSA4LzkvMTAvMTEuCiAqLwp0ZXh0YXJlYSB7CiAgb3ZlcmZsb3c6IGF1dG87Cn0KCi8qKgogKiBEb24ndCBpbmhlcml0IHRoZSBgZm9udC13ZWlnaHRgIChhcHBsaWVkIGJ5IGEgcnVsZSBhYm92ZSkuCiAqIE5PVEU6IHRoZSBkZWZhdWx0IGNhbm5vdCBzYWZlbHkgYmUgY2hhbmdlZCBpbiBDaHJvbWUgYW5kIFNhZmFyaSBvbiBPUyBYLgogKi8Kb3B0Z3JvdXAgewogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgovKiBUYWJsZXMKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLyoqCiAqIFJlbW92ZSBtb3N0IHNwYWNpbmcgYmV0d2VlbiB0YWJsZSBjZWxscy4KICovCnRhYmxlIHsKICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogIGJvcmRlci1zcGFjaW5nOiAwOwp9Cgp0ZCwKdGggewogIHBhZGRpbmc6IDA7Cn0KCmh0bWwgewogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCiosICo6YmVmb3JlLCAqOmFmdGVyIHsKICAtd2Via2l0LWJveC1zaXppbmc6IGluaGVyaXQ7CiAgICAgICAgICBib3gtc2l6aW5nOiBpbmhlcml0Owp9Cgp1bDpub3QoLmJyb3dzZXItZGVmYXVsdCkgewogIHBhZGRpbmctbGVmdDogMDsKICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7Cn0KCnVsOm5vdCguYnJvd3Nlci1kZWZhdWx0KSBsaSB7CiAgbGlzdC1zdHlsZS10eXBlOiBub25lOwp9CgphIHsKICBjb2xvcjogIzAzOWJlNTsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLnZhbGlnbi13cmFwcGVyIHsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC13ZWJraXQtYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCi5jbGVhcmZpeCB7CiAgY2xlYXI6IGJvdGg7Cn0KCi56LWRlcHRoLTAgewogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9Cgouei1kZXB0aC0xLCBuYXYsIC5jYXJkLXBhbmVsLCAuY2FyZCwgLnRvYXN0LCAuYnRuLCAuYnRuLWxhcmdlLCAuYnRuLWZsb2F0aW5nLCAuZHJvcGRvd24tY29udGVudCwgLmNvbGxhcHNpYmxlLCAuc2lkZS1uYXYgewogIC13ZWJraXQtYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjIpOwp9Cgouei1kZXB0aC0xLWhhbGYsIC5idG46aG92ZXIsIC5idG4tbGFyZ2U6aG92ZXIsIC5idG4tZmxvYXRpbmc6aG92ZXIgewogIC13ZWJraXQtYm94LXNoYWRvdzogMCAzcHggM3B4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggN3B4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggMXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAzcHggM3B4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggN3B4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggMXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjIpOwp9Cgouei1kZXB0aC0yIHsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgNHB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDEwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDJweCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDFweCAxMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjMpOwp9Cgouei1kZXB0aC0zIHsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgNnB4IDEwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDFweCAxOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggNXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDE4cHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDNweCA1cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KCi56LWRlcHRoLTQsIC5tb2RhbCB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDhweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDNweCAxNHB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDNweCAxNHB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KCi56LWRlcHRoLTUgewogIC13ZWJraXQtYm94LXNoYWRvdzogMCAxNnB4IDI0cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgNnB4IDMwcHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgOHB4IDEwcHggLTVweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDE2cHggMjRweCAycHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCA2cHggMzBweCA1cHggcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCA4cHggMTBweCAtNXB4IHJnYmEoMCwgMCwgMCwgMC4zKTsKfQoKLmhvdmVyYWJsZSB7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjI1czsKICB0cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjI1czsKICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4yNXM7CiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuMjVzLCAtd2Via2l0LWJveC1zaGFkb3cgLjI1czsKICAtd2Via2l0LWJveC1zaGFkb3c6IDA7CiAgICAgICAgICBib3gtc2hhZG93OiAwOwp9CgouaG92ZXJhYmxlOmhvdmVyIHsKICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuMjVzOwogIHRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuMjVzOwogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1czsKICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4yNXMsIC13ZWJraXQtYm94LXNoYWRvdyAuMjVzOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCA4cHggMTdweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCA2cHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xOSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAxN3B4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTsKfQoKLmRpdmlkZXIgewogIGhlaWdodDogMXB4OwogIG92ZXJmbG93OiBoaWRkZW47CiAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDsKfQoKYmxvY2txdW90ZSB7CiAgbWFyZ2luOiAyMHB4IDA7CiAgcGFkZGluZy1sZWZ0OiAxLjVyZW07CiAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjZWU2ZTczOwp9CgppIHsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKfQoKaS5sZWZ0IHsKICBmbG9hdDogbGVmdDsKICBtYXJnaW4tcmlnaHQ6IDE1cHg7Cn0KCmkucmlnaHQgewogIGZsb2F0OiByaWdodDsKICBtYXJnaW4tbGVmdDogMTVweDsKfQoKaS50aW55IHsKICBmb250LXNpemU6IDFyZW07Cn0KCmkuc21hbGwgewogIGZvbnQtc2l6ZTogMnJlbTsKfQoKaS5tZWRpdW0gewogIGZvbnQtc2l6ZTogNHJlbTsKfQoKaS5sYXJnZSB7CiAgZm9udC1zaXplOiA2cmVtOwp9CgppbWcucmVzcG9uc2l2ZS1pbWcsCnZpZGVvLnJlc3BvbnNpdmUtdmlkZW8gewogIG1heC13aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KCi5wYWdpbmF0aW9uIGxpIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogIGhlaWdodDogMzBweDsKfQoKLnBhZ2luYXRpb24gbGkgYSB7CiAgY29sb3I6ICM0NDQ7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtc2l6ZTogMS4ycmVtOwogIHBhZGRpbmc6IDAgMTBweDsKICBsaW5lLWhlaWdodDogMzBweDsKfQoKLnBhZ2luYXRpb24gbGkuYWN0aXZlIGEgewogIGNvbG9yOiAjZmZmOwp9CgoucGFnaW5hdGlvbiBsaS5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7Cn0KCi5wYWdpbmF0aW9uIGxpLmRpc2FibGVkIGEgewogIGN1cnNvcjogZGVmYXVsdDsKICBjb2xvcjogIzk5OTsKfQoKLnBhZ2luYXRpb24gbGkgaSB7CiAgZm9udC1zaXplOiAycmVtOwp9CgoucGFnaW5hdGlvbiBsaS5wYWdlcyB1bCBsaSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZsb2F0OiBub25lOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7CiAgLnBhZ2luYXRpb24gewogICAgd2lkdGg6IDEwMCU7CiAgfQogIC5wYWdpbmF0aW9uIGxpLnByZXYsCiAgLnBhZ2luYXRpb24gbGkubmV4dCB7CiAgICB3aWR0aDogMTAlOwogIH0KICAucGFnaW5hdGlvbiBsaS5wYWdlcyB7CiAgICB3aWR0aDogODAlOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgfQp9CgouYnJlYWRjcnVtYiB7CiAgZm9udC1zaXplOiAxOHB4OwogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7Cn0KCi5icmVhZGNydW1iIGksCi5icmVhZGNydW1iIFtjbGFzc149Im1kaS0iXSwgLmJyZWFkY3J1bWIgW2NsYXNzKj0ibWRpLSJdLAouYnJlYWRjcnVtYiBpLm1hdGVyaWFsLWljb25zIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgZmxvYXQ6IGxlZnQ7CiAgZm9udC1zaXplOiAyNHB4Owp9CgouYnJlYWRjcnVtYjpiZWZvcmUgewogIGNvbnRlbnQ6ICdcRTVDQyc7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBmb250LWZhbWlseTogJ01hdGVyaWFsIEljb25zJzsKICBmb250LXdlaWdodDogbm9ybWFsOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXNpemU6IDI1cHg7CiAgbWFyZ2luOiAwIDEwcHggMCA4cHg7CiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7Cn0KCi5icmVhZGNydW1iOmZpcnN0LWNoaWxkOmJlZm9yZSB7CiAgZGlzcGxheTogbm9uZTsKfQoKLmJyZWFkY3J1bWI6bGFzdC1jaGlsZCB7CiAgY29sb3I6ICNmZmY7Cn0KCi5wYXJhbGxheC1jb250YWluZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBvdmVyZmxvdzogaGlkZGVuOwogIGhlaWdodDogNTAwcHg7Cn0KCi5wYXJhbGxheC1jb250YWluZXIgLnBhcmFsbGF4IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwogIHotaW5kZXg6IC0xOwp9CgoucGFyYWxsYXgtY29udGFpbmVyIC5wYXJhbGxheCBpbWcgewogIGRpc3BsYXk6IG5vbmU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDUwJTsKICBib3R0b206IDA7CiAgbWluLXdpZHRoOiAxMDAlOwogIG1pbi1oZWlnaHQ6IDEwMCU7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7Cn0KCi5waW4tdG9wLCAucGluLWJvdHRvbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoucGlubmVkIHsKICBwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsKfQoKLyoqKioqKioqKioqKioqKioqKioqKgogIFRyYW5zaXRpb24gQ2xhc3NlcwoqKioqKioqKioqKioqKioqKioqKioqLwp1bC5zdGFnZ2VyZWQtbGlzdCBsaSB7CiAgb3BhY2l0eTogMDsKfQoKLmZhZGUtaW4gewogIG9wYWNpdHk6IDA7CiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDUwJTsKICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgNTAlOwp9CgovKioqKioqKioqKioqKioqKioqKioqCiAgTWVkaWEgUXVlcnkgQ2xhc3NlcwoqKioqKioqKioqKioqKioqKioqKioqLwpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7CiAgLmhpZGUtb24tc21hbGwtb25seSwgLmhpZGUtb24tc21hbGwtYW5kLWRvd24gewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC5oaWRlLW9uLW1lZC1hbmQtZG93biB7CiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7CiAgLmhpZGUtb24tbWVkLWFuZC11cCB7CiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMHB4KSBhbmQgKG1heC13aWR0aDogOTkycHgpIHsKICAuaGlkZS1vbi1tZWQtb25seSB7CiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7CiAgLmhpZGUtb24tbGFyZ2Utb25seSB7CiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7CiAgLnNob3ctb24tbGFyZ2UgewogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC5zaG93LW9uLW1lZGl1bSB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgewogIC5zaG93LW9uLXNtYWxsIHsKICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7CiAgLnNob3ctb24tbWVkaXVtLWFuZC11cCB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC5zaG93LW9uLW1lZGl1bS1hbmQtZG93biB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgewogIC5jZW50ZXItb24tc21hbGwtb25seSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgfQp9CgoucGFnZS1mb290ZXIgewogIHBhZGRpbmctdG9wOiAyMHB4OwogIGNvbG9yOiAjZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7Cn0KCi5wYWdlLWZvb3RlciAuZm9vdGVyLWNvcHlyaWdodCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBtaW4taGVpZ2h0OiA1MHB4OwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLXdlYmtpdC1hbGlnbi1pdGVtczogY2VudGVyOwogICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwYWRkaW5nOiAxMHB4IDBweDsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNTEsIDUxLCA1MSwgMC4wOCk7Cn0KCnRhYmxlLCB0aCwgdGQgewogIGJvcmRlcjogbm9uZTsKfQoKdGFibGUgewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IHRhYmxlOwp9Cgp0YWJsZS5ib3JkZXJlZCA+IHRoZWFkID4gdHIsCnRhYmxlLmJvcmRlcmVkID4gdGJvZHkgPiB0ciB7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkMGQwZDA7Cn0KCnRhYmxlLnN0cmlwZWQgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwp9Cgp0YWJsZS5zdHJpcGVkID4gdGJvZHkgPiB0ciA+IHRkIHsKICBib3JkZXItcmFkaXVzOiAwOwp9Cgp0YWJsZS5oaWdobGlnaHQgPiB0Ym9keSA+IHRyIHsKICAtd2Via2l0LXRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjI1cyBlYXNlOwogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjI1cyBlYXNlOwp9Cgp0YWJsZS5oaWdobGlnaHQgPiB0Ym9keSA+IHRyOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwp9Cgp0YWJsZS5jZW50ZXJlZCB0aGVhZCB0ciB0aCwgdGFibGUuY2VudGVyZWQgdGJvZHkgdHIgdGQgewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKdGhlYWQgewogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDBkMGQwOwp9Cgp0ZCwgdGggewogIHBhZGRpbmc6IDE1cHggNXB4OwogIGRpc3BsYXk6IHRhYmxlLWNlbGw7CiAgdGV4dC1hbGlnbjogbGVmdDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJvcmRlci1yYWRpdXM6IDJweDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgewogICAgd2lkdGg6IDEwMCU7CiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogICAgYm9yZGVyLXNwYWNpbmc6IDA7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIC8qIHNvcnQgb3V0IGJvcmRlcnMgKi8KICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0ZDplbXB0eTpiZWZvcmUgewogICAgY29udGVudDogJ1wwMGEwJzsKICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aCwKICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRkIHsKICAgIG1hcmdpbjogMDsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGggewogICAgdGV4dC1hbGlnbjogbGVmdDsKICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aGVhZCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGZsb2F0OiBsZWZ0OwogIH0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRoZWFkIHRyIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgcGFkZGluZzogMCAxMHB4IDAgMDsKICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aGVhZCB0ciB0aDo6YmVmb3JlIHsKICAgIGNvbnRlbnQ6ICJcMDBhMCI7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGJvZHkgewogICAgZGlzcGxheTogYmxvY2s7CiAgICB3aWR0aDogYXV0bzsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIG92ZXJmbG93LXg6IGF1dG87CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIH0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRib2R5IHRyIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGggewogICAgZGlzcGxheTogYmxvY2s7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0ZCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1pbi1oZWlnaHQ6IDEuMjVlbTsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdHIgewogICAgcGFkZGluZzogMCAxMHB4OwogIH0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRoZWFkIHsKICAgIGJvcmRlcjogMDsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNkMGQwZDA7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUuYm9yZGVyZWQgdGggewogICAgYm9yZGVyLWJvdHRvbTogMDsKICAgIGJvcmRlci1sZWZ0OiAwOwogIH0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlLmJvcmRlcmVkIHRkIHsKICAgIGJvcmRlci1sZWZ0OiAwOwogICAgYm9yZGVyLXJpZ2h0OiAwOwogICAgYm9yZGVyLWJvdHRvbTogMDsKICB9CiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZS5ib3JkZXJlZCB0ciB7CiAgICBib3JkZXI6IDA7CiAgfQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUuYm9yZGVyZWQgdGJvZHkgdHIgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2QwZDBkMDsKICB9Cn0KCi5jb2xsZWN0aW9uIHsKICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsKICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwOwogIGJvcmRlci1yYWRpdXM6IDJweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBsaW5lLWhlaWdodDogMS41cmVtOwogIHBhZGRpbmc6IDEwcHggMjBweDsKICBtYXJnaW46IDA7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUwZTA7Cn0KCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIHsKICBtaW4taGVpZ2h0OiA4NHB4OwogIHBhZGRpbmctbGVmdDogNzJweDsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIC5jaXJjbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB3aWR0aDogNDJweDsKICBoZWlnaHQ6IDQycHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBsZWZ0OiAxNXB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgouY29sbGVjdGlvbiAuY29sbGVjdGlvbi1pdGVtLmF2YXRhciBpLmNpcmNsZSB7CiAgZm9udC1zaXplOiAxOHB4OwogIGxpbmUtaGVpZ2h0OiA0MnB4OwogIGNvbG9yOiAjZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICM5OTk7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouY29sbGVjdGlvbiAuY29sbGVjdGlvbi1pdGVtLmF2YXRhciAudGl0bGUgewogIGZvbnQtc2l6ZTogMTZweDsKfQoKLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbS5hdmF0YXIgcCB7CiAgbWFyZ2luOiAwOwp9CgouY29sbGVjdGlvbiAuY29sbGVjdGlvbi1pdGVtLmF2YXRhciAuc2Vjb25kYXJ5LWNvbnRlbnQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDE2cHg7CiAgcmlnaHQ6IDE2cHg7Cn0KCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW06bGFzdC1jaGlsZCB7CiAgYm9yZGVyLWJvdHRvbTogbm9uZTsKfQoKLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbS5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7CiAgY29sb3I6ICNlYWZhZjk7Cn0KCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYWN0aXZlIC5zZWNvbmRhcnktY29udGVudCB7CiAgY29sb3I6ICNmZmY7Cn0KCi5jb2xsZWN0aW9uIGEuY29sbGVjdGlvbi1pdGVtIHsKICBkaXNwbGF5OiBibG9jazsKICAtd2Via2l0LXRyYW5zaXRpb246IC4yNXM7CiAgdHJhbnNpdGlvbjogLjI1czsKICBjb2xvcjogIzI2YTY5YTsKfQoKLmNvbGxlY3Rpb24gYS5jb2xsZWN0aW9uLWl0ZW06bm90KC5hY3RpdmUpOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOwp9CgouY29sbGVjdGlvbi53aXRoLWhlYWRlciAuY29sbGVjdGlvbi1oZWFkZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUwZTA7CiAgcGFkZGluZzogMTBweCAyMHB4Owp9CgouY29sbGVjdGlvbi53aXRoLWhlYWRlciAuY29sbGVjdGlvbi1pdGVtIHsKICBwYWRkaW5nLWxlZnQ6IDMwcHg7Cn0KCi5jb2xsZWN0aW9uLndpdGgtaGVhZGVyIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIHsKICBwYWRkaW5nLWxlZnQ6IDcycHg7Cn0KCi5zZWNvbmRhcnktY29udGVudCB7CiAgZmxvYXQ6IHJpZ2h0OwogIGNvbG9yOiAjMjZhNjlhOwp9CgouY29sbGFwc2libGUgLmNvbGxlY3Rpb24gewogIG1hcmdpbjogMDsKICBib3JkZXI6IG5vbmU7Cn0KCi52aWRlby1jb250YWluZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBwYWRkaW5nLWJvdHRvbTogNTYuMjUlOwogIGhlaWdodDogMDsKICBvdmVyZmxvdzogaGlkZGVuOwp9CgoudmlkZW8tY29udGFpbmVyIGlmcmFtZSwgLnZpZGVvLWNvbnRhaW5lciBvYmplY3QsIC52aWRlby1jb250YWluZXIgZW1iZWQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KCi5wcm9ncmVzcyB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGhlaWdodDogNHB4OwogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICNhY2VjZTY7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIG1hcmdpbjogMC41cmVtIDAgMXJlbSAwOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5wcm9ncmVzcyAuZGV0ZXJtaW5hdGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBib3R0b206IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIC4zcyBsaW5lYXI7CiAgdHJhbnNpdGlvbjogd2lkdGggLjNzIGxpbmVhcjsKfQoKLnByb2dyZXNzIC5pbmRldGVybWluYXRlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwp9CgoucHJvZ3Jlc3MgLmluZGV0ZXJtaW5hdGU6YmVmb3JlIHsKICBjb250ZW50OiAnJzsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBib3R0b206IDA7CiAgd2lsbC1jaGFuZ2U6IGxlZnQsIHJpZ2h0OwogIC13ZWJraXQtYW5pbWF0aW9uOiBpbmRldGVybWluYXRlIDIuMXMgY3ViaWMtYmV6aWVyKDAuNjUsIDAuODE1LCAwLjczNSwgMC4zOTUpIGluZmluaXRlOwogICAgICAgICAgYW5pbWF0aW9uOiBpbmRldGVybWluYXRlIDIuMXMgY3ViaWMtYmV6aWVyKDAuNjUsIDAuODE1LCAwLjczNSwgMC4zOTUpIGluZmluaXRlOwp9CgoucHJvZ3Jlc3MgLmluZGV0ZXJtaW5hdGU6YWZ0ZXIgewogIGNvbnRlbnQ6ICcnOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0OwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGJvdHRvbTogMDsKICB3aWxsLWNoYW5nZTogbGVmdCwgcmlnaHQ7CiAgLXdlYmtpdC1hbmltYXRpb246IGluZGV0ZXJtaW5hdGUtc2hvcnQgMi4xcyBjdWJpYy1iZXppZXIoMC4xNjUsIDAuODQsIDAuNDQsIDEpIGluZmluaXRlOwogICAgICAgICAgYW5pbWF0aW9uOiBpbmRldGVybWluYXRlLXNob3J0IDIuMXMgY3ViaWMtYmV6aWVyKDAuMTY1LCAwLjg0LCAwLjQ0LCAxKSBpbmZpbml0ZTsKICAtd2Via2l0LWFuaW1hdGlvbi1kZWxheTogMS4xNXM7CiAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDEuMTVzOwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgaW5kZXRlcm1pbmF0ZSB7CiAgMCUgewogICAgbGVmdDogLTM1JTsKICAgIHJpZ2h0OiAxMDAlOwogIH0KICA2MCUgewogICAgbGVmdDogMTAwJTsKICAgIHJpZ2h0OiAtOTAlOwogIH0KICAxMDAlIHsKICAgIGxlZnQ6IDEwMCU7CiAgICByaWdodDogLTkwJTsKICB9Cn0KCkBrZXlmcmFtZXMgaW5kZXRlcm1pbmF0ZSB7CiAgMCUgewogICAgbGVmdDogLTM1JTsKICAgIHJpZ2h0OiAxMDAlOwogIH0KICA2MCUgewogICAgbGVmdDogMTAwJTsKICAgIHJpZ2h0OiAtOTAlOwogIH0KICAxMDAlIHsKICAgIGxlZnQ6IDEwMCU7CiAgICByaWdodDogLTkwJTsKICB9Cn0KCkAtd2Via2l0LWtleWZyYW1lcyBpbmRldGVybWluYXRlLXNob3J0IHsKICAwJSB7CiAgICBsZWZ0OiAtMjAwJTsKICAgIHJpZ2h0OiAxMDAlOwogIH0KICA2MCUgewogICAgbGVmdDogMTA3JTsKICAgIHJpZ2h0OiAtOCU7CiAgfQogIDEwMCUgewogICAgbGVmdDogMTA3JTsKICAgIHJpZ2h0OiAtOCU7CiAgfQp9CgpAa2V5ZnJhbWVzIGluZGV0ZXJtaW5hdGUtc2hvcnQgewogIDAlIHsKICAgIGxlZnQ6IC0yMDAlOwogICAgcmlnaHQ6IDEwMCU7CiAgfQogIDYwJSB7CiAgICBsZWZ0OiAxMDclOwogICAgcmlnaHQ6IC04JTsKICB9CiAgMTAwJSB7CiAgICBsZWZ0OiAxMDclOwogICAgcmlnaHQ6IC04JTsKICB9Cn0KCi8qKioqKioqKioqKioqKioqKioqCiAgVXRpbGl0eSBDbGFzc2VzCioqKioqKioqKioqKioqKioqKiovCi5oaWRlIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0KCi5sZWZ0LWFsaWduIHsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgoucmlnaHQtYWxpZ24gewogIHRleHQtYWxpZ246IHJpZ2h0Owp9CgouY2VudGVyLCAuY2VudGVyLWFsaWduIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5sZWZ0IHsKICBmbG9hdDogbGVmdCAhaW1wb3J0YW50Owp9CgoucmlnaHQgewogIGZsb2F0OiByaWdodCAhaW1wb3J0YW50Owp9Cgoubm8tc2VsZWN0LCBpbnB1dFt0eXBlPXJhbmdlXSwKaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgewogIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwp9CgouY2lyY2xlIHsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCi5jZW50ZXItYmxvY2sgewogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIG1hcmdpbi1yaWdodDogYXV0bzsKfQoKLnRydW5jYXRlIHsKICBkaXNwbGF5OiBibG9jazsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7Cn0KCi5uby1wYWRkaW5nIHsKICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7Cn0KCnNwYW4uYmFkZ2UgewogIG1pbi13aWR0aDogM3JlbTsKICBwYWRkaW5nOiAwIDZweDsKICBtYXJnaW4tbGVmdDogMTRweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxcmVtOwogIGxpbmUtaGVpZ2h0OiAyMnB4OwogIGhlaWdodDogMjJweDsKICBjb2xvcjogIzc1NzU3NTsKICBmbG9hdDogcmlnaHQ7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKc3Bhbi5iYWRnZS5uZXcgewogIGZvbnQtd2VpZ2h0OiAzMDA7CiAgZm9udC1zaXplOiAwLjhyZW07CiAgY29sb3I6ICNmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICBib3JkZXItcmFkaXVzOiAycHg7Cn0KCnNwYW4uYmFkZ2UubmV3OmFmdGVyIHsKICBjb250ZW50OiAiIG5ldyI7Cn0KCnNwYW4uYmFkZ2VbZGF0YS1iYWRnZS1jYXB0aW9uXTo6YWZ0ZXIgewogIGNvbnRlbnQ6ICIgIiBhdHRyKGRhdGEtYmFkZ2UtY2FwdGlvbik7Cn0KCm5hdiB1bCBhIHNwYW4uYmFkZ2UgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBmbG9hdDogbm9uZTsKICBtYXJnaW4tbGVmdDogNHB4OwogIGxpbmUtaGVpZ2h0OiAyMnB4OwogIGhlaWdodDogMjJweDsKfQoKLmNvbGxlY3Rpb24taXRlbSBzcGFuLmJhZGdlIHsKICBtYXJnaW4tdG9wOiBjYWxjKDAuNzVyZW0gLSAxMXB4KTsKfQoKLmNvbGxhcHNpYmxlIHNwYW4uYmFkZ2UgewogIG1hcmdpbi10b3A6IGNhbGMoMS41cmVtIC0gMTFweCk7Cn0KCi5zaWRlLW5hdiBzcGFuLmJhZGdlIHsKICBtYXJnaW4tdG9wOiBjYWxjKDI0cHggLSAxMXB4KTsKfQoKLyogVGhpcyBpcyBuZWVkZWQgZm9yIHNvbWUgbW9iaWxlIHBob25lcyB0byBkaXNwbGF5IHRoZSBHb29nbGUgSWNvbiBmb250IHByb3Blcmx5ICovCi5tYXRlcmlhbC1pY29ucyB7CiAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTsKICAtd2Via2l0LWZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOwogICAgIC1tb3otZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICAgICAgICBmb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKfQoKLmNvbnRhaW5lciB7CiAgbWFyZ2luOiAwIGF1dG87CiAgbWF4LXdpZHRoOiAxMjgwcHg7CiAgd2lkdGg6IDkwJTsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgewogIC5jb250YWluZXIgewogICAgd2lkdGg6IDg1JTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTkzcHgpIHsKICAuY29udGFpbmVyIHsKICAgIHdpZHRoOiA3MCU7CiAgfQp9CgouY29udGFpbmVyIC5yb3cgewogIG1hcmdpbi1sZWZ0OiAtMC43NXJlbTsKICBtYXJnaW4tcmlnaHQ6IC0wLjc1cmVtOwp9Cgouc2VjdGlvbiB7CiAgcGFkZGluZy10b3A6IDFyZW07CiAgcGFkZGluZy1ib3R0b206IDFyZW07Cn0KCi5zZWN0aW9uLm5vLXBhZCB7CiAgcGFkZGluZzogMDsKfQoKLnNlY3Rpb24ubm8tcGFkLWJvdCB7CiAgcGFkZGluZy1ib3R0b206IDA7Cn0KCi5zZWN0aW9uLm5vLXBhZC10b3AgewogIHBhZGRpbmctdG9wOiAwOwp9Cgoucm93IHsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBtYXJnaW4tcmlnaHQ6IGF1dG87CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLnJvdzphZnRlciB7CiAgY29udGVudDogIiI7CiAgZGlzcGxheTogdGFibGU7CiAgY2xlYXI6IGJvdGg7Cn0KCi5yb3cgLmNvbCB7CiAgZmxvYXQ6IGxlZnQ7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBwYWRkaW5nOiAwIDAuNzVyZW07CiAgbWluLWhlaWdodDogMXB4Owp9Cgoucm93IC5jb2xbY2xhc3MqPSJwdXNoLSJdLCAucm93IC5jb2xbY2xhc3MqPSJwdWxsLSJdIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5yb3cgLmNvbC5zMSB7CiAgd2lkdGg6IDguMzMzMzMzMzMzMyU7CiAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgbGVmdDogYXV0bzsKICByaWdodDogYXV0bzsKfQoKLnJvdyAuY29sLnMyIHsKICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7CiAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgbGVmdDogYXV0bzsKICByaWdodDogYXV0bzsKfQoKLnJvdyAuY29sLnMzIHsKICB3aWR0aDogMjUlOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIGxlZnQ6IGF1dG87CiAgcmlnaHQ6IGF1dG87Cn0KCi5yb3cgLmNvbC5zNCB7CiAgd2lkdGg6IDMzLjMzMzMzMzMzMzMlOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIGxlZnQ6IGF1dG87CiAgcmlnaHQ6IGF1dG87Cn0KCi5yb3cgLmNvbC5zNSB7CiAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIGxlZnQ6IGF1dG87CiAgcmlnaHQ6IGF1dG87Cn0KCi5yb3cgLmNvbC5zNiB7CiAgd2lkdGg6IDUwJTsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBsZWZ0OiBhdXRvOwogIHJpZ2h0OiBhdXRvOwp9Cgoucm93IC5jb2wuczcgewogIHdpZHRoOiA1OC4zMzMzMzMzMzMzJTsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBsZWZ0OiBhdXRvOwogIHJpZ2h0OiBhdXRvOwp9Cgoucm93IC5jb2wuczggewogIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBsZWZ0OiBhdXRvOwogIHJpZ2h0OiBhdXRvOwp9Cgoucm93IC5jb2wuczkgewogIHdpZHRoOiA3NSU7CiAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgbGVmdDogYXV0bzsKICByaWdodDogYXV0bzsKfQoKLnJvdyAuY29sLnMxMCB7CiAgd2lkdGg6IDgzLjMzMzMzMzMzMzMlOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIGxlZnQ6IGF1dG87CiAgcmlnaHQ6IGF1dG87Cn0KCi5yb3cgLmNvbC5zMTEgewogIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBsZWZ0OiBhdXRvOwogIHJpZ2h0OiBhdXRvOwp9Cgoucm93IC5jb2wuczEyIHsKICB3aWR0aDogMTAwJTsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBsZWZ0OiBhdXRvOwogIHJpZ2h0OiBhdXRvOwp9Cgoucm93IC5jb2wub2Zmc2V0LXMxIHsKICBtYXJnaW4tbGVmdDogOC4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLnB1bGwtczEgewogIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOwp9Cgoucm93IC5jb2wucHVzaC1zMSB7CiAgbGVmdDogOC4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLm9mZnNldC1zMiB7CiAgbWFyZ2luLWxlZnQ6IDE2LjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVsbC1zMiB7CiAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVzaC1zMiB7CiAgbGVmdDogMTYuNjY2NjY2NjY2NyU7Cn0KCi5yb3cgLmNvbC5vZmZzZXQtczMgewogIG1hcmdpbi1sZWZ0OiAyNSU7Cn0KCi5yb3cgLmNvbC5wdWxsLXMzIHsKICByaWdodDogMjUlOwp9Cgoucm93IC5jb2wucHVzaC1zMyB7CiAgbGVmdDogMjUlOwp9Cgoucm93IC5jb2wub2Zmc2V0LXM0IHsKICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMzMyU7Cn0KCi5yb3cgLmNvbC5wdWxsLXM0IHsKICByaWdodDogMzMuMzMzMzMzMzMzMyU7Cn0KCi5yb3cgLmNvbC5wdXNoLXM0IHsKICBsZWZ0OiAzMy4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLm9mZnNldC1zNSB7CiAgbWFyZ2luLWxlZnQ6IDQxLjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVsbC1zNSB7CiAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVzaC1zNSB7CiAgbGVmdDogNDEuNjY2NjY2NjY2NyU7Cn0KCi5yb3cgLmNvbC5vZmZzZXQtczYgewogIG1hcmdpbi1sZWZ0OiA1MCU7Cn0KCi5yb3cgLmNvbC5wdWxsLXM2IHsKICByaWdodDogNTAlOwp9Cgoucm93IC5jb2wucHVzaC1zNiB7CiAgbGVmdDogNTAlOwp9Cgoucm93IC5jb2wub2Zmc2V0LXM3IHsKICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMzMyU7Cn0KCi5yb3cgLmNvbC5wdWxsLXM3IHsKICByaWdodDogNTguMzMzMzMzMzMzMyU7Cn0KCi5yb3cgLmNvbC5wdXNoLXM3IHsKICBsZWZ0OiA1OC4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLm9mZnNldC1zOCB7CiAgbWFyZ2luLWxlZnQ6IDY2LjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVsbC1zOCB7CiAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOwp9Cgoucm93IC5jb2wucHVzaC1zOCB7CiAgbGVmdDogNjYuNjY2NjY2NjY2NyU7Cn0KCi5yb3cgLmNvbC5vZmZzZXQtczkgewogIG1hcmdpbi1sZWZ0OiA3NSU7Cn0KCi5yb3cgLmNvbC5wdWxsLXM5IHsKICByaWdodDogNzUlOwp9Cgoucm93IC5jb2wucHVzaC1zOSB7CiAgbGVmdDogNzUlOwp9Cgoucm93IC5jb2wub2Zmc2V0LXMxMCB7CiAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzMzMlOwp9Cgoucm93IC5jb2wucHVsbC1zMTAgewogIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLnB1c2gtczEwIHsKICBsZWZ0OiA4My4zMzMzMzMzMzMzJTsKfQoKLnJvdyAuY29sLm9mZnNldC1zMTEgewogIG1hcmdpbi1sZWZ0OiA5MS42NjY2NjY2NjY3JTsKfQoKLnJvdyAuY29sLnB1bGwtczExIHsKICByaWdodDogOTEuNjY2NjY2NjY2NyU7Cn0KCi5yb3cgLmNvbC5wdXNoLXMxMSB7CiAgbGVmdDogOTEuNjY2NjY2NjY2NyU7Cn0KCi5yb3cgLmNvbC5vZmZzZXQtczEyIHsKICBtYXJnaW4tbGVmdDogMTAwJTsKfQoKLnJvdyAuY29sLnB1bGwtczEyIHsKICByaWdodDogMTAwJTsKfQoKLnJvdyAuY29sLnB1c2gtczEyIHsKICBsZWZ0OiAxMDAlOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7CiAgLnJvdyAuY29sLm0xIHsKICAgIHdpZHRoOiA4LjMzMzMzMzMzMzMlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5tMiB7CiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLm0zIHsKICAgIHdpZHRoOiAyNSU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLm00IHsKICAgIHdpZHRoOiAzMy4zMzMzMzMzMzMzJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubTUgewogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5tNiB7CiAgICB3aWR0aDogNTAlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5tNyB7CiAgICB3aWR0aDogNTguMzMzMzMzMzMzMyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLm04IHsKICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubTkgewogICAgd2lkdGg6IDc1JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubTEwIHsKICAgIHdpZHRoOiA4My4zMzMzMzMzMzMzJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubTExIHsKICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubTEyIHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbTEgewogICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLW0xIHsKICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVzaC1tMSB7CiAgICBsZWZ0OiA4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LW0yIHsKICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbTIgewogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1tMiB7CiAgICBsZWZ0OiAxNi42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1tMyB7CiAgICBtYXJnaW4tbGVmdDogMjUlOwogIH0KICAucm93IC5jb2wucHVsbC1tMyB7CiAgICByaWdodDogMjUlOwogIH0KICAucm93IC5jb2wucHVzaC1tMyB7CiAgICBsZWZ0OiAyNSU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbTQgewogICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVsbC1tNCB7CiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLW00IHsKICAgIGxlZnQ6IDMzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LW01IHsKICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbTUgewogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1tNSB7CiAgICBsZWZ0OiA0MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1tNiB7CiAgICBtYXJnaW4tbGVmdDogNTAlOwogIH0KICAucm93IC5jb2wucHVsbC1tNiB7CiAgICByaWdodDogNTAlOwogIH0KICAucm93IC5jb2wucHVzaC1tNiB7CiAgICBsZWZ0OiA1MCU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbTcgewogICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVsbC1tNyB7CiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLW03IHsKICAgIGxlZnQ6IDU4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LW04IHsKICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbTggewogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1tOCB7CiAgICBsZWZ0OiA2Ni42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1tOSB7CiAgICBtYXJnaW4tbGVmdDogNzUlOwogIH0KICAucm93IC5jb2wucHVsbC1tOSB7CiAgICByaWdodDogNzUlOwogIH0KICAucm93IC5jb2wucHVzaC1tOSB7CiAgICBsZWZ0OiA3NSU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbTEwIHsKICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbTEwIHsKICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1c2gtbTEwIHsKICAgIGxlZnQ6IDgzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LW0xMSB7CiAgICBtYXJnaW4tbGVmdDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLW0xMSB7CiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLW0xMSB7CiAgICBsZWZ0OiA5MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1tMTIgewogICAgbWFyZ2luLWxlZnQ6IDEwMCU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLW0xMiB7CiAgICByaWdodDogMTAwJTsKICB9CiAgLnJvdyAuY29sLnB1c2gtbTEyIHsKICAgIGxlZnQ6IDEwMCU7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7CiAgLnJvdyAuY29sLmwxIHsKICAgIHdpZHRoOiA4LjMzMzMzMzMzMzMlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5sMiB7CiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLmwzIHsKICAgIHdpZHRoOiAyNSU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLmw0IHsKICAgIHdpZHRoOiAzMy4zMzMzMzMzMzMzJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubDUgewogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5sNiB7CiAgICB3aWR0aDogNTAlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5sNyB7CiAgICB3aWR0aDogNTguMzMzMzMzMzMzMyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLmw4IHsKICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubDkgewogICAgd2lkdGg6IDc1JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubDEwIHsKICAgIHdpZHRoOiA4My4zMzMzMzMzMzMzJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubDExIHsKICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wubDEyIHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbDEgewogICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLWwxIHsKICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVzaC1sMSB7CiAgICBsZWZ0OiA4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LWwyIHsKICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbDIgewogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1sMiB7CiAgICBsZWZ0OiAxNi42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1sMyB7CiAgICBtYXJnaW4tbGVmdDogMjUlOwogIH0KICAucm93IC5jb2wucHVsbC1sMyB7CiAgICByaWdodDogMjUlOwogIH0KICAucm93IC5jb2wucHVzaC1sMyB7CiAgICBsZWZ0OiAyNSU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbDQgewogICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVsbC1sNCB7CiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLWw0IHsKICAgIGxlZnQ6IDMzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LWw1IHsKICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbDUgewogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1sNSB7CiAgICBsZWZ0OiA0MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1sNiB7CiAgICBtYXJnaW4tbGVmdDogNTAlOwogIH0KICAucm93IC5jb2wucHVsbC1sNiB7CiAgICByaWdodDogNTAlOwogIH0KICAucm93IC5jb2wucHVzaC1sNiB7CiAgICBsZWZ0OiA1MCU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbDcgewogICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVsbC1sNyB7CiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLWw3IHsKICAgIGxlZnQ6IDU4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LWw4IHsKICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbDggewogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC1sOCB7CiAgICBsZWZ0OiA2Ni42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1sOSB7CiAgICBtYXJnaW4tbGVmdDogNzUlOwogIH0KICAucm93IC5jb2wucHVsbC1sOSB7CiAgICByaWdodDogNzUlOwogIH0KICAucm93IC5jb2wucHVzaC1sOSB7CiAgICBsZWZ0OiA3NSU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQtbDEwIHsKICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1bGwtbDEwIHsKICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1c2gtbDEwIHsKICAgIGxlZnQ6IDgzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LWwxMSB7CiAgICBtYXJnaW4tbGVmdDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLWwxMSB7CiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLWwxMSB7CiAgICBsZWZ0OiA5MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC1sMTIgewogICAgbWFyZ2luLWxlZnQ6IDEwMCU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLWwxMiB7CiAgICByaWdodDogMTAwJTsKICB9CiAgLnJvdyAuY29sLnB1c2gtbDEyIHsKICAgIGxlZnQ6IDEwMCU7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEyMDFweCkgewogIC5yb3cgLmNvbC54bDEgewogICAgd2lkdGg6IDguMzMzMzMzMzMzMyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLnhsMiB7CiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLnhsMyB7CiAgICB3aWR0aDogMjUlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC54bDQgewogICAgd2lkdGg6IDMzLjMzMzMzMzMzMzMlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC54bDUgewogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC54bDYgewogICAgd2lkdGg6IDUwJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wueGw3IHsKICAgIHdpZHRoOiA1OC4zMzMzMzMzMzMzJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wueGw4IHsKICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wueGw5IHsKICAgIHdpZHRoOiA3NSU7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGxlZnQ6IGF1dG87CiAgICByaWdodDogYXV0bzsKICB9CiAgLnJvdyAuY29sLnhsMTAgewogICAgd2lkdGg6IDgzLjMzMzMzMzMzMzMlOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IGF1dG87CiAgfQogIC5yb3cgLmNvbC54bDExIHsKICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wueGwxMiB7CiAgICB3aWR0aDogMTAwJTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiBhdXRvOwogIH0KICAucm93IC5jb2wub2Zmc2V0LXhsMSB7CiAgICBtYXJnaW4tbGVmdDogOC4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1bGwteGwxIHsKICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVzaC14bDEgewogICAgbGVmdDogOC4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC14bDIgewogICAgbWFyZ2luLWxlZnQ6IDE2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVsbC14bDIgewogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC14bDIgewogICAgbGVmdDogMTYuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQteGwzIHsKICAgIG1hcmdpbi1sZWZ0OiAyNSU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLXhsMyB7CiAgICByaWdodDogMjUlOwogIH0KICAucm93IC5jb2wucHVzaC14bDMgewogICAgbGVmdDogMjUlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LXhsNCB7CiAgICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLXhsNCB7CiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLXhsNCB7CiAgICBsZWZ0OiAzMy4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC14bDUgewogICAgbWFyZ2luLWxlZnQ6IDQxLjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVsbC14bDUgewogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC14bDUgewogICAgbGVmdDogNDEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQteGw2IHsKICAgIG1hcmdpbi1sZWZ0OiA1MCU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLXhsNiB7CiAgICByaWdodDogNTAlOwogIH0KICAucm93IC5jb2wucHVzaC14bDYgewogICAgbGVmdDogNTAlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LXhsNyB7CiAgICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLXhsNyB7CiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLXhsNyB7CiAgICBsZWZ0OiA1OC4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC14bDggewogICAgbWFyZ2luLWxlZnQ6IDY2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVsbC14bDggewogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOwogIH0KICAucm93IC5jb2wucHVzaC14bDggewogICAgbGVmdDogNjYuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQteGw5IHsKICAgIG1hcmdpbi1sZWZ0OiA3NSU7CiAgfQogIC5yb3cgLmNvbC5wdWxsLXhsOSB7CiAgICByaWdodDogNzUlOwogIH0KICAucm93IC5jb2wucHVzaC14bDkgewogICAgbGVmdDogNzUlOwogIH0KICAucm93IC5jb2wub2Zmc2V0LXhsMTAgewogICAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzMzMlOwogIH0KICAucm93IC5jb2wucHVsbC14bDEwIHsKICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLnB1c2gteGwxMCB7CiAgICBsZWZ0OiA4My4zMzMzMzMzMzMzJTsKICB9CiAgLnJvdyAuY29sLm9mZnNldC14bDExIHsKICAgIG1hcmdpbi1sZWZ0OiA5MS42NjY2NjY2NjY3JTsKICB9CiAgLnJvdyAuY29sLnB1bGwteGwxMSB7CiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5wdXNoLXhsMTEgewogICAgbGVmdDogOTEuNjY2NjY2NjY2NyU7CiAgfQogIC5yb3cgLmNvbC5vZmZzZXQteGwxMiB7CiAgICBtYXJnaW4tbGVmdDogMTAwJTsKICB9CiAgLnJvdyAuY29sLnB1bGwteGwxMiB7CiAgICByaWdodDogMTAwJTsKICB9CiAgLnJvdyAuY29sLnB1c2gteGwxMiB7CiAgICBsZWZ0OiAxMDAlOwogIH0KfQoKbmF2IHsKICBjb2xvcjogI2ZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWU2ZTczOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogNTZweDsKICBsaW5lLWhlaWdodDogNTZweDsKfQoKbmF2Lm5hdi1leHRlbmRlZCB7CiAgaGVpZ2h0OiBhdXRvOwp9CgpuYXYubmF2LWV4dGVuZGVkIC5uYXYtd3JhcHBlciB7CiAgbWluLWhlaWdodDogNTZweDsKICBoZWlnaHQ6IGF1dG87Cn0KCm5hdi5uYXYtZXh0ZW5kZWQgLm5hdi1jb250ZW50IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKfQoKbmF2IGEgewogIGNvbG9yOiAjZmZmOwp9CgpuYXYgaSwKbmF2IFtjbGFzc149Im1kaS0iXSwgbmF2IFtjbGFzcyo9Im1kaS0iXSwKbmF2IGkubWF0ZXJpYWwtaWNvbnMgewogIGRpc3BsYXk6IGJsb2NrOwogIGZvbnQtc2l6ZTogMjRweDsKICBoZWlnaHQ6IDU2cHg7CiAgbGluZS1oZWlnaHQ6IDU2cHg7Cn0KCm5hdiAubmF2LXdyYXBwZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IDEwMCU7Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTkzcHgpIHsKICBuYXYgYS5idXR0b24tY29sbGFwc2UgewogICAgZGlzcGxheTogbm9uZTsKICB9Cn0KCm5hdiAuYnV0dG9uLWNvbGxhcHNlIHsKICBmbG9hdDogbGVmdDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgei1pbmRleDogMTsKICBoZWlnaHQ6IDU2cHg7CiAgbWFyZ2luOiAwIDE4cHg7Cn0KCm5hdiAuYnV0dG9uLWNvbGxhcHNlIGkgewogIGhlaWdodDogNTZweDsKICBsaW5lLWhlaWdodDogNTZweDsKfQoKbmF2IC5icmFuZC1sb2dvIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgY29sb3I6ICNmZmY7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtc2l6ZTogMi4xcmVtOwogIHBhZGRpbmc6IDA7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKbmF2IC5icmFuZC1sb2dvLmNlbnRlciB7CiAgbGVmdDogNTAlOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7CiAgbmF2IC5icmFuZC1sb2dvIHsKICAgIGxlZnQ6IDUwJTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgfQogIG5hdiAuYnJhbmQtbG9nby5sZWZ0LCBuYXYgLmJyYW5kLWxvZ28ucmlnaHQgewogICAgcGFkZGluZzogMDsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiBub25lOwogICAgICAgICAgICB0cmFuc2Zvcm06IG5vbmU7CiAgfQogIG5hdiAuYnJhbmQtbG9nby5sZWZ0IHsKICAgIGxlZnQ6IDAuNXJlbTsKICB9CiAgbmF2IC5icmFuZC1sb2dvLnJpZ2h0IHsKICAgIHJpZ2h0OiAwLjVyZW07CiAgICBsZWZ0OiBhdXRvOwogIH0KfQoKbmF2IC5icmFuZC1sb2dvLnJpZ2h0IHsKICByaWdodDogMC41cmVtOwogIHBhZGRpbmc6IDA7Cn0KCm5hdiAuYnJhbmQtbG9nbyBpLApuYXYgLmJyYW5kLWxvZ28gW2NsYXNzXj0ibWRpLSJdLCBuYXYgLmJyYW5kLWxvZ28gW2NsYXNzKj0ibWRpLSJdLApuYXYgLmJyYW5kLWxvZ28gaS5tYXRlcmlhbC1pY29ucyB7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAxNXB4Owp9CgpuYXYgLm5hdi10aXRsZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtc2l6ZTogMzJweDsKICBwYWRkaW5nOiAyOHB4IDA7Cn0KCm5hdiB1bCB7CiAgbWFyZ2luOiAwOwp9CgpuYXYgdWwgbGkgewogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7CiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7CiAgZmxvYXQ6IGxlZnQ7CiAgcGFkZGluZzogMDsKfQoKbmF2IHVsIGxpLmFjdGl2ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpOwp9CgpuYXYgdWwgYSB7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsKICBmb250LXNpemU6IDFyZW07CiAgY29sb3I6ICNmZmY7CiAgZGlzcGxheTogYmxvY2s7CiAgcGFkZGluZzogMCAxNXB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKbmF2IHVsIGEuYnRuLCBuYXYgdWwgYS5idG4tbGFyZ2UsIG5hdiB1bCBhLmJ0bi1sYXJnZSwgbmF2IHVsIGEuYnRuLWZsYXQsIG5hdiB1bCBhLmJ0bi1mbG9hdGluZyB7CiAgbWFyZ2luLXRvcDogLTJweDsKICBtYXJnaW4tbGVmdDogMTVweDsKICBtYXJnaW4tcmlnaHQ6IDE1cHg7Cn0KCm5hdiB1bCBhLmJ0biA+IC5tYXRlcmlhbC1pY29ucywgbmF2IHVsIGEuYnRuLWxhcmdlID4gLm1hdGVyaWFsLWljb25zLCBuYXYgdWwgYS5idG4tbGFyZ2UgPiAubWF0ZXJpYWwtaWNvbnMsIG5hdiB1bCBhLmJ0bi1mbGF0ID4gLm1hdGVyaWFsLWljb25zLCBuYXYgdWwgYS5idG4tZmxvYXRpbmcgPiAubWF0ZXJpYWwtaWNvbnMgewogIGhlaWdodDogaW5oZXJpdDsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKfQoKbmF2IHVsIGE6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQoKbmF2IHVsLmxlZnQgewogIGZsb2F0OiBsZWZ0Owp9CgpuYXYgZm9ybSB7CiAgaGVpZ2h0OiAxMDAlOwp9CgpuYXYgLmlucHV0LWZpZWxkIHsKICBtYXJnaW46IDA7CiAgaGVpZ2h0OiAxMDAlOwp9CgpuYXYgLmlucHV0LWZpZWxkIGlucHV0IHsKICBoZWlnaHQ6IDEwMCU7CiAgZm9udC1zaXplOiAxLjJyZW07CiAgYm9yZGVyOiBub25lOwogIHBhZGRpbmctbGVmdDogMnJlbTsKfQoKbmF2IC5pbnB1dC1maWVsZCBpbnB1dDpmb2N1cywgbmF2IC5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXRleHRdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9cGFzc3dvcmRdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9ZW1haWxdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9dXJsXTp2YWxpZCwgbmF2IC5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPWRhdGVdOnZhbGlkIHsKICBib3JkZXI6IG5vbmU7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsKfQoKbmF2IC5pbnB1dC1maWVsZCBsYWJlbCB7CiAgdG9wOiAwOwogIGxlZnQ6IDA7Cn0KCm5hdiAuaW5wdXQtZmllbGQgbGFiZWwgaSB7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICAtd2Via2l0LXRyYW5zaXRpb246IGNvbG9yIC4zczsKICB0cmFuc2l0aW9uOiBjb2xvciAuM3M7Cn0KCm5hdiAuaW5wdXQtZmllbGQgbGFiZWwuYWN0aXZlIGkgewogIGNvbG9yOiAjZmZmOwp9CgoubmF2YmFyLWZpeGVkIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgaGVpZ2h0OiA1NnB4OwogIHotaW5kZXg6IDk5NzsKfQoKLm5hdmJhci1maXhlZCBuYXYgewogIHBvc2l0aW9uOiBmaXhlZDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgewogIG5hdi5uYXYtZXh0ZW5kZWQgLm5hdi13cmFwcGVyIHsKICAgIG1pbi1oZWlnaHQ6IDY0cHg7CiAgfQogIG5hdiwgbmF2IC5uYXYtd3JhcHBlciBpLCBuYXYgYS5idXR0b24tY29sbGFwc2UsIG5hdiBhLmJ1dHRvbi1jb2xsYXBzZSBpIHsKICAgIGhlaWdodDogNjRweDsKICAgIGxpbmUtaGVpZ2h0OiA2NHB4OwogIH0KICAubmF2YmFyLWZpeGVkIHsKICAgIGhlaWdodDogNjRweDsKICB9Cn0KCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAiUm9ib3RvIjsKICBzcmM6IGxvY2FsKFJvYm90byBUaGluKSwgdXJsKCIuLi9mb250cy9yb2JvdG8vUm9ib3RvLVRoaW4ud29mZjIiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiLi4vZm9udHMvcm9ib3RvL1JvYm90by1UaGluLndvZmYiKSBmb3JtYXQoIndvZmYiKTsKICBmb250LXdlaWdodDogMTAwOwp9CgpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogIlJvYm90byI7CiAgc3JjOiBsb2NhbChSb2JvdG8gTGlnaHQpLCB1cmwoIi4uL2ZvbnRzL3JvYm90by9Sb2JvdG8tTGlnaHQud29mZjIiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiLi4vZm9udHMvcm9ib3RvL1JvYm90by1MaWdodC53b2ZmIikgZm9ybWF0KCJ3b2ZmIik7CiAgZm9udC13ZWlnaHQ6IDMwMDsKfQoKQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICJSb2JvdG8iOwogIHNyYzogbG9jYWwoUm9ib3RvIFJlZ3VsYXIpLCB1cmwoIi4uL2ZvbnRzL3JvYm90by9Sb2JvdG8tUmVndWxhci53b2ZmMiIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCIuLi9mb250cy9yb2JvdG8vUm9ib3RvLVJlZ3VsYXIud29mZiIpIGZvcm1hdCgid29mZiIpOwogIGZvbnQtd2VpZ2h0OiA0MDA7Cn0KCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAiUm9ib3RvIjsKICBzcmM6IGxvY2FsKFJvYm90byBNZWRpdW0pLCB1cmwoIi4uL2ZvbnRzL3JvYm90by9Sb2JvdG8tTWVkaXVtLndvZmYyIikgZm9ybWF0KCJ3b2ZmMiIpLCB1cmwoIi4uL2ZvbnRzL3JvYm90by9Sb2JvdG8tTWVkaXVtLndvZmYiKSBmb3JtYXQoIndvZmYiKTsKICBmb250LXdlaWdodDogNTAwOwp9CgpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogIlJvYm90byI7CiAgc3JjOiBsb2NhbChSb2JvdG8gQm9sZCksIHVybCgiLi4vZm9udHMvcm9ib3RvL1JvYm90by1Cb2xkLndvZmYyIikgZm9ybWF0KCJ3b2ZmMiIpLCB1cmwoIi4uL2ZvbnRzL3JvYm90by9Sb2JvdG8tQm9sZC53b2ZmIikgZm9ybWF0KCJ3b2ZmIik7CiAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKYSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgpodG1sIHsKICBsaW5lLWhlaWdodDogMS41OwogIGZvbnQtZmFtaWx5OiAiUm9ib3RvIiwgc2Fucy1zZXJpZjsKICBmb250LXdlaWdodDogbm9ybWFsOwogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDApIHsKICBodG1sIHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTkycHgpIHsKICBodG1sIHsKICAgIGZvbnQtc2l6ZTogMTQuNXB4OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjAwcHgpIHsKICBodG1sIHsKICAgIGZvbnQtc2l6ZTogMTVweDsKICB9Cn0KCmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYgewogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgbGluZS1oZWlnaHQ6IDEuMTsKfQoKaDEgYSwgaDIgYSwgaDMgYSwgaDQgYSwgaDUgYSwgaDYgYSB7CiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7Cn0KCmgxIHsKICBmb250LXNpemU6IDQuMnJlbTsKICBsaW5lLWhlaWdodDogMTEwJTsKICBtYXJnaW46IDIuMXJlbSAwIDEuNjhyZW0gMDsKfQoKaDIgewogIGZvbnQtc2l6ZTogMy41NnJlbTsKICBsaW5lLWhlaWdodDogMTEwJTsKICBtYXJnaW46IDEuNzhyZW0gMCAxLjQyNHJlbSAwOwp9CgpoMyB7CiAgZm9udC1zaXplOiAyLjkycmVtOwogIGxpbmUtaGVpZ2h0OiAxMTAlOwogIG1hcmdpbjogMS40NnJlbSAwIDEuMTY4cmVtIDA7Cn0KCmg0IHsKICBmb250LXNpemU6IDIuMjhyZW07CiAgbGluZS1oZWlnaHQ6IDExMCU7CiAgbWFyZ2luOiAxLjE0cmVtIDAgMC45MTJyZW0gMDsKfQoKaDUgewogIGZvbnQtc2l6ZTogMS42NHJlbTsKICBsaW5lLWhlaWdodDogMTEwJTsKICBtYXJnaW46IDAuODJyZW0gMCAwLjY1NnJlbSAwOwp9CgpoNiB7CiAgZm9udC1zaXplOiAxcmVtOwogIGxpbmUtaGVpZ2h0OiAxMTAlOwogIG1hcmdpbjogMC41cmVtIDAgMC40cmVtIDA7Cn0KCmVtIHsKICBmb250LXN0eWxlOiBpdGFsaWM7Cn0KCnN0cm9uZyB7CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKc21hbGwgewogIGZvbnQtc2l6ZTogNzUlOwp9CgoubGlnaHQsIC5wYWdlLWZvb3RlciAuZm9vdGVyLWNvcHlyaWdodCB7CiAgZm9udC13ZWlnaHQ6IDMwMDsKfQoKLnRoaW4gewogIGZvbnQtd2VpZ2h0OiAyMDA7Cn0KCi5mbG93LXRleHQgewogIGZvbnQtd2VpZ2h0OiAzMDA7Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzYwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS4ycmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAzOTBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjIyNHJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNDIwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS4yNDhyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ1MHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuMjcycmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA0ODBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjI5NnJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNTEwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS4zMnJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNTQwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS4zNDRyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDU3MHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuMzY4cmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjM5MnJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjMwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS40MTZyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDY2MHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuNDRyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDY5MHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuNDY0cmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3MjBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjQ4OHJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzUwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS41MTJyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc4MHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuNTM2cmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4MTBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjU2cmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4NDBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjU4NHJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODcwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS42MDhyZW07CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDkwMHB4KSB7CiAgLmZsb3ctdGV4dCB7CiAgICBmb250LXNpemU6IDEuNjMycmVtOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA5MzBweCkgewogIC5mbG93LXRleHQgewogICAgZm9udC1zaXplOiAxLjY1NnJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTYwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS42OHJlbTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMzYwcHgpIHsKICAuZmxvdy10ZXh0IHsKICAgIGZvbnQtc2l6ZTogMS4ycmVtOwogIH0KfQoKLnNjYWxlLXRyYW5zaXRpb24gewogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC41MywgMC4wMSwgMC4zNiwgMS42MykgIWltcG9ydGFudDsKICB0cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjUzLCAwLjAxLCAwLjM2LCAxLjYzKSAhaW1wb3J0YW50OwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjUzLCAwLjAxLCAwLjM2LCAxLjYzKSAhaW1wb3J0YW50OwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjUzLCAwLjAxLCAwLjM2LCAxLjYzKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC41MywgMC4wMSwgMC4zNiwgMS42MykgIWltcG9ydGFudDsKfQoKLnNjYWxlLXRyYW5zaXRpb24uc2NhbGUtb3V0IHsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOwogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjJzICFpbXBvcnRhbnQ7CiAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjJzICFpbXBvcnRhbnQ7CiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4ycyAhaW1wb3J0YW50OwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAuMnMsIC13ZWJraXQtdHJhbnNmb3JtIC4ycyAhaW1wb3J0YW50Owp9Cgouc2NhbGUtdHJhbnNpdGlvbi5zY2FsZS1pbiB7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEpOwogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKfQoKLmNhcmQtcGFuZWwgewogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuMjVzOwogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1cywgLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgcGFkZGluZzogMjRweDsKICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQoKLmNhcmQgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuMjVzOwogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1cywgLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7CiAgYm9yZGVyLXJhZGl1czogMnB4Owp9CgouY2FyZCAuY2FyZC10aXRsZSB7CiAgZm9udC1zaXplOiAyNHB4OwogIGZvbnQtd2VpZ2h0OiAzMDA7Cn0KCi5jYXJkIC5jYXJkLXRpdGxlLmFjdGl2YXRvciB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouY2FyZC5zbWFsbCwgLmNhcmQubWVkaXVtLCAuY2FyZC5sYXJnZSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY2FyZC5zbWFsbCAuY2FyZC1pbWFnZSwgLmNhcmQubWVkaXVtIC5jYXJkLWltYWdlLCAuY2FyZC5sYXJnZSAuY2FyZC1pbWFnZSB7CiAgbWF4LWhlaWdodDogNjAlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5jYXJkLnNtYWxsIC5jYXJkLWltYWdlICsgLmNhcmQtY29udGVudCwgLmNhcmQubWVkaXVtIC5jYXJkLWltYWdlICsgLmNhcmQtY29udGVudCwgLmNhcmQubGFyZ2UgLmNhcmQtaW1hZ2UgKyAuY2FyZC1jb250ZW50IHsKICBtYXgtaGVpZ2h0OiA0MCU7Cn0KCi5jYXJkLnNtYWxsIC5jYXJkLWNvbnRlbnQsIC5jYXJkLm1lZGl1bSAuY2FyZC1jb250ZW50LCAuY2FyZC5sYXJnZSAuY2FyZC1jb250ZW50IHsKICBtYXgtaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5jYXJkLnNtYWxsIC5jYXJkLWFjdGlvbiwgLmNhcmQubWVkaXVtIC5jYXJkLWFjdGlvbiwgLmNhcmQubGFyZ2UgLmNhcmQtYWN0aW9uIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7Cn0KCi5jYXJkLnNtYWxsIHsKICBoZWlnaHQ6IDMwMHB4Owp9CgouY2FyZC5tZWRpdW0gewogIGhlaWdodDogNDAwcHg7Cn0KCi5jYXJkLmxhcmdlIHsKICBoZWlnaHQ6IDUwMHB4Owp9CgouY2FyZC5ob3Jpem9udGFsIHsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQoKLmNhcmQuaG9yaXpvbnRhbC5zbWFsbCAuY2FyZC1pbWFnZSwgLmNhcmQuaG9yaXpvbnRhbC5tZWRpdW0gLmNhcmQtaW1hZ2UsIC5jYXJkLmhvcml6b250YWwubGFyZ2UgLmNhcmQtaW1hZ2UgewogIGhlaWdodDogMTAwJTsKICBtYXgtaGVpZ2h0OiBub25lOwogIG92ZXJmbG93OiB2aXNpYmxlOwp9CgouY2FyZC5ob3Jpem9udGFsLnNtYWxsIC5jYXJkLWltYWdlIGltZywgLmNhcmQuaG9yaXpvbnRhbC5tZWRpdW0gLmNhcmQtaW1hZ2UgaW1nLCAuY2FyZC5ob3Jpem9udGFsLmxhcmdlIC5jYXJkLWltYWdlIGltZyB7CiAgaGVpZ2h0OiAxMDAlOwp9CgouY2FyZC5ob3Jpem9udGFsIC5jYXJkLWltYWdlIHsKICBtYXgtd2lkdGg6IDUwJTsKfQoKLmNhcmQuaG9yaXpvbnRhbCAuY2FyZC1pbWFnZSBpbWcgewogIGJvcmRlci1yYWRpdXM6IDJweCAwIDAgMnB4OwogIG1heC13aWR0aDogMTAwJTsKICB3aWR0aDogYXV0bzsKfQoKLmNhcmQuaG9yaXpvbnRhbCAuY2FyZC1zdGFja2VkIHsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgLXdlYmtpdC1mbGV4OiAxOwogICAgICAtbXMtZmxleDogMTsKICAgICAgICAgIGZsZXg6IDE7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY2FyZC5ob3Jpem9udGFsIC5jYXJkLXN0YWNrZWQgLmNhcmQtY29udGVudCB7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtd2Via2l0LWZsZXgtZ3JvdzogMTsKICAgICAgLW1zLWZsZXgtcG9zaXRpdmU6IDE7CiAgICAgICAgICBmbGV4LWdyb3c6IDE7Cn0KCi5jYXJkLnN0aWNreS1hY3Rpb24gLmNhcmQtYWN0aW9uIHsKICB6LWluZGV4OiAyOwp9CgouY2FyZC5zdGlja3ktYWN0aW9uIC5jYXJkLXJldmVhbCB7CiAgei1pbmRleDogMTsKICBwYWRkaW5nLWJvdHRvbTogNjRweDsKfQoKLmNhcmQgLmNhcmQtaW1hZ2UgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmNhcmQgLmNhcmQtaW1hZ2UgaW1nIHsKICBkaXNwbGF5OiBibG9jazsKICBib3JkZXItcmFkaXVzOiAycHggMnB4IDAgMDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbGVmdDogMDsKICByaWdodDogMDsKICB0b3A6IDA7CiAgYm90dG9tOiAwOwogIHdpZHRoOiAxMDAlOwp9CgouY2FyZCAuY2FyZC1pbWFnZSAuY2FyZC10aXRsZSB7CiAgY29sb3I6ICNmZmY7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMDsKICBsZWZ0OiAwOwogIG1heC13aWR0aDogMTAwJTsKICBwYWRkaW5nOiAyNHB4Owp9CgouY2FyZCAuY2FyZC1jb250ZW50IHsKICBwYWRkaW5nOiAyNHB4OwogIGJvcmRlci1yYWRpdXM6IDAgMCAycHggMnB4Owp9CgouY2FyZCAuY2FyZC1jb250ZW50IHAgewogIG1hcmdpbjogMDsKICBjb2xvcjogaW5oZXJpdDsKfQoKLmNhcmQgLmNhcmQtY29udGVudCAuY2FyZC10aXRsZSB7CiAgZGlzcGxheTogYmxvY2s7CiAgbGluZS1oZWlnaHQ6IDMycHg7CiAgbWFyZ2luLWJvdHRvbTogOHB4Owp9CgouY2FyZCAuY2FyZC1jb250ZW50IC5jYXJkLXRpdGxlIGkgewogIGxpbmUtaGVpZ2h0OiAzMnB4Owp9CgouY2FyZCAuY2FyZC1hY3Rpb24gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0OwogIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDE2MCwgMTYwLCAxNjAsIDAuMik7CiAgcGFkZGluZzogMTZweCAyNHB4Owp9CgouY2FyZCAuY2FyZC1hY3Rpb246bGFzdC1jaGlsZCB7CiAgYm9yZGVyLXJhZGl1czogMCAwIDJweCAycHg7Cn0KCi5jYXJkIC5jYXJkLWFjdGlvbiBhOm5vdCguYnRuKTpub3QoLmJ0bi1sYXJnZSk6bm90KC5idG4tbGFyZ2UpOm5vdCguYnRuLWZsb2F0aW5nKSB7CiAgY29sb3I6ICNmZmFiNDA7CiAgbWFyZ2luLXJpZ2h0OiAyNHB4OwogIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgLjNzIGVhc2U7CiAgdHJhbnNpdGlvbjogY29sb3IgLjNzIGVhc2U7CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKfQoKLmNhcmQgLmNhcmQtYWN0aW9uIGE6bm90KC5idG4pOm5vdCguYnRuLWxhcmdlKTpub3QoLmJ0bi1sYXJnZSk6bm90KC5idG4tZmxvYXRpbmcpOmhvdmVyIHsKICBjb2xvcjogI2ZmZDhhNjsKfQoKLmNhcmQgLmNhcmQtcmV2ZWFsIHsKICBwYWRkaW5nOiAyNHB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIHdpZHRoOiAxMDAlOwogIG92ZXJmbG93LXk6IGF1dG87CiAgbGVmdDogMDsKICB0b3A6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHotaW5kZXg6IDM7CiAgZGlzcGxheTogbm9uZTsKfQoKLmNhcmQgLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZGlzcGxheTogYmxvY2s7Cn0KCiN0b2FzdC1jb250YWluZXIgewogIGRpc3BsYXk6IGJsb2NrOwogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiAxMDAwMDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgewogICN0b2FzdC1jb250YWluZXIgewogICAgbWluLXdpZHRoOiAxMDAlOwogICAgYm90dG9tOiAwJTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAxcHgpIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogICN0b2FzdC1jb250YWluZXIgewogICAgbGVmdDogNSU7CiAgICBib3R0b206IDclOwogICAgbWF4LXdpZHRoOiA5MCU7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7CiAgI3RvYXN0LWNvbnRhaW5lciB7CiAgICB0b3A6IDEwJTsKICAgIHJpZ2h0OiA3JTsKICAgIG1heC13aWR0aDogODYlOwogIH0KfQoKLnRvYXN0IHsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgdG9wOiAzNXB4OwogIHdpZHRoOiBhdXRvOwogIGNsZWFyOiBib3RoOwogIG1hcmdpbi10b3A6IDEwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG1heC13aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87CiAgbWluLWhlaWdodDogNDhweDsKICBsaW5lLWhlaWdodDogMS41ZW07CiAgd29yZC1icmVhazogYnJlYWstYWxsOwogIGJhY2tncm91bmQtY29sb3I6ICMzMjMyMzI7CiAgcGFkZGluZzogMTBweCAyNXB4OwogIGZvbnQtc2l6ZTogMS4xcmVtOwogIGZvbnQtd2VpZ2h0OiAzMDA7CiAgY29sb3I6ICNmZmY7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtd2Via2l0LWFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LXBhY2s6IGp1c3RpZnk7CiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7CiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCi50b2FzdCAuYnRuLCAudG9hc3QgLmJ0bi1sYXJnZSwgLnRvYXN0IC5idG4tZmxhdCB7CiAgbWFyZ2luOiAwOwogIG1hcmdpbi1sZWZ0OiAzcmVtOwp9CgoudG9hc3Qucm91bmRlZCB7CiAgYm9yZGVyLXJhZGl1czogMjRweDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgewogIC50b2FzdCB7CiAgICB3aWR0aDogMTAwJTsKICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSBhbmQgKG1heC13aWR0aDogOTkycHgpIHsKICAudG9hc3QgewogICAgZmxvYXQ6IGxlZnQ7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7CiAgLnRvYXN0IHsKICAgIGZsb2F0OiByaWdodDsKICB9Cn0KCi50YWJzIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3cteDogYXV0bzsKICBvdmVyZmxvdy15OiBoaWRkZW47CiAgaGVpZ2h0OiA0OHB4OwogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgbWFyZ2luOiAwIGF1dG87CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLnRhYnMudGFicy10cmFuc3BhcmVudCB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi50YWJzLnRhYnMtdHJhbnNwYXJlbnQgLnRhYiBhLAoudGFicy50YWJzLXRyYW5zcGFyZW50IC50YWIuZGlzYWJsZWQgYSwKLnRhYnMudGFicy10cmFuc3BhcmVudCAudGFiLmRpc2FibGVkIGE6aG92ZXIgewogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7Cn0KCi50YWJzLnRhYnMtdHJhbnNwYXJlbnQgLnRhYiBhOmhvdmVyLAoudGFicy50YWJzLXRyYW5zcGFyZW50IC50YWIgYS5hY3RpdmUgewogIGNvbG9yOiAjZmZmOwp9CgoudGFicy50YWJzLXRyYW5zcGFyZW50IC5pbmRpY2F0b3IgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KCi50YWJzLnRhYnMtZml4ZWQtd2lkdGggewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4Owp9CgoudGFicy50YWJzLWZpeGVkLXdpZHRoIC50YWIgewogIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7CiAgLW1zLWZsZXgtcG9zaXRpdmU6IDE7CiAgZmxleC1ncm93OiAxOwp9CgoudGFicyAudGFiIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxpbmUtaGVpZ2h0OiA0OHB4OwogIGhlaWdodDogNDhweDsKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMDsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwp9CgoudGFicyAudGFiIGEgewogIGNvbG9yOiByZ2JhKDIzOCwgMTEwLCAxMTUsIDAuNyk7CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBhZGRpbmc6IDAgMjRweDsKICBmb250LXNpemU6IDE0cHg7CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICAtd2Via2l0LXRyYW5zaXRpb246IGNvbG9yIC4yOHMgZWFzZTsKICB0cmFuc2l0aW9uOiBjb2xvciAuMjhzIGVhc2U7Cn0KCi50YWJzIC50YWIgYTpob3ZlciwgLnRhYnMgLnRhYiBhLmFjdGl2ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgY29sb3I6ICNlZTZlNzM7Cn0KCi50YWJzIC50YWIuZGlzYWJsZWQgYSwKLnRhYnMgLnRhYi5kaXNhYmxlZCBhOmhvdmVyIHsKICBjb2xvcjogcmdiYSgyMzgsIDExMCwgMTE1LCAwLjcpOwogIGN1cnNvcjogZGVmYXVsdDsKfQoKLnRhYnMgLmluZGljYXRvciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMDsKICBoZWlnaHQ6IDJweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZiMmI1OwogIHdpbGwtY2hhbmdlOiBsZWZ0LCByaWdodDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC50YWJzIHsKICAgIGRpc3BsYXk6IC13ZWJraXQtYm94OwogICAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogICAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgICBkaXNwbGF5OiBmbGV4OwogIH0KICAudGFicyAudGFiIHsKICAgIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgICAtd2Via2l0LWZsZXgtZ3JvdzogMTsKICAgIC1tcy1mbGV4LXBvc2l0aXZlOiAxOwogICAgZmxleC1ncm93OiAxOwogIH0KICAudGFicyAudGFiIGEgewogICAgcGFkZGluZzogMCAxMnB4OwogIH0KfQoKLm1hdGVyaWFsLXRvb2x0aXAgewogIHBhZGRpbmc6IDEwcHggOHB4OwogIGZvbnQtc2l6ZTogMXJlbTsKICB6LWluZGV4OiAyMDAwOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlci1yYWRpdXM6IDJweDsKICBjb2xvcjogI2ZmZjsKICBtaW4taGVpZ2h0OiAzNnB4OwogIGxpbmUtaGVpZ2h0OiAxMjAlOwogIG9wYWNpdHk6IDA7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDRweCk7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBsZWZ0OiAwOwogIHRvcDogMDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0KCi5iYWNrZHJvcCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIG9wYWNpdHk6IDA7CiAgaGVpZ2h0OiA3cHg7CiAgd2lkdGg6IDE0cHg7CiAgYm9yZGVyLXJhZGl1czogMCAwIDUwJSA1MCU7CiAgYmFja2dyb3VuZC1jb2xvcjogIzMyMzIzMjsKICB6LWluZGV4OiAtMTsKICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSAwJTsKICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDUwJSAwJTsKICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0KCi5idG4sIC5idG4tbGFyZ2UsCi5idG4tZmxhdCB7CiAgYm9yZGVyOiBub25lOwogIGJvcmRlci1yYWRpdXM6IDJweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgaGVpZ2h0OiAzNnB4OwogIGxpbmUtaGVpZ2h0OiAzNnB4OwogIHBhZGRpbmc6IDAgMnJlbTsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLmJ0bi5kaXNhYmxlZCwgLmRpc2FibGVkLmJ0bi1sYXJnZSwKLmJ0bi1mbG9hdGluZy5kaXNhYmxlZCwKLmJ0bi1sYXJnZS5kaXNhYmxlZCwKLmJ0bi1mbGF0LmRpc2FibGVkLAouYnRuOmRpc2FibGVkLAouYnRuLWxhcmdlOmRpc2FibGVkLAouYnRuLWZsb2F0aW5nOmRpc2FibGVkLAouYnRuLWxhcmdlOmRpc2FibGVkLAouYnRuLWZsYXQ6ZGlzYWJsZWQsCi5idG5bZGlzYWJsZWRdLApbZGlzYWJsZWRdLmJ0bi1sYXJnZSwKLmJ0bi1mbG9hdGluZ1tkaXNhYmxlZF0sCi5idG4tbGFyZ2VbZGlzYWJsZWRdLAouYnRuLWZsYXRbZGlzYWJsZWRdIHsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjREZERkRGICFpbXBvcnRhbnQ7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsKICBjb2xvcjogIzlGOUY5RiAhaW1wb3J0YW50OwogIGN1cnNvcjogZGVmYXVsdDsKfQoKLmJ0bi5kaXNhYmxlZDpob3ZlciwgLmRpc2FibGVkLmJ0bi1sYXJnZTpob3ZlciwKLmJ0bi1mbG9hdGluZy5kaXNhYmxlZDpob3ZlciwKLmJ0bi1sYXJnZS5kaXNhYmxlZDpob3ZlciwKLmJ0bi1mbGF0LmRpc2FibGVkOmhvdmVyLAouYnRuOmRpc2FibGVkOmhvdmVyLAouYnRuLWxhcmdlOmRpc2FibGVkOmhvdmVyLAouYnRuLWZsb2F0aW5nOmRpc2FibGVkOmhvdmVyLAouYnRuLWxhcmdlOmRpc2FibGVkOmhvdmVyLAouYnRuLWZsYXQ6ZGlzYWJsZWQ6aG92ZXIsCi5idG5bZGlzYWJsZWRdOmhvdmVyLApbZGlzYWJsZWRdLmJ0bi1sYXJnZTpob3ZlciwKLmJ0bi1mbG9hdGluZ1tkaXNhYmxlZF06aG92ZXIsCi5idG4tbGFyZ2VbZGlzYWJsZWRdOmhvdmVyLAouYnRuLWZsYXRbZGlzYWJsZWRdOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjREZERkRGICFpbXBvcnRhbnQ7CiAgY29sb3I6ICM5RjlGOUYgIWltcG9ydGFudDsKfQoKLmJ0biwgLmJ0bi1sYXJnZSwKLmJ0bi1mbG9hdGluZywKLmJ0bi1sYXJnZSwKLmJ0bi1mbGF0IHsKICBmb250LXNpemU6IDFyZW07CiAgb3V0bGluZTogMDsKfQoKLmJ0biBpLCAuYnRuLWxhcmdlIGksCi5idG4tZmxvYXRpbmcgaSwKLmJ0bi1sYXJnZSBpLAouYnRuLWZsYXQgaSB7CiAgZm9udC1zaXplOiAxLjNyZW07CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7Cn0KCi5idG46Zm9jdXMsIC5idG4tbGFyZ2U6Zm9jdXMsCi5idG4tZmxvYXRpbmc6Zm9jdXMgewogIGJhY2tncm91bmQtY29sb3I6ICMxZDdkNzQ7Cn0KCi5idG4sIC5idG4tbGFyZ2UgewogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBjb2xvcjogI2ZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsZXR0ZXItc3BhY2luZzogLjVweDsKICAtd2Via2l0LXRyYW5zaXRpb246IC4ycyBlYXNlLW91dDsKICB0cmFuc2l0aW9uOiAuMnMgZWFzZS1vdXQ7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouYnRuOmhvdmVyLCAuYnRuLWxhcmdlOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmJiYmFkOwp9CgouYnRuLWZsb2F0aW5nIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgY29sb3I6ICNmZmY7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgei1pbmRleDogMTsKICB3aWR0aDogNDBweDsKICBoZWlnaHQ6IDQwcHg7CiAgbGluZS1oZWlnaHQ6IDQwcHg7CiAgcGFkZGluZzogMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICAtd2Via2l0LXRyYW5zaXRpb246IC4zczsKICB0cmFuc2l0aW9uOiAuM3M7CiAgY3Vyc29yOiBwb2ludGVyOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KCi5idG4tZmxvYXRpbmc6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7Cn0KCi5idG4tZmxvYXRpbmc6YmVmb3JlIHsKICBib3JkZXItcmFkaXVzOiAwOwp9CgouYnRuLWZsb2F0aW5nLmJ0bi1sYXJnZSB7CiAgd2lkdGg6IDU2cHg7CiAgaGVpZ2h0OiA1NnB4Owp9CgouYnRuLWZsb2F0aW5nLmJ0bi1sYXJnZS5oYWxmd2F5LWZhYiB7CiAgYm90dG9tOiAtMjhweDsKfQoKLmJ0bi1mbG9hdGluZy5idG4tbGFyZ2UgaSB7CiAgbGluZS1oZWlnaHQ6IDU2cHg7Cn0KCi5idG4tZmxvYXRpbmcuaGFsZndheS1mYWIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogMjRweDsKICBib3R0b206IC0yMHB4Owp9CgouYnRuLWZsb2F0aW5nLmhhbGZ3YXktZmFiLmxlZnQgewogIHJpZ2h0OiBhdXRvOwogIGxlZnQ6IDI0cHg7Cn0KCi5idG4tZmxvYXRpbmcgaSB7CiAgd2lkdGg6IGluaGVyaXQ7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2ZmZjsKICBmb250LXNpemU6IDEuNnJlbTsKICBsaW5lLWhlaWdodDogNDBweDsKfQoKYnV0dG9uLmJ0bi1mbG9hdGluZyB7CiAgYm9yZGVyOiBub25lOwp9CgouZml4ZWQtYWN0aW9uLWJ0biB7CiAgcG9zaXRpb246IGZpeGVkOwogIHJpZ2h0OiAyM3B4OwogIGJvdHRvbTogMjNweDsKICBwYWRkaW5nLXRvcDogMTVweDsKICBtYXJnaW4tYm90dG9tOiAwOwogIHotaW5kZXg6IDk5ODsKfQoKLmZpeGVkLWFjdGlvbi1idG4uYWN0aXZlIHVsIHsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwp9CgouZml4ZWQtYWN0aW9uLWJ0bi5ob3Jpem9udGFsIHsKICBwYWRkaW5nOiAwIDAgMCAxNXB4Owp9CgouZml4ZWQtYWN0aW9uLWJ0bi5ob3Jpem9udGFsIHVsIHsKICB0ZXh0LWFsaWduOiByaWdodDsKICByaWdodDogNjRweDsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICBoZWlnaHQ6IDEwMCU7CiAgbGVmdDogYXV0bzsKICB3aWR0aDogNTAwcHg7CiAgLyp3aWR0aCAxMDAlIG9ubHkgZ29lcyB0byB3aWR0aCBvZiBidXR0b24gY29udGFpbmVyICovCn0KCi5maXhlZC1hY3Rpb24tYnRuLmhvcml6b250YWwgdWwgbGkgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtYXJnaW46IDE1cHggMTVweCAwIDA7Cn0KCi5maXhlZC1hY3Rpb24tYnRuLnRvb2xiYXIgewogIHBhZGRpbmc6IDA7CiAgaGVpZ2h0OiA1NnB4Owp9CgouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyLmFjdGl2ZSA+IGEgaSB7CiAgb3BhY2l0eTogMDsKfQoKLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciB1bCB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgdG9wOiAwOwogIGJvdHRvbTogMDsKICB6LWluZGV4OiAxOwp9CgouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyIHVsIGxpIHsKICAtd2Via2l0LWJveC1mbGV4OiAxOwogIC13ZWJraXQtZmxleDogMTsKICAgICAgLW1zLWZsZXg6IDE7CiAgICAgICAgICBmbGV4OiAxOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtYXJnaW46IDA7CiAgaGVpZ2h0OiAxMDAlOwogIC13ZWJraXQtdHJhbnNpdGlvbjogbm9uZTsKICB0cmFuc2l0aW9uOiBub25lOwp9CgouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyIHVsIGxpIGEgewogIGRpc3BsYXk6IGJsb2NrOwogIG92ZXJmbG93OiBoaWRkZW47CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7CiAgICAgICAgICBib3gtc2hhZG93OiBub25lOwogIGNvbG9yOiAjZmZmOwogIGxpbmUtaGVpZ2h0OiA1NnB4OwogIHotaW5kZXg6IDE7Cn0KCi5maXhlZC1hY3Rpb24tYnRuLnRvb2xiYXIgdWwgbGkgYSBpIHsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKfQoKLmZpeGVkLWFjdGlvbi1idG4gdWwgewogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDY0cHg7CiAgbWFyZ2luOiAwOwogIHZpc2liaWxpdHk6IGhpZGRlbjsKfQoKLmZpeGVkLWFjdGlvbi1idG4gdWwgbGkgewogIG1hcmdpbi1ib3R0b206IDE1cHg7Cn0KCi5maXhlZC1hY3Rpb24tYnRuIHVsIGEuYnRuLWZsb2F0aW5nIHsKICBvcGFjaXR5OiAwOwp9CgouZml4ZWQtYWN0aW9uLWJ0biAuZmFiLWJhY2tkcm9wIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogLTE7CiAgd2lkdGg6IDQwcHg7CiAgaGVpZ2h0OiA0MHB4OwogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7Cn0KCi5idG4tZmxhdCB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBjb2xvcjogIzM0MzQzNDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4yczsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4yczsKfQoKLmJ0bi1mbGF0OmZvY3VzLCAuYnRuLWZsYXQ6aG92ZXIgewogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5idG4tZmxhdDpmb2N1cyB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpOwp9CgouYnRuLWZsYXQuZGlzYWJsZWQgewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNiM2IyYjIgIWltcG9ydGFudDsKICBjdXJzb3I6IGRlZmF1bHQ7Cn0KCi5idG4tbGFyZ2UgewogIGhlaWdodDogNTRweDsKICBsaW5lLWhlaWdodDogNTRweDsKfQoKLmJ0bi1sYXJnZSBpIHsKICBmb250LXNpemU6IDEuNnJlbTsKfQoKLmJ0bi1ibG9jayB7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi5kcm9wZG93bi1jb250ZW50IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIG1hcmdpbjogMDsKICBkaXNwbGF5OiBub25lOwogIG1pbi13aWR0aDogMTAwcHg7CiAgbWF4LWhlaWdodDogNjUwcHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKICBvcGFjaXR5OiAwOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTk7CiAgd2lsbC1jaGFuZ2U6IHdpZHRoLCBoZWlnaHQ7Cn0KCi5kcm9wZG93bi1jb250ZW50IGxpIHsKICBjbGVhcjogYm90aDsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgbWluLWhlaWdodDogNTBweDsKICBsaW5lLWhlaWdodDogMS41cmVtOwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGxlZnQ7CiAgdGV4dC10cmFuc2Zvcm06IG5vbmU7Cn0KCi5kcm9wZG93bi1jb250ZW50IGxpOmhvdmVyLCAuZHJvcGRvd24tY29udGVudCBsaS5hY3RpdmUsIC5kcm9wZG93bi1jb250ZW50IGxpLnNlbGVjdGVkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwp9CgouZHJvcGRvd24tY29udGVudCBsaS5hY3RpdmUuc2VsZWN0ZWQgewogIGJhY2tncm91bmQtY29sb3I6ICNlMWUxZTE7Cn0KCi5kcm9wZG93bi1jb250ZW50IGxpLmRpdmlkZXIgewogIG1pbi1oZWlnaHQ6IDA7CiAgaGVpZ2h0OiAxcHg7Cn0KCi5kcm9wZG93bi1jb250ZW50IGxpID4gYSwgLmRyb3Bkb3duLWNvbnRlbnQgbGkgPiBzcGFuIHsKICBmb250LXNpemU6IDE2cHg7CiAgY29sb3I6ICMyNmE2OWE7CiAgZGlzcGxheTogYmxvY2s7CiAgbGluZS1oZWlnaHQ6IDIycHg7CiAgcGFkZGluZzogMTRweCAxNnB4Owp9CgouZHJvcGRvd24tY29udGVudCBsaSA+IHNwYW4gPiBsYWJlbCB7CiAgdG9wOiAxcHg7CiAgbGVmdDogMDsKICBoZWlnaHQ6IDE4cHg7Cn0KCi5kcm9wZG93bi1jb250ZW50IGxpID4gYSA+IGkgewogIGhlaWdodDogaW5oZXJpdDsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICBmbG9hdDogbGVmdDsKICBtYXJnaW46IDAgMjRweCAwIDA7CiAgd2lkdGg6IDI0cHg7Cn0KCi5pbnB1dC1maWVsZC5jb2wgLmRyb3Bkb3duLWNvbnRlbnQgW3R5cGU9ImNoZWNrYm94Il0gKyBsYWJlbCB7CiAgdG9wOiAxcHg7CiAgbGVmdDogMDsKICBoZWlnaHQ6IDE4cHg7Cn0KCi8qIQogKiBXYXZlcyB2MC42LjAKICogaHR0cDovL2ZpYW4ubXkuaWQvV2F2ZXMKICoKICogQ29weXJpZ2h0IDIwMTQgQWxmaWFuYSBFLiBTaWJ1ZWEgYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9naXRodWIuY29tL2ZpYW5zL1dhdmVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UKICovCi53YXZlcy1lZmZlY3QgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG92ZXJmbG93OiBoaWRkZW47CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50OwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgei1pbmRleDogMTsKICAtd2Via2l0LXRyYW5zaXRpb246IC4zcyBlYXNlLW91dDsKICB0cmFuc2l0aW9uOiAuM3MgZWFzZS1vdXQ7Cn0KCi53YXZlcy1lZmZlY3QgLndhdmVzLXJpcHBsZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7CiAgbWFyZ2luLXRvcDogLTEwcHg7CiAgbWFyZ2luLWxlZnQ6IC0xMHB4OwogIG9wYWNpdHk6IDA7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuN3MgZWFzZS1vdXQ7CiAgdHJhbnNpdGlvbjogYWxsIDAuN3MgZWFzZS1vdXQ7CiAgLXdlYmtpdC10cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCAtd2Via2l0LXRyYW5zZm9ybTsKICB0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCAtd2Via2l0LXRyYW5zZm9ybTsKICB0cmFuc2l0aW9uLXByb3BlcnR5OiB0cmFuc2Zvcm0sIG9wYWNpdHk7CiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtLCBvcGFjaXR5LCAtd2Via2l0LXRyYW5zZm9ybTsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Cgoud2F2ZXMtZWZmZWN0LndhdmVzLWxpZ2h0IC53YXZlcy1yaXBwbGUgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40NSk7Cn0KCi53YXZlcy1lZmZlY3Qud2F2ZXMtcmVkIC53YXZlcy1yaXBwbGUgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ0LCA2NywgNTQsIDAuNyk7Cn0KCi53YXZlcy1lZmZlY3Qud2F2ZXMteWVsbG93IC53YXZlcy1yaXBwbGUgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyMzUsIDU5LCAwLjcpOwp9Cgoud2F2ZXMtZWZmZWN0LndhdmVzLW9yYW5nZSAud2F2ZXMtcmlwcGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMTUyLCAwLCAwLjcpOwp9Cgoud2F2ZXMtZWZmZWN0LndhdmVzLXB1cnBsZSAud2F2ZXMtcmlwcGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE1NiwgMzksIDE3NiwgMC43KTsKfQoKLndhdmVzLWVmZmVjdC53YXZlcy1ncmVlbiAud2F2ZXMtcmlwcGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDc2LCAxNzUsIDgwLCAwLjcpOwp9Cgoud2F2ZXMtZWZmZWN0LndhdmVzLXRlYWwgLndhdmVzLXJpcHBsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAxNTAsIDEzNiwgMC43KTsKfQoKLndhdmVzLWVmZmVjdCBpbnB1dFt0eXBlPSJidXR0b24iXSwgLndhdmVzLWVmZmVjdCBpbnB1dFt0eXBlPSJyZXNldCJdLCAud2F2ZXMtZWZmZWN0IGlucHV0W3R5cGU9InN1Ym1pdCJdIHsKICBib3JkZXI6IDA7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtc2l6ZTogaW5oZXJpdDsKICB0ZXh0LXRyYW5zZm9ybTogaW5oZXJpdDsKICBiYWNrZ3JvdW5kOiBub25lOwp9Cgoud2F2ZXMtZWZmZWN0IGltZyB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IC0xOwp9Cgoud2F2ZXMtbm90cmFuc2l0aW9uIHsKICAtd2Via2l0LXRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudDsKICB0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7Cn0KCi53YXZlcy1jaXJjbGUgewogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOwogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOwogIC13ZWJraXQtbWFzay1pbWFnZTogLXdlYmtpdC1yYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCB3aGl0ZSAxMDAlLCBibGFjayAxMDAlKTsKfQoKLndhdmVzLWlucHV0LXdyYXBwZXIgewogIGJvcmRlci1yYWRpdXM6IDAuMmVtOwogIHZlcnRpY2FsLWFsaWduOiBib3R0b207Cn0KCi53YXZlcy1pbnB1dC13cmFwcGVyIC53YXZlcy1idXR0b24taW5wdXQgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB6LWluZGV4OiAxOwp9Cgoud2F2ZXMtY2lyY2xlIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgd2lkdGg6IDIuNWVtOwogIGhlaWdodDogMi41ZW07CiAgbGluZS1oZWlnaHQ6IDIuNWVtOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICAtd2Via2l0LW1hc2staW1hZ2U6IG5vbmU7Cn0KCi53YXZlcy1ibG9jayB7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi8qIEZpcmVmb3ggQnVnOiBsaW5rIG5vdCB0cmlnZ2VyZWQgKi8KLndhdmVzLWVmZmVjdCAud2F2ZXMtcmlwcGxlIHsKICB6LWluZGV4OiAtMTsKfQoKLm1vZGFsIHsKICBkaXNwbGF5OiBub25lOwogIHBvc2l0aW9uOiBmaXhlZDsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgcGFkZGluZzogMDsKICBtYXgtaGVpZ2h0OiA3MCU7CiAgd2lkdGg6IDU1JTsKICBtYXJnaW46IGF1dG87CiAgb3ZlcmZsb3cteTogYXV0bzsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgd2lsbC1jaGFuZ2U6IHRvcCwgb3BhY2l0eTsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC5tb2RhbCB7CiAgICB3aWR0aDogODAlOwogIH0KfQoKLm1vZGFsIGgxLCAubW9kYWwgaDIsIC5tb2RhbCBoMywgLm1vZGFsIGg0IHsKICBtYXJnaW4tdG9wOiAwOwp9CgoubW9kYWwgLm1vZGFsLWNvbnRlbnQgewogIHBhZGRpbmc6IDI0cHg7Cn0KCi5tb2RhbCAubW9kYWwtY2xvc2UgewogIGN1cnNvcjogcG9pbnRlcjsKfQoKLm1vZGFsIC5tb2RhbC1mb290ZXIgewogIGJvcmRlci1yYWRpdXM6IDAgMCAycHggMnB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgcGFkZGluZzogNHB4IDZweDsKICBoZWlnaHQ6IDU2cHg7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCi5tb2RhbCAubW9kYWwtZm9vdGVyIC5idG4sIC5tb2RhbCAubW9kYWwtZm9vdGVyIC5idG4tbGFyZ2UsIC5tb2RhbCAubW9kYWwtZm9vdGVyIC5idG4tZmxhdCB7CiAgbWFyZ2luOiA2cHggMDsKfQoKLm1vZGFsLW92ZXJsYXkgewogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiA5OTk7CiAgdG9wOiAtMjUlOwogIGxlZnQ6IDA7CiAgYm90dG9tOiAwOwogIHJpZ2h0OiAwOwogIGhlaWdodDogMTI1JTsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kOiAjMDAwOwogIGRpc3BsYXk6IG5vbmU7CiAgd2lsbC1jaGFuZ2U6IG9wYWNpdHk7Cn0KCi5tb2RhbC5tb2RhbC1maXhlZC1mb290ZXIgewogIHBhZGRpbmc6IDA7CiAgaGVpZ2h0OiA3MCU7Cn0KCi5tb2RhbC5tb2RhbC1maXhlZC1mb290ZXIgLm1vZGFsLWNvbnRlbnQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDU2cHgpOwogIG1heC1oZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMCU7CiAgb3ZlcmZsb3cteTogYXV0bzsKfQoKLm1vZGFsLm1vZGFsLWZpeGVkLWZvb3RlciAubW9kYWwtZm9vdGVyIHsKICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDA7Cn0KCi5tb2RhbC5ib3R0b20tc2hlZXQgewogIHRvcDogYXV0bzsKICBib3R0b206IC0xMDAlOwogIG1hcmdpbjogMDsKICB3aWR0aDogMTAwJTsKICBtYXgtaGVpZ2h0OiA0NSU7CiAgYm9yZGVyLXJhZGl1czogMDsKICB3aWxsLWNoYW5nZTogYm90dG9tLCBvcGFjaXR5Owp9CgouY29sbGFwc2libGUgewogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGRkOwogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNkZGQ7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZGRkOwogIG1hcmdpbjogMC41cmVtIDAgMXJlbSAwOwp9CgouY29sbGFwc2libGUtaGVhZGVyIHsKICBkaXNwbGF5OiBibG9jazsKICBjdXJzb3I6IHBvaW50ZXI7CiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsKICBtaW4taGVpZ2h0OiAzcmVtOwogIGxpbmUtaGVpZ2h0OiAzcmVtOwogIHBhZGRpbmc6IDAgMXJlbTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOwp9CgouY29sbGFwc2libGUtaGVhZGVyIGkgewogIHdpZHRoOiAycmVtOwogIGZvbnQtc2l6ZTogMS42cmVtOwogIGxpbmUtaGVpZ2h0OiAzcmVtOwogIGRpc3BsYXk6IGJsb2NrOwogIGZsb2F0OiBsZWZ0OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tcmlnaHQ6IDFyZW07Cn0KCi5jb2xsYXBzaWJsZS1ib2R5IHsKICBkaXNwbGF5OiBub25lOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgcGFkZGluZzogMnJlbTsKfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZSwKLnNpZGUtbmF2LmZpeGVkIC5jb2xsYXBzaWJsZSB7CiAgYm9yZGVyOiBub25lOwogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5zaWRlLW5hdiAuY29sbGFwc2libGUgbGksCi5zaWRlLW5hdi5maXhlZCAuY29sbGFwc2libGUgbGkgewogIHBhZGRpbmc6IDA7Cn0KCi5zaWRlLW5hdiAuY29sbGFwc2libGUtaGVhZGVyLAouc2lkZS1uYXYuZml4ZWQgLmNvbGxhcHNpYmxlLWhlYWRlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiBub25lOwogIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogIGhlaWdodDogaW5oZXJpdDsKICBwYWRkaW5nOiAwIDE2cHg7Cn0KCi5zaWRlLW5hdiAuY29sbGFwc2libGUtaGVhZGVyOmhvdmVyLAouc2lkZS1uYXYuZml4ZWQgLmNvbGxhcHNpYmxlLWhlYWRlcjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsKfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZS1oZWFkZXIgaSwKLnNpZGUtbmF2LmZpeGVkIC5jb2xsYXBzaWJsZS1oZWFkZXIgaSB7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7Cn0KCi5zaWRlLW5hdiAuY29sbGFwc2libGUtYm9keSwKLnNpZGUtbmF2LmZpeGVkIC5jb2xsYXBzaWJsZS1ib2R5IHsKICBib3JkZXI6IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZS1ib2R5IGxpIGEsCi5zaWRlLW5hdi5maXhlZCAuY29sbGFwc2libGUtYm9keSBsaSBhIHsKICBwYWRkaW5nOiAwIDIzLjVweCAwIDMxcHg7Cn0KCi5jb2xsYXBzaWJsZS5wb3BvdXQgewogIGJvcmRlcjogbm9uZTsKICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7CiAgICAgICAgICBib3gtc2hhZG93OiBub25lOwp9CgouY29sbGFwc2libGUucG9wb3V0ID4gbGkgewogIC13ZWJraXQtYm94LXNoYWRvdzogMCAycHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KSwgMCAycHggMTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpLCAwIDJweCAxMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTsKICBtYXJnaW46IDAgMjRweDsKICAtd2Via2l0LXRyYW5zaXRpb246IG1hcmdpbiAwLjM1cyBjdWJpYy1iZXppZXIoMC4yNSwgMC40NiwgMC40NSwgMC45NCk7CiAgdHJhbnNpdGlvbjogbWFyZ2luIDAuMzVzIGN1YmljLWJlemllcigwLjI1LCAwLjQ2LCAwLjQ1LCAwLjk0KTsKfQoKLmNvbGxhcHNpYmxlLnBvcG91dCA+IGxpLmFjdGl2ZSB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDVweCAxMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE4KSwgMCA0cHggMTVweCAwIHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDVweCAxMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE4KSwgMCA0cHggMTVweCAwIHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgbWFyZ2luOiAxNnB4IDA7Cn0KCi5jaGlwIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgaGVpZ2h0OiAzMnB4OwogIGZvbnQtc2l6ZTogMTNweDsKICBmb250LXdlaWdodDogNTAwOwogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7CiAgbGluZS1oZWlnaHQ6IDMycHg7CiAgcGFkZGluZzogMCAxMnB4OwogIGJvcmRlci1yYWRpdXM6IDE2cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U0ZTRlNDsKICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgbWFyZ2luLXJpZ2h0OiA1cHg7Cn0KCi5jaGlwID4gaW1nIHsKICBmbG9hdDogbGVmdDsKICBtYXJnaW46IDAgOHB4IDAgLTEycHg7CiAgaGVpZ2h0OiAzMnB4OwogIHdpZHRoOiAzMnB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKfQoKLmNoaXAgLmNsb3NlIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZmxvYXQ6IHJpZ2h0OwogIGZvbnQtc2l6ZTogMTZweDsKICBsaW5lLWhlaWdodDogMzJweDsKICBwYWRkaW5nLWxlZnQ6IDhweDsKfQoKLmNoaXBzIHsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM5ZTllOWU7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsKICBtYXJnaW46IDAgMCAyMHB4IDA7CiAgbWluLWhlaWdodDogNDVweDsKICBvdXRsaW5lOiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIC4zczsKICB0cmFuc2l0aW9uOiBhbGwgLjNzOwp9CgouY2hpcHMuZm9jdXMgewogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMjZhNjlhOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAxcHggMCAwICMyNmE2OWE7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAwIDAgIzI2YTY5YTsKfQoKLmNoaXBzOmhvdmVyIHsKICBjdXJzb3I6IHRleHQ7Cn0KCi5jaGlwcyAuY2hpcC5zZWxlY3RlZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICBjb2xvcjogI2ZmZjsKfQoKLmNoaXBzIC5pbnB1dCB7CiAgYmFja2dyb3VuZDogbm9uZTsKICBib3JkZXI6IDA7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgZm9udC1zaXplOiAxcmVtOwogIGhlaWdodDogM3JlbTsKICBsaW5lLWhlaWdodDogMzJweDsKICBvdXRsaW5lOiAwOwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgd2lkdGg6IDEyMHB4ICFpbXBvcnRhbnQ7Cn0KCi5jaGlwcyAuaW5wdXQ6Zm9jdXMgewogIGJvcmRlcjogMCAhaW1wb3J0YW50OwogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9CgouY2hpcHMgLmF1dG9jb21wbGV0ZS1jb250ZW50IHsKICBtYXJnaW4tdG9wOiAwOwp9CgoucHJlZml4IH4gLmNoaXBzIHsKICBtYXJnaW4tbGVmdDogM3JlbTsKICB3aWR0aDogOTIlOwogIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtKTsKfQoKLmNoaXBzOmVtcHR5IH4gbGFiZWwgewogIGZvbnQtc2l6ZTogMC44cmVtOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNDAlKTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTQwJSk7Cn0KCi5tYXRlcmlhbGJveGVkIHsKICBkaXNwbGF5OiBibG9jazsKICBjdXJzb3I6IC13ZWJraXQtem9vbS1pbjsKICBjdXJzb3I6IHpvb20taW47CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAuNHM7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuNHM7CiAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47Cn0KCi5tYXRlcmlhbGJveGVkOmhvdmVyOm5vdCguYWN0aXZlKSB7CiAgb3BhY2l0eTogLjg7Cn0KCi5tYXRlcmlhbGJveGVkLmFjdGl2ZSB7CiAgY3Vyc29yOiAtd2Via2l0LXpvb20tb3V0OwogIGN1cnNvcjogem9vbS1vdXQ7Cn0KCiNtYXRlcmlhbGJveC1vdmVybGF5IHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwOwogIHJpZ2h0OiAwOwogIGJvdHRvbTogMDsKICBsZWZ0OiAwOwogIGJhY2tncm91bmQtY29sb3I6ICMyOTI5Mjk7CiAgei1pbmRleDogMTAwMDsKICB3aWxsLWNoYW5nZTogb3BhY2l0eTsKfQoKLm1hdGVyaWFsYm94LWNhcHRpb24gewogIHBvc2l0aW9uOiBmaXhlZDsKICBkaXNwbGF5OiBub25lOwogIGNvbG9yOiAjZmZmOwogIGxpbmUtaGVpZ2h0OiA1MHB4OwogIGJvdHRvbTogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAwJSAxNSU7CiAgaGVpZ2h0OiA1MHB4OwogIHotaW5kZXg6IDEwMDA7CiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7Cn0KCnNlbGVjdDpmb2N1cyB7CiAgb3V0bGluZTogMXB4IHNvbGlkICNjOWYzZWY7Cn0KCmJ1dHRvbjpmb2N1cyB7CiAgb3V0bGluZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmFiN2E5Owp9CgpsYWJlbCB7CiAgZm9udC1zaXplOiAwLjhyZW07CiAgY29sb3I6ICM5ZTllOWU7Cn0KCi8qIFRleHQgSW5wdXRzICsgVGV4dGFyZWEKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLyogU3R5bGUgUGxhY2Vob2xkZXJzICovCjo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7CiAgY29sb3I6ICNkMWQxZDE7Cn0KCjotbW96LXBsYWNlaG9sZGVyIHsKICAvKiBGaXJlZm94IDE4LSAqLwogIGNvbG9yOiAjZDFkMWQxOwp9Cgo6Oi1tb3otcGxhY2Vob2xkZXIgewogIC8qIEZpcmVmb3ggMTkrICovCiAgY29sb3I6ICNkMWQxZDE7Cn0KCjotbXMtaW5wdXQtcGxhY2Vob2xkZXIgewogIGNvbG9yOiAjZDFkMWQxOwp9CgovKiBUZXh0IGlucHV0cyAqLwppbnB1dDpub3QoW3R5cGVdKSwKaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCksCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpLAppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpLAppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCksCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLAppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpLAppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpLAppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYSB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiBub25lOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjOWU5ZTllOwogIGJvcmRlci1yYWRpdXM6IDA7CiAgb3V0bGluZTogbm9uZTsKICBoZWlnaHQ6IDNyZW07CiAgd2lkdGg6IDEwMCU7CiAgZm9udC1zaXplOiAxcmVtOwogIG1hcmdpbjogMCAwIDIwcHggMDsKICBwYWRkaW5nOiAwOwogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuM3M7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3M7Cn0KCmlucHV0Om5vdChbdHlwZV0pOmRpc2FibGVkLCBpbnB1dDpub3QoW3R5cGVdKVtyZWFkb25seT0icmVhZG9ubHkiXSwKaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLAppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLAppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLAppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLAppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmRpc2FibGVkLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYVtyZWFkb25seT0icmVhZG9ubHkiXSB7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNik7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgppbnB1dDpub3QoW3R5cGVdKTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dDpub3QoW3R5cGVdKVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLAppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQgKyBsYWJlbCwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLAppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLAppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQgKyBsYWJlbCwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpkaXNhYmxlZCArIGxhYmVsLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI2KTsKfQoKaW5wdXQ6bm90KFt0eXBlXSk6Zm9jdXM6bm90KFtyZWFkb25seV0pLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLAppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwKaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwKaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLAppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwKdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWE6Zm9jdXM6bm90KFtyZWFkb25seV0pIHsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzI2YTY5YTsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDAgMCAjMjZhNjlhOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMCAwICMyNmE2OWE7Cn0KCmlucHV0Om5vdChbdHlwZV0pOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLAppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwKaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLAppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsIHsKICBjb2xvcjogIzI2YTY5YTsKfQoKaW5wdXQ6bm90KFt0eXBlXSkudmFsaWQsIGlucHV0Om5vdChbdHlwZV0pOmZvY3VzLnZhbGlkLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQsCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQsCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkLAppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkLAppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCwKdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEudmFsaWQsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzLnZhbGlkIHsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzRDQUY1MDsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDAgMCAjNENBRjUwOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMCAwICM0Q0FGNTA7Cn0KCmlucHV0Om5vdChbdHlwZV0pLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0Om5vdChbdHlwZV0pOmZvY3VzLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLnZhbGlkICsgbGFiZWw6YWZ0ZXIsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzLnZhbGlkICsgbGFiZWw6YWZ0ZXIgewogIGNvbnRlbnQ6IGF0dHIoZGF0YS1zdWNjZXNzKTsKICBjb2xvcjogIzRDQUY1MDsKICBvcGFjaXR5OiAxOwp9CgppbnB1dDpub3QoW3R5cGVdKS5pbnZhbGlkLCBpbnB1dDpub3QoW3R5cGVdKTpmb2N1cy5pbnZhbGlkLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkLAppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQsCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkLAppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQsCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQsCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkLAppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkLAppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkLAppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQsCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYS5pbnZhbGlkLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpmb2N1cy5pbnZhbGlkIHsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Y0NDMzNjsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDAgMCAjRjQ0MzM2OwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMCAwICNGNDQzMzY7Cn0KCmlucHV0Om5vdChbdHlwZV0pLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXQ6bm90KFt0eXBlXSk6Zm9jdXMuaW52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkICsgbGFiZWw6YWZ0ZXIsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLmludmFsaWQgKyBsYWJlbDphZnRlciwKdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWE6Zm9jdXMuaW52YWxpZCArIGxhYmVsOmFmdGVyIHsKICBjb250ZW50OiBhdHRyKGRhdGEtZXJyb3IpOwogIGNvbG9yOiAjRjQ0MzM2OwogIG9wYWNpdHk6IDE7Cn0KCmlucHV0Om5vdChbdHlwZV0pLnZhbGlkYXRlICsgbGFiZWwsCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkYXRlICsgbGFiZWwsCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLAppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwKaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLAppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLAppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLAppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwKaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkYXRlICsgbGFiZWwsCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwKaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLAppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkYXRlICsgbGFiZWwsCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLnZhbGlkYXRlICsgbGFiZWwgewogIHdpZHRoOiAxMDAlOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgppbnB1dDpub3QoW3R5cGVdKSArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsOmFmdGVyLAppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwKaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsOmFmdGVyLAp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYSArIGxhYmVsOmFmdGVyIHsKICBkaXNwbGF5OiBibG9jazsKICBjb250ZW50OiAiIjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA2MHB4OwogIGxlZnQ6IDA7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXRyYW5zaXRpb246IC4ycyBvcGFjaXR5IGVhc2Utb3V0LCAuMnMgY29sb3IgZWFzZS1vdXQ7CiAgdHJhbnNpdGlvbjogLjJzIG9wYWNpdHkgZWFzZS1vdXQsIC4ycyBjb2xvciBlYXNlLW91dDsKfQoKLmlucHV0LWZpZWxkIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbWFyZ2luLXRvcDogMXJlbTsKfQoKLmlucHV0LWZpZWxkLmlubGluZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgbWFyZ2luLWxlZnQ6IDVweDsKfQoKLmlucHV0LWZpZWxkLmlubGluZSBpbnB1dCwKLmlucHV0LWZpZWxkLmlubGluZSAuc2VsZWN0LWRyb3Bkb3duIHsKICBtYXJnaW4tYm90dG9tOiAxcmVtOwp9CgouaW5wdXQtZmllbGQuY29sIGxhYmVsIHsKICBsZWZ0OiAwLjc1cmVtOwp9CgouaW5wdXQtZmllbGQuY29sIC5wcmVmaXggfiBsYWJlbCwKLmlucHV0LWZpZWxkLmNvbCAucHJlZml4IH4gLnZhbGlkYXRlIH4gbGFiZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtIC0gMS41cmVtKTsKfQoKLmlucHV0LWZpZWxkIGxhYmVsIHsKICBjb2xvcjogIzllOWU5ZTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwLjhyZW07CiAgbGVmdDogMDsKICBmb250LXNpemU6IDFyZW07CiAgY3Vyc29yOiB0ZXh0OwogIC13ZWJraXQtdHJhbnNpdGlvbjogLjJzIGVhc2Utb3V0OwogIHRyYW5zaXRpb246IC4ycyBlYXNlLW91dDsKICB0ZXh0LWFsaWduOiBpbml0aWFsOwp9CgouaW5wdXQtZmllbGQgbGFiZWw6bm90KC5sYWJlbC1pY29uKS5hY3RpdmUgewogIGZvbnQtc2l6ZTogMC44cmVtOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNDAlKTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTQwJSk7Cn0KCi5pbnB1dC1maWVsZCAucHJlZml4IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDNyZW07CiAgZm9udC1zaXplOiAycmVtOwogIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgLjJzOwogIHRyYW5zaXRpb246IGNvbG9yIC4yczsKfQoKLmlucHV0LWZpZWxkIC5wcmVmaXguYWN0aXZlIHsKICBjb2xvcjogIzI2YTY5YTsKfQoKLmlucHV0LWZpZWxkIC5wcmVmaXggfiBpbnB1dCwKLmlucHV0LWZpZWxkIC5wcmVmaXggfiB0ZXh0YXJlYSwKLmlucHV0LWZpZWxkIC5wcmVmaXggfiBsYWJlbCwKLmlucHV0LWZpZWxkIC5wcmVmaXggfiAudmFsaWRhdGUgfiBsYWJlbCwKLmlucHV0LWZpZWxkIC5wcmVmaXggfiAuYXV0b2NvbXBsZXRlLWNvbnRlbnQgewogIG1hcmdpbi1sZWZ0OiAzcmVtOwogIHdpZHRoOiA5MiU7CiAgd2lkdGg6IGNhbGMoMTAwJSAtIDNyZW0pOwp9CgouaW5wdXQtZmllbGQgLnByZWZpeCB+IGxhYmVsIHsKICBtYXJnaW4tbGVmdDogM3JlbTsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogIC5pbnB1dC1maWVsZCAucHJlZml4IH4gaW5wdXQgewogICAgd2lkdGg6IDg2JTsKICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtKTsKICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNjAwcHgpIHsKICAuaW5wdXQtZmllbGQgLnByZWZpeCB+IGlucHV0IHsKICAgIHdpZHRoOiA4MCU7CiAgICB3aWR0aDogY2FsYygxMDAlIC0gM3JlbSk7CiAgfQp9CgovKiBTZWFyY2ggRmllbGQgKi8KLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXSB7CiAgZGlzcGxheTogYmxvY2s7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgcGFkZGluZy1sZWZ0OiA0cmVtOwogIHdpZHRoOiBjYWxjKDEwMCUgLSA0cmVtKTsKfQoKLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXTpmb2N1cyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXI6IDA7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsKICBjb2xvcjogIzQ0NDsKfQoKLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXTpmb2N1cyArIGxhYmVsIGksCi5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXNlYXJjaF06Zm9jdXMgfiAubWRpLW5hdmlnYXRpb24tY2xvc2UsCi5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXNlYXJjaF06Zm9jdXMgfiAubWF0ZXJpYWwtaWNvbnMgewogIGNvbG9yOiAjNDQ0Owp9CgouaW5wdXQtZmllbGQgaW5wdXRbdHlwZT1zZWFyY2hdICsgbGFiZWwgewogIGxlZnQ6IDFyZW07Cn0KCi5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXNlYXJjaF0gfiAubWRpLW5hdmlnYXRpb24tY2xvc2UsCi5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXNlYXJjaF0gfiAubWF0ZXJpYWwtaWNvbnMgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgcmlnaHQ6IDFyZW07CiAgY29sb3I6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXNpemU6IDJyZW07CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAuM3MgY29sb3I7CiAgdHJhbnNpdGlvbjogLjNzIGNvbG9yOwp9CgovKiBUZXh0YXJlYSAqLwp0ZXh0YXJlYSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAzcmVtOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9Cgp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYSB7CiAgb3ZlcmZsb3cteTogaGlkZGVuOwogIC8qIHByZXZlbnRzIHNjcm9sbCBiYXIgZmxhc2ggKi8KICBwYWRkaW5nOiAuOHJlbSAwIDEuNnJlbSAwOwogIC8qIHByZXZlbnRzIHRleHQganVtcCBvbiBFbnRlciBrZXlwcmVzcyAqLwogIHJlc2l6ZTogbm9uZTsKICBtaW4taGVpZ2h0OiAzcmVtOwp9CgouaGlkZGVuZGl2IHsKICBkaXNwbGF5OiBub25lOwogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7CiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsKICAvKiBmdXR1cmUgdmVyc2lvbiBvZiBkZXByZWNhdGVkICd3b3JkLXdyYXAnICovCiAgcGFkZGluZy10b3A6IDEuMnJlbTsKICAvKiBwcmV2ZW50cyB0ZXh0IGp1bXAgb24gRW50ZXIga2V5cHJlc3MgKi8KICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwp9CgovKiBBdXRvY29tcGxldGUgKi8KLmF1dG9jb21wbGV0ZS1jb250ZW50IHsKICBtYXJnaW4tdG9wOiAtMjBweDsKICBkaXNwbGF5OiBibG9jazsKICBvcGFjaXR5OiAxOwogIHBvc2l0aW9uOiBzdGF0aWM7Cn0KCi5hdXRvY29tcGxldGUtY29udGVudCBsaSAuaGlnaGxpZ2h0IHsKICBjb2xvcjogIzQ0NDsKfQoKLmF1dG9jb21wbGV0ZS1jb250ZW50IGxpIGltZyB7CiAgaGVpZ2h0OiA0MHB4OwogIHdpZHRoOiA0MHB4OwogIG1hcmdpbjogNXB4IDE1cHg7Cn0KCi8qIFJhZGlvIEJ1dHRvbnMKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KW3R5cGU9InJhZGlvIl06bm90KDpjaGVja2VkKSwKW3R5cGU9InJhZGlvIl06Y2hlY2tlZCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC05OTk5cHg7CiAgb3BhY2l0eTogMDsKfQoKW3R5cGU9InJhZGlvIl06bm90KDpjaGVja2VkKSArIGxhYmVsLApbdHlwZT0icmFkaW8iXTpjaGVja2VkICsgbGFiZWwgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBwYWRkaW5nLWxlZnQ6IDM1cHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDI1cHg7CiAgbGluZS1oZWlnaHQ6IDI1cHg7CiAgZm9udC1zaXplOiAxcmVtOwogIC13ZWJraXQtdHJhbnNpdGlvbjogLjI4cyBlYXNlOwogIHRyYW5zaXRpb246IC4yOHMgZWFzZTsKICAvKiB3ZWJraXQgKGtvbnF1ZXJvcikgYnJvd3NlcnMgKi8KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwp9CgpbdHlwZT0icmFkaW8iXSArIGxhYmVsOmJlZm9yZSwKW3R5cGU9InJhZGlvIl0gKyBsYWJlbDphZnRlciB7CiAgY29udGVudDogJyc7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDA7CiAgdG9wOiAwOwogIG1hcmdpbjogNHB4OwogIHdpZHRoOiAxNnB4OwogIGhlaWdodDogMTZweDsKICB6LWluZGV4OiAwOwogIC13ZWJraXQtdHJhbnNpdGlvbjogLjI4cyBlYXNlOwogIHRyYW5zaXRpb246IC4yOHMgZWFzZTsKfQoKLyogVW5jaGVja2VkIHN0eWxlcyAqLwpbdHlwZT0icmFkaW8iXTpub3QoOmNoZWNrZWQpICsgbGFiZWw6YmVmb3JlLApbdHlwZT0icmFkaW8iXTpub3QoOmNoZWNrZWQpICsgbGFiZWw6YWZ0ZXIsClt0eXBlPSJyYWRpbyJdOmNoZWNrZWQgKyBsYWJlbDpiZWZvcmUsClt0eXBlPSJyYWRpbyJdOmNoZWNrZWQgKyBsYWJlbDphZnRlciwKW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6Y2hlY2tlZCArIGxhYmVsOmJlZm9yZSwKW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6Y2hlY2tlZCArIGxhYmVsOmFmdGVyIHsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KClt0eXBlPSJyYWRpbyJdOm5vdCg6Y2hlY2tlZCkgKyBsYWJlbDpiZWZvcmUsClt0eXBlPSJyYWRpbyJdOm5vdCg6Y2hlY2tlZCkgKyBsYWJlbDphZnRlciB7CiAgYm9yZGVyOiAycHggc29saWQgIzVhNWE1YTsKfQoKW3R5cGU9InJhZGlvIl06bm90KDpjaGVja2VkKSArIGxhYmVsOmFmdGVyIHsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOwp9CgovKiBDaGVja2VkIHN0eWxlcyAqLwpbdHlwZT0icmFkaW8iXTpjaGVja2VkICsgbGFiZWw6YmVmb3JlIHsKICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsKfQoKW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIGxhYmVsOmFmdGVyLApbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpjaGVja2VkICsgbGFiZWw6YmVmb3JlLApbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpjaGVja2VkICsgbGFiZWw6YWZ0ZXIgewogIGJvcmRlcjogMnB4IHNvbGlkICMyNmE2OWE7Cn0KClt0eXBlPSJyYWRpbyJdOmNoZWNrZWQgKyBsYWJlbDphZnRlciwKW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6Y2hlY2tlZCArIGxhYmVsOmFmdGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwp9CgpbdHlwZT0icmFkaW8iXTpjaGVja2VkICsgbGFiZWw6YWZ0ZXIgewogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxLjAyKTsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wMik7Cn0KCi8qIFJhZGlvIFdpdGggZ2FwICovClt0eXBlPSJyYWRpbyJdLndpdGgtZ2FwOmNoZWNrZWQgKyBsYWJlbDphZnRlciB7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDAuNSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuNSk7Cn0KCi8qIEZvY3VzZWQgc3R5bGVzICovClt0eXBlPSJyYWRpbyJdLnRhYmJlZDpmb2N1cyArIGxhYmVsOmJlZm9yZSB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwp9CgovKiBEaXNhYmxlZCBSYWRpbyBXaXRoIGdhcCAqLwpbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpkaXNhYmxlZDpjaGVja2VkICsgbGFiZWw6YmVmb3JlIHsKICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgpbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpkaXNhYmxlZDpjaGVja2VkICsgbGFiZWw6YWZ0ZXIgewogIGJvcmRlcjogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgovKiBEaXNhYmxlZCBzdHlsZSAqLwpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpub3QoOmNoZWNrZWQpICsgbGFiZWw6YmVmb3JlLApbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpjaGVja2VkICsgbGFiZWw6YmVmb3JlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNik7Cn0KClt0eXBlPSJyYWRpbyJdOmRpc2FibGVkICsgbGFiZWwgewogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpub3QoOmNoZWNrZWQpICsgbGFiZWw6YmVmb3JlIHsKICBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNik7Cn0KClt0eXBlPSJyYWRpbyJdOmRpc2FibGVkOmNoZWNrZWQgKyBsYWJlbDphZnRlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI2KTsKICBib3JkZXItY29sb3I6ICNCREJEQkQ7Cn0KCi8qIENoZWNrYm94ZXMKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLyogQ1VTVE9NIENTUyBDSEVDS0JPWEVTICovCmZvcm0gcCB7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Cgpmb3JtIHA6bGFzdC1jaGlsZCB7CiAgbWFyZ2luLWJvdHRvbTogMDsKfQoKLyogUmVtb3ZlIGRlZmF1bHQgY2hlY2tib3ggKi8KW3R5cGU9ImNoZWNrYm94Il06bm90KDpjaGVja2VkKSwKW3R5cGU9ImNoZWNrYm94Il06Y2hlY2tlZCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC05OTk5cHg7CiAgb3BhY2l0eTogMDsKfQoKW3R5cGU9ImNoZWNrYm94Il0gewogIC8qIGNoZWNrYm94IGFzcGVjdCAqLwp9CgpbdHlwZT0iY2hlY2tib3giXSArIGxhYmVsIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgcGFkZGluZy1sZWZ0OiAzNXB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgaGVpZ2h0OiAyNXB4OwogIGxpbmUtaGVpZ2h0OiAyNXB4OwogIGZvbnQtc2l6ZTogMXJlbTsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC8qIHdlYmtpdCAoc2FmYXJpLCBjaHJvbWUpIGJyb3dzZXJzICovCiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAvKiBtb3ppbGxhIGJyb3dzZXJzICovCiAgLWtodG1sLXVzZXItc2VsZWN0OiBub25lOwogIC8qIHdlYmtpdCAoa29ucXVlcm9yKSBicm93c2VycyAqLwogIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAvKiBJRTEwKyAqLwp9CgpbdHlwZT0iY2hlY2tib3giXSArIGxhYmVsOmJlZm9yZSwKW3R5cGU9ImNoZWNrYm94Il06bm90KC5maWxsZWQtaW4pICsgbGFiZWw6YWZ0ZXIgewogIGNvbnRlbnQ6ICcnOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMThweDsKICBoZWlnaHQ6IDE4cHg7CiAgei1pbmRleDogMDsKICBib3JkZXI6IDJweCBzb2xpZCAjNWE1YTVhOwogIGJvcmRlci1yYWRpdXM6IDFweDsKICBtYXJnaW4tdG9wOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAuMnM7CiAgdHJhbnNpdGlvbjogLjJzOwp9CgpbdHlwZT0iY2hlY2tib3giXTpub3QoLmZpbGxlZC1pbikgKyBsYWJlbDphZnRlciB7CiAgYm9yZGVyOiAwOwogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7Cn0KClt0eXBlPSJjaGVja2JveCJdOm5vdCg6Y2hlY2tlZCk6ZGlzYWJsZWQgKyBsYWJlbDpiZWZvcmUgewogIGJvcmRlcjogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgpbdHlwZT0iY2hlY2tib3giXS50YWJiZWQ6Zm9jdXMgKyBsYWJlbDphZnRlciB7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEpOwogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICBib3JkZXI6IDA7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KClt0eXBlPSJjaGVja2JveCJdOmNoZWNrZWQgKyBsYWJlbDpiZWZvcmUgewogIHRvcDogLTRweDsKICBsZWZ0OiAtNXB4OwogIHdpZHRoOiAxMnB4OwogIGhlaWdodDogMjJweDsKICBib3JkZXItdG9wOiAycHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjMjZhNjlhOwogIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMjZhNjlhOwogIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNDBkZWcpOwogICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNDBkZWcpOwogIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgICAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOwogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOwp9CgpbdHlwZT0iY2hlY2tib3giXTpjaGVja2VkOmRpc2FibGVkICsgbGFiZWw6YmVmb3JlIHsKICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjYpOwogIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjYpOwp9CgovKiBJbmRldGVybWluYXRlIGNoZWNrYm94ICovClt0eXBlPSJjaGVja2JveCJdOmluZGV0ZXJtaW5hdGUgKyBsYWJlbDpiZWZvcmUgewogIHRvcDogLTExcHg7CiAgbGVmdDogLTEycHg7CiAgd2lkdGg6IDEwcHg7CiAgaGVpZ2h0OiAyMnB4OwogIGJvcmRlci10b3A6IG5vbmU7CiAgYm9yZGVyLWxlZnQ6IG5vbmU7CiAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgIzI2YTY5YTsKICBib3JkZXItYm90dG9tOiBub25lOwogIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwogICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwogIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgICAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOwogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOwp9CgpbdHlwZT0iY2hlY2tib3giXTppbmRldGVybWluYXRlOmRpc2FibGVkICsgbGFiZWw6YmVmb3JlIHsKICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjYpOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW4gKyBsYWJlbDphZnRlciB7CiAgYm9yZGVyLXJhZGl1czogMnB4Owp9CgpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW4gKyBsYWJlbDpiZWZvcmUsClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbiArIGxhYmVsOmFmdGVyIHsKICBjb250ZW50OiAnJzsKICBsZWZ0OiAwOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAvKiAuMXMgZGVsYXkgaXMgZm9yIGNoZWNrIGFuaW1hdGlvbiAqLwogIC13ZWJraXQtdHJhbnNpdGlvbjogYm9yZGVyIC4yNXMsIGJhY2tncm91bmQtY29sb3IgLjI1cywgd2lkdGggLjIwcyAuMXMsIGhlaWdodCAuMjBzIC4xcywgdG9wIC4yMHMgLjFzLCBsZWZ0IC4yMHMgLjFzOwogIHRyYW5zaXRpb246IGJvcmRlciAuMjVzLCBiYWNrZ3JvdW5kLWNvbG9yIC4yNXMsIHdpZHRoIC4yMHMgLjFzLCBoZWlnaHQgLjIwcyAuMXMsIHRvcCAuMjBzIC4xcywgbGVmdCAuMjBzIC4xczsKICB6LWluZGV4OiAxOwp9CgpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW46bm90KDpjaGVja2VkKSArIGxhYmVsOmJlZm9yZSB7CiAgd2lkdGg6IDA7CiAgaGVpZ2h0OiAwOwogIGJvcmRlcjogM3B4IHNvbGlkIHRyYW5zcGFyZW50OwogIGxlZnQ6IDZweDsKICB0b3A6IDEwcHg7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZVooMzdkZWcpOwogIHRyYW5zZm9ybTogcm90YXRlWigzN2RlZyk7CiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAyMCUgNDAlOwogIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTsKfQoKW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOm5vdCg6Y2hlY2tlZCkgKyBsYWJlbDphZnRlciB7CiAgaGVpZ2h0OiAyMHB4OwogIHdpZHRoOiAyMHB4OwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlcjogMnB4IHNvbGlkICM1YTVhNWE7CiAgdG9wOiAwcHg7CiAgei1pbmRleDogMDsKfQoKW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmNoZWNrZWQgKyBsYWJlbDpiZWZvcmUgewogIHRvcDogMDsKICBsZWZ0OiAxcHg7CiAgd2lkdGg6IDhweDsKICBoZWlnaHQ6IDEzcHg7CiAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1sZWZ0OiAycHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgI2ZmZjsKICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjsKICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlWigzN2RlZyk7CiAgdHJhbnNmb3JtOiByb3RhdGVaKDM3ZGVnKTsKICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTsKICB0cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDEwMCU7Cn0KClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbjpjaGVja2VkICsgbGFiZWw6YWZ0ZXIgewogIHRvcDogMDsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7CiAgYm9yZGVyOiAycHggc29saWQgIzI2YTY5YTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwogIHotaW5kZXg6IDA7Cn0KClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbi50YWJiZWQ6Zm9jdXMgKyBsYWJlbDphZnRlciB7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIGJvcmRlci1jb2xvcjogIzVhNWE1YTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbi50YWJiZWQ6Y2hlY2tlZDpmb2N1cyArIGxhYmVsOmFmdGVyIHsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICBib3JkZXItY29sb3I6ICMyNmE2OWE7Cn0KClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbjpkaXNhYmxlZDpub3QoOmNoZWNrZWQpICsgbGFiZWw6YmVmb3JlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsKfQoKW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmRpc2FibGVkOm5vdCg6Y2hlY2tlZCkgKyBsYWJlbDphZnRlciB7CiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjQkRCREJEOwp9CgpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW46ZGlzYWJsZWQ6Y2hlY2tlZCArIGxhYmVsOmJlZm9yZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbjpkaXNhYmxlZDpjaGVja2VkICsgbGFiZWw6YWZ0ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNCREJEQkQ7CiAgYm9yZGVyLWNvbG9yOiAjQkRCREJEOwp9CgovKiBTd2l0Y2gKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLnN3aXRjaCwKLnN3aXRjaCAqIHsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLWtodG1sLXVzZXItc2VsZWN0OiBub25lOwogIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKfQoKLnN3aXRjaCBsYWJlbCB7CiAgY3Vyc29yOiBwb2ludGVyOwp9Cgouc3dpdGNoIGxhYmVsIGlucHV0W3R5cGU9Y2hlY2tib3hdIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAwOwogIGhlaWdodDogMDsKfQoKLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgLmxldmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjODRjN2MxOwp9Cgouc3dpdGNoIGxhYmVsIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQgKyAubGV2ZXI6YmVmb3JlLCAuc3dpdGNoIGxhYmVsIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQgKyAubGV2ZXI6YWZ0ZXIgewogIGxlZnQ6IDE4cHg7Cn0KCi5zd2l0Y2ggbGFiZWwgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCArIC5sZXZlcjphZnRlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKfQoKLnN3aXRjaCBsYWJlbCAubGV2ZXIgewogIGNvbnRlbnQ6ICIiOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDM2cHg7CiAgaGVpZ2h0OiAxNHB4OwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zOCk7CiAgYm9yZGVyLXJhZGl1czogMTVweDsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3MgZWFzZTsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3MgZWFzZTsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIG1hcmdpbjogMCAxNnB4Owp9Cgouc3dpdGNoIGxhYmVsIC5sZXZlcjpiZWZvcmUsIC5zd2l0Y2ggbGFiZWwgLmxldmVyOmFmdGVyIHsKICBjb250ZW50OiAiIjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgbGVmdDogMDsKICB0b3A6IC0zcHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBsZWZ0IDAuM3MgZWFzZSwgYmFja2dyb3VuZCAuM3MgZWFzZSwgLXdlYmtpdC1ib3gtc2hhZG93IDAuMXMgZWFzZSwgLXdlYmtpdC10cmFuc2Zvcm0gLjFzIGVhc2U7CiAgdHJhbnNpdGlvbjogbGVmdCAwLjNzIGVhc2UsIGJhY2tncm91bmQgLjNzIGVhc2UsIC13ZWJraXQtYm94LXNoYWRvdyAwLjFzIGVhc2UsIC13ZWJraXQtdHJhbnNmb3JtIC4xcyBlYXNlOwogIHRyYW5zaXRpb246IGxlZnQgMC4zcyBlYXNlLCBiYWNrZ3JvdW5kIC4zcyBlYXNlLCBib3gtc2hhZG93IDAuMXMgZWFzZSwgdHJhbnNmb3JtIC4xcyBlYXNlOwogIHRyYW5zaXRpb246IGxlZnQgMC4zcyBlYXNlLCBiYWNrZ3JvdW5kIC4zcyBlYXNlLCBib3gtc2hhZG93IDAuMXMgZWFzZSwgdHJhbnNmb3JtIC4xcyBlYXNlLCAtd2Via2l0LWJveC1zaGFkb3cgMC4xcyBlYXNlLCAtd2Via2l0LXRyYW5zZm9ybSAuMXMgZWFzZTsKfQoKLnN3aXRjaCBsYWJlbCAubGV2ZXI6YmVmb3JlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDM4LCAxNjYsIDE1NCwgMC4xNSk7Cn0KCi5zd2l0Y2ggbGFiZWwgLmxldmVyOmFmdGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjFGMUYxOwogIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIDAuMiksIDBweCAycHggMnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwcHggMXB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEyKTsKICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjIpLCAwcHggMnB4IDJweCAwcHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMHB4IDFweCA1cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xMik7Cn0KCmlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQ6bm90KDpkaXNhYmxlZCkgfiAubGV2ZXI6YWN0aXZlOjpiZWZvcmUsCmlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQ6bm90KDpkaXNhYmxlZCkudGFiYmVkOmZvY3VzIH4gLmxldmVyOjpiZWZvcmUgewogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgyLjQpOwogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgyLjQpOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzgsIDE2NiwgMTU0LCAwLjE1KTsKfQoKaW5wdXRbdHlwZT1jaGVja2JveF06bm90KDpkaXNhYmxlZCkgfiAubGV2ZXI6YWN0aXZlOmJlZm9yZSwKaW5wdXRbdHlwZT1jaGVja2JveF06bm90KDpkaXNhYmxlZCkudGFiYmVkOmZvY3VzIH4gLmxldmVyOjpiZWZvcmUgewogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgyLjQpOwogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgyLjQpOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wOCk7Cn0KCi5zd2l0Y2ggaW5wdXRbdHlwZT1jaGVja2JveF1bZGlzYWJsZWRdICsgLmxldmVyIHsKICBjdXJzb3I6IGRlZmF1bHQ7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEyKTsKfQoKLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XVtkaXNhYmxlZF0gKyAubGV2ZXI6YWZ0ZXIsCi5zd2l0Y2ggbGFiZWwgaW5wdXRbdHlwZT1jaGVja2JveF1bZGlzYWJsZWRdOmNoZWNrZWQgKyAubGV2ZXI6YWZ0ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNCREJEQkQ7Cn0KCi8qIFNlbGVjdCBGaWVsZAogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwpzZWxlY3QgewogIGRpc3BsYXk6IG5vbmU7Cn0KCnNlbGVjdC5icm93c2VyLWRlZmF1bHQgewogIGRpc3BsYXk6IGJsb2NrOwp9CgpzZWxlY3QgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiA1cHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2YyZjJmMjsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgaGVpZ2h0OiAzcmVtOwp9Cgouc2VsZWN0LWxhYmVsIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7Cn0KCi5zZWxlY3Qtd3JhcHBlciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Cgouc2VsZWN0LXdyYXBwZXIgaW5wdXQuc2VsZWN0LWRyb3Bkb3duIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlcjogbm9uZTsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzllOWU5ZTsKICBvdXRsaW5lOiBub25lOwogIGhlaWdodDogM3JlbTsKICBsaW5lLWhlaWdodDogM3JlbTsKICB3aWR0aDogMTAwJTsKICBmb250LXNpemU6IDFyZW07CiAgbWFyZ2luOiAwIDAgMjBweCAwOwogIHBhZGRpbmc6IDA7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi5zZWxlY3Qtd3JhcHBlciBzcGFuLmNhcmV0IHsKICBjb2xvcjogaW5pdGlhbDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDA7CiAgdG9wOiAwOwogIGJvdHRvbTogMDsKICBoZWlnaHQ6IDEwcHg7CiAgbWFyZ2luOiBhdXRvIDA7CiAgZm9udC1zaXplOiAxMHB4OwogIGxpbmUtaGVpZ2h0OiAxMHB4Owp9Cgouc2VsZWN0LXdyYXBwZXIgc3Bhbi5jYXJldC5kaXNhYmxlZCB7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNik7Cn0KCi5zZWxlY3Qtd3JhcHBlciArIGxhYmVsIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAtMTRweDsKICBmb250LXNpemU6IDAuOHJlbTsKfQoKc2VsZWN0OmRpc2FibGVkIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpOwp9Cgouc2VsZWN0LXdyYXBwZXIgaW5wdXQuc2VsZWN0LWRyb3Bkb3duOmRpc2FibGVkIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpOwogIGN1cnNvcjogZGVmYXVsdDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC8qIHdlYmtpdCAoc2FmYXJpLCBjaHJvbWUpIGJyb3dzZXJzICovCiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAvKiBtb3ppbGxhIGJyb3dzZXJzICovCiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIC8qIElFMTArICovCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKfQoKLnNlbGVjdC13cmFwcGVyIGkgewogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KCi5zZWxlY3QtZHJvcGRvd24gbGkuZGlzYWJsZWQsCi5zZWxlY3QtZHJvcGRvd24gbGkuZGlzYWJsZWQgPiBzcGFuLAouc2VsZWN0LWRyb3Bkb3duIGxpLm9wdGdyb3VwIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgoucHJlZml4IH4gLnNlbGVjdC13cmFwcGVyIHsKICBtYXJnaW4tbGVmdDogM3JlbTsKICB3aWR0aDogOTIlOwogIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtKTsKfQoKLnByZWZpeCB+IGxhYmVsIHsKICBtYXJnaW4tbGVmdDogM3JlbTsKfQoKLnNlbGVjdC1kcm9wZG93biBsaSBpbWcgewogIGhlaWdodDogNDBweDsKICB3aWR0aDogNDBweDsKICBtYXJnaW46IDVweCAxNXB4OwogIGZsb2F0OiByaWdodDsKfQoKLnNlbGVjdC1kcm9wZG93biBsaS5vcHRncm91cCB7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7Cn0KCi5zZWxlY3QtZHJvcGRvd24gbGkub3B0Z3JvdXAuc2VsZWN0ZWQgPiBzcGFuIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpOwp9Cgouc2VsZWN0LWRyb3Bkb3duIGxpLm9wdGdyb3VwID4gc3BhbiB7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTsKfQoKLnNlbGVjdC1kcm9wZG93biBsaS5vcHRncm91cCB+IGxpLm9wdGdyb3VwLW9wdGlvbiB7CiAgcGFkZGluZy1sZWZ0OiAxcmVtOwp9CgovKiBGaWxlIElucHV0CiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi5maWxlLWZpZWxkIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5maWxlLWZpZWxkIC5maWxlLXBhdGgtd3JhcHBlciB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwYWRkaW5nLWxlZnQ6IDEwcHg7Cn0KCi5maWxlLWZpZWxkIGlucHV0LmZpbGUtcGF0aCB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5maWxlLWZpZWxkIC5idG4sIC5maWxlLWZpZWxkIC5idG4tbGFyZ2UgewogIGZsb2F0OiBsZWZ0OwogIGhlaWdodDogM3JlbTsKICBsaW5lLWhlaWdodDogM3JlbTsKfQoKLmZpbGUtZmllbGQgc3BhbiB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouZmlsZS1maWVsZCBpbnB1dFt0eXBlPWZpbGVdIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIHJpZ2h0OiAwOwogIGxlZnQ6IDA7CiAgYm90dG9tOiAwOwogIHdpZHRoOiAxMDAlOwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwOwogIGZvbnQtc2l6ZTogMjBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgb3BhY2l0eTogMDsKICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7Cn0KCi8qIFJhbmdlCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi5yYW5nZS1maWVsZCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgppbnB1dFt0eXBlPXJhbmdlXSwKaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgewogIGN1cnNvcjogcG9pbnRlcjsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IG5vbmU7CiAgb3V0bGluZTogbm9uZTsKICB3aWR0aDogMTAwJTsKICBtYXJnaW46IDE1cHggMDsKICBwYWRkaW5nOiAwOwp9CgppbnB1dFt0eXBlPXJhbmdlXTpmb2N1cyB7CiAgb3V0bGluZTogbm9uZTsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDEwcHg7CiAgbGVmdDogMDsKICBib3JkZXI6IG5vbmU7CiAgaGVpZ2h0OiAwOwogIHdpZHRoOiAwOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwogIG1hcmdpbi1sZWZ0OiA3cHg7CiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOwogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7CiAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpOwp9CgppbnB1dFt0eXBlPXJhbmdlXSArIC50aHVtYiAudmFsdWUgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAzMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogIzI2YTY5YTsKICBmb250LXNpemU6IDA7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7CiAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7Cn0KCmlucHV0W3R5cGU9cmFuZ2VdICsgLnRodW1iLmFjdGl2ZSB7CiAgYm9yZGVyLXJhZGl1czogNTAlIDUwJSA1MCUgMDsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIuYWN0aXZlIC52YWx1ZSB7CiAgY29sb3I6ICNmZmY7CiAgbWFyZ2luLWxlZnQ6IC0xcHg7CiAgbWFyZ2luLXRvcDogOHB4OwogIGZvbnQtc2l6ZTogMTBweDsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gewogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQoKaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHsKICBoZWlnaHQ6IDNweDsKICBiYWNrZ3JvdW5kOiAjYzJjMGMyOwogIGJvcmRlcjogbm9uZTsKfQoKaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXRodW1iIHsKICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgYm9yZGVyOiBub25lOwogIGhlaWdodDogMTRweDsKICB3aWR0aDogMTRweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7CiAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOwogIG1hcmdpbjogLTVweCAwIDAgMDsKICAtd2Via2l0LXRyYW5zaXRpb246IC4zczsKICB0cmFuc2l0aW9uOiAuM3M7Cn0KCmlucHV0W3R5cGU9cmFuZ2VdOmZvY3VzOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7CiAgYmFja2dyb3VuZDogI2NjYzsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gewogIC8qIGZpeCBmb3IgRkYgdW5hYmxlIHRvIGFwcGx5IGZvY3VzIHN0eWxlIGJ1ZyAgKi8KICBib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTsKICAvKnJlcXVpcmVkIGZvciBwcm9wZXIgdHJhY2sgc2l6aW5nIGluIEZGKi8KfQoKaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdHJhY2sgewogIGhlaWdodDogM3B4OwogIGJhY2tncm91bmQ6ICNkZGQ7CiAgYm9yZGVyOiBub25lOwp9CgppbnB1dFt0eXBlPXJhbmdlXTo6LW1vei1yYW5nZS10aHVtYiB7CiAgYm9yZGVyOiBub25lOwogIGhlaWdodDogMTRweDsKICB3aWR0aDogMTRweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgYmFja2dyb3VuZDogIzI2YTY5YTsKICBtYXJnaW4tdG9wOiAtNXB4Owp9CgppbnB1dFt0eXBlPXJhbmdlXTotbW96LWZvY3VzcmluZyB7CiAgb3V0bGluZTogMXB4IHNvbGlkICNmZmY7CiAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7Cn0KCmlucHV0W3R5cGU9cmFuZ2VdOmZvY3VzOjotbW96LXJhbmdlLXRyYWNrIHsKICBiYWNrZ3JvdW5kOiAjY2NjOwp9CgppbnB1dFt0eXBlPXJhbmdlXTo6LW1zLXRyYWNrIHsKICBoZWlnaHQ6IDNweDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlci13aWR0aDogNnB4IDA7CiAgLypyZW1vdmUgZGVmYXVsdCB0aWNrIG1hcmtzKi8KICBjb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCmlucHV0W3R5cGU9cmFuZ2VdOjotbXMtZmlsbC1sb3dlciB7CiAgYmFja2dyb3VuZDogIzc3NzsKfQoKaW5wdXRbdHlwZT1yYW5nZV06Oi1tcy1maWxsLXVwcGVyIHsKICBiYWNrZ3JvdW5kOiAjZGRkOwp9CgppbnB1dFt0eXBlPXJhbmdlXTo6LW1zLXRodW1iIHsKICBib3JkZXI6IG5vbmU7CiAgaGVpZ2h0OiAxNHB4OwogIHdpZHRoOiAxNHB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBiYWNrZ3JvdW5kOiAjMjZhNjlhOwp9CgppbnB1dFt0eXBlPXJhbmdlXTpmb2N1czo6LW1zLWZpbGwtbG93ZXIgewogIGJhY2tncm91bmQ6ICM4ODg7Cn0KCmlucHV0W3R5cGU9cmFuZ2VdOmZvY3VzOjotbXMtZmlsbC11cHBlciB7CiAgYmFja2dyb3VuZDogI2NjYzsKfQoKLyoqKioqKioqKioqKioqKgogICAgTmF2IExpc3QKKioqKioqKioqKioqKioqLwoudGFibGUtb2YtY29udGVudHMuZml4ZWQgewogIHBvc2l0aW9uOiBmaXhlZDsKfQoKLnRhYmxlLW9mLWNvbnRlbnRzIGxpIHsKICBwYWRkaW5nOiAycHggMDsKfQoKLnRhYmxlLW9mLWNvbnRlbnRzIGEgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBmb250LXdlaWdodDogMzAwOwogIGNvbG9yOiAjNzU3NTc1OwogIHBhZGRpbmctbGVmdDogMjBweDsKICBoZWlnaHQ6IDEuNXJlbTsKICBsaW5lLWhlaWdodDogMS41cmVtOwogIGxldHRlci1zcGFjaW5nOiAuNDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi50YWJsZS1vZi1jb250ZW50cyBhOmhvdmVyIHsKICBjb2xvcjogI2E4YThhODsKICBwYWRkaW5nLWxlZnQ6IDE5cHg7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWU2ZTczOwp9CgoudGFibGUtb2YtY29udGVudHMgYS5hY3RpdmUgewogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgcGFkZGluZy1sZWZ0OiAxOHB4OwogIGJvcmRlci1sZWZ0OiAycHggc29saWQgI2VlNmU3MzsKfQoKLnNpZGUtbmF2IHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgd2lkdGg6IDMwMHB4OwogIGxlZnQ6IDA7CiAgdG9wOiAwOwogIG1hcmdpbjogMDsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOwogIGhlaWdodDogMTAwJTsKICBoZWlnaHQ6IGNhbGMoMTAwJSArIDYwcHgpOwogIGhlaWdodDogLW1vei1jYWxjKDEwMCUpOwogIHBhZGRpbmctYm90dG9tOiA2MHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgei1pbmRleDogOTk5OwogIG92ZXJmbG93LXk6IGF1dG87CiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsKICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTA1JSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwNSUpOwp9Cgouc2lkZS1uYXYucmlnaHQtYWxpZ25lZCB7CiAgcmlnaHQ6IDA7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7CiAgbGVmdDogYXV0bzsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsKfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZSB7CiAgbWFyZ2luOiAwOwp9Cgouc2lkZS1uYXYgbGkgewogIGZsb2F0OiBub25lOwogIGxpbmUtaGVpZ2h0OiA0OHB4Owp9Cgouc2lkZS1uYXYgbGkuYWN0aXZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9Cgouc2lkZS1uYXYgbGkgPiBhIHsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsKICBkaXNwbGF5OiBibG9jazsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBoZWlnaHQ6IDQ4cHg7CiAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgcGFkZGluZzogMCAzMnB4Owp9Cgouc2lkZS1uYXYgbGkgPiBhOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9Cgouc2lkZS1uYXYgbGkgPiBhLmJ0biwgLnNpZGUtbmF2IGxpID4gYS5idG4tbGFyZ2UsIC5zaWRlLW5hdiBsaSA+IGEuYnRuLWxhcmdlLCAuc2lkZS1uYXYgbGkgPiBhLmJ0bi1mbGF0LCAuc2lkZS1uYXYgbGkgPiBhLmJ0bi1mbG9hdGluZyB7CiAgbWFyZ2luOiAxMHB4IDE1cHg7Cn0KCi5zaWRlLW5hdiBsaSA+IGEuYnRuLCAuc2lkZS1uYXYgbGkgPiBhLmJ0bi1sYXJnZSwgLnNpZGUtbmF2IGxpID4gYS5idG4tbGFyZ2UsIC5zaWRlLW5hdiBsaSA+IGEuYnRuLWZsb2F0aW5nIHsKICBjb2xvcjogI2ZmZjsKfQoKLnNpZGUtbmF2IGxpID4gYS5idG4tZmxhdCB7CiAgY29sb3I6ICMzNDM0MzQ7Cn0KCi5zaWRlLW5hdiBsaSA+IGEuYnRuOmhvdmVyLCAuc2lkZS1uYXYgbGkgPiBhLmJ0bi1sYXJnZTpob3ZlciwgLnNpZGUtbmF2IGxpID4gYS5idG4tbGFyZ2U6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICMyYmJiYWQ7Cn0KCi5zaWRlLW5hdiBsaSA+IGEuYnRuLWZsb2F0aW5nOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOwp9Cgouc2lkZS1uYXYgbGkgPiBhID4gaSwKLnNpZGUtbmF2IGxpID4gYSA+IFtjbGFzc149Im1kaS0iXSwgLnNpZGUtbmF2IGxpID4gYSBsaSA+IGEgPiBbY2xhc3MqPSJtZGktIl0sCi5zaWRlLW5hdiBsaSA+IGEgPiBpLm1hdGVyaWFsLWljb25zIHsKICBmbG9hdDogbGVmdDsKICBoZWlnaHQ6IDQ4cHg7CiAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgbWFyZ2luOiAwIDMycHggMCAwOwogIHdpZHRoOiAyNHB4OwogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNTQpOwp9Cgouc2lkZS1uYXYgLmRpdmlkZXIgewogIG1hcmdpbjogOHB4IDAgMCAwOwp9Cgouc2lkZS1uYXYgLnN1YmhlYWRlciB7CiAgY3Vyc29yOiBpbml0aWFsOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNTQpOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNTAwOwogIGxpbmUtaGVpZ2h0OiA0OHB4Owp9Cgouc2lkZS1uYXYgLnN1YmhlYWRlcjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5zaWRlLW5hdiAudXNlci12aWV3LAouc2lkZS1uYXYgLnVzZXJWaWV3IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgcGFkZGluZzogMzJweCAzMnB4IDA7CiAgbWFyZ2luLWJvdHRvbTogOHB4Owp9Cgouc2lkZS1uYXYgLnVzZXItdmlldyA+IGEsCi5zaWRlLW5hdiAudXNlclZpZXcgPiBhIHsKICBoZWlnaHQ6IGF1dG87CiAgcGFkZGluZzogMDsKfQoKLnNpZGUtbmF2IC51c2VyLXZpZXcgPiBhOmhvdmVyLAouc2lkZS1uYXYgLnVzZXJWaWV3ID4gYTpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5zaWRlLW5hdiAudXNlci12aWV3IC5iYWNrZ3JvdW5kLAouc2lkZS1uYXYgLnVzZXJWaWV3IC5iYWNrZ3JvdW5kIHsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogLTE7Cn0KCi5zaWRlLW5hdiAudXNlci12aWV3IC5jaXJjbGUsIC5zaWRlLW5hdiAudXNlci12aWV3IC5uYW1lLCAuc2lkZS1uYXYgLnVzZXItdmlldyAuZW1haWwsCi5zaWRlLW5hdiAudXNlclZpZXcgLmNpcmNsZSwKLnNpZGUtbmF2IC51c2VyVmlldyAubmFtZSwKLnNpZGUtbmF2IC51c2VyVmlldyAuZW1haWwgewogIGRpc3BsYXk6IGJsb2NrOwp9Cgouc2lkZS1uYXYgLnVzZXItdmlldyAuY2lyY2xlLAouc2lkZS1uYXYgLnVzZXJWaWV3IC5jaXJjbGUgewogIGhlaWdodDogNjRweDsKICB3aWR0aDogNjRweDsKfQoKLnNpZGUtbmF2IC51c2VyLXZpZXcgLm5hbWUsCi5zaWRlLW5hdiAudXNlci12aWV3IC5lbWFpbCwKLnNpZGUtbmF2IC51c2VyVmlldyAubmFtZSwKLnNpZGUtbmF2IC51c2VyVmlldyAuZW1haWwgewogIGZvbnQtc2l6ZTogMTRweDsKICBsaW5lLWhlaWdodDogMjRweDsKfQoKLnNpZGUtbmF2IC51c2VyLXZpZXcgLm5hbWUsCi5zaWRlLW5hdiAudXNlclZpZXcgLm5hbWUgewogIG1hcmdpbi10b3A6IDE2cHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKLnNpZGUtbmF2IC51c2VyLXZpZXcgLmVtYWlsLAouc2lkZS1uYXYgLnVzZXJWaWV3IC5lbWFpbCB7CiAgcGFkZGluZy1ib3R0b206IDE2cHg7CiAgZm9udC13ZWlnaHQ6IDQwMDsKfQoKLmRyYWctdGFyZ2V0IHsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwcHg7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMDsKICB6LWluZGV4OiA5OTg7Cn0KCi5zaWRlLW5hdi5maXhlZCB7CiAgbGVmdDogMDsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICBwb3NpdGlvbjogZml4ZWQ7Cn0KCi5zaWRlLW5hdi5maXhlZC5yaWdodC1hbGlnbmVkIHsKICByaWdodDogMDsKICBsZWZ0OiBhdXRvOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7CiAgLnNpZGUtbmF2LmZpeGVkIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDUlKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDUlKTsKICB9CiAgLnNpZGUtbmF2LmZpeGVkLnJpZ2h0LWFsaWduZWQgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDUlKTsKICB9CiAgLnNpZGUtbmF2IGEgewogICAgcGFkZGluZzogMCAxNnB4OwogIH0KICAuc2lkZS1uYXYgLnVzZXItdmlldywKICAuc2lkZS1uYXYgLnVzZXJWaWV3IHsKICAgIHBhZGRpbmc6IDE2cHggMTZweCAwOwogIH0KfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZS1ib2R5ID4gdWw6bm90KC5jb2xsYXBzaWJsZSkgPiBsaS5hY3RpdmUsCi5zaWRlLW5hdi5maXhlZCAuY29sbGFwc2libGUtYm9keSA+IHVsOm5vdCguY29sbGFwc2libGUpID4gbGkuYWN0aXZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWU2ZTczOwp9Cgouc2lkZS1uYXYgLmNvbGxhcHNpYmxlLWJvZHkgPiB1bDpub3QoLmNvbGxhcHNpYmxlKSA+IGxpLmFjdGl2ZSBhLAouc2lkZS1uYXYuZml4ZWQgLmNvbGxhcHNpYmxlLWJvZHkgPiB1bDpub3QoLmNvbGxhcHNpYmxlKSA+IGxpLmFjdGl2ZSBhIHsKICBjb2xvcjogI2ZmZjsKfQoKLnNpZGUtbmF2IC5jb2xsYXBzaWJsZS1ib2R5IHsKICBwYWRkaW5nOiAwOwp9Cgojc2lkZW5hdi1vdmVybGF5IHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgaGVpZ2h0OiAxMjB2aDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgei1pbmRleDogOTk3OwogIHdpbGwtY2hhbmdlOiBvcGFjaXR5Owp9CgovKgogICAgQGxpY2Vuc2UKICAgIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0CiAgICBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dAogICAgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAgICBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbwogICAgc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQKICovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyogU1RZTEVTIEZPUiBUSEUgU1BJTk5FUiAqLwovKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qCiAqIENvbnN0YW50czoKICogICAgICBTVFJPS0VXSURUSCA9IDNweAogKiAgICAgIEFSQ1NJWkUgICAgID0gMjcwIGRlZ3JlZXMgKGFtb3VudCBvZiBjaXJjbGUgdGhlIGFyYyB0YWtlcyB1cCkKICogICAgICBBUkNUSU1FICAgICA9IDEzMzNtcyAodGltZSBpdCB0YWtlcyB0byBleHBhbmQgYW5kIGNvbnRyYWN0IGFyYykKICogICAgICBBUkNTVEFSVFJPVCA9IDIxNiBkZWdyZWVzIChob3cgbXVjaCB0aGUgc3RhcnQgbG9jYXRpb24gb2YgdGhlIGFyYwogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkIHJvdGF0ZSBlYWNoIHRpbWUsIDIxNiBnaXZlcyB1cyBhCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1IHBvaW50ZWQgc3RhciBzaGFwZSAoaXQncyAzNjAvNSAqIDMpLgogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yIGEgNyBwb2ludGVkIHN0YXIsIHdlIG1pZ2h0IGRvCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAzNjAvNyAqIDMgPSAxNTQuMjg2KQogKiAgICAgIENPTlRBSU5FUldJRFRIID0gMjhweAogKiAgICAgIFNIUklOS19USU1FID0gNDAwbXMKICovCi5wcmVsb2FkZXItd3JhcHBlciB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB3aWR0aDogNTBweDsKICBoZWlnaHQ6IDUwcHg7Cn0KCi5wcmVsb2FkZXItd3JhcHBlci5zbWFsbCB7CiAgd2lkdGg6IDM2cHg7CiAgaGVpZ2h0OiAzNnB4Owp9CgoucHJlbG9hZGVyLXdyYXBwZXIuYmlnIHsKICB3aWR0aDogNjRweDsKICBoZWlnaHQ6IDY0cHg7Cn0KCi5wcmVsb2FkZXItd3JhcHBlci5hY3RpdmUgewogIC8qIGR1cmF0aW9uOiAzNjAgKiBBUkNUSU1FIC8gKEFSQ1NUQVJUUk9UICsgKDM2MC1BUkNTSVpFKSkgKi8KICAtd2Via2l0LWFuaW1hdGlvbjogY29udGFpbmVyLXJvdGF0ZSAxNTY4bXMgbGluZWFyIGluZmluaXRlOwogIGFuaW1hdGlvbjogY29udGFpbmVyLXJvdGF0ZSAxNTY4bXMgbGluZWFyIGluZmluaXRlOwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgY29udGFpbmVyLXJvdGF0ZSB7CiAgdG8gewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogIH0KfQoKQGtleWZyYW1lcyBjb250YWluZXItcm90YXRlIHsKICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgfQp9Cgouc3Bpbm5lci1sYXllciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvcGFjaXR5OiAwOwogIGJvcmRlci1jb2xvcjogIzI2YTY5YTsKfQoKLnNwaW5uZXItYmx1ZSwKLnNwaW5uZXItYmx1ZS1vbmx5IHsKICBib3JkZXItY29sb3I6ICM0Mjg1ZjQ7Cn0KCi5zcGlubmVyLXJlZCwKLnNwaW5uZXItcmVkLW9ubHkgewogIGJvcmRlci1jb2xvcjogI2RiNDQzNzsKfQoKLnNwaW5uZXIteWVsbG93LAouc3Bpbm5lci15ZWxsb3ctb25seSB7CiAgYm9yZGVyLWNvbG9yOiAjZjRiNDAwOwp9Cgouc3Bpbm5lci1ncmVlbiwKLnNwaW5uZXItZ3JlZW4tb25seSB7CiAgYm9yZGVyLWNvbG9yOiAjMGY5ZDU4Owp9CgovKioKICogSU1QT1JUQU5UIE5PVEUgQUJPVVQgQ1NTIEFOSU1BVElPTiBQUk9QRVJUSUVTIChrZWFudWxlZSk6CiAqCiAqIGlPUyBTYWZhcmkgKHRlc3RlZCBvbiBpT1MgOC4xKSBkb2VzIG5vdCBoYW5kbGUgYW5pbWF0aW9uLWRlbGF5IHZlcnkgd2VsbCAtIGl0IGRvZXNuJ3QKICogZ3VhcmFudGVlIHRoYXQgdGhlIGFuaW1hdGlvbiB3aWxsIHN0YXJ0IF9leGFjdGx5XyBhZnRlciB0aGF0IHZhbHVlLiBTbyB3ZSBhdm9pZCB1c2luZwogKiBhbmltYXRpb24tZGVsYXkgYW5kIGluc3RlYWQgc2V0IGN1c3RvbSBrZXlmcmFtZXMgZm9yIGVhY2ggY29sb3IgKGFzIHJlZHVuZGFudCBhcyBpdAogKiBzZWVtcykuCiAqCiAqIFdlIHdyaXRlIG91dCBlYWNoIGFuaW1hdGlvbiBpbiBmdWxsIChpbnN0ZWFkIG9mIHNlcGFyYXRpbmcgYW5pbWF0aW9uLW5hbWUsCiAqIGFuaW1hdGlvbi1kdXJhdGlvbiwgZXRjLikgYmVjYXVzZSB1bmRlciB0aGUgcG9seWZpbGwsIFNhZmFyaSBkb2VzIG5vdCByZWNvZ25pemUgdGhvc2UKICogc3BlY2lmaWMgcHJvcGVydGllcyBwcm9wZXJseSwgdHJlYXRzIHRoZW0gYXMgLXdlYmtpdC1hbmltYXRpb24sIGFuZCBvdmVycmlkZXMgdGhlCiAqIG90aGVyIGFuaW1hdGlvbiBydWxlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL3BsYXRmb3JtL2lzc3Vlcy81My4KICovCi5hY3RpdmUgLnNwaW5uZXItbGF5ZXIuc3Bpbm5lci1ibHVlIHsKICAvKiBkdXJhdGlvbnM6IDQgKiBBUkNUSU1FICovCiAgLXdlYmtpdC1hbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCBibHVlLWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7CiAgYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgYmx1ZS1mYWRlLWluLW91dCA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOwp9CgouYWN0aXZlIC5zcGlubmVyLWxheWVyLnNwaW5uZXItcmVkIHsKICAvKiBkdXJhdGlvbnM6IDQgKiBBUkNUSU1FICovCiAgLXdlYmtpdC1hbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCByZWQtZmFkZS1pbi1vdXQgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsKICBhbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCByZWQtZmFkZS1pbi1vdXQgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsKfQoKLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLXllbGxvdyB7CiAgLyogZHVyYXRpb25zOiA0ICogQVJDVElNRSAqLwogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgeWVsbG93LWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7CiAgYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgeWVsbG93LWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7Cn0KCi5hY3RpdmUgLnNwaW5uZXItbGF5ZXIuc3Bpbm5lci1ncmVlbiB7CiAgLyogZHVyYXRpb25zOiA0ICogQVJDVElNRSAqLwogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgZ3JlZW4tZmFkZS1pbi1vdXQgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsKICBhbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCBncmVlbi1mYWRlLWluLW91dCA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOwp9CgouYWN0aXZlIC5zcGlubmVyLWxheWVyLAouYWN0aXZlIC5zcGlubmVyLWxheWVyLnNwaW5uZXItYmx1ZS1vbmx5LAouYWN0aXZlIC5zcGlubmVyLWxheWVyLnNwaW5uZXItcmVkLW9ubHksCi5hY3RpdmUgLnNwaW5uZXItbGF5ZXIuc3Bpbm5lci15ZWxsb3ctb25seSwKLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLWdyZWVuLW9ubHkgewogIC8qIGR1cmF0aW9uczogNCAqIEFSQ1RJTUUgKi8KICBvcGFjaXR5OiAxOwogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsKICBhbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgZmlsbC11bmZpbGwtcm90YXRlIHsKICAxMi41JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7CiAgfQogIC8qIDAuNSAqIEFSQ1NJWkUgKi8KICAyNSUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgyNzBkZWcpOwogIH0KICAvKiAxICAgKiBBUkNTSVpFICovCiAgMzcuNSUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0MDVkZWcpOwogIH0KICAvKiAxLjUgKiBBUkNTSVpFICovCiAgNTAlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNTQwZGVnKTsKICB9CiAgLyogMiAgICogQVJDU0laRSAqLwogIDYyLjUlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNjc1ZGVnKTsKICB9CiAgLyogMi41ICogQVJDU0laRSAqLwogIDc1JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDgxMGRlZyk7CiAgfQogIC8qIDMgICAqIEFSQ1NJWkUgKi8KICA4Ny41JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDk0NWRlZyk7CiAgfQogIC8qIDMuNSAqIEFSQ1NJWkUgKi8KICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEwODBkZWcpOwogIH0KICAvKiA0ICAgKiBBUkNTSVpFICovCn0KCkBrZXlmcmFtZXMgZmlsbC11bmZpbGwtcm90YXRlIHsKICAxMi41JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7CiAgfQogIC8qIDAuNSAqIEFSQ1NJWkUgKi8KICAyNSUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgyNzBkZWcpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyNzBkZWcpOwogIH0KICAvKiAxICAgKiBBUkNTSVpFICovCiAgMzcuNSUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0MDVkZWcpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0MDVkZWcpOwogIH0KICAvKiAxLjUgKiBBUkNTSVpFICovCiAgNTAlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNTQwZGVnKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNTQwZGVnKTsKICB9CiAgLyogMiAgICogQVJDU0laRSAqLwogIDYyLjUlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNjc1ZGVnKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNjc1ZGVnKTsKICB9CiAgLyogMi41ICogQVJDU0laRSAqLwogIDc1JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDgxMGRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDgxMGRlZyk7CiAgfQogIC8qIDMgICAqIEFSQ1NJWkUgKi8KICA4Ny41JSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDk0NWRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDk0NWRlZyk7CiAgfQogIC8qIDMuNSAqIEFSQ1NJWkUgKi8KICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEwODBkZWcpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxMDgwZGVnKTsKICB9CiAgLyogNCAgICogQVJDU0laRSAqLwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgYmx1ZS1mYWRlLWluLW91dCB7CiAgZnJvbSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICAyNSUgewogICAgb3BhY2l0eTogMTsKICB9CiAgMjYlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDg5JSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICA5MCUgewogICAgb3BhY2l0eTogMTsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKQGtleWZyYW1lcyBibHVlLWZhZGUtaW4tb3V0IHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDE7CiAgfQogIDI1JSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICAyNiUgewogICAgb3BhY2l0eTogMDsKICB9CiAgODklIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDkwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQp9CgpALXdlYmtpdC1rZXlmcmFtZXMgcmVkLWZhZGUtaW4tb3V0IHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDE1JSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICAyNSUgewogICAgb3BhY2l0eTogMTsKICB9CiAgNTAlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQogIDUxJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KfQoKQGtleWZyYW1lcyByZWQtZmFkZS1pbi1vdXQgewogIGZyb20gewogICAgb3BhY2l0eTogMDsKICB9CiAgMTUlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDI1JSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICA1MCUgewogICAgb3BhY2l0eTogMTsKICB9CiAgNTElIHsKICAgIG9wYWNpdHk6IDA7CiAgfQp9CgpALXdlYmtpdC1rZXlmcmFtZXMgeWVsbG93LWZhZGUtaW4tb3V0IHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDQwJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICA1MCUgewogICAgb3BhY2l0eTogMTsKICB9CiAgNzUlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQogIDc2JSB7CiAgICBvcGFjaXR5OiAwOwogIH0KfQoKQGtleWZyYW1lcyB5ZWxsb3ctZmFkZS1pbi1vdXQgewogIGZyb20gewogICAgb3BhY2l0eTogMDsKICB9CiAgNDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDUwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICA3NSUgewogICAgb3BhY2l0eTogMTsKICB9CiAgNzYlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQp9CgpALXdlYmtpdC1rZXlmcmFtZXMgZ3JlZW4tZmFkZS1pbi1vdXQgewogIGZyb20gewogICAgb3BhY2l0eTogMDsKICB9CiAgNjUlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDc1JSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICA5MCUgewogICAgb3BhY2l0eTogMTsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KfQoKQGtleWZyYW1lcyBncmVlbi1mYWRlLWluLW91dCB7CiAgZnJvbSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICA2NSUgewogICAgb3BhY2l0eTogMDsKICB9CiAgNzUlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQogIDkwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQp9CgovKioKICogUGF0Y2ggdGhlIGdhcCB0aGF0IGFwcGVhciBiZXR3ZWVuIHRoZSB0d28gYWRqYWNlbnQgZGl2LmNpcmNsZS1jbGlwcGVyIHdoaWxlIHRoZQogKiBzcGlubmVyIGlzIHJvdGF0aW5nIChhcHBlYXJzIG9uIENocm9tZSAzOCwgU2FmYXJpIDcuMSwgYW5kIElFIDExKS4KICovCi5nYXAtcGF0Y2ggewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogNDUlOwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYm9yZGVyLWNvbG9yOiBpbmhlcml0Owp9CgouZ2FwLXBhdGNoIC5jaXJjbGUgewogIHdpZHRoOiAxMDAwJTsKICBsZWZ0OiAtNDUwJTsKfQoKLmNpcmNsZS1jbGlwcGVyIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiA1MCU7CiAgaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYm9yZGVyLWNvbG9yOiBpbmhlcml0Owp9CgouY2lyY2xlLWNsaXBwZXIgLmNpcmNsZSB7CiAgd2lkdGg6IDIwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJvcmRlci13aWR0aDogM3B4OwogIC8qIFNUUk9LRVdJRFRIICovCiAgYm9yZGVyLXN0eWxlOiBzb2xpZDsKICBib3JkZXItY29sb3I6IGluaGVyaXQ7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgLXdlYmtpdC1hbmltYXRpb246IG5vbmU7CiAgYW5pbWF0aW9uOiBub25lOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwp9CgouY2lyY2xlLWNsaXBwZXIubGVmdCAuY2lyY2xlIHsKICBsZWZ0OiAwOwogIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEyOWRlZyk7CiAgdHJhbnNmb3JtOiByb3RhdGUoMTI5ZGVnKTsKfQoKLmNpcmNsZS1jbGlwcGVyLnJpZ2h0IC5jaXJjbGUgewogIGxlZnQ6IC0xMDAlOwogIGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTEyOWRlZyk7CiAgdHJhbnNmb3JtOiByb3RhdGUoLTEyOWRlZyk7Cn0KCi5hY3RpdmUgLmNpcmNsZS1jbGlwcGVyLmxlZnQgLmNpcmNsZSB7CiAgLyogZHVyYXRpb246IEFSQ1RJTUUgKi8KICAtd2Via2l0LWFuaW1hdGlvbjogbGVmdC1zcGluIDEzMzNtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7CiAgYW5pbWF0aW9uOiBsZWZ0LXNwaW4gMTMzM21zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsKfQoKLmFjdGl2ZSAuY2lyY2xlLWNsaXBwZXIucmlnaHQgLmNpcmNsZSB7CiAgLyogZHVyYXRpb246IEFSQ1RJTUUgKi8KICAtd2Via2l0LWFuaW1hdGlvbjogcmlnaHQtc3BpbiAxMzMzbXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOwogIGFuaW1hdGlvbjogcmlnaHQtc3BpbiAxMzMzbXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgbGVmdC1zcGluIHsKICBmcm9tIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTMwZGVnKTsKICB9CiAgNTAlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTVkZWcpOwogIH0KICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7CiAgfQp9CgpAa2V5ZnJhbWVzIGxlZnQtc3BpbiB7CiAgZnJvbSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7CiAgfQogIDUwJSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC01ZGVnKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTVkZWcpOwogIH0KICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7CiAgfQp9CgpALXdlYmtpdC1rZXlmcmFtZXMgcmlnaHQtc3BpbiB7CiAgZnJvbSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0xMzBkZWcpOwogIH0KICA1MCUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg1ZGVnKTsKICB9CiAgdG8gewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtMTMwZGVnKTsKICB9Cn0KCkBrZXlmcmFtZXMgcmlnaHQtc3BpbiB7CiAgZnJvbSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0xMzBkZWcpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMTMwZGVnKTsKICB9CiAgNTAlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNWRlZyk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDVkZWcpOwogIH0KICB0byB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0xMzBkZWcpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMTMwZGVnKTsKICB9Cn0KCiNzcGlubmVyQ29udGFpbmVyLmNvb2xkb3duIHsKICAvKiBkdXJhdGlvbjogU0hSSU5LX1RJTUUgKi8KICAtd2Via2l0LWFuaW1hdGlvbjogY29udGFpbmVyLXJvdGF0ZSAxNTY4bXMgbGluZWFyIGluZmluaXRlLCBmYWRlLW91dCA0MDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogIGFuaW1hdGlvbjogY29udGFpbmVyLXJvdGF0ZSAxNTY4bXMgbGluZWFyIGluZmluaXRlLCBmYWRlLW91dCA0MDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwp9CgpALXdlYmtpdC1rZXlmcmFtZXMgZmFkZS1vdXQgewogIGZyb20gewogICAgb3BhY2l0eTogMTsKICB9CiAgdG8gewogICAgb3BhY2l0eTogMDsKICB9Cn0KCkBrZXlmcmFtZXMgZmFkZS1vdXQgewogIGZyb20gewogICAgb3BhY2l0eTogMTsKICB9CiAgdG8gewogICAgb3BhY2l0eTogMDsKICB9Cn0KCi5zbGlkZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IDQwMHB4OwogIHdpZHRoOiAxMDAlOwp9Cgouc2xpZGVyLmZ1bGxzY3JlZW4gewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTAwJTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwp9Cgouc2xpZGVyLmZ1bGxzY3JlZW4gdWwuc2xpZGVzIHsKICBoZWlnaHQ6IDEwMCU7Cn0KCi5zbGlkZXIuZnVsbHNjcmVlbiB1bC5pbmRpY2F0b3JzIHsKICB6LWluZGV4OiAyOwogIGJvdHRvbTogMzBweDsKfQoKLnNsaWRlciAuc2xpZGVzIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWU5ZTllOwogIG1hcmdpbjogMDsKICBoZWlnaHQ6IDQwMHB4Owp9Cgouc2xpZGVyIC5zbGlkZXMgbGkgewogIG9wYWNpdHk6IDA7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHotaW5kZXg6IDE7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiBpbmhlcml0OwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5zbGlkZXIgLnNsaWRlcyBsaSBpbWcgewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKfQoKLnNsaWRlciAuc2xpZGVzIGxpIC5jYXB0aW9uIHsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxNSU7CiAgbGVmdDogMTUlOwogIHdpZHRoOiA3MCU7CiAgb3BhY2l0eTogMDsKfQoKLnNsaWRlciAuc2xpZGVzIGxpIC5jYXB0aW9uIHAgewogIGNvbG9yOiAjZTBlMGUwOwp9Cgouc2xpZGVyIC5zbGlkZXMgbGkuYWN0aXZlIHsKICB6LWluZGV4OiAyOwp9Cgouc2xpZGVyIC5pbmRpY2F0b3JzIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwogIG1hcmdpbjogMDsKfQoKLnNsaWRlciAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGhlaWdodDogMTZweDsKICB3aWR0aDogMTZweDsKICBtYXJnaW46IDAgMTJweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7CiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7CiAgYm9yZGVyLXJhZGl1czogNTAlOwp9Cgouc2xpZGVyIC5pbmRpY2F0b3JzIC5pbmRpY2F0b3ItaXRlbS5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7Cn0KCi5jYXJvdXNlbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA0MDBweDsKICAtd2Via2l0LXBlcnNwZWN0aXZlOiA1MDBweDsKICAgICAgICAgIHBlcnNwZWN0aXZlOiA1MDBweDsKICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7CiAgICAgICAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkOwogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCUgNTAlOwogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCUgNTAlOwp9CgouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIHsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBoZWlnaHQ6IDA7Cn0KCi5jYXJvdXNlbC5jYXJvdXNlbC1zbGlkZXIgLmNhcm91c2VsLWZpeGVkLWl0ZW0gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwogIGJvdHRvbTogMjBweDsKICB6LWluZGV4OiAxOwp9CgouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIC5jYXJvdXNlbC1maXhlZC1pdGVtLndpdGgtaW5kaWNhdG9ycyB7CiAgYm90dG9tOiA2OHB4Owp9CgouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIC5jYXJvdXNlbC1pdGVtIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgbWluLWhlaWdodDogNDAwcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwp9CgouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIC5jYXJvdXNlbC1pdGVtIGgyIHsKICBmb250LXNpemU6IDI0cHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBsaW5lLWhlaWdodDogMzJweDsKfQoKLmNhcm91c2VsLmNhcm91c2VsLXNsaWRlciAuY2Fyb3VzZWwtaXRlbSBwIHsKICBmb250LXNpemU6IDE1cHg7Cn0KCi5jYXJvdXNlbCAuY2Fyb3VzZWwtaXRlbSB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjAwcHg7CiAgaGVpZ2h0OiAyMDBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7Cn0KCi5jYXJvdXNlbCAuY2Fyb3VzZWwtaXRlbSA+IGltZyB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5jYXJvdXNlbCAuaW5kaWNhdG9ycyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwogIGJvdHRvbTogMDsKICBtYXJnaW46IDA7Cn0KCi5jYXJvdXNlbCAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGhlaWdodDogOHB4OwogIHdpZHRoOiA4cHg7CiAgbWFyZ2luOiAyNHB4IDRweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCi5jYXJvdXNlbCAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwp9CgouY2Fyb3VzZWwuc2Nyb2xsaW5nIC5jYXJvdXNlbC1pdGVtIC5tYXRlcmlhbGJveGVkLAouY2Fyb3VzZWwgLmNhcm91c2VsLWl0ZW06bm90KC5hY3RpdmUpIC5tYXRlcmlhbGJveGVkIHsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKLnRhcC10YXJnZXQtd3JhcHBlciB7CiAgd2lkdGg6IDgwMHB4OwogIGhlaWdodDogODAwcHg7CiAgcG9zaXRpb246IGZpeGVkOwogIHotaW5kZXg6IDEwMDA7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwogIC13ZWJraXQtdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwcyAuM3M7CiAgdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwcyAuM3M7Cn0KCi50YXAtdGFyZ2V0LXdyYXBwZXIub3BlbiB7CiAgdmlzaWJpbGl0eTogdmlzaWJsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHZpc2liaWxpdHkgMHM7CiAgdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwczsKfQoKLnRhcC10YXJnZXQtd3JhcHBlci5vcGVuIC50YXAtdGFyZ2V0IHsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOwogIG9wYWNpdHk6IC45NTsKICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpOwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTsKICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIG9wYWNpdHkgMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpOwp9CgoudGFwLXRhcmdldC13cmFwcGVyLm9wZW4gLnRhcC10YXJnZXQtd2F2ZTo6YmVmb3JlIHsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOwp9CgoudGFwLXRhcmdldC13cmFwcGVyLm9wZW4gLnRhcC10YXJnZXQtd2F2ZTo6YWZ0ZXIgewogIHZpc2liaWxpdHk6IHZpc2libGU7CiAgLXdlYmtpdC1hbmltYXRpb246IHB1bHNlLWFuaW1hdGlvbiAxcyBjdWJpYy1iZXppZXIoMC4yNCwgMCwgMC4zOCwgMSkgaW5maW5pdGU7CiAgICAgICAgICBhbmltYXRpb246IHB1bHNlLWFuaW1hdGlvbiAxcyBjdWJpYy1iZXppZXIoMC4yNCwgMCwgMC4zOCwgMSkgaW5maW5pdGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgdmlzaWJpbGl0eSAwcyAxcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOwogIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzLCB2aXNpYmlsaXR5IDBzIDFzLCAtd2Via2l0LXRyYW5zZm9ybSAuM3M7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHRyYW5zZm9ybSAuM3MsIHZpc2liaWxpdHkgMHMgMXM7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHRyYW5zZm9ybSAuM3MsIHZpc2liaWxpdHkgMHMgMXMsIC13ZWJraXQtdHJhbnNmb3JtIC4zczsKfQoKLnRhcC10YXJnZXQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBmb250LXNpemU6IDFyZW07CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDIwcHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMTBweCA1MHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzMHB4IDEwcHggLTIwcHggcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAyMHB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDEwcHggNTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMzBweCAxMHB4IC0yMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7CiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpLCBvcGFjaXR5IDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7Cn0KCi50YXAtdGFyZ2V0LWNvbnRlbnQgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBkaXNwbGF5OiB0YWJsZS1jZWxsOwp9CgoudGFwLXRhcmdldC13YXZlIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIHotaW5kZXg6IDEwMDAxOwp9CgoudGFwLXRhcmdldC13YXZlOjpiZWZvcmUsIC50YXAtdGFyZ2V0LXdhdmU6OmFmdGVyIHsKICBjb250ZW50OiAnJzsKICBkaXNwbGF5OiBibG9jazsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwp9CgoudGFwLXRhcmdldC13YXZlOjpiZWZvcmUgewogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAuM3M7CiAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAuM3M7CiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4zcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOwp9CgoudGFwLXRhcmdldC13YXZlOjphZnRlciB7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHZpc2liaWxpdHkgMHMsIC13ZWJraXQtdHJhbnNmb3JtIC4zczsKICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgdmlzaWJpbGl0eSAwcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOwogIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzLCB0cmFuc2Zvcm0gLjNzLCB2aXNpYmlsaXR5IDBzOwogIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzLCB0cmFuc2Zvcm0gLjNzLCB2aXNpYmlsaXR5IDBzLCAtd2Via2l0LXRyYW5zZm9ybSAuM3M7CiAgei1pbmRleDogLTE7Cn0KCi50YXAtdGFyZ2V0LW9yaWdpbiB7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICB6LWluZGV4OiAxMDAwMjsKICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKfQoKLnRhcC10YXJnZXQtb3JpZ2luOm5vdCguYnRuKTpub3QoLmJ0bi1sYXJnZSksIC50YXAtdGFyZ2V0LW9yaWdpbjpub3QoLmJ0bik6bm90KC5idG4tbGFyZ2UpOmhvdmVyIHsKICBiYWNrZ3JvdW5kOiBub25lOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7CiAgLnRhcC10YXJnZXQsIC50YXAtdGFyZ2V0LXdyYXBwZXIgewogICAgd2lkdGg6IDYwMHB4OwogICAgaGVpZ2h0OiA2MDBweDsKICB9Cn0KCi5wdWxzZSB7CiAgb3ZlcmZsb3c6IGluaXRpYWw7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoucHVsc2U6OmJlZm9yZSB7CiAgY29udGVudDogJyc7CiAgZGlzcGxheTogYmxvY2s7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0OwogIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOwogIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzLCAtd2Via2l0LXRyYW5zZm9ybSAuM3M7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHRyYW5zZm9ybSAuM3M7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHRyYW5zZm9ybSAuM3MsIC13ZWJraXQtdHJhbnNmb3JtIC4zczsKICAtd2Via2l0LWFuaW1hdGlvbjogcHVsc2UtYW5pbWF0aW9uIDFzIGN1YmljLWJlemllcigwLjI0LCAwLCAwLjM4LCAxKSBpbmZpbml0ZTsKICAgICAgICAgIGFuaW1hdGlvbjogcHVsc2UtYW5pbWF0aW9uIDFzIGN1YmljLWJlemllcigwLjI0LCAwLCAwLjM4LCAxKSBpbmZpbml0ZTsKICB6LWluZGV4OiAtMTsKfQoKQC13ZWJraXQta2V5ZnJhbWVzIHB1bHNlLWFuaW1hdGlvbiB7CiAgMCUgewogICAgb3BhY2l0eTogMTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICB9CiAgNTAlIHsKICAgIG9wYWNpdHk6IDA7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS41KTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS41KTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpOwogIH0KfQoKQGtleWZyYW1lcyBwdWxzZS1hbmltYXRpb24gewogIDAlIHsKICAgIG9wYWNpdHk6IDE7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7CiAgfQogIDUwJSB7CiAgICBvcGFjaXR5OiAwOwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuNSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAwOwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuNSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTsKICB9Cn0KCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICRCQVNFLVBJQ0tFUgogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwovKioKICogTm90ZTogdGhlIHJvb3QgcGlja2VyIGVsZW1lbnQgc2hvdWxkICpOT1QqIGJlIHN0eWxlZCBtb3JlIHRoYW4gd2hhdCdzIGhlcmUuCiAqLwoucGlja2VyIHsKICBmb250LXNpemU6IDE2cHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBsaW5lLWhlaWdodDogMS4yOwogIGNvbG9yOiAjMDAwMDAwOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAxMDAwMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwp9CgovKioKICogVGhlIHBpY2tlciBpbnB1dCBlbGVtZW50LgogKi8KLnBpY2tlcl9faW5wdXQgewogIGN1cnNvcjogZGVmYXVsdDsKfQoKLyoqCiAqIFdoZW4gdGhlIHBpY2tlciBpcyBvcGVuZWQsIHRoZSBpbnB1dCBlbGVtZW50IGlzICJhY3RpdmF0ZWQiLgogKi8KLnBpY2tlcl9faW5wdXQucGlja2VyX19pbnB1dC0tYWN0aXZlIHsKICBib3JkZXItY29sb3I6ICMwMDg5ZWM7Cn0KCi8qKgogKiBUaGUgaG9sZGVyIGlzIHRoZSBvbmx5ICJzY3JvbGxhYmxlIiB0b3AtbGV2ZWwgY29udGFpbmVyIGVsZW1lbnQuCiAqLwoucGlja2VyX19ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIG92ZXJmbG93LXk6IGF1dG87CiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoOwp9CgovKiEKICogRGVmYXVsdCBtb2JpbGUtZmlyc3QsIHJlc3BvbnNpdmUgc3R5bGluZyBmb3IgcGlja2FkYXRlLmpzCiAqIERlbW86IGh0dHA6Ly9hbXN1bC5naXRodWIuaW8vcGlja2FkYXRlLmpzCiAqLwovKioKICogTm90ZTogdGhlIHJvb3QgcGlja2VyIGVsZW1lbnQgc2hvdWxkICpOT1QqIGJlIHN0eWxlZCBtb3JlIHRoYW4gd2hhdCdzIGhlcmUuCiAqLwovKioKICogTWFrZSB0aGUgaG9sZGVyIGFuZCBmcmFtZSBmdWxsc2NyZWVuLgogKi8KLnBpY2tlcl9faG9sZGVyLAoucGlja2VyX19mcmFtZSB7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgdG9wOiAxMDAlOwp9CgovKioKICogVGhlIGhvbGRlciBzaG91bGQgb3ZlcmxheSB0aGUgZW50aXJlIHNjcmVlbi4KICovCi5waWNrZXJfX2hvbGRlciB7CiAgcG9zaXRpb246IGZpeGVkOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlLW91dCwgdG9wIDBzIDAuMTVzOwogIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMgZWFzZS1vdXQsIHRvcCAwcyAwLjE1czsKICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsKfQoKLyoqCiAqIFRoZSBmcmFtZSB0aGF0IGJvdW5kcyB0aGUgYm94IGNvbnRlbnRzIG9mIHRoZSBwaWNrZXIuCiAqLwoucGlja2VyX19mcmFtZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIG1hcmdpbjogMCBhdXRvOwogIG1pbi13aWR0aDogMjU2cHg7CiAgd2lkdGg6IDMwMHB4OwogIG1heC1oZWlnaHQ6IDM1MHB4OwogIC1tcy1maWx0ZXI6ICJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEoT3BhY2l0eT0wKSI7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOwogIC1tb3otb3BhY2l0eTogMDsKICBvcGFjaXR5OiAwOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuMTVzIGVhc2Utb3V0OwogIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlLW91dDsKfQoKQG1lZGlhIChtaW4taGVpZ2h0OiAyOC44NzVlbSkgewogIC5waWNrZXJfX2ZyYW1lIHsKICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgdG9wOiBhdXRvOwogICAgYm90dG9tOiAtMTAwJTsKICAgIG1heC1oZWlnaHQ6IDgwJTsKICB9Cn0KCkBtZWRpYSAobWluLWhlaWdodDogNDAuMTI1ZW0pIHsKICAucGlja2VyX19mcmFtZSB7CiAgICBtYXJnaW4tYm90dG9tOiA3LjUlOwogIH0KfQoKLyoqCiAqIFRoZSB3cmFwcGVyIHNldHMgdGhlIHN0YWdlIHRvIHZlcnRpY2FsbHkgYWxpZ24gdGhlIGJveCBjb250ZW50cy4KICovCi5waWNrZXJfX3dyYXAgewogIGRpc3BsYXk6IHRhYmxlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKfQoKQG1lZGlhIChtaW4taGVpZ2h0OiAyOC44NzVlbSkgewogIC5waWNrZXJfX3dyYXAgewogICAgZGlzcGxheTogYmxvY2s7CiAgfQp9CgovKioKICogVGhlIGJveCBjb250YWlucyBhbGwgdGhlIHBpY2tlciBjb250ZW50cy4KICovCi5waWNrZXJfX2JveCB7CiAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICBkaXNwbGF5OiB0YWJsZS1jZWxsOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KCkBtZWRpYSAobWluLWhlaWdodDogMjguODc1ZW0pIHsKICAucGlja2VyX19ib3ggewogICAgZGlzcGxheTogYmxvY2s7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNzc3Nzc3OwogICAgYm9yZGVyLXRvcC1jb2xvcjogIzg5ODk4OTsKICAgIGJvcmRlci1ib3R0b20td2lkdGg6IDA7CiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDAgMDsKICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAxMnB4IDM2cHggMTZweCByZ2JhKDAsIDAsIDAsIDAuMjQpOwogICAgYm94LXNoYWRvdzogMCAxMnB4IDM2cHggMTZweCByZ2JhKDAsIDAsIDAsIDAuMjQpOwogIH0KfQoKLyoqCiAqIFdoZW4gdGhlIHBpY2tlciBvcGVucy4uLgogKi8KLnBpY2tlci0tb3BlbmVkIC5waWNrZXJfX2hvbGRlciB7CiAgdG9wOiAwOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIC1tcy1maWx0ZXI6ICJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0jMUUwMDAwMDAsZW5kQ29sb3JzdHI9IzFFMDAwMDAwKSI7CiAgem9vbTogMTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMzIpOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBlYXNlLW91dDsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzIGVhc2Utb3V0Owp9CgoucGlja2VyLS1vcGVuZWQgLnBpY2tlcl9fZnJhbWUgewogIHRvcDogMDsKICAtbXMtZmlsdGVyOiAicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKE9wYWNpdHk9MTAwKSI7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTEwMCk7CiAgLW1vei1vcGFjaXR5OiAxOwogIG9wYWNpdHk6IDE7Cn0KCkBtZWRpYSAobWluLWhlaWdodDogMzUuODc1ZW0pIHsKICAucGlja2VyLS1vcGVuZWQgLnBpY2tlcl9fZnJhbWUgewogICAgdG9wOiAxMCU7CiAgICBib3R0b206IGF1dG87CiAgfQp9CgovKioKICogRm9yIGBsYXJnZWAgc2NyZWVucywgdHJhbnNmb3JtIGludG8gYW4gaW5saW5lIHBpY2tlci4KICovCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgIENVU1RPTSBNQVRFUklBTElaRSBTVFlMRVMKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLnBpY2tlcl9faW5wdXQucGlja2VyX19pbnB1dC0tYWN0aXZlIHsKICBib3JkZXItY29sb3I6ICNFM0YyRkQ7Cn0KCi5waWNrZXJfX2ZyYW1lIHsKICBtYXJnaW46IDAgYXV0bzsKICBtYXgtd2lkdGg6IDMyNXB4Owp9CgpAbWVkaWEgKG1pbi1oZWlnaHQ6IDM4Ljg3NWVtKSB7CiAgLnBpY2tlci0tb3BlbmVkIC5waWNrZXJfX2ZyYW1lIHsKICAgIHRvcDogMTAlOwogICAgYm90dG9tOiBhdXRvOwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgewogIC5waWNrZXJfX2JveCB7CiAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICAgIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogICAgZGlzcGxheTogZmxleDsKICB9CiAgLnBpY2tlcl9fZnJhbWUgewogICAgd2lkdGg6IDgwJTsKICAgIG1heC13aWR0aDogNjAwcHg7CiAgfQp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAkQkFTRS1EQVRFLVBJQ0tFUgogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwovKioKICogVGhlIHBpY2tlciBib3guCiAqLwoucGlja2VyX19ib3ggewogIHBhZGRpbmc6IDA7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi8qKgogKiBUaGUgaGVhZGVyIGNvbnRhaW5pbmcgdGhlIG1vbnRoIGFuZCB5ZWFyIHN0dWZmLgogKi8KLnBpY2tlcl9faGVhZGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG1hcmdpbi10b3A6IC43NWVtOwp9CgovKioKICogVGhlIG1vbnRoIGFuZCB5ZWFyIGxhYmVscy4KICovCi5waWNrZXJfX21vbnRoLAoucGlja2VyX195ZWFyIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luLWxlZnQ6IC4yNWVtOwogIG1hcmdpbi1yaWdodDogLjI1ZW07Cn0KCi8qKgogKiBUaGUgbW9udGggYW5kIHllYXIgc2VsZWN0b3JzLgogKi8KLnBpY2tlcl9fc2VsZWN0LS1tb250aCwKLnBpY2tlcl9fc2VsZWN0LS15ZWFyIHsKICBoZWlnaHQ6IDJlbTsKICBwYWRkaW5nOiAwOwogIG1hcmdpbi1sZWZ0OiAuMjVlbTsKICBtYXJnaW4tcmlnaHQ6IC4yNWVtOwp9CgoucGlja2VyX19zZWxlY3QtLW1vbnRoLmJyb3dzZXItZGVmYXVsdCB7CiAgZGlzcGxheTogaW5saW5lOwogIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7CiAgd2lkdGg6IDQwJTsKfQoKLnBpY2tlcl9fc2VsZWN0LS15ZWFyLmJyb3dzZXItZGVmYXVsdCB7CiAgZGlzcGxheTogaW5saW5lOwogIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7CiAgd2lkdGg6IDI2JTsKfQoKLnBpY2tlcl9fc2VsZWN0LS1tb250aDpmb2N1cywKLnBpY2tlcl9fc2VsZWN0LS15ZWFyOmZvY3VzIHsKICBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNSk7Cn0KCi8qKgogKiBUaGUgbW9udGggbmF2aWdhdGlvbiBidXR0b25zLgogKi8KLnBpY2tlcl9fbmF2LS1wcmV2LAoucGlja2VyX19uYXYtLW5leHQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBwYWRkaW5nOiAuNWVtIDEuMjVlbTsKICB3aWR0aDogMWVtOwogIGhlaWdodDogMWVtOwogIC13ZWJraXQtYm94LXNpemluZzogY29udGVudC1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICB0b3A6IC0wLjI1ZW07Cn0KCi5waWNrZXJfX25hdi0tcHJldiB7CiAgbGVmdDogLTFlbTsKICBwYWRkaW5nLXJpZ2h0OiAxLjI1ZW07Cn0KCi5waWNrZXJfX25hdi0tbmV4dCB7CiAgcmlnaHQ6IC0xZW07CiAgcGFkZGluZy1sZWZ0OiAxLjI1ZW07Cn0KCi5waWNrZXJfX25hdi0tZGlzYWJsZWQsCi5waWNrZXJfX25hdi0tZGlzYWJsZWQ6aG92ZXIsCi5waWNrZXJfX25hdi0tZGlzYWJsZWQ6YmVmb3JlLAoucGlja2VyX19uYXYtLWRpc2FibGVkOmJlZm9yZTpob3ZlciB7CiAgY3Vyc29yOiBkZWZhdWx0OwogIGJhY2tncm91bmQ6IG5vbmU7CiAgYm9yZGVyLXJpZ2h0LWNvbG9yOiAjZjVmNWY1OwogIGJvcmRlci1sZWZ0LWNvbG9yOiAjZjVmNWY1Owp9CgovKioKICogVGhlIGNhbGVuZGFyIHRhYmxlIG9mIGRhdGVzCiAqLwoucGlja2VyX190YWJsZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgYm9yZGVyLXNwYWNpbmc6IDA7CiAgdGFibGUtbGF5b3V0OiBmaXhlZDsKICBmb250LXNpemU6IDFyZW07CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLXRvcDogLjc1ZW07CiAgbWFyZ2luLWJvdHRvbTogLjVlbTsKfQoKLnBpY2tlcl9fdGFibGUgdGgsIC5waWNrZXJfX3RhYmxlIHRkIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5waWNrZXJfX3RhYmxlIHRkIHsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogMDsKfQoKLyoqCiAqIFRoZSB3ZWVrZGF5IGxhYmVscwogKi8KLnBpY2tlcl9fd2Vla2RheSB7CiAgd2lkdGg6IDE0LjI4NTcxNDI4NiU7CiAgZm9udC1zaXplOiAuNzVlbTsKICBwYWRkaW5nLWJvdHRvbTogLjI1ZW07CiAgY29sb3I6ICM5OTk5OTk7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICAvKiBJbmNyZWFzZSB0aGUgc3BhY2luZyBhIHRhZCAqLwp9CgpAbWVkaWEgKG1pbi1oZWlnaHQ6IDMzLjg3NWVtKSB7CiAgLnBpY2tlcl9fd2Vla2RheSB7CiAgICBwYWRkaW5nLWJvdHRvbTogLjVlbTsKICB9Cn0KCi8qKgogKiBUaGUgZGF5cyBvbiB0aGUgY2FsZW5kYXIKICovCi5waWNrZXJfX2RheS0tdG9kYXkgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBjb2xvcjogIzU5NTk1OTsKICBsZXR0ZXItc3BhY2luZzogLS4zOwogIHBhZGRpbmc6IC43NXJlbSAwOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7Cn0KCi5waWNrZXJfX2RheS0tZGlzYWJsZWQ6YmVmb3JlIHsKICBib3JkZXItdG9wLWNvbG9yOiAjYWFhYWFhOwp9CgoucGlja2VyX19kYXktLWluZm9jdXM6aG92ZXIgewogIGN1cnNvcjogcG9pbnRlcjsKICBjb2xvcjogIzAwMDsKICBmb250LXdlaWdodDogNTAwOwp9CgoucGlja2VyX19kYXktLW91dGZvY3VzIHsKICBkaXNwbGF5OiBub25lOwogIHBhZGRpbmc6IC43NXJlbSAwOwogIGNvbG9yOiAjZmZmOwp9CgoucGlja2VyX19kYXktLW91dGZvY3VzOmhvdmVyIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgY29sb3I6ICNkZGRkZGQ7CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKLnBpY2tlcl9fZGF5LS1oaWdobGlnaHRlZDpob3ZlciwKLnBpY2tlci0tZm9jdXNlZCAucGlja2VyX19kYXktLWhpZ2hsaWdodGVkIHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5waWNrZXJfX2RheS0tc2VsZWN0ZWQsCi5waWNrZXJfX2RheS0tc2VsZWN0ZWQ6aG92ZXIsCi5waWNrZXItLWZvY3VzZWQgLnBpY2tlcl9fZGF5LS1zZWxlY3RlZCB7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwLjc1KTsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC43NSk7CiAgYmFja2dyb3VuZDogIzAwODllYzsKICBjb2xvcjogI2ZmZmZmZjsKfQoKLnBpY2tlcl9fZGF5LS1kaXNhYmxlZCwKLnBpY2tlcl9fZGF5LS1kaXNhYmxlZDpob3ZlciwKLnBpY2tlci0tZm9jdXNlZCAucGlja2VyX19kYXktLWRpc2FibGVkIHsKICBiYWNrZ3JvdW5kOiAjZjVmNWY1OwogIGJvcmRlci1jb2xvcjogI2Y1ZjVmNTsKICBjb2xvcjogI2RkZGRkZDsKICBjdXJzb3I6IGRlZmF1bHQ7Cn0KCi5waWNrZXJfX2RheS0taGlnaGxpZ2h0ZWQucGlja2VyX19kYXktLWRpc2FibGVkLAoucGlja2VyX19kYXktLWhpZ2hsaWdodGVkLnBpY2tlcl9fZGF5LS1kaXNhYmxlZDpob3ZlciB7CiAgYmFja2dyb3VuZDogI2JiYmJiYjsKfQoKLyoqCiAqIFRoZSBmb290ZXIgY29udGFpbmluZyB0aGUgInRvZGF5IiwgImNsZWFyIiwgYW5kICJjbG9zZSIgYnV0dG9ucy4KICovCi5waWNrZXJfX2Zvb3RlciB7CiAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCi5waWNrZXJfX2J1dHRvbi0tdG9kYXksCi5waWNrZXJfX2J1dHRvbi0tY2xlYXIsCi5waWNrZXJfX2J1dHRvbi0tY2xvc2UgewogIGJvcmRlcjogMXB4IHNvbGlkICNmZmZmZmY7CiAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICBmb250LXNpemU6IC44ZW07CiAgcGFkZGluZzogLjY2ZW0gMDsKICBmb250LXdlaWdodDogYm9sZDsKICB3aWR0aDogMzMlOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOwp9CgoucGlja2VyX19idXR0b24tLXRvZGF5OmhvdmVyLAoucGlja2VyX19idXR0b24tLWNsZWFyOmhvdmVyLAoucGlja2VyX19idXR0b24tLWNsb3NlOmhvdmVyIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgY29sb3I6ICMwMDAwMDA7CiAgYmFja2dyb3VuZDogI2IxZGNmYjsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjYjFkY2ZiOwp9CgoucGlja2VyX19idXR0b24tLXRvZGF5OmZvY3VzLAoucGlja2VyX19idXR0b24tLWNsZWFyOmZvY3VzLAoucGlja2VyX19idXR0b24tLWNsb3NlOmZvY3VzIHsKICBiYWNrZ3JvdW5kOiAjYjFkY2ZiOwogIGJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsKICBvdXRsaW5lOiBub25lOwp9CgoucGlja2VyX19idXR0b24tLXRvZGF5OmJlZm9yZSwKLnBpY2tlcl9fYnV0dG9uLS1jbGVhcjpiZWZvcmUsCi5waWNrZXJfX2J1dHRvbi0tY2xvc2U6YmVmb3JlIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGhlaWdodDogMDsKfQoKLnBpY2tlcl9fYnV0dG9uLS10b2RheTpiZWZvcmUsCi5waWNrZXJfX2J1dHRvbi0tY2xlYXI6YmVmb3JlIHsKICBjb250ZW50OiAiICI7CiAgbWFyZ2luLXJpZ2h0OiAuNDVlbTsKfQoKLnBpY2tlcl9fYnV0dG9uLS10b2RheTpiZWZvcmUgewogIHRvcDogLTAuMDVlbTsKICB3aWR0aDogMDsKICBib3JkZXItdG9wOiAwLjY2ZW0gc29saWQgIzAwNTliYzsKICBib3JkZXItbGVmdDogLjY2ZW0gc29saWQgdHJhbnNwYXJlbnQ7Cn0KCi5waWNrZXJfX2J1dHRvbi0tY2xlYXI6YmVmb3JlIHsKICB0b3A6IC0wLjI1ZW07CiAgd2lkdGg6IC42NmVtOwogIGJvcmRlci10b3A6IDNweCBzb2xpZCAjZWUyMjAwOwp9CgoucGlja2VyX19idXR0b24tLWNsb3NlOmJlZm9yZSB7CiAgY29udGVudDogIlxENyI7CiAgdG9wOiAtMC4xZW07CiAgdmVydGljYWwtYWxpZ246IHRvcDsKICBmb250LXNpemU6IDEuMWVtOwogIG1hcmdpbi1yaWdodDogLjM1ZW07CiAgY29sb3I6ICM3Nzc3Nzc7Cn0KCi5waWNrZXJfX2J1dHRvbi0tdG9kYXlbZGlzYWJsZWRdLAoucGlja2VyX19idXR0b24tLXRvZGF5W2Rpc2FibGVkXTpob3ZlciB7CiAgYmFja2dyb3VuZDogI2Y1ZjVmNTsKICBib3JkZXItY29sb3I6ICNmNWY1ZjU7CiAgY29sb3I6ICNkZGRkZGQ7CiAgY3Vyc29yOiBkZWZhdWx0Owp9CgoucGlja2VyX19idXR0b24tLXRvZGF5W2Rpc2FibGVkXTpiZWZvcmUgewogIGJvcmRlci10b3AtY29sb3I6ICNhYWFhYWE7Cn0KCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgIENVU1RPTSBNQVRFUklBTElaRSBTVFlMRVMKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLyoucGlja2VyX19ib3ggewogIGJvcmRlci1yYWRpdXM6IDJweDsKICBvdmVyZmxvdzogaGlkZGVuOwp9Ki8KLnBpY2tlcl9fZGF0ZS1kaXNwbGF5IHsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7CiAgY29sb3I6ICNmZmY7CiAgcGFkZGluZzogMThweDsKICBmb250LXdlaWdodDogMzAwOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7CiAgLnBpY2tlcl9fZGF0ZS1kaXNwbGF5IHsKICAgIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgICAtd2Via2l0LWZsZXg6IDE7CiAgICAgICAgLW1zLWZsZXg6IDE7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgfQogIC5waWNrZXJfX3dlZWtkYXktZGlzcGxheSB7CiAgICBkaXNwbGF5OiBibG9jazsKICB9CiAgLnBpY2tlcl9fY29udGFpbmVyX193cmFwcGVyIHsKICAgIC13ZWJraXQtYm94LWZsZXg6IDI7CiAgICAtd2Via2l0LWZsZXg6IDI7CiAgICAgICAgLW1zLWZsZXg6IDI7CiAgICAgICAgICAgIGZsZXg6IDI7CiAgfQp9CgoucGlja2VyX19uYXYtLXByZXY6aG92ZXIsCi5waWNrZXJfX25hdi0tbmV4dDpob3ZlciB7CiAgY3Vyc29yOiBwb2ludGVyOwogIGNvbG9yOiAjMDAwMDAwOwogIGJhY2tncm91bmQ6ICNhMWRlZDg7Cn0KCi5waWNrZXJfX3dlZWtkYXktZGlzcGxheSB7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LXNpemU6IDIuOHJlbTsKICBtYXJnaW4tcmlnaHQ6IDVweDsKICBtYXJnaW4tdG9wOiA0cHg7Cn0KCi5waWNrZXJfX21vbnRoLWRpc3BsYXkgewogIGZvbnQtc2l6ZTogMi44cmVtOwogIGZvbnQtd2VpZ2h0OiA1MDA7Cn0KCi5waWNrZXJfX2RheS1kaXNwbGF5IHsKICBmb250LXNpemU6IDIuOHJlbTsKICBmb250LXdlaWdodDogNTAwOwogIG1hcmdpbi1yaWdodDogNXB4Owp9CgoucGlja2VyX195ZWFyLWRpc3BsYXkgewogIGZvbnQtc2l6ZTogMS41cmVtOwogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKfQoKLyoucGlja2VyX19ib3ggewogIHBhZGRpbmc6IDA7Cn0qLwoucGlja2VyX19jYWxlbmRhci1jb250YWluZXIgewogIHBhZGRpbmc6IDAgMXJlbTsKfQoKLnBpY2tlcl9fY2FsZW5kYXItY29udGFpbmVyIHRoZWFkIHsKICBib3JkZXI6IG5vbmU7Cn0KCi5waWNrZXJfX3RhYmxlIHsKICBtYXJnaW4tdG9wOiAwOwogIG1hcmdpbi1ib3R0b206IC41ZW07Cn0KCi5waWNrZXJfX2RheS0taW5mb2N1cyB7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7CiAgbGV0dGVyLXNwYWNpbmc6IC0uM3B4OwogIHBhZGRpbmc6IDAuNzVyZW0gMDsKICBmb250LXdlaWdodDogNDAwOwogIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50Owp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7CiAgLnBpY2tlcl9fZGF5LS1pbmZvY3VzIHsKICAgIHBhZGRpbmc6IDEuMXJlbSAwOwogIH0KfQoKLnBpY2tlcl9fZGF5LnBpY2tlcl9fZGF5LS10b2RheSB7CiAgY29sb3I6ICMyNmE2OWE7Cn0KCi5waWNrZXJfX2RheS5waWNrZXJfX2RheS0tdG9kYXkucGlja2VyX19kYXktLXNlbGVjdGVkIHsKICBjb2xvcjogI2ZmZjsKfQoKLnBpY2tlcl9fd2Vla2RheSB7CiAgZm9udC1zaXplOiAuOXJlbTsKfQoKLnBpY2tlcl9fZGF5LS1zZWxlY3RlZCwKLnBpY2tlcl9fZGF5LS1zZWxlY3RlZDpob3ZlciwKLnBpY2tlci0tZm9jdXNlZCAucGlja2VyX19kYXktLXNlbGVjdGVkIHsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDAuOSk7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsKICBjb2xvcjogI2ZmZmZmZjsKfQoKLnBpY2tlcl9fZGF5LS1zZWxlY3RlZC5waWNrZXJfX2RheS0tb3V0Zm9jdXMsCi5waWNrZXJfX2RheS0tc2VsZWN0ZWQ6aG92ZXIucGlja2VyX19kYXktLW91dGZvY3VzLAoucGlja2VyLS1mb2N1c2VkIC5waWNrZXJfX2RheS0tc2VsZWN0ZWQucGlja2VyX19kYXktLW91dGZvY3VzIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTFkZWQ4Owp9CgoucGlja2VyX19mb290ZXIgewogIHRleHQtYWxpZ246IHJpZ2h0OwogIHBhZGRpbmc6IDVweCAxMHB4Owp9CgoucGlja2VyX19jbG9zZSwgLnBpY2tlcl9fdG9kYXksIC5waWNrZXJfX2NsZWFyIHsKICBmb250LXNpemU6IDEuMXJlbTsKICBwYWRkaW5nOiAwIDFyZW07CiAgY29sb3I6ICMyNmE2OWE7Cn0KCi5waWNrZXJfX2NsZWFyIHsKICBjb2xvcjogI2Y0NDMzNjsKICBmbG9hdDogbGVmdDsKfQoKLnBpY2tlcl9fbmF2LS1wcmV2OmJlZm9yZSwKLnBpY2tlcl9fbmF2LS1uZXh0OmJlZm9yZSB7CiAgY29udGVudDogIiAiOwogIGJvcmRlci10b3A6IC41ZW0gc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWJvdHRvbTogLjVlbSBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDAuNzVlbSBzb2xpZCAjNjc2NzY3OwogIHdpZHRoOiAwOwogIGhlaWdodDogMDsKICBkaXNwbGF5OiBibG9jazsKICBtYXJnaW46IDAgYXV0bzsKfQoKLnBpY2tlcl9fbmF2LS1uZXh0OmJlZm9yZSB7CiAgYm9yZGVyLXJpZ2h0OiAwOwogIGJvcmRlci1sZWZ0OiAwLjc1ZW0gc29saWQgIzY3Njc2NzsKfQoKYnV0dG9uLnBpY2tlcl9fdG9kYXk6Zm9jdXMsIGJ1dHRvbi5waWNrZXJfX2NsZWFyOmZvY3VzLCBidXR0b24ucGlja2VyX19jbG9zZTpmb2N1cyB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ExZGVkODsKfQoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgJEJBU0UtVElNRS1QSUNLRVIKICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KLyoqCiAqIFRoZSBsaXN0IG9mIHRpbWVzLgogKi8KLnBpY2tlcl9fbGlzdCB7CiAgbGlzdC1zdHlsZTogbm9uZTsKICBwYWRkaW5nOiAwLjc1ZW0gMCA0LjJlbTsKICBtYXJnaW46IDA7Cn0KCi8qKgogKiBUaGUgdGltZXMgb24gdGhlIGNsb2NrLgogKi8KLnBpY2tlcl9fbGlzdC1pdGVtIHsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsKICBib3JkZXItdG9wOiAxcHggc29saWQgI2RkZDsKICBtYXJnaW4tYm90dG9tOiAtMXB4OwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIHBhZGRpbmc6IC43NWVtIDEuMjVlbTsKfQoKQG1lZGlhIChtaW4taGVpZ2h0OiA0Ni43NWVtKSB7CiAgLnBpY2tlcl9fbGlzdC1pdGVtIHsKICAgIHBhZGRpbmc6IC41ZW0gMWVtOwogIH0KfQoKLyogSG92ZXJlZCB0aW1lICovCi5waWNrZXJfX2xpc3QtaXRlbTpob3ZlciB7CiAgY3Vyc29yOiBwb2ludGVyOwogIGNvbG9yOiAjMDAwOwogIGJhY2tncm91bmQ6ICNiMWRjZmI7CiAgYm9yZGVyLWNvbG9yOiAjMDA4OWVjOwogIHotaW5kZXg6IDEwOwp9CgovKiBIaWdobGlnaHRlZCBhbmQgaG92ZXJlZC9mb2N1c2VkIHRpbWUgKi8KLnBpY2tlcl9fbGlzdC1pdGVtLS1oaWdobGlnaHRlZCB7CiAgYm9yZGVyLWNvbG9yOiAjMDA4OWVjOwogIHotaW5kZXg6IDEwOwp9CgoucGlja2VyX19saXN0LWl0ZW0tLWhpZ2hsaWdodGVkOmhvdmVyLAoucGlja2VyLS1mb2N1c2VkIC5waWNrZXJfX2xpc3QtaXRlbS0taGlnaGxpZ2h0ZWQgewogIGN1cnNvcjogcG9pbnRlcjsKICBjb2xvcjogIzAwMDsKICBiYWNrZ3JvdW5kOiAjYjFkY2ZiOwp9CgovKiBTZWxlY3RlZCBhbmQgaG92ZXJlZC9mb2N1c2VkIHRpbWUgKi8KLnBpY2tlcl9fbGlzdC1pdGVtLS1zZWxlY3RlZCwKLnBpY2tlcl9fbGlzdC1pdGVtLS1zZWxlY3RlZDpob3ZlciwKLnBpY2tlci0tZm9jdXNlZCAucGlja2VyX19saXN0LWl0ZW0tLXNlbGVjdGVkIHsKICBiYWNrZ3JvdW5kOiAjMDA4OWVjOwogIGNvbG9yOiAjZmZmOwogIHotaW5kZXg6IDEwOwp9CgovKiBEaXNhYmxlZCB0aW1lICovCi5waWNrZXJfX2xpc3QtaXRlbS0tZGlzYWJsZWQsCi5waWNrZXJfX2xpc3QtaXRlbS0tZGlzYWJsZWQ6aG92ZXIsCi5waWNrZXItLWZvY3VzZWQgLnBpY2tlcl9fbGlzdC1pdGVtLS1kaXNhYmxlZCB7CiAgYmFja2dyb3VuZDogI2Y1ZjVmNTsKICBib3JkZXItY29sb3I6ICNmNWY1ZjU7CiAgY29sb3I6ICNkZGQ7CiAgY3Vyc29yOiBkZWZhdWx0OwogIGJvcmRlci1jb2xvcjogI2RkZDsKICB6LWluZGV4OiBhdXRvOwp9CgovKioKICogVGhlIGNsZWFyIGJ1dHRvbgogKi8KLnBpY2tlci0tdGltZSAucGlja2VyX19idXR0b24tLWNsZWFyIHsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogODAlOwogIG1hcmdpbjogMWVtIGF1dG8gMDsKICBwYWRkaW5nOiAxZW0gMS4yNWVtOwogIGJhY2tncm91bmQ6IG5vbmU7CiAgYm9yZGVyOiAwOwogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgZm9udC1zaXplOiAuNjdlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsKfQoKLnBpY2tlci0tdGltZSAucGlja2VyX19idXR0b24tLWNsZWFyOmhvdmVyLAoucGlja2VyLS10aW1lIC5waWNrZXJfX2J1dHRvbi0tY2xlYXI6Zm9jdXMgewogIGNvbG9yOiAjMDAwOwogIGJhY2tncm91bmQ6ICNiMWRjZmI7CiAgYmFja2dyb3VuZDogI2VlMjIwMDsKICBib3JkZXItY29sb3I6ICNlZTIyMDA7CiAgY3Vyc29yOiBwb2ludGVyOwogIGNvbG9yOiAjZmZmOwogIG91dGxpbmU6IG5vbmU7Cn0KCi5waWNrZXItLXRpbWUgLnBpY2tlcl9fYnV0dG9uLS1jbGVhcjpiZWZvcmUgewogIHRvcDogLTAuMjVlbTsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsKICBmb250LXNpemU6IDEuMjVlbTsKICBmb250LXdlaWdodDogYm9sZDsKfQoKLnBpY2tlci0tdGltZSAucGlja2VyX19idXR0b24tLWNsZWFyOmhvdmVyOmJlZm9yZSwKLnBpY2tlci0tdGltZSAucGlja2VyX19idXR0b24tLWNsZWFyOmZvY3VzOmJlZm9yZSB7CiAgY29sb3I6ICNmZmY7Cn0KCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICRERUZBVUxULVRJTUUtUElDS0VSCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCi8qKgogKiBUaGUgZnJhbWUgdGhlIGJvdW5kcyB0aGUgdGltZSBwaWNrZXIuCiAqLwoucGlja2VyLS10aW1lIC5waWNrZXJfX2ZyYW1lIHsKICBtaW4td2lkdGg6IDI1NnB4OwogIG1heC13aWR0aDogMzIwcHg7Cn0KCi8qKgogKiBUaGUgcGlja2VyIGJveC4KICovCi5waWNrZXItLXRpbWUgLnBpY2tlcl9fYm94IHsKICBmb250LXNpemU6IDFlbTsKICBiYWNrZ3JvdW5kOiAjZjJmMmYyOwogIHBhZGRpbmc6IDA7Cn0KCkBtZWRpYSAobWluLWhlaWdodDogNDAuMTI1ZW0pIHsKICAucGlja2VyLS10aW1lIC5waWNrZXJfX2JveCB7CiAgICBtYXJnaW4tYm90dG9tOiA1ZW07CiAgfQp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAkREVGQVVMVC1USU1FLVBJQ0tFUgogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwouY2xvY2twaWNrZXItZGlzcGxheSB7CiAgZm9udC1zaXplOiA0cmVtOwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgY2xlYXI6IGJvdGg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY2xvY2twaWNrZXItc3Bhbi1hbS1wbSB7CiAgZm9udC1zaXplOiAxLjNyZW07CiAgcG9zaXRpb246IGFic29sdXRlOwogIHJpZ2h0OiAxcmVtOwogIGJvdHRvbTogMC4zcmVtOwogIGxpbmUtaGVpZ2h0OiAycmVtOwogIGZvbnQtd2VpZ2h0OiA1MDA7Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAxcHgpIHsKICAuY2xvY2twaWNrZXItZGlzcGxheSB7CiAgICB0b3A6IDMyJTsKICB9CiAgLmNsb2NrcGlja2VyLXNwYW4tYW0tcG0gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgcmlnaHQ6IGF1dG87CiAgICBib3R0b206IGF1dG87CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBtYXJnaW4tdG9wOiAxLjJyZW07CiAgfQp9CgoudGV4dC1wcmltYXJ5IHsKICBjb2xvcjogd2hpdGU7Cn0KCi5jbG9ja3BpY2tlci1zcGFuLWhvdXJzIHsKICBtYXJnaW4tcmlnaHQ6IDNweDsKfQoKLmNsb2NrcGlja2VyLXNwYW4tbWludXRlcyB7CiAgbWFyZ2luLWxlZnQ6IDNweDsKfQoKLmNsb2NrcGlja2VyLXNwYW4taG91cnMsCi5jbG9ja3BpY2tlci1zcGFuLW1pbnV0ZXMsCi5jbG9ja3BpY2tlci1zcGFuLWFtLXBtIGRpdiB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouY2xvY2twaWNrZXItbW92aW5nIHsKICBjdXJzb3I6IG1vdmU7Cn0KCi5jbG9ja3BpY2tlci1wbGF0ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgd2lkdGg6IDI3MHB4OwogIGhlaWdodDogMjcwcHg7CiAgb3ZlcmZsb3c6IHZpc2libGU7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG1hcmdpbjogYXV0bzsKICBtYXJnaW4tdG9wOiAyNXB4OwogIG1hcmdpbi1ib3R0b206IDVweDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwp9CgouY2xvY2twaWNrZXItY2FudmFzLAouY2xvY2twaWNrZXItZGlhbCB7CiAgd2lkdGg6IDI3MHB4OwogIGhlaWdodDogMjcwcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC0xcHg7CiAgdG9wOiAtMXB4Owp9CgouY2xvY2twaWNrZXItbWludXRlcyB7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CgouY2xvY2twaWNrZXItdGljayB7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpOwogIGxpbmUtaGVpZ2h0OiA0MHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB3aWR0aDogNDBweDsKICBoZWlnaHQ6IDQwcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmNsb2NrcGlja2VyLXRpY2suYWN0aXZlLAouY2xvY2twaWNrZXItdGljazpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzOCwgMTY2LCAxNTQsIDAuMjUpOwp9CgouY2xvY2twaWNrZXItZGlhbCB7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAzNTBtcywgb3BhY2l0eSAzNTBtczsKICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMzUwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDM1MG1zOwogIHRyYW5zaXRpb246IG9wYWNpdHkgMzUwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDM1MG1zOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAzNTBtcywgb3BhY2l0eSAzNTBtczsKICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMzUwbXMsIG9wYWNpdHkgMzUwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDM1MG1zOwp9CgouY2xvY2twaWNrZXItZGlhbC1vdXQgewogIG9wYWNpdHk6IDA7Cn0KCi5jbG9ja3BpY2tlci1ob3Vycy5jbG9ja3BpY2tlci1kaWFsLW91dCB7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMiwgMS4yKTsKICB0cmFuc2Zvcm06IHNjYWxlKDEuMiwgMS4yKTsKfQoKLmNsb2NrcGlja2VyLW1pbnV0ZXMuY2xvY2twaWNrZXItZGlhbC1vdXQgewogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwLjgsIDAuOCk7CiAgdHJhbnNmb3JtOiBzY2FsZSgwLjgsIDAuOCk7Cn0KCi5jbG9ja3BpY2tlci1jYW52YXMgewogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAxNzVtczsKICB0cmFuc2l0aW9uOiBvcGFjaXR5IDE3NW1zOwp9CgouY2xvY2twaWNrZXItY2FudmFzLW91dCB7CiAgb3BhY2l0eTogMC4yNTsKfQoKLmNsb2NrcGlja2VyLWNhbnZhcy1iZWFyaW5nIHsKICBzdHJva2U6IG5vbmU7CiAgZmlsbDogIzI2YTY5YTsKfQoKLmNsb2NrcGlja2VyLWNhbnZhcy1iZyB7CiAgc3Ryb2tlOiBub25lOwogIGZpbGw6ICMyNmE2OWE7Cn0KCi5jbG9ja3BpY2tlci1jYW52YXMtYmctdHJhbnMgewogIGZpbGw6ICMyNmE2OWE7Cn0KCi5jbG9ja3BpY2tlci1jYW52YXMgbGluZSB7CiAgc3Ryb2tlOiAjMjZhNjlhOwogIHN0cm9rZS13aWR0aDogNDsKICBzdHJva2UtbGluZWNhcDogcm91bmQ7CiAgLypzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7Ki8KfQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="25" hostname="learning2.pflb.ru:56902" path="/css/style.css" url="http://learning2.pflb.ru:56902/css/style.css" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52236" connectionId="2232" origin="HTML" encodingType="ANSI" ordinal="3" startDateTime="2020-02-23T18:01:14.455+04:00" startTime="4705" endTime="4863" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9jc3Mvc3R5bGUuY3NzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbGVhcm5pbmcyLnBmbGIucnU6NTY5MDIvbG9naW4NClVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDENClgtUmVxdWVzdGVkLVdpdGg6IFhNTEh0dHBSZXF1ZXN0DQpkbnQ6IDENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjM5NDUuMTMwIFNhZmFyaS81MzcuMzYgT1BSLzY2LjAuMzUxNS4xMDMNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOSxydS1SVTtxPTAuOCxydTtxPTAuNw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IGxlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyDQpDb29raWU6IHNlc3Npb25FeHBpcmVkPWZhbHNlOyBQRkxCLnByZS5sb2dpbi5saW5rPW51bGw7IGZpbHRlclNldHRpbmc9JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdEDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>49195</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7Y2hhcnNldD1VVEYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDkxOTU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IHRleHQvY3NzO2NoYXJzZXQ9VVRGLTgNCkNvbnRlbnQtTGVuZ3RoOiA0OTE5NQ0KRGF0ZTogU3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ym9keSB7CiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Owp9CgpALW1vei1kb2N1bWVudCB1cmwtcHJlZml4KCkKewogICAgaHRtbCB7CiAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYgIWltcG9ydGFudDsKICAgIH0KfQoKKiB7CiAgICBib3gtc2l6aW5nOiBpbmhlcml0OwogICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7Cn0KCmEgewogICAgY29sb3I6ICMzMzY2QkI7Cn0KCmE6aG92ZXIgewogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCmJvZHkgewogICAgb3ZlcmZsb3cteTogc2Nyb2xsICFpbXBvcnRhbnQ7CiAgICBtaW4taGVpZ2h0OiAxMDAwcHg7Cn0KCnRkLCB0aCB7CiAgICBsaW5lLWhlaWdodDogMTVweDsKfQoKbWFpbiwgZm9vdGVyLCBoZWFkZXIgewogICAgcGFkZGluZy1sZWZ0OiAzMDBweDsKfQoKZGl2LmNvbnRhaW5lci50YWJsZS1jb250YWluZXIgewogICAgd2lkdGg6IDkwJTsKICAgIG1hcmdpbi10b3A6IDI1cHg7Cn0KCi5uby1tb3JlLWZpeGVkLWFjdGlvbi1iYXIgewogICAgcGFkZGluZy1sZWZ0OiAzMDBweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmViZWI7Cn0KCi5uby1tb3JlLWZpeGVkLWFjdGlvbi1iYXIgPiAuY29sbGVjdGlvbiB7CiAgICBtYXJnaW46IDA7Cn0KCi5jb2xsZWN0aW9uLWl0ZW0ubm8tbW9yZS1pdGVtIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmViZWI7CiAgICBwYWRkaW5nOiAxMHB4IDgwcHggMTBweCAwOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGggOiA5OTJweCkgewogICAgbWFpbiwgZm9vdGVyLCBoZWFkZXIgewogICAgICAgIHBhZGRpbmctbGVmdDogMDsKICAgIH0KCiAgICAubm8tbW9yZS1maXhlZC1hY3Rpb24tYmFyIHsKICAgICAgICBwYWRkaW5nLWxlZnQ6IDA7CiAgICB9Cn0KLmxvZ28gewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgojbG9nby1jb250YWluZXIgewogICAgaGVpZ2h0OiA3NXB4OwogICAgcGFkZGluZzogMDsKfQoKI2xvZ28tY29udGFpbmVyID4gaW1nIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGhlaWdodDogaW5oZXJpdDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQoKI2xvZ28tY29udGFpbmVyOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KCi5uZXctdGlja2V0LWJ1dHRvbiB7CiAgICB3aWR0aDogMjQwcHg7CiAgICBtYXJnaW46IDAgYXV0byAyMHB4Owp9Ci5uZXctdGlja2V0LWJ1dHRvbiA+IGEuYnRuID4gaS5tYXRlcmlhbC1pY29ucyB7CiAgICBjb2xvcjogI2ZmZjsKICAgIG1hcmdpbi1yaWdodDogMDsKICAgIGxpbmUtaGVpZ2h0OiA0NnB4Owp9CgphLnBhZ2UtdGl0bGUgewogICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogICAgZm9udC1zaXplOiAyMHB4Owp9CgpuYXYubmF2LXdyYXBwZXIgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgaGVpZ2h0OiAxMDAlOwp9CgpuYXYudG9wLW5hdiB7CiAgICBoZWlnaHQ6IDY0cHg7Cn0KCi5ib2xkPmEgewogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi5jb2xsYXBzaWJsZS1ib2R5IGEgewogICAgZm9udC13ZWlnaHQ6IDQwMDsKfQoKLmNvbGxhcHNpYmxlLWJvZHkgewogICAgcGFkZGluZzogMDsKfQoKLmNvbGxhcHNpYmxlLWhlYWRlciB7CiAgICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50Owp9CgouaGFtYnVyZ2VyIHsKICAgIG1hcmdpbi1sZWZ0OiAxMHB4Owp9CgouaGFtYnVyZ2VyOmhvdmVyLAouaGFtYnVyZ2VyOmFjdGl2ZSwKLmhhbWJ1cmdlcjpmb2N1cyB7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAzMjBweCkgewogICAgLyoucm93IC5jb2wubTQgewogICAgICAgIHdpZHRoOiAzMy4zMzMzMyU7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7CiAgICB9Ki8KfQp0YWJsZSB7CiAgICB3aWR0aDoxMDAlOwogICAgdGFibGUtbGF5b3V0OmZpeGVkOwp9CnRhYmxlIHRkLCB0YWJsZSB0ZCAqIHsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQp0YWJsZSB0ciB0ZCB7CiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7Cn0KCi5jYXJkIC5jYXJkLWNvbnRlbnQgLmNhcmQtdGl0bGUgewogICAgbGluZS1oZWlnaHQ6IDA7CiAgICBmb250LXNpemU6IDIwcHg7Cn0KCi5jYXJkLXdyYXBwZXIgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CgouY2FyZCAuY2FyZC1jb250ZW50IC5jYXJkLWNvbW1lbnQgewogICAgbWFyZ2luLXRvcDogNXB4OwogICAgZm9udC1zaXplOiAxMnB4Owp9Cgouc3ViY2F0ZWdvcnktbGluay1saXN0IHsKICAgIGxpc3Qtc3R5bGU6IHNxdWFyZTsKfQoKLmJ1dHRvbi1ob2xkZXIgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCi5idXR0b24taG9sZGVyID4gbGkgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWFyZ2luLWxlZnQ6IDIwcHg7Cn0KCiNhZGRfdGlja2V0X3NldCB7CiAgICBib3JkZXI6IG5vbmU7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nOiAwOwp9CgouZWUtaGlkZGVuIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCi5lZS1pbmFjdGl2ZSB7CiAgICBvcGFjaXR5OiAwLjU7Cn0KCi5tb3ZpbmctbWVzc2FnZSB7CiAgICBwYWRkaW5nOiAxNXB4OwogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJhY2tncm91bmQtY29sb3I6IGNvcm5mbG93ZXJibHVlOwp9CgouY29sbGVjdGlvbi1pdGVtLmF2YXRhci5jLWl0ZW0uZWUtbW92aW5nLWludG8gewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ViZWJlYjsKICAgIG9wYWNpdHk6IDAuNTsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCl7CiAgICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRoIHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgfQp9CgouY2FyZCAuY2FyZC1oZWFkZXIgewogICAgcGFkZGluZzogMjJweDsKICAgIGNvbG9yOiAjZmZmOwp9CgouY2FyZCAuY2FyZC1oZWFkZXIgPiBwIHsKICAgIG1hcmdpbjogMDsKfQoKLnJlc3BvbnNpdmUtdGFibGUgewogICAgbWFyZ2luLXRvcDogMzBweDsKfQoKLmNhcmQtbGFiZWwgewogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCl7CiAgICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHsKICAgICAgICBkaXNwbGF5OiB0YWJsZSAhaW1wb3J0YW50OwogICAgfQp9CgouY2F0YWxvZy1jYXJkIHsKICAgIG1heC1oZWlnaHQ6IDI0MHB4OwogICAgaGVpZ2h0OiAyNDBweDsKICAgIHdpZHRoOiAxMDAlOwogICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cgp9CgouY2F0YWxvZy1jYXJkOmZvY3VzIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNFN0U3RTc7Cn0KCiNzZWFyY2guUExfMTBfQlNfQkIgewogICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKLmNhdGFsb2ctaGVhZGVyIHsKICAgIG1hcmdpbjogMDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMjRweDsKfQoKLmNhdGFsb2ctaGVhZGVyLm1hcmdpbnMgewogICAgbWFyZ2luOiAyMHB4IDA7Cn0KCi5jYXRhbG9nLXN1YnRleHQgewogICAgZm9udC1zaXplOiAxNnB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luLXRvcDogMTZweDsKICAgIG1hcmdpbi1ib3R0b206IDVweDsKfQoKLmluZm8tYWJvdXQtY2F0YWxvZy1zdWJ0ZXh0IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmViZWI7CiAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgYm9yZGVyOiAxcHggc29saWQgIzQ0NDsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBtYXJnaW4tdG9wOiAxNXB4Owp9CgouaW5mby1hYm91dC1jYXRhbG9nLXN1YnRleHQgcCB7CiAgICBwYWRkaW5nOiAxNXB4OwogICAgZm9udC1zaXplOiAxNHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luOiAwOwp9Cgouc2VhcmNoLXdyYXBwZXIgaS5zZWFyY2gtY2xlYXIubWF0ZXJpYWwtaWNvbnMgewogICAgcmlnaHQ6IDQwcHg7CiAgICBjb2xvcjogIzc3NzsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIHRvcDogMTBweDsKfQoKLmNhdGFsb2ctY2FyZC1pbWFnZSB7CiAgICBtYXgtd2lkdGg6IDIwMHB4OwogICAgd2lkdGg6IDk5JTsKICAgIHBhZGRpbmc6IDFyZW0gMXJlbSAwIDFyZW07CiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAvKmltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsqLwp9CgouY2F0YWxvZy1jYXJkLWxhYmVsIHsKICAgIG1hcmdpbjogMCA1cHg7CiAgICBjb2xvcjogIzRGNEY0RjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIG1heC1oZWlnaHQ6IDY2cHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7Cn0KCi5lZS1sYWJlbCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgbWFyZ2luLWxlZnQ6IDE1cHg7CiAgICBmb250LXN0eWxlOiBpdGFsaWM7Cn0KCi5jYXJkLWJ0biB7CiAgICBtYXJnaW4tdG9wOiAxMHB4Owp9CgojdGlja2V0X3NlbmQgewogICAgbWFyZ2luLXRvcDogMzVweDsKfQoKLmF1dGhwYWdlLW5hdiB7CiAgICBoZWlnaHQ6IDEyMnB4OwogICAgYm94LXNoYWRvdzogbm9uZTsKfQoKLmF1dGhwYWdlLWhlYWR0ZXh0IHsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBmb250LXNpemU6IDQwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5jYXRhbG9nLXNlYXJjaC13cmFwcGVyIHsKICAgIC8qbWF4LXdpZHRoOiA3NTBweDsqLwogICAgbWFyZ2luOiAyMHB4IGF1dG87Cn0KCi5zZWFyY2gtd3JhcHBlciB7CiAgICB0cmFuc2l0aW9uOiBtYXJnaW4gLjI1cyBlYXNlOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgYm9yZGVyLXJhZGl1czogMnB4OwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiKDIxNCwgMjE0LCAyMTQpOwp9Ci5zZWFyY2gtd3JhcHBlciBpbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7Y29sb3I6cmdiKDE4MCwgMTgwLCAxODApO30KLnNlYXJjaC13cmFwcGVyIGlucHV0OjotbW96LXBsYWNlaG9sZGVyICAgICAgICAgIHtjb2xvcjpyZ2IoMTgwLCAxODAsIDE4MCk7fS8qIEZpcmVmb3ggMTkrICovCi5zZWFyY2gtd3JhcHBlciBpbnB1dDotbW96LXBsYWNlaG9sZGVyICAgICAgICAgICB7Y29sb3I6cmdiKDE4MCwgMTgwLCAxODApO30vKiBGaXJlZm94IDE4LSAqLwouc2VhcmNoLXdyYXBwZXIgaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyICAgICAge2NvbG9yOnJnYigxODAsIDE4MCwgMTgwKTt9Ci5zZWFyY2gtd3JhcHBlciBpbnB1dCNzZWFyY2ggewogICAgZGlzcGxheTogYmxvY2s7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBmb250LXdlaWdodDogMzAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDM2cHg7CiAgICBtYXJnaW46IDA7CiAgICBib3JkZXI6IDA7Cn0KCi5zZWFyY2gtd3JhcHBlciBpbnB1dCNzZWFyY2g6YWN0aXZlLAouc2VhcmNoLXdyYXBwZXIgaW5wdXQjc2VhcmNoOmZvY3VzLAouc2VhcmNoLXdyYXBwZXIgaW5wdXQjc2VhcmNoOmhvdmVyIHsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5zZWFyY2gtd3JhcHBlciBpLm1hdGVyaWFsLWljb25zIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNnB4OwogICAgcmlnaHQ6IDEwcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5zb3J0LWljb24gewogICAgZm9udC1zaXplOiAxNXB4Owp9Cgoub3BlcmF0aW9uYWwtaW5mbyB7CiAgICBiYWNrZ3JvdW5kOiAjZjVmMmYwOwogICAgd2lkdGg6IDEwMCU7CiAgICBwYWRkaW5nOiAyNXB4OwogICAgYm9yZGVyOiBzb2xpZCAxcHggcmdiYSg1MSw1MSw1MSwwLjEyKTsKfQoKLmVlLWRhdGEtdGFibGUgewogICAgYm9yZGVyLXJhZGl1czogMDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHdvcmQtd3JhcDogbm9ybWFsOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKfQoKLyrQkNC70YzRgtC10YDQvdCw0YLQuNCy0LAqLwoKLmNhcmQtaGVhZGVyLWEgewogICAgcGFkZGluZzogMTVweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDE2MCwgMTYwLCAxNjAsIDAuMik7Cn0KCi5jYXJkIC5jYXJkLXRpdGxlLWEgewogICAgZm9udC1zaXplOiAyNHB4OwogICAgZm9udC13ZWlnaHQ6IDMwMDsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9CgouY2FyZCAuY2FyZC1zdWJ0aXRsZSB7CiAgICBjb2xvcjogIzllOWU5ZTsKICAgIGZvbnQtd2VpZ2h0OiAzMDA7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgbWFyZ2luLWJvdHRvbTogMDsKfQoKc3Bhbi5iYWRnZS5uZXcgewogICAgZm9udC1zaXplOiAxN3B4OwogICAgcmlnaHQ6IDA7Cn0KCi5zdGF0ZS1jb2xvci1iYWRnZSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAzcHg7CiAgICBib3JkZXItcmFkaXVzOiA3cHg7CiAgICBsaW5lLWhlaWdodDogMS41ZW07CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9Ci5zdGF0ZS1jb2xvci0tMSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBCMDRDICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogI2ZmZjsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7Cn0KLnN0YXRlLWNvbG9yLTAsIC5zdGF0ZS1jb2xvci01IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmYmMwMmQgIWltcG9ydGFudDsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7Cn0KLnN0YXRlLWNvbG9yLTEgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzOCwgMjcsIDI1MSwgMC42MykgIWltcG9ydGFudDsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQouc3RhdGUtY29sb3ItMiB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU3ZDMyICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogI2ZmZjsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7Cn0KLnN0YXRlLWNvbG9yLTMgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg3OCwgNTIsIDQ2LCAwLjU1KSAhaW1wb3J0YW50OwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXdlaWdodDogNzAwOwp9Ci5zdGF0ZS1jb2xvci00IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNiNzFjMWMgIWltcG9ydGFudDsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKLm1vYmlsZS1zbGEtMCB7CiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNmYmMwMmQgIWltcG9ydGFudDsKfQoKLm1vYmlsZS1zbGEtMSB7CiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNmYmMwMmQgIWltcG9ydGFudDsKfQoubW9iaWxlLXNsYS0yIHsKICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgI2ZiYzAyZCAhaW1wb3J0YW50Owp9Ci5tb2JpbGUtc2xhLTMgewogICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjZmJjMDJkICFpbXBvcnRhbnQ7Cn0KLm1vYmlsZS1zbGEtNCB7CiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICMyZTdkMzIgIWltcG9ydGFudDsKfQoubW9iaWxlLXNsYS01IHsKICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgIzJlN2QzMiAhaW1wb3J0YW50Owp9Ci5tb2JpbGUtc2xhLTYgewogICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjNzU3NTc1ICFpbXBvcnRhbnQ7Cn0KCi5lZS12aWV3ZWQgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQoKLmVlLW5ldyB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKLmVlLWV4cGlyZWQgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYzRjNDsKfQoKLnVyZWFkLWJhZGdlIHsKICAgIHBhZGRpbmc6IDAgNnB4OwogICAgbGluZS1oZWlnaHQ6IDIxcHg7CiAgICAvKmJhY2tncm91bmQtY29sb3I6IHJlZDsqLwogICAgY29sb3I6ICNmZmY7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgdG9wOiAxM3B4OwogICAgcmlnaHQ6IDEwcHg7Cn0KCi5lZS1jdXN0b20tbWVudSA+IGxpIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmNvbGxhcHNpYmxlLWhlYWRlciB7CiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgIHVzZXItc2VsZWN0OiBub25lOwp9Cgouc2lkZS1uYXYgbGkgPiBhID4gaS50b3AtbGV2ZWwtaWNvbi5tYXRlcmlhbC1pY29ucyB7CiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7Cn0KCi5zaWRlLW5hdiBsaSA+IGEgPiBpLmNvbGxhcGNlLWljb24ubWF0ZXJpYWwtaWNvbnMgewogICAgbWFyZ2luLXJpZ2h0OiAwOwp9CgouY29tbWVudC1idXR0b24gewogICAgbGluZS1oZWlnaHQ6IDM2cHg7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CgouYWxlcnQtdGlja2V0LW1lc3NhZ2UgewogICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmY2RkMjsKICAgIGJvcmRlcjogMnB4IHNvbGlkICNiNzFjMWM7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7Cn0KCi5sb2dvdXQtdXNlci1idG4gewogICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogODBweDsKICAgIHRvcDogMXB4OwogICAgZm9udC1zaXplOiAxNnB4OwogICAgY29sb3I6ICNmZmY7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMDAwMDAwOwp9CgoubG9nb3V0LXVzZXItYnRuID4gbGkgewogICAgZmxvYXQ6IG5vbmU7CiAgICB3aWR0aDogMTgwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5sb2dvdXQtdXNlci1tZW51IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlNGU0ZTQ7CiAgICBjb2xvcjogIzRGNEY0RjsKfQoKLmxvZ291dC1idG4gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAxNXB4OwogICAgcmlnaHQ6IDYwcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMDAwMDAwOwp9CgouY2FiaW5ldC1idG4gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAxNXB4OwogICAgcmlnaHQ6IDE2MHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgei1pbmRleDogMTAwMDAwMDsKfQoKLnZlcnNpb24tYnRuIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogM3B4OwogICAgcmlnaHQ6IDE1cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMDAwMDAwOwp9CgoubG9nb3V0LWJ0bjpob3ZlciB7CiAgICBvcGFjaXR5OiAwLjg7Cn0KCi5jYWJpbmV0LWJ0bjpob3ZlciB7CiAgICBvcGFjaXR5OiAwLjg7Cn0KCi5pbnB1dC1maWVsZCBsYWJlbCB7CiAgICBsZWZ0OiAwOwp9Cgoucm93IC5jb2wgewogICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgoubGlrZS1idG4gewogICAgd2lkdGg6IDU2cHg7CiAgICBoZWlnaHQ6IDU2cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgei1pbmRleDogMTsKICAgIHdpbGwtY2hhbmdlOiBvcGFjaXR5LCB0cmFuc2Zvcm07CiAgICB0cmFuc2l0aW9uOiAuM3MgZWFzZS1vdXQ7CiAgICBsaW5lLWhlaWdodDogNTRweDsKICAgIGNvbG9yOiAjZmZmOwogICAgcGFkZGluZzogMDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGxldHRlci1zcGFjaW5nOiAuNXB4OwogICAgYm9yZGVyOiBub25lOwogICAgb3V0bGluZTogMDsKICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICBib3gtc2hhZG93OiAwIDJweCAycHggMCByZ2JhKDAsMCwwLDAuMTQpLDAgMXB4IDVweCAwIHJnYmEoMCwwLDAsMC4xMiksMCAzcHggMXB4IC0ycHggcmdiYSgwLDAsMCwwLjIpOwogICAgYm9yZGVyLXJhZGl1czogNTAlOwp9CgoubGlrZS1idG4gaSB7CiAgICB3aWR0aDogaW5oZXJpdDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC1zaXplOiAxLjZyZW07CiAgICBsaW5lLWhlaWdodDogNTVweDsKfQoKI2FkZF9yZXBvcnQgewogICAgYm9yZGVyOiBub25lOwogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMDsKfQoKbmF2LmFkbWluLW5hdiB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjJBOTAwOwogICAgaGVpZ2h0OiA2NHB4OwogICAgYm94LXNoYWRvdzogbm9uZTsKfQoKLmFkbWluX3BhbmUgewogICAgZm9udC1zaXplOiAyMHB4OwogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZy10b3A6IDIwcHg7Cn0KCi5hZG0tdGFicyB7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDIwcHggMDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmViZWI7Cn0KCmg1LmZpcnN0LWxldmVsLWhlYWRlciB7CiAgICBmb250LXNpemU6IDE4cHg7Cn0KCi5jLWxldmVsLWVkaXQgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAxMHB4OwogICAgcmlnaHQ6IDEwcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5jLWxldmVsLXBvc2l0aW9uIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAxMXB4OwogICAgdG9wOiAxN3B4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgY29sb3I6IGNvcm5mbG93ZXJibHVlOwp9CgouYy1sZXZlbC1tb3ZlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNDNweDsKICAgIHJpZ2h0OiA0MHB4OwogICAgY29sb3I6IGNvcm5mbG93ZXJibHVlOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CgouYy1sZXZlbC1kZWxldGUgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcmlnaHQ6IDExcHg7CiAgICBib3R0b206IDEwcHg7CiAgICBjb2xvcjogcmVkOwogICAgei1pbmRleDogMTA7Cn0KCi5pdGVtcy1oZWFkZXItbGV2ZWwuZGVzdGluYXRpb24tYmx1ZS1ib3JkZXIgewogICAgYm9yZGVyOiAycHggc29saWQgY29ybmZsb3dlcmJsdWU7Cn0KCi5hZG0tZmlsZXVwbG9hZC1sYWJlbCB7CiAgICBmb250LXNpemU6IDAuOHJlbTsKICAgIGNvbG9yOiAjOWU5ZTllOwogICAgbWFyZ2luLXRvcDogMDsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi5jb2xsZWN0aW9uLWl0ZW0gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouYy1pdGVtIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLmMtaXRlbTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViOwp9CgouY29sbGVjdGlvbi1pdGVtID4gcCB7CiAgICBtYXJnaW46IDA7CiAgICBtYXgtd2lkdGg6IDIzMHB4Owp9CgouYy1zZXJ2aWNlLWRlbGV0ZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDEwcHg7CiAgICByaWdodDogMTBweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLnNlcnZpY2Utd3JhcHBlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViOwogICAgbWFyZ2luOiAwIGF1dG87CiAgICB3aWR0aDogMzAwcHg7CiAgICBoZWlnaHQ6IDI1MHB4OwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwp9Ci5maWVsZHMtd3JhcHBlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViOwogICAgbWFyZ2luOiAwIGF1dG87CiAgICB3aWR0aDogMzAwcHg7CiAgICBoZWlnaHQ6IDQwMHB4OwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwp9Ci5zZXJ2aWNlLW1vZGFsLWhlYWRlciB7CiAgICBtYXJnaW4tdG9wOiAwOwogICAgbWFyZ2luLWJvdHRvbTogMjRweDsKfQoKLnNlcnZpY2UtbW9kYWwtbGFiZWwgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouZGVsZXRlIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLmxpa2UtYnRuLXRpY2tldCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBjb2xvcjogI2ZmZjsKICAgIHdpZHRoOiAzM3B4OwogICAgYm9yZGVyLXJhZGl1czogMzJweDsKICAgIG1hcmdpbi10b3A6IDEzcHg7CiAgICBmb250LXNpemU6IDM0cHg7CiAgICBsaW5lLWhlaWdodDogMThweDsKfQoKLmxpa2UtYnRuLXRpY2tldCBpIHsKICAgIHdpZHRoOiBpbmhlcml0OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBsaW5lLWhlaWdodDogMzJweDsKfQoKLnZpZXdlZC1jb21tZW50IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQoKLnJlZC1zdGFyLW92ZXItcnVzc2lhIHsKICAgIGNvbG9yOiByZWQ7Cn0KCi5lZS12aWV3ZWQtbmV3cyB7CiAgICBvcGFjaXR5OiAwLjY7Cn0KCi5tYWluLXBhZ2UtaGVhZGVyIHsKICAgIGZvbnQtc2l6ZTogMjRweDsKICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICBtYXJnaW4tdG9wOiAzMHB4Owp9Cgoubm8tbmV3cy1tZXNzYWdlIHsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKfQoKLmNsb3NlLW5ld3MgewogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDIwcHg7Cn0KCi5lZS1zdC1sYWJlbCB7CiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgZm9udC1zaXplOiAxNXB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKfQoKLmVlLXN0LXRleHQgewogICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICBtYXJnaW46IDEwcHggMDsKICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7Cn0KCi5lZS1zdC1iYWRnZSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBtYXgtd2lkdGg6IDE3MHB4OwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDsKICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4OwogICAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgouZWUtc3QtYmFkZ2UgPiBwIHsKICAgIG1hcmdpbjogMDsKICAgIGNvbG9yOiAjZmZmOwogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgIHBhZGRpbmc6IDEwcHg7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIGN1cnNvcjogZGVmYXVsdDsKfQoKLmVlLXN0LWFuc3dlciB7CiAgICBwYWRkaW5nOiAxNXB4OwogICAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgouZWUtc3QtYW5zd2VyID4gcCB7CiAgICBtYXJnaW46IDEwcHggMCAwOwp9CgouZWUtc3QtY2FyZCB7CiAgICBwYWRkaW5nOiAwIDEwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjQkRCREJEOwogICAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgouZWUtc3QtY29udGVudCB7CiAgICBwYWRkaW5nOiAxNXB4IDI1cHg7Cn0KCi5lZS1zdC1jb21tZW50cyB7CiAgICBwYWRkaW5nOiAxNXB4Owp9Cgp0ZXh0YXJlYS5lZS1zdC1jb21tZW50LWFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEgewogICAgcmVzaXplOiBub25lOwogICAgYm9yZGVyOiAxcHggc29saWQgI0JEQkRCRDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICBtaW4taGVpZ2h0OiA1cmVtOwogICAgb3ZlcmZsb3cteTogaGlkZGVuOwogICAgcGFkZGluZzogMDsKfQoKdGV4dGFyZWEuZWUtc3QtY29tbWVudC1hcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjQkRCREJEOwogICAgYm94LXNoYWRvdzogbm9uZTsKfQoKLmNhcmQtdGl0bGUgewogICAgd29yZC13cmFwOiBicmVhay13b3JkOwp9CgouZWUtc3Qtb3B0aW9ucyB7CiAgICBwYWRkaW5nOiAyMHB4Owp9CgouYWJzLWZvcm1zLWJ1dHRvbiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMjBweDsKICAgIGJvdHRvbTogMjBweDsKfQoKLnN0LXF1ZXN0aW9uIHsKICAgIG1hcmdpbi1sZWZ0OiAxNXB4Owp9Cgouc3QtcXVlc3Rpb24tbGFiZWwgewogICAgbWFyZ2luOiAwOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQoKLnN0LWFuc3dlciB7CiAgICBtYXJnaW4tbGVmdDogMTVweDsKfQoKLnN0LWFuc3dlci1sYWJlbCB7CiAgICBtYXJnaW46IDA7CiAgICBmb250LXN0eWxlOiBpdGFsaWM7Cn0KCi5zdC1maWVsZCB7CiAgICBtYXJnaW4tbGVmdDogMTVweDsKfQoKLnN0LWZpZWxkLWxhYmVsIHsKICAgIG1hcmdpbjogMDsKICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsKfQoKLnN0LWNvbnRyb2wtYnRuIHsKICAgIGNvbG9yOiAjZmZmOwogICAgbWFyZ2luLWxlZnQ6IDE1cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCiNmb3JtX3RyZWVfd3JhcHBlciB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB3aWR0aDogMTAwJTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7CiAgICBwYWRkaW5nLXRvcDogMTBweDsKICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgbWFyZ2luLXRvcDogMTBweDsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KCi5yZXBvcnQtdGlja2V0LWNvbG9yIHsKICAgIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZCMDAwMDsKfQoKLnJlcG9ydC10aWNrZXQtY29sb3I6aG92ZXIgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgoucmV0dXJuLXRpY2tldC1jb2xvciB7CiAgICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNGMUM1MDQ7Cn0KCi5yZXR1cm4tdGlja2V0LWNvbG9yOmhvdmVyIHsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKCi5hY2NlcHQtdGlja2V0LWNvbG9yIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMxMEEyNTA7CiAgICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKfQoKLmFjY2VwdC10aWNrZXQtY29sb3I6aG92ZXIgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgoudXNlcl9pbmZvX2NiIHsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMwNDA0MDQ7CiAgICBtYXJnaW4tdG9wOiAzMHB4Owp9CgoudXNlcl9pbmZvX2NiIHRoIHsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDQwNDA0Owp9CgoudXNlcl9pbmZvX2NiIHRoLnRoX2hlYWRlcl9jYiB7CiAgICBmb250LXdlaWdodDogNjAwOwp9CgoubW9kYWwgewogICAgbWF4LWhlaWdodDogMTAwJTsKfQoKdWwuc2lkZS1uYXYgPiBsaSA+IGEuYWRtLW1lbnUtYnRuIHsKICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgbWFyZ2luLXJpZ2h0OiAwOwp9CgouYWN0aXZlLWFkbS1idG4gewogICAgYmFja2dyb3VuZC1jb2xvcjogI0YyQTkwMCAhaW1wb3J0YW50Owp9CgoubmV3cy1sb2dvIHsKICAgIHdpZHRoOiAzMHB4OwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgZmxvYXQ6IGxlZnQ7Cn0KCi5uZXdzLXRpdGxlIHsKICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICBmb250LXNpemU6IDE2cHg7Cn0KCi5uZXdzLXRpdGxlID4gc3BhbiB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgLyptYXJnaW4tbGVmdDogNDBweDsqLwp9CgouYmFjay1idXR0b24gewogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBjb2xvcjogIzRGNEY0RjsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM0RjRGNEY7CiAgICBib3gtc2hhZG93OiBub25lOwp9CgouYmFjay1idXR0b246aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ViZWJlYjsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKLmFqYXgtZmlsZS11cGxvYWQgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ViZWJlYjsKICAgIGJvcmRlcjogMXB4IGRhc2hlZCAjNEY0RjRGOwogICAgY29sb3I6ICM0RjRGNEY7Cn0KCi5hamF4LXVwbG9hZC1kcmFnZHJvcCB7CiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCi50ZW1wbGF0ZS1leHQgewogICAgcGFkZGluZzogMTVweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNCREJEQkQ7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBtYXJnaW4tYm90dG9tOiAyNXB4Owp9CgojdHQtYmxvY2stdGV4dCB7CiAgICBoZWlnaHQ6IDIwMHB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKI3R0LXRleHQtdGFiIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiAxMjBweDsKICAgIGhlaWdodDogMzBweDsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjQzNDM0MzOwogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjQzNDM0MzOwogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI0MzQzNDMzsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgbWFyZ2luLXRvcDogLTMxcHg7CiAgICBtYXJnaW4tbGVmdDogMjkwcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCnNlbGVjdC5icm93c2VyLWRlZmF1bHQgewogICAgYm9yZGVyOiAxcHggc29saWQgI0JEQkRCRDsKfQoKdGFibGUudGlja2V0cy10YWJsZSB7CiAgICBib3JkZXItc3BhY2luZzogMCA1cHg7CiAgICBjb2xvcjogIzRGNEY0Rgp9Cgp0YWJsZS50aWNrZXRzLXRhYmxlIHRoZWFkIHRoIHsKICAgIHBhZGRpbmc6IDVweDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKdGFibGUudGlja2V0cy10YWJsZSB0Ym9keSB0ZCB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI0NDQ0NDQzsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjQ0NDQ0NDOwogICAgcGFkZGluZzogNXB4OwogICAgZm9udC1zaXplOiAxNHB4Owp9Cgp0YWJsZS50aWNrZXRzLXRhYmxlIHRib2R5IHsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKdGFibGUudGlja2V0cy10YWJsZSB0Ym9keSBhIHRkOmZpcnN0LWNoaWxkIHsKICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0NDQ0NDQzsKfQoKdGFibGUudGlja2V0cy10YWJsZSB0Ym9keSBhIHRkOmxhc3QtY2hpbGQgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI0NDQ0NDQwp9CgoKdGFibGUudGlja2V0cy10YWJsZSB0aGVhZCB0ciB0aDpmaXJzdC1jaGlsZCB7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNDQ0NDQ0M7Cn0KCnRhYmxlLnRpY2tldHMtdGFibGUgdGhlYWQgdHIudHJlYWQtZmlyc3QgdGg6bGFzdC1jaGlsZCB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjQ0NDQ0NDOwp9Cgp0YWJsZS50aWNrZXRzLXRhYmxlIHRoZWFkIHRyLnRyZWFkLXNlY29uZCB0aDpmaXJzdC1jaGlsZCB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI0NDQ0NDQzsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjQ0NDQ0NDOwogICAgYm9yZGVyLWxlZnQ6IG5vbmU7Cn0KCnRhYmxlLnRpY2tldHMtdGFibGUgdGhlYWQgdHIudHJlYWQtc2Vjb25kIHRoOmxhc3QtY2hpbGQgewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNDQ0NDQ0M7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0NDQ0NDQzsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNDQ0NDQ0M7Cn0KCnRhYmxlLnRpY2tldHMtdGFibGUgdGhlYWQgdHIgdGggewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNDQ0NDQ0M7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0NDQ0NDQzsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNDQ0NDQ0M7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCnRhYmxlLnRpY2tldHMtdGFibGUgLmlnbm9yZS1mb3Itc29ydCB7CiAgICBib3JkZXItcmFkaXVzOiAwOwogICAgYm9yZGVyLXJpZ2h0OiBub25lOwogICAgYm9yZGVyLWJvdHRvbTogMCAhaW1wb3J0YW50Owp9CgoudGlja2V0cy10YWJsZSB0ZCB7CiAgICBib3JkZXItcmFkaXVzOiAwOwp9CgoudGFibGUtcmVmcmVzaCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICBwYWRkaW5nOiAwOwp9CgoudGFibGUtcmVmcmVzaDpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCmlucHV0Lm1hdGVyaWFsLXRhYmxlLXNlYXJjaCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGZvbnQtd2VpZ2h0OiAzMDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMzZweDsKICAgIG1hcmdpbjogMDsKICAgIGJvcmRlcjogMDsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCmlucHV0Lm1hdGVyaWFsLXRhYmxlLXNlYXJjaDpmb2N1cywKaW5wdXQubWF0ZXJpYWwtdGFibGUtc2VhcmNoOmFjdGl2ZSB7CiAgICBib3JkZXItYm90dG9tOiBub25lICFpbXBvcnRhbnQ7CiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7Cn0KCi52YWxpZ24td3JhcHBlciB7CiAgICB3aWR0aDogMjIwcHg7CiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgbWFyZ2luLXRvcDogMTVweDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQoKLmVtcHR5LWNhdGFsb2ctbGFiZWwgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgZm9udC1zaXplOiAxNnB4Owp9CgpwLm5ld3MtdGV4dCB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7Cn0KCmlucHV0LnRfY29udHJvbFt0eXBlPXRleHRdIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNCREJEQkQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDVweDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IDQycHg7CiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBtYXJnaW46IDA7Cn0KCmlucHV0LnRfY29udHJvbFt0eXBlPWRhdGVdIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNCREJEQkQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDVweDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IDQycHg7CiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBtYXJnaW46IDA7Cn0KCmlucHV0LmNvbnRhY3RfZmllbGRzIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNCREJEQkQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDVweDsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IDNyZW07Cn0KCmlucHV0LmNvbnRhY3RfZmllbGRzOmZvY3VzLAppbnB1dC5jb250YWN0X2ZpZWxkczphY3RpdmUgewogICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9CgppbnB1dC50X2NvbnRyb2w6Zm9jdXMsCmlucHV0LnRfY29udHJvbDphY3RpdmUKewogICAgLypib3JkZXItYm90dG9tOiAxcHggc29saWQgI0JEQkRCRCAhaW1wb3J0YW50OyovCiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7Cn0KCmRpdi5pbnB1dC1maWVsZCB7CiAgICBtYXJnaW4tdG9wOiAwOwp9CgpwLnRlbXBsYXRlLXF1ZXN0aW9uIHsKICAgIG1hcmdpbi10b3A6IDA7CiAgICBmb250LXN0eWxlOiBpdGFsaWM7CiAgICBtYXJnaW4tYm90dG9tOiA1cHggIWltcG9ydGFudDsKfQoKLmludmFsaWQtdGV4dGFyZWEgewogICAgYm9yZGVyOiAycHggc29saWQgI0Y0NDMzNiAhaW1wb3J0YW50Owp9CgpzZWxlY3Q6Zm9jdXMgewogICAgb3V0bGluZTogbm9uZTsKfQoKdGV4dGFyZWE6Zm9jdXMgewogICAgb3V0bGluZTogbm9uZTsKfQoKaDEuYXJ0aWNsZS1oZWFkZXIgewogICAgZm9udC1zaXplOiAzMHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luOiAwOwp9CgpwLmFydGljbGUtaGVhZGVyIHsKICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICBmb250LXdlaWdodDogMzAwOwp9CgojYXJ0aWNsZVdyYXBwZXIgewogICAgcGFkZGluZzogMDsKfQoKLmxpa2UtaWNvbiB7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5kaXNsaWtlLWljb24gewogICAgY3Vyc29yOiBwb2ludGVyOwp9CgouVkFfU1VQRVIgewogICAgdmVydGljYWwtYWxpZ246IHN1cGVyOwp9CgouZmVhdHVyZWQtYnV0dG9uIHsKICAgIGNvbG9yOiAjZWJlYmViOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CgouY29tbWVudC1saSB7CiAgICBib3gtc2hhZG93OiAwIDJweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpLCAwIDJweCAxMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgbGlzdC1zdHlsZTogbm9uZTsKfQoKLmNvbW1lbnQtdGV4dCB7CiAgICBtYXJnaW46IDA7Cn0KCmlucHV0W3R5cGU9c2VhcmNoXTpmb2N1czpub3QoW3JlYWRvbmx5XSk6bm90KC5zZWxlY3QyLXNlYXJjaF9fZmllbGQpIHsKICAgIGJvcmRlci1ib3R0b206IG5vbmUgIWltcG9ydGFudDsKICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKfQoKaW5wdXRbdHlwZT1zZWFyY2hdIHsKICAgIG1hcmdpbjogMDsKfQoKLnNlbGVjdDItY29udGFpbmVyLS1kZWZhdWx0LnNlbGVjdDItY29udGFpbmVyLS1mb2N1cyAuc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7CiAgICBvdXRsaW5lOiAwOwp9CgppI3NlbGVjdEFsbCB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAyNXB4OwogICAgdG9wOiAzNXB4OwogICAgY3Vyc29yOiBwb2ludGVyCn0KCmlucHV0LnNlbGVjdDItc2VhcmNoX19maWVsZCB7CiAgICBoZWlnaHQ6IDMwcHg7CiAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKfQoKLnRpY2tldC1lcnJvci1tZXNzYWdlIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMjVweDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MDBweCkgewogICAgLmNoYW5nZS1wYXNzd29yZC1tb2RhbCBkaXYubW9kYWwtY29udGVudCB7CiAgICAgICAgcGFkZGluZzogMTBweDsKICAgIH0KCiAgICAuY2hhbmdlLXBhc3N3b3JkLW1vZGFsIC5jaGFuZ2UtbW9kYWwtaCB7CiAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEyODBweCl7CiAgICAuY2F0YWxvZy1jYXJkIHsKICAgICAgICBtYXgtaGVpZ2h0OiAyMDBweDsKICAgIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDYwcHgpewogICAgLmNhdGFsb2ctY2FyZCB7CiAgICAgICAgbWF4LWhlaWdodDogMTYwcHg7CiAgICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTkycHgpewogICAgLmNhdGFsb2ctY2FyZCB7CiAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7CiAgICB9Cn0KCi5lZS1tZW51LWNhcmQgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDA7CiAgICB0b3A6IDUwcHg7CiAgICB6LWluZGV4OiAxMDsKfQoKLmVlLW1lbnUtYnV0dG9uIHsKICAgIG1hcmdpbi10b3A6IDEzcHg7CiAgICBjb2xvcjogcmdiYSgwLDAsMCwwLjg3KTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5jYXRhbG9nLWl0ZW06aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDsKfQoKLmNhdGFsb2ctaXRlbSB7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5zZWFyY2gtc2VydmljZS1saTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOwp9Cgouc2VhcmNoLXNlcnZpY2UtbGkgewogICAgY3Vyc29yOiBwb2ludGVyOwp9CgoubWFpbi1tZW51LWxpIHsKICAgIGZsb2F0OiBub25lOwogICAgbGluZS1oZWlnaHQ6IDQ4cHg7Cn0KCi5tYWluLW1lbnUtbGkgPiBhIHsKICAgIGNvbG9yOiAjZmZmOwp9CgoubWFpbi1tZW51LWxpID4gYSA+IGkgewogICAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgICBjb2xvcjogI2ZmZjsKICAgIGhlaWdodDogNDBweDsKfQoKLm1haW4tbWVudS1saSA+IGE6aG92ZXIgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9Cgojc2VydmljZV90ZW1wbGF0ZSBkaXYucm93IHsKICAgIG1hcmdpbi1ib3R0b206IDE1cHg7Cn0KCiNzZXJ2aWNlX3RlbXBsYXRlIGRpdi5yb3c6bGFzdC1jaGlsZCB7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9CgojYWRkVGlja2V0Q29sIHsKICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMC41cyBlYXNlLW91dDsKICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMC41cyBlYXNlLW91dDsKICAgIC1vLXRyYW5zaXRpb246IHdpZHRoIDAuNXMgZWFzZS1vdXQ7CiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2Utb3V0Owp9CgojYXJ0aWNsZXNDb2wgewogICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDFzIGVhc2U7CiAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMXMgZWFzZTsKICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMXMgZWFzZTsKICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMXMgZWFzZTsKICAgIHRyYW5zaXRpb24tZGVsYXk6IDAuNXM7CiAgICBvcGFjaXR5OiAxOwp9CgouYmxhbmstYXJ0aWNsZXMgewogICAgb3BhY2l0eTogMCAhaW1wb3J0YW50Owp9CgouYXJ0aWNsZXMtY29sbGVjdGlvbiB7CiAgICBwYWRkaW5nOiAxNXB4Owp9CgouYXJ0aWNsZS1pdGVtIHsKICAgIC8qYm9yZGVyOiAxcHggc29saWQgI0JEQkRCRDsqLwogICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHBhZGRpbmc6IDEwcHg7Cn0KCi5hcnRpY2xlLWl0ZW06aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ViZWJlYjsKfQoKLmFydGljbGUtaXRlbSA+IGEgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgY29sb3I6ICM0NDQ7Cn0KCi5hcnRpY2xlLWl0ZW0tY291bnRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMDsKICAgIHRvcDogLTJweDsKICAgIGNvbG9yOiAjMjZhNjlhOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKfQoKLmFydGljbGVzLWhlYWRlciB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBmb250LXNpemU6IDE3cHg7Cn0KCi5hcnRpY2xlLWl0ZW0taGVhZGVyIHsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7Cn0KCi5hcnRpY2xlLXByZXZpZXcgewogICAgZm9udC13ZWlnaHQ6IDMwMDsKfQoKI2JyZWFkX3dyYXBwZXIgYSB7CiAgICBoZWlnaHQ6IDY0cHg7CiAgICBsaW5lLWhlaWdodDogNjRweDsKfQojYnJlYWRfd3JhcHBlciBhOmhvdmVyOm5vdChbaHJlZl0pewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9Ci50aWNrZXQtY29udGFpbmVyIHsKICAgIG1hcmdpbi10b3A6IDMwcHg7CiAgICB3aWR0aDogOTAlOwp9CgoudGlja2V0LXBpYyB7CiAgICBtYXgtd2lkdGg6IDUwcHg7CiAgICB3aWR0aDogMTAwJTsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MDBweCkgewogICAgLm5ld3MtZGF0ZSB7CiAgICAgICAgZmxvYXQ6IGxlZnQ7CiAgICB9Cn0KCi5jYWJpbmV0LXAgewogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIGxpbmUtaGVpZ2h0OiAxOHB4OwogICAgbWFyZ2luOiAwOwp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGggOiA2MDBweCkgewogICAgLnRpY2tldC1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDA7CiAgICAgICAgd2lkdGg6IDkyJTsKICAgIH0KCiAgICAudGlja2V0LWNvbnRhaW5lciBkaXYuY2FyZCB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICB9CgogICAgLnRpY2tldC1jb250YWluZXIgZGl2LmNhcmQgZGl2LmVlLXN0LWNvbnRlbnQgewogICAgICAgIHBhZGRpbmc6IDIwcHggMDsKICAgIH0KCiAgICAudGlja2V0LWNvbnRhaW5lciBkaXYuY2FyZCBkaXYuZWUtc3QtY29udGVudCBoMiB7CiAgICAgICAgbWFyZ2luLXRvcDogMDsKICAgICAgICBmb250LXNpemU6IDIycHg7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgfQoKICAgIC50aWNrZXQtY29udGFpbmVyIGRpdi5jYXJkIGRpdi5lZS1zdC1jb250ZW50IGRpdi5lZS1zdC1iYWRnZSB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvOwogICAgfQoKICAgIC50aWNrZXQtY29udGFpbmVyIGRpdi5jYXJkIGRpdi5lZS1zdC1jb250ZW50ICNpbWFnZV9ob2xkZXIgewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CgogICAgLnRpY2tldC1jb250YWluZXIgZGl2LmNhcmQgZGl2LmVlLXN0LWNvbnRlbnQgaW1nLnRpY2tldC1waWMgewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CgogICAgLnRpY2tldC1jb250YWluZXIgZGl2LmNhcmQgZGl2LmVlLXN0LWNvbnRlbnQgZGl2LmVlLXN0LWNhcmQgewogICAgICAgIHBhZGRpbmc6IDAgMTBweDsKICAgIH0KCiAgICAudGlja2V0LWNvbnRhaW5lciBkaXYuY2FyZCBkaXYuZWUtc3QtY29udGVudCBkaXYuZWUtc3QtYW5zd2VyIHsKICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgfQoKICAgIC5lZS1zdC1jb21tZW50cyB7CiAgICAgICAgcGFkZGluZzogMDsKICAgIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoIDogNDAwcHgpIHsKICAgIHRhYmxlLnRpY2tldHMtdGFibGUgdGhlYWQgdHIudHJlYWQtZmlyc3QgdGg6bGFzdC1jaGlsZCB7CiAgICAgICAgYm9yZGVyLWxlZnQ6IG5vbmU7CiAgICB9CgogICAgdGFibGUudGlja2V0cy10YWJsZSB0aGVhZCB0ci50cmVhZC1maXJzdCB0aCB7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgIH0KCiAgICAubW9iaWxlLXRhYmxlLXZpZXcgewogICAgICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICB9CgogICAgLm1vYmlsZS1wYWdpbmF0aW9uIHVsIHsKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsKICAgIH0KCiAgICAubWFpbi1wYWdlLWhlYWRlciB7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIH0KCiAgICAubWFpbi1wYWdlLWhlYWRlciA+IGkgewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9Cn0KCnNwYW4ucmF0aW5nLXNwYW4gaS5yYXRpbmctZXllIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAxMHB4OwogICAgdG9wOiA4cHg7Cn0KCnNwYW4ucmF0aW5nLXNwYW4gc3Bhbi5yYXRpbmctY291bnRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogNDBweDsKICAgIHRvcDogMTBweDsKfQoKYS5hcnRpY2xlcy1jb2xsZWN0aW9uLWl0ZW0gewogICAgcGFkZGluZy1yaWdodDogNjBweDsKICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKfQoKLnNlbGVjdC13cmFwcGVyLnRfY29udHJvbCBpbnB1dCB7CiAgICBwYWRkaW5nOiAwIDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMTg5LCAxODksIDE4OSk7CiAgICB3aWR0aDogMTAwJTsKICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9Cgouc2VsZWN0LXdyYXBwZXIudF9jb250cm9sIHNwYW4uY2FyZXQgewogICAgcmlnaHQ6IDVweDsKICAgIGZvbnQtc2l6ZTogOXB4Owp9CgoucmVkLWRvdHRlZC1ib3JkZXIgewogICAgYm9yZGVyOiAycHggZG90dGVkIHJlZCAhaW1wb3J0YW50Owp9CgoucmVzdG9yZS1pY29uIHsKICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOwogICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAtbXMtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsKICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDAwbXM7CiAgICAtbW96LXRyYW5zaXRpb246YWxsIDQwMG1zOwogICAgLW8tdHJhbnNpdGlvbjphbGwgNDAwbXM7CiAgICB0cmFuc2l0aW9uOmFsbCA0MDBtczsKCiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5yZXN0b3JlLWljb246aG92ZXIgewogICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgtMTgwZGVnKTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTE4MGRlZyk7CiAgICAtby10cmFuc2Zvcm06IHJvdGF0ZSgtMTgwZGVnKTsKICAgIC1tcy10cmFuc2Zvcm06IHJvdGF0ZSgtMTgwZGVnKTsKICAgIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpOwp9CgouY2hlY2tib3gtcm93IHsKICAgIG1hcmdpbi10b3A6IDE4cHggIWltcG9ydGFudDsKICAgIG1hcmdpbi1ib3R0b206IDMwcHggIWltcG9ydGFudDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNDAwcHgpIHsKICAgIC5jb250YWluZXIgewogICAgICAgIHdpZHRoOiA5MCU7CiAgICB9Cn0KCi5zaWRlLW5hdiBsaSA+IGEgewogICAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7CiAgICBwYWRkaW5nOiAwIDE2cHg7Cn0KCi5zaWRlLW5hdiBsaSA+IGEuc2luZ2xlLWxldmVsLW1lbnUgewogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi8q0JvQtdC60LDRgNGB0YLQstC+INC00LvRjyBNYXRlcmlhbGl6ZUNTUyovCgouc2lkZS1uYXYgLmNvbGxhcHNpYmxlLWhlYWRlciwgLnNpZGUtbmF2LmZpeGVkIC5jb2xsYXBzaWJsZS1oZWFkZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBib3JkZXI6IG5vbmU7CiAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgIGhlaWdodDogNDhweDsKICAgIHBhZGRpbmc6IDAgMTZweDsKfQoKQGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogIlJvYm90byI7CiAgICBzcmM6IGxvY2FsKFJvYm90byBUaGluKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLVRoaW4uZW90Iik7CiAgICBzcmM6IHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1UaGluLmVvdD8jaWVmaXgiKSBmb3JtYXQoImVtYmVkZGVkLW9wZW50eXBlIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1UaGluLndvZmYyIikgZm9ybWF0KCJ3b2ZmMiIpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tVGhpbi53b2ZmIikgZm9ybWF0KCJ3b2ZmIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1UaGluLnR0ZiIpIGZvcm1hdCgidHJ1ZXR5cGUiKTsKICAgIGZvbnQtd2VpZ2h0OiAyMDA7Cn0KCkBmb250LWZhY2UgewogICAgZm9udC1mYW1pbHk6ICJSb2JvdG8iOwogICAgc3JjOiBsb2NhbChSb2JvdG8gTGlnaHQpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tTGlnaHQuZW90Iik7CiAgICBzcmM6IHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1MaWdodC5lb3Q/I2llZml4IikgZm9ybWF0KCJlbWJlZGRlZC1vcGVudHlwZSIpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tTGlnaHQud29mZjIiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1MaWdodC53b2ZmIikgZm9ybWF0KCJ3b2ZmIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1MaWdodC50dGYiKSBmb3JtYXQoInRydWV0eXBlIik7CiAgICBmb250LXdlaWdodDogMzAwOwp9CgpAZm9udC1mYWNlIHsKICAgIGZvbnQtZmFtaWx5OiAiUm9ib3RvIjsKICAgIHNyYzogbG9jYWwoUm9ib3RvIFJlZ3VsYXIpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tUmVndWxhci5lb3QiKTsKICAgIHNyYzogdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLVJlZ3VsYXIuZW90PyNpZWZpeCIpIGZvcm1hdCgiZW1iZWRkZWQtb3BlbnR5cGUiKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLVJlZ3VsYXIud29mZjIiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1SZWd1bGFyLndvZmYiKSBmb3JtYXQoIndvZmYiKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLVJlZ3VsYXIudHRmIikgZm9ybWF0KCJ0cnVldHlwZSIpOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKfQoKQGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogIlJvYm90byI7CiAgICBzcmM6IHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1NZWRpdW0uZW90Iik7CiAgICBzcmM6IHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1NZWRpdW0uZW90PyNpZWZpeCIpIGZvcm1hdCgiZW1iZWRkZWQtb3BlbnR5cGUiKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLU1lZGl1bS53b2ZmMiIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLU1lZGl1bS53b2ZmIikgZm9ybWF0KCJ3b2ZmIiksIHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1NZWRpdW0udHRmIikgZm9ybWF0KCJ0cnVldHlwZSIpOwogICAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKQGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogIlJvYm90byI7CiAgICBzcmM6IHVybCgiZm9udHMvcm9ib3RvL1JvYm90by1Cb2xkLmVvdCIpOwogICAgc3JjOiB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tQm9sZC5lb3Q/I2llZml4IikgZm9ybWF0KCJlbWJlZGRlZC1vcGVudHlwZSIpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tQm9sZC53b2ZmMiIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCJmb250cy9yb2JvdG8vUm9ib3RvLUJvbGQud29mZiIpIGZvcm1hdCgid29mZiIpLCB1cmwoImZvbnRzL3JvYm90by9Sb2JvdG8tQm9sZC50dGYiKSBmb3JtYXQoInRydWV0eXBlIik7CiAgICBmb250LXdlaWdodDogNzAwOwp9CgoubW9kYWwgewogICAgZGlzcGxheTogbm9uZTsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGxlZnQ6IDA7CiAgICByaWdodDogMDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgICBwYWRkaW5nOiAwOwogICAgd2lkdGg6IDU1JTsKICAgIG1hcmdpbjogYXV0bzsKICAgIG92ZXJmbG93LXk6IGluaGVyaXQ7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICB3aWxsLWNoYW5nZTogdG9wLCBvcGFjaXR5Owp9CgoubW9kYWwtYnV0dG9ucyAgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCi5tb2RhbC1oIHsKICAgIGZvbnQtc2l6ZTogMjZweDsKICAgIG1hcmdpbi1ib3R0b206IDA7Cn0KCnAuYXJ0aWNsZS1yZWFkLW1vcmUgewogICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5icm93c2VyLWRlZmF1bHQ6Zm9jdXMgewogICAgYm9yZGVyOiAxcHggc29saWQgIzAwYmNkNDsKfQoKaW5wdXQudF9jb250cm9sOmZvY3VzIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMGJjZDQ7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwYmNkNCAhaW1wb3J0YW50Owp9CgpzZWxlY3QgewogICAgcGFkZGluZzogMTBweCA1cHg7CiAgICBoZWlnaHQ6IGluaGVyaXQ7Cn0KCnNlbGVjdC50X2NvbnRyb2wucXVlc3Rpb24tdmFsaWQgewogICAgYm9yZGVyOiAycHggc29saWQgIzRDQUY1MDsKfQoKaW5wdXQudF9jb250cm9sLnF1ZXN0aW9uLXZhbGlkIHsKICAgIGJvcmRlcjogMnB4IHNvbGlkICM0Q0FGNTA7Cn0KCmlucHV0LnNlbGVjdC1kcm9wZG93bi5xdWVzdGlvbi12YWxpZCB7CiAgICBib3JkZXI6IDJweCBzb2xpZCAjNENBRjUwOwp9CgphLnBlcnNvbi1pZGVudGl0eSB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBmbG9hdDogcmlnaHQ7CiAgICBmb250LXNpemU6IDE4cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICBsaW5lLWhlaWdodDogNjRweDsKfQoKYS5wZXJzb24taWRlbnRpdHkgaSB7CiAgICBsaW5lLWhlaWdodDogNjRweDsKfQoKYS5wZXJzb24taWRlbnRpdHk6aG92ZXIgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgoKYS5wZXJzb24taWRlbnRpdHk6aG92ZXIgaTpsYXN0LWNoaWxkIHsKICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoLTE4MGRlZyk7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpOwogICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoLTE4MGRlZyk7CiAgICAtbXMtdHJhbnNmb3JtOiByb3RhdGUoLTE4MGRlZyk7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMTgwZGVnKTsKfQoKYS5wZXJzb24taWRlbnRpdHkgaTpsYXN0LWNoaWxkIHsKICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOwogICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAtbXMtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsKICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDQwMG1zOwogICAgLW1vei10cmFuc2l0aW9uOiBhbGwgNDAwbXM7CiAgICAtby10cmFuc2l0aW9uOiBhbGwgNDAwbXM7CiAgICB0cmFuc2l0aW9uOiBhbGwgNDAwbXM7Cn0KCmEuaGFtYnVyZ2VyIHsKICAgIG1hcmdpbi1yaWdodDogMDsKfQoKLmVlLXN0LWNhcmQgLnJvdyBkaXYgLmVlLXN0LWxhYmVsIHsKICAgIG1hcmdpbjogNXB4IDA7Cn0KCmxpLnNlbGVjdDItc2VhcmNoIGlucHV0W3R5cGU9c2VhcmNoXSB7CiAgICBtYXJnaW46IDA7Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aCA6IDUwMHB4KSB7CiAgICAubWVudS11c2VybmFtZSB7CiAgICAgICAgZGlzcGxheTogbm9uZTsKICAgIH0KfQoKLmNsb3NlLW1vZGFsLWNyb3NzIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiA1cHg7CiAgICB0b3A6IDVweDsKfQoKLnBhZ2Utc2VsZWN0IHsKICAgIHdpZHRoOiA2NXB4OwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWFyZ2luLXJpZ2h0OiAzMHB4Owp9CgoucGFnZS1zZWxlY3Qgc2VsZWN0IHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgYm9yZGVyLWNvbG9yOiAjQ0NDQ0NDOwogICAgcGFkZGluZzogNXB4Owp9CgouY2F0YWxvZy1jb2xsYXBzaWJsZSB7CiAgICBwYWRkaW5nOiAxMHB4Owp9Cgp1bC5jYXRhbG9nLXVsIHsKICAgIG1hcmdpbjogMDsKfQoKI25hdi1tb2JpbGUgewogICAgaGVpZ2h0OiAxMDAlOwp9CgojbmF2LW1vYmlsZS5jcnV0Y2h7CiAgICB0cmFuc2Zvcm06IHVuc2V0ICFpbXBvcnRhbnQ7CiAgICB3aWxsLWNoYW5nZTogaW5oZXJpdDsKfQojbmF2LW1vYmlsZSAuY29sbGFwc2libGUgewogICAgbWFyZ2luOiAyOXB4IDIwcHggMjBweDsKICAgIGNvbG9yOiB3aGl0ZTsKfQojbmF2LW1vYmlsZSAuY29sbGFwc2libGUud2l0aG91dC1idXR0b257CiAgICBtYXJnaW4tdG9wOiAxNXB4Owp9CiNuYXYtbW9iaWxlIC5jb2xsYXBzaWJsZS1oZWFkZXIgLmJhZGdlIGl7CiAgICBtYXJnaW46IDA7CiAgICBjb2xvcjogd2hpdGU7CiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzIGVhc2Utb3V0Owp9CiNuYXYtbW9iaWxlIC5jb2xsYXBzaWJsZS1oZWFkZXIgLmJhZGdlIGkub3BlbnsKICAgIG1hcmdpbjogMDsKICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsKfQojbmF2LW1vYmlsZSAuY29sbGFwc2libGUtYm9keXsKICAgIHBhZGRpbmc6IDE2cHg7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2EwYTBhMDsKICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Owp9CiNuYXYtbW9iaWxlIC5jb2xsYXBzaWJsZSAuY2FyZC1wYW5lbHsKICAgIHBhZGRpbmc6IDAgMTBweDsKICAgIGNvbG9yOiBibGFjazsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGJhY2tncm91bmQ6ICNmZmY7Cn0KI25hdi1tb2JpbGUgLmNhcmQtcGFuZWw6bm90KC5pbmFjdGl2ZSkgYnsKICAgIGNvbG9yOiAjMjZhNjlhOwp9CiNuYXYtbW9iaWxlIC5jYXJkLXBhbmVsLmluYWN0aXZlewogICAgYmFja2dyb3VuZDogI2JmYmZiZjsKfQojbmF2LW1vYmlsZSAuc3dpdGNoIGxhYmVsIC5sZXZlcnsKICAgIG1hcmdpbjogMCAwIDAgN3B4Owp9CiNuYXYtbW9iaWxlIC5zZWxlY3Qtd3JhcHBlcnsKICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O2Rpc3BsYXk6IC1tcy1mbGV4Ym94O2Rpc3BsYXk6IGZsZXg7CiAgICBoZWlnaHQ6IDNlbTsKfQojbmF2LW1vYmlsZSAuc2VsZWN0Mi1zZWxlY3Rpb25fX2Fycm93IHsKICAgIHotaW5kZXg6IDE7CiAgICB0b3A6IDdweDsKfQojbmF2LW1vYmlsZSAuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkIHsKICAgIHdpZHRoOiAxMDAlOwp9CiNuYXYtbW9iaWxlIC5zZWxlY3QyLWRyb3Bkb3duewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgYm90dG9tOiA0MHB4Owp9CiNuYXYtbW9iaWxlIC5zZWxlY3QyLXNlbGVjdGlvbiB7CiAgICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOy1tcy1mbGV4LWFsaWduOiBjZW50ZXI7YWxpZ24taXRlbXM6IGNlbnRlcgp9Ci5zZWxlY3QyLXNlYXJjaF9fZmllbGR7CiAgICBoZWlnaHQ6IDMwcHggIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OwogICAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAyMnB4KTsKfQouc2VsZWN0Mi1zZWFyY2hfX2ZpZWxkOmZvY3VzewogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNhYWEgIWltcG9ydGFudDsKICAgIGJveC1zaGFkb3c6IDAgMCA0cHggI2FhYSAhaW1wb3J0YW50Owp9CiNuYXYtbW9iaWxlIC5zZWxlY3Qtd3JhcHBlciBpbnB1dCB7CiAgICBwYWRkaW5nOiAwIDEwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIGNvbG9yOiBibGFjazsKfQojbmF2LW1vYmlsZSAuZGF0ZXBpY2tlcnsKICAgIG1hcmdpbjogMCAwIDAgNXB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBjb2xvcjogYmxhY2s7Cn0KI25hdi1tb2JpbGUgLmRhdGVwaWNrZXI6Zmlyc3QtY2hpbGR7CiAgICBtYXJnaW46IDAgNXB4IDAgMDsKfQojbmF2LW1vYmlsZSAuZmxleC13cmFwcGVyewogICAgZGlzcGxheTogLXdlYmtpdC1ib3g7ZGlzcGxheTogLW1zLWZsZXhib3g7ZGlzcGxheTogZmxleDsKfQojbmF2LW1vYmlsZSAuZmxleC13cmFwcGVyID4gKnsKICAgIGZsZXg6IGF1dG8gMSAxOwogICAgd2lkdGg6IDFweDsKICAgIHRyYW5zaXRpb246IHdpZHRoIDAuN3MgZWFzZS1vdXQ7Cn0KI25hdi1tb2JpbGUgLmJ0bi5mdWxsLXdpZHRoewogICAgd2lkdGg6IDEwMCU7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICBiYWNrZ3JvdW5kOiAjMDBCMDRDOwp9CiNuYXYtbW9iaWxlIC5kYXRlcGlja2VyLmFsZXJ0ewogICAgYmFja2dyb3VuZDogcmdiKDI1NSwgMTk4LCAxOTMpOwp9CiNuYXYtbW9iaWxlIGxhYmVsW2Zvcj1vdmVyZHVlXSA+IGRpdnsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQojbmF2LW1vYmlsZSBsYWJlbFtmb3I9b3ZlcmR1ZV0gc3BhbnsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAxNXB4Owp9Ci5tYWluLXRhYnN7CiAgICBtYXJnaW4tdG9wOiAyMXB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyMTQsMjE0LDIxNCk7Cn0KLm1haW4tdGFicyA+IC5yb3d7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9Ci5tYWluLXRhYnMgLnRhYnN7CiAgICBvdmVyZmxvdzogdmlzaWJsZTsKfQoubWFpbi10YWJzIC50YWJzIC50YWIgPiBhewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYigyMzAsIDIzMCwgMjMwKTsKICAgIGJhY2tncm91bmQ6IHJnYigyNDAsIDI0MCwgMjQwKTsKICAgIGNvbG9yOiBibGFjazsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHRvcDogMXB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyMTQsMjE0LDIxNCk7Cn0KLm1haW4tdGFicyAudGFiID4gYS5tZW51LWl0ZW0tYWN0aXZlewogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgd2hpdGU7CiAgICBjb2xvcjogcmdiKDE1NSwgMTMsIDIpOwp9Ci5tYWluLXRhYnMgLnRhYjpudGgtY2hpbGQoMm4tMSkgYXsKICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgcmdiKDIzMCwgMjMwLCAyMzApOwogICAgYm9yZGVyLXJpZ2h0OjFweCBzb2xpZCByZ2IoMjMwLCAyMzAsIDIzMCk7Cn0KLm1haW4tdGFicyAudGFiOmxhc3QtY2hpbGQgYXsKICAgIGJvcmRlci1yaWdodDoxcHggc29saWQgcmdiKDIzMCwgMjMwLCAyMzApOwp9CiNuYXYtbW9iaWxlIC5jaGVja2JveCB7CiAgICBjb2xvcjogYmxhY2s7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KI25hdi1tb2JpbGUgLmNoZWNrYm94IC5iYWRnZXsKICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgbWFyZ2luLXJpZ2h0OiAwOwp9CiNuYXYtbW9iaWxlIC5jaGVja2JveCAuYmFkZ2UgbGFiZWx7CiAgICBwYWRkaW5nOiAwOwp9CiN0YWJsZV93cmFwcGVyIC5yb3c6Zmlyc3QtY2hpbGR7CiAgICBtYXJnaW4tYm90dG9tOiA4cHg7Cn0KLyog0KDQtdC60YPRgNGB0LjQstC90YvQuSDQsNC60LrQvtGA0LTQuNC+0L0gKi8KI21haW5fd3JhcHBlciAuY29udGFpbmVyID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYuY29sbGFwc2libGUtaGVhZGVyewogICAgYmFja2dyb3VuZDogcmdiKDIwMCwgMjAwLCAyMDApOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2LmNvbGxhcHNpYmxlLWhlYWRlcjphZnRlcnsKICAgIGNvbnRlbnQ6ICduZXR3b3JrX2NlbGwnOwogICAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTsKICAgIC13ZWJraXQtZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICAtbW96LWZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOwogICAgZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICBmb250LWZhbWlseTogJ01hdGVyaWFsIEljb25zJzsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAxOHB4OwogICAgdG9wOiA1MCU7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTYwJSkgcm90YXRlKDQ1ZGVnKTsKICAgIHRyYW5zaXRpb246IGFsbCAuM3MgZWFzZS1vdXQ7Cn0KI21haW5fd3JhcHBlciAuY29udGFpbmVyID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYuY29sbGFwc2libGUtaGVhZGVyLmFjdGl2ZTphZnRlcnsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNDAlKSByb3RhdGUoLTEzNWRlZyk7Cn0KI21haW5fd3JhcHBlciAuY29udGFpbmVyID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdi5jb2xsYXBzaWJsZS1oZWFkZXJ7CiAgICBjb2xvcjogcmdiKDAsIDYyLCAxNDUpOwogICAgcGFkZGluZy1sZWZ0OiA0MHB4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciBkaXYuY29sbGFwc2libGUtYm9keXsKICAgIHBhZGRpbmctbGVmdDogMDsKICAgIHBhZGRpbmctcmlnaHQ6IDA7Cn0KI2NhdGFsb2ctd3JhcHBlciA+IGRpdiA+IHVsID4gbGkgPiBkaXYuY2F0YWxvZy1jb2xsYXBzaWJsZS5jb2xsYXBzaWJsZS1ib2R5ID4gdWwgPiBsaSA+IGRpdi5jYXRhbG9nLWNvbGxhcHNpYmxlLmNvbGxhcHNpYmxlLWJvZHkgPiB1bCA+IGxpID4gYSB7CiAgICBwYWRkaW5nLWxlZnQ6IDQwcHg7Cn0KCiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYuY29sbGFwc2libGUtaGVhZGVyLmFjdGl2ZSwKI21haW5fd3JhcHBlciAuY29udGFpbmVyID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5jb2xsYXBzaWJsZSA+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlci5hY3RpdmV7CiAgICBiYWNrZ3JvdW5kOiAjZTBlNGZmOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYuY29sbGFwc2libGUtaGVhZGVyOmJlZm9yZXsKICAgIGNvbnRlbnQ6ICdzZXR0aW5ncyc7CiAgICB0ZXh0LXJlbmRlcmluZzogb3B0aW1pemVMZWdpYmlsaXR5OwogICAgLXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKICAgIC1tb3otZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICBmb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKICAgIGZvbnQtZmFtaWx5OiAnTWF0ZXJpYWwgSWNvbnMnOwogICAgZm9udC1zaXplOiAyMHB4OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogMTBweDsKICAgIHRvcDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwp9CiNtYWluX3dyYXBwZXIgLmNvbGxhcHNpYmxlLCAjbWFpbl93cmFwcGVyIC5jb2xsYXBzaWJsZS1ib2R5ewogICAgYm9yZGVyOiBub25lOwogICAgYm94LXNoYWRvdzogbm9uZTsKfQojbWFpbl93cmFwcGVyIC5jb250YWluZXIgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyewogICAgcGFkZGluZy1sZWZ0OiA1MHB4OwogICAgY29sb3I6IHJnYigwLCA2MiwgMTQ1KTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQojbWFpbl93cmFwcGVyIC5jb250YWluZXIgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyOmJlZm9yZXsKICAgIGNvbnRlbnQ6ICduZXR3b3JrX2NlbGwnOwogICAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTsKICAgIC13ZWJraXQtZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICAtbW96LWZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOwogICAgZm9udC1mZWF0dXJlLXNldHRpbmdzOiAnbGlnYSc7CiAgICBmb250LWZhbWlseTogJ01hdGVyaWFsIEljb25zJzsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDIwcHg7CiAgICB0b3A6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoLTQ1ZGVnKTsKfQojbWFpbl93cmFwcGVyIC5jb250YWluZXIgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAubmVzdGVkLXNlcnZpY2VzewogICAgcGFkZGluZzogMTBweCAwOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgYmFja2dyb3VuZDogI2UwZTRmZjsKfQojbWFpbl93cmFwcGVyIC5jb250YWluZXIgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAubmVzdGVkLXNlcnZpY2VzIGxpewogICAgcGFkZGluZy1sZWZ0OiA2NXB4OwogICAgbGlzdC1zdHlsZS10eXBlOiBub25lOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdiA+IC5uZXN0ZWQtc2VydmljZXMgPiBsaTpiZWZvcmV7CiAgICBjb250ZW50OiAn4oCUJzsKICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7CiAgICAtd2Via2l0LWZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOwogICAgLW1vei1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsKICAgIGZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogNDZweDsKICAgIHRvcDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwp9CiNtYWluX3dyYXBwZXIgLmNvbnRhaW5lciA+IC5jb2xsYXBzaWJsZSA+IGxpID4gZGl2ID4gLmNvbGxhcHNpYmxlID4gbGkgPiBkaXYgPiAuY29sbGFwc2libGUgPiBsaSA+IGRpdi5jb2xsYXBzaWJsZS1ib2R5ewogICAgbWFyZ2luLXRvcDogMDsKICAgIHBhZGRpbmctdG9wOiAwOwp9Ci5uZXN0ZWQtc2VydmljZXMgYXsKICAgIGNvbG9yOiByZ2IoMCwgNjIsIDE0NSk7Cn0KLmJ1dHRvbi1sZWZ0ewogICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICB3aWR0aDogMTAwJTsKICAgIG1hcmdpbi10b3A6IDIwcHg7Cn0KLmJ1dHRvbi1sZWZ0IGF7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGNvbG9yOiBibGFjazsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM0NDQ0NDQ7Cn0KLmJ1dHRvbi1sZWZ0IGE6aG92ZXIsIC5idXR0b24tbGVmdCBhOmZvY3VzewogICAgYmFja2dyb3VuZDogcmdiKDIyMCwgMjIwLCAyMjApOwp9CgoudGFibGUtaGVhZGVyLXRoZW1lIHsKICAgIG1hcmdpbjogMDsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi50YWJsZS1oZWFkZXItZGVzY3JpcHRpb24gewogICAgbWFyZ2luOiAxMHB4IDAgMDsKICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKfQoKLmxpa2UtaW5wdXR7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBwYWRkaW5nOiAzcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDQ0NDQ0OwogICAgYm94LXNoYWRvdzogMCAwIDRweCAjNDQ0NDQ0OwogICAgbWF4LXdpZHRoOiA0MDBweDsKICAgIHdpZHRoOiAxMDAlOwogICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIGxpbmUtaGVpZ2h0OiAyOXB4Owp9CiN0aWNrZXRBY2NvcmRpb24gLmNvbGxhcHNpYmxlLWhlYWRlcnsKICAgIHBhZGRpbmctbGVmdDogMDsKfQojdGlja2V0QWNjb3JkaW9uIC5kYXRlcGlja2VyLCAjdGlja2V0QWNjb3JkaW9uIC50aW1lcGlja2VyewogICAgbWFyZ2luOiAwOwogICAgd2lkdGg6IDIwMHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgIzQ0NDQ0NDsKICAgIGJveC1zaGFkb3c6IDAgMCA0cHggIzQ0NDQ0NDsKICAgIHBhZGRpbmc6IDAgMTBweDsKICAgIG1hcmdpbi1yaWdodDogMTVweDsKfQojdGlja2V0QWNjb3JkaW9uIC5kYXRlcGlja2VyLndyb25nLCAjdGlja2V0QWNjb3JkaW9uIC50aW1lcGlja2VyLndyb25newogICAgYm94LXNoYWRvdzogMCAwIDRweCByZWQ7CiAgICBib3JkZXItY29sb3I6IHJlZDsKfQojdGlja2V0QWNjb3JkaW9uIGgyIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMjVweDsKICAgIGNvbG9yOiByZWQ7Cn0KI3RpY2tldEFjY29yZGlvbiAudGV4dC1sZWZ0ID4gLmNvbGxhcHNpYmxlLWJvZHl7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CiNkZWNsaW5lLCAjdGltZUJ0bnsKICAgIG1hcmdpbi10b3A6IDIwcHg7Cn0KI3RpY2tldEFjY29yZGlvbiB0ZXh0YXJlYXsKICAgIHJlc2l6ZTogbm9uZTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNCREJEQkQ7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBtaW4taGVpZ2h0OiA1cmVtOwogICAgb3ZlcmZsb3cteTogaGlkZGVuOwogICAgcGFkZGluZzogMDsKfQoudGV4dC1jZW50ZXIgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci50aGVtZS1kb3duLWljb257CiAgICBmb250LXNpemU6IDIwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KZm9ybSBwLnRpY2tldC1icmVhYmNydW1ic3sKICAgIGZvbnQtc2l6ZTogMTdweDsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjQkRCREJEOwogICAgcGFkZGluZzogNXB4IDE1cHg7Cn0KLnRpY2tldC1icmVhYmNydW1icyBpewogICAgZm9udC1zaXplOiAyMnB4OwogICAgbGluZS1oZWlnaHQ6IDE2cHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB0b3A6IDRweDsKICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7Cn0KI2FwcHJvdmVfdGlja2V0LCAjYXBwcm92ZV90aWNrZXRfbW9kYWx7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgYmFja2dyb3VuZDogIzAwYjA0YzsKfQojY2FuY2VsX3RpY2tldCB7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgYmFja2dyb3VuZDogcmdiKDE1NSwgMTMsIDIpOwp9CiNjYW5jZWxfdGlja2V0OmhvdmVyIHsKICAgIG9wYWNpdHk6IC43OwogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KI2FwcHJvdmVNb2RhbCAucmF0ZSB7CiAgICBtYXJnaW4tdG9wOiAzMHB4OwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgIC8qIENocm9tZSBhbGwgLyBTYWZhcmkgYWxsICovCiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOyAgICAgLyogRmlyZWZveCBhbGwgKi8KICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsgICAgICAvKiBJRSAxMCsgKi8KICAgIHVzZXItc2VsZWN0OiBub25lOyAgICAgICAgICAvKiBMaWtlbHkgZnV0dXJlICovCn0KI2FwcHJvdmVNb2RhbCAucmF0ZSBpewogICAgZm9udC1zaXplOiA1MHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwp9CiNhcHByb3ZlTW9kYWwgLnJhdGUgaS5ob3ZlcnsKICAgICBjb2xvcjogIzAwZGNiNTsKfQouc21hbGwtbWFyZ2luewogICAgbWFyZ2luOiAycHggMDsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KLnNtYWxsLW1hcmdpbiBzcGFuewogICAgcGFkZGluZzogMCAzcHg7Cn0KLnJlZC1iYWRnZSB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTU1LCAxMywgMik7CiAgICBjb2xvcjogd2hpdGU7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIHBhZGRpbmc6IDJweCAxNnB4Owp9CiN0aWNrZXRBY2NvcmRpb24gLmNvbGxhcHNpYmxlLWhlYWRlciBpIHsKICAgIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjNzIGVhc2Utb3V0O3RyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIC4zcyBlYXNlLW91dDstby10cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjNzIGVhc2Utb3V0O3RyYW5zaXRpb246IHRyYW5zZm9ybSAuM3MgZWFzZS1vdXQ7dHJhbnNpdGlvbjogdHJhbnNmb3JtIC4zcyBlYXNlLW91dCwgLXdlYmtpdC10cmFuc2Zvcm0gLjNzIGVhc2Utb3V0Owp9CiN0aWNrZXRBY2NvcmRpb24gLmNvbGxhcHNpYmxlLWhlYWRlci5hY3RpdmUgaXsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxLCAtMSk7LW1zLXRyYW5zZm9ybTogc2NhbGUoMSwgLTEpO3RyYW5zZm9ybTogc2NhbGUoMSwgLTEpOwp9Ci5zbWFsbC10aXRsZXsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgIG1hcmdpbi10b3A6IDI1cHg7CiAgICBmb250LXNpemU6IDE4cHg7Cn0KYS5jb21tZW50LWJ1dHRvbltkaXNhYmxlZF17CiAgICBjb2xvcjogZ3JleTsKfQouYXR0YWNobWVudC1saW5rewogICAgbWFyZ2luOiAyMHB4IDA7Cn0KLmJhY2stY29sIHsKICAgIG1hcmdpbjogMjBweCAwOwogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KLmZsZXgtY250ewogICAgZGlzcGxheTogLXdlYmtpdC1ib3g7ZGlzcGxheTogLW1zLWZsZXhib3g7ZGlzcGxheTogZmxleDsKICAgIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7LW1zLWZsZXgtYWxpZ246IGNlbnRlcjthbGlnbi1pdGVtczogY2VudGVyOwp9Ci5mbGV4LWNudCA+ICp7CiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMXB4OwogICAgZmxleC1iYXNpczogMXB4OwogICAgLW1zLWZsZXgtbmVnYXRpdmU6IDE7CiAgICBmbGV4LXNocmluazogMTsKICAgIG1hcmdpbjogMTBweDsKICAgIC13ZWJraXQtYm94LWZsZXg6IDE1Oy1tcy1mbGV4LXBvc2l0aXZlOiAxNTtmbGV4LWdyb3c6IDE1Owp9Ci5mbGV4LWNudCAud29ya3N7CiAgICAtd2Via2l0LWJveC1mbGV4OiA0MDstbXMtZmxleC1wb3NpdGl2ZTogNDA7ZmxleC1ncm93OiA0MDsKICAgIG1hcmdpbi1sZWZ0OiAwOwp9Ci5mbGV4LWNudCAuYWRkIHsKICAgIG1hcmdpbi1yaWdodDogMDsKfQoud29ya3MgPiAucm93IHsKICAgIG1hcmdpbi1ib3R0b206IDA7Cn0KI3dvcmtzX3RhYmxlIHRhYmxlIHRoewogICAgd2lkdGg6IDE1JQp9CiN3b3Jrc190YWJsZSB0aDpmaXJzdC1jaGlsZHsKICAgIHdpZHRoOiA0MCUKfQoud29ya3MgaW5wdXRbdHlwZT10ZXh0XSwgLndvcmtzIGlucHV0W3R5cGU9bnVtYmVyXXsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7CiAgICBoZWlnaHQ6IHVuc2V0OwogICAgcGFkZGluZzogNXB4OwogICAgbWFyZ2luLWJvdHRvbTogMDsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIHdpZHRoOiAxMDAlOwp9Ci53b3JrcyAuYWRkewogICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICAtd2Via2l0LWJveC1mbGV4OiAwOy1tcy1mbGV4OiAwIDA7ZmxleDogMCAwOwogICAgbWFyZ2luLXJpZ2h0OiAyNXB4Owp9Ci53b3JrcyAjYWRkLCAud29ya3MgI2FkZFdvcmt7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBCMDRDOwp9Ci53b3JrcyAuZGVsZXRlewogICAgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgLjNzIGVhc2UtaW47LW8tdHJhbnNpdGlvbjogYWxsIC4zcyBlYXNlLWluO3RyYW5zaXRpb246IGFsbCAuM3MgZWFzZS1pbjsKfQoud29ya3MgLmRlbGV0ZTpob3ZlcnsKICAgIGNvbG9yOiByZWQ7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpOwp9CiN3b3Jrc190YWJsZSB0ZCBkaXYuZWRpdHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHBhZGRpbmc6IDdweCAwIDhweCAwOwp9CiN3b3Jrc190YWJsZSB0Ym9keSB0cnsKICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuNXMgbGluZWFyOy1vLXRyYW5zaXRpb246IGJhY2tncm91bmQgLjVzIGxpbmVhcjt0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC41cyBsaW5lYXI7Cn0KI3dvcmtzX3RhYmxlIHRoLCAjd29ya3NfdGFibGUgdGJvZHl7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjQ0NDQ0NDOwp9CiN3b3Jrc190YWJsZSBpLmVkaXQgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDIwJTsKICAgIC8qIHRvcDogMDsgKi8KICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQojYWRkV29ya3sKICAgIG1hcmdpbi10b3A6IDE1cHg7Cn0KI3dvcmtzX3RhYmxlIHRyLmNoYW5nZWQgewogICAgYmFja2dyb3VuZDogI2ZkZmZiYzsKfQoudHlwZSBidXR0b257CiAgICB3aWR0aDogNTAlOwogICAgYm9yZGVyOiAxcHggc29saWQgIzQ0NDQ0NDsKICAgIHBhZGRpbmc6IDNweDsKICAgIGNvbG9yOmJsYWNrOwogICAgYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLDAsMCwwLjE0KSwgMCAxcHggNXB4IDAgcmdiYSgwLDAsMCwwLjEyKSwgMCAzcHggMXB4IC0ycHggcmdiYSgwLDAsMCwwLjIpOwogICAgdHJhbnNmb3JtOiBzY2FsZSguOTUpOwogICAgYmFja2dyb3VuZDogI2QyZDJkMjsKfQoudHlwZSBidXR0b246Zmlyc3QtY2hpbGR7CiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA1cHg7CiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA1cHg7Cn0KLnR5cGUgYnV0dG9uOm5vdCg6Zmlyc3QtY2hpbGQpewogICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDVweDsKICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7Cn0KLnR5cGUgYnV0dG9uW2Rpc2FibGVkXSwgLnR5cGUgYnV0dG9uOmhvdmVyewogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOwp9Ci5oZWFkZXItbG9nb3sKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgZmxvYXQ6IGxlZnQ7CiAgICBwYWRkaW5nOiA1cHggMDsKICAgIG1hcmdpbi1yaWdodDogMTVweDsKfQouaGVhZGVyLWxvZ28gaW1nIHsKICAgIGhlaWdodDogMTAwJTsKfQoubmF2LXdyYXBwZXJ7CiAgICBmb250LXNpemU6IDE4cHg7Cn0KLnNlbGVjdC13cmFwcGVyLm1hcmdpbnN7CiAgICBtYXJnaW4tdG9wOiAxNXB4Owp9CiNpbnZlbnRvcnlfbnVtewogICAgYm9yZGVyOiAxcHggc29saWQgI0JEQkRCRDsKICAgIHBhZGRpbmctbGVmdDogNXB4OwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGRpc3BsYXk6IGJsb2NrOwp9Ci5tbC0xMCB7IG1hcmdpbi1sZWZ0OiAxMHB4O30KLm1yLTEwIHsgbWFyZ2luLXJpZ2h0OiAxMHB4O30KLm10LTE1IHsgbWFyZ2luLXRvcDogMTVweDt9Ci5zdGF0ZS1wYWR7CiAgICBwYWRkaW5nOiAzcHg7CiAgICBib3JkZXItcmFkaXVzOiA3cHg7Cn0KbGkgLnJvd3sKICAgIG1hcmdpbi1ib3R0b206IDA7Cn0KLmF1dG9jb21wbGV0ZS1jb250ZW50ewogICAgbWFyZ2luLXRvcDogMDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiAxMDAlOwp9Ci5tYXRlcmlhbF9saWtlIHsKICAgIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDZweDsKICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94ICFpbXBvcnRhbnQ7Cn0KLm1hdGVyaWFsX2xpa2UgLnNlbGVjdDItc2VsZWN0aW9uX19hcnJvd3sKICAgIHRvcDogN3B4ICFpbXBvcnRhbnQ7CiAgICByaWdodDogN3B4ICFpbXBvcnRhbnQ7CiB9Ci5iYWNrLWluLXdvcmt7CiAgICBiYWNrZ3JvdW5kOiAjZmJjMDJkOwogICAgY29sb3I6IGJsYWNrOwp9Ci5iYWNrLWluLXdvcms6aG92ZXIgewogICAgYmFja2dyb3VuZDogI2ZmZTVhNjsKICAgIGNvbG9yOiBibGFjazsKfQouc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyewogICAgZm9udC1zaXplOiAyNXB4Owp9CmkuaW5oZXJpdC1mb250ewogICAgZm9udC1zaXplOiAxOHB4Owp9Ci5waWNrZXJfX3dlZWtkYXktZGlzcGxheXsKICAgIGZvbnQtc2l6ZTogMjdweDsKfQoudGFiIHNwYW4uYmFkZ2UgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgdG9wOiAxNHB4OwogICAgY29sb3I6ICM4NGM3YzE7CiAgICBtaW4td2lkdGg6IHVuc2V0OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7Cn0KdWwuY2F0ZWdvcmlzYXRpb257CiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgICBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7Cn0KdWwuY2F0ZWdvcmlzYXRpb24gbGl7CiAgICBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7Cn0KLnNsYS1ibHVlLWljb257CiAgICBjb2xvcjogcmdiYSgzOCwgMjcsIDI1MSwgMC42Myk7Cn0KLnRhYiA+IGF7CiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsOwp9Ci50b2dnbGVfbmF2YmFyIHsKICAgIGZsb2F0OiBsZWZ0OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgbWFyZ2luLXJpZ2h0OiA1cHg7Cn0KLmFwcGxpY2F0aW9ucyBoNiB7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBtYXJnaW46IDIwcHggMDsKfQouYXBwbGljYXRpb25zIC50eXBlIGJ1dHRvbnsKICAgIGhlaWdodDogNDVweDsKfQouYXBwbGljYXRpb25zIC5mbGV4LXdyYXBwZXJ7CiAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtkaXNwbGF5OiAtbXMtZmxleGJveDtkaXNwbGF5OiBmbGV4OwogICAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjstbXMtZmxleC1hbGlnbjogY2VudGVyO2FsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLmFwcGxpY2F0aW9ucyAuZmxleC13cmFwcGVyIGlucHV0ewogICAgaGVpZ2h0OiAyZW07CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwM2Q7CiAgICBib3JkZXItcmFkaXVzOiAxM3B4OwogICAgbWFyZ2luOiAwIDEwcHg7CiAgICBwYWRkaW5nOiAuNWVtIDEwcHg7Cn0KYnV0dG9uLnVwZGF0ZXsKICAgIG1hcmdpbjogMzBweCAwOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzAwQjA0QyAhaW1wb3J0YW50Owp9CnVsLnBzdy1oZWxwewogICAgbWFyZ2luLXRvcDogMzBweDsKICAgIHBhZGRpbmctbGVmdDogMzVweDsKICAgIGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsKfQp1bC5wc3ctaGVscCBsaXsKICAgIGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsKfQphLnRhYmxlLXJvdyB7CiAgICBkaXNwbGF5OiB0YWJsZS1yb3c7CiAgICBjb2xvcjogaW5oZXJpdDsKfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIHVsLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZHsKICAgIGhlaWdodDogMTAwJTsKICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIHVsLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCA+IGxpewogICAgbGluZS1oZWlnaHQ6IDFlbTsKICAgIHBhZGRpbmc6IDdweCA1cHggIWltcG9ydGFudDsKICAgIG1hcmdpbjogNXB4IDAgNXB4IDVweDsKICAgIGNvbG9yOiBibGFjazsKfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIC5zZWxlY3QyLXNlYXJjaC5zZWxlY3QyLXNlYXJjaC0taW5saW5lLCAuc2VsZWN0Mi1zZWFyY2guc2VsZWN0Mi1zZWFyY2gtLWlubGluZSBpbnB1dHsKICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OwogICAgbWFyZ2luOiAwOwp9Ci5zZWxlY3QyLXNlbGVjdGlvbi0tbXVsdGlwbGUgbGk6Zmlyc3QtY2hpbGQuc2VsZWN0Mi1zZWFyY2guc2VsZWN0Mi1zZWFyY2gtLWlubGluZSwgbGk6Zmlyc3QtY2hpbGQuc2VsZWN0Mi1zZWFyY2guc2VsZWN0Mi1zZWFyY2gtLWlubGluZSBpbnB1dHsKICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7Cn0KCi5zZWxlY3QyLXNlbGVjdGlvbi0tbXVsdGlwbGUgLnNlbGVjdDItc2VhcmNoLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUgaW5wdXR7CiAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIC5zZWxlY3QyLXNlYXJjaC5zZWxlY3QyLXNlYXJjaC0taW5saW5lIGlucHV0Ojotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyIHsgY29sb3I6ICM5OTkgfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIC5zZWxlY3QyLXNlYXJjaC5zZWxlY3QyLXNlYXJjaC0taW5saW5lIGlucHV0OjotbW96LXBsYWNlaG9sZGVyICAgICAgICAgIHsgY29sb3I6ICM5OTkgfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIC5zZWxlY3QyLXNlYXJjaC5zZWxlY3QyLXNlYXJjaC0taW5saW5lIGlucHV0Oi1tb3otcGxhY2Vob2xkZXIgICAgICAgICAgIHsgY29sb3I6ICM5OTkgfQouc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlIC5zZWxlY3QyLXNlYXJjaC5zZWxlY3QyLXNlYXJjaC0taW5saW5lIGlucHV0Oi1tcy1pbnB1dC1wbGFjZWhvbGRlciAgICAgIHsgY29sb3I6ICM5OTkgfQoKLnNlbGVjdDItc2VsZWN0aW9uLS1tdWx0aXBsZSAuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyIHsKICAgIGNvbG9yOiBibGFjazsKICAgIGxpbmUtaGVpZ2h0OiAyOHB4Owp9Ci5zbWhvewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTU1LCAxMywgMik7CiAgICBjb2xvcjogd2hpdGU7Cn0KLnNtaG8uZ3JlZW57CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBCMDRDOwp9CiNuYXYtbW9iaWxlLmFkbWluLW5hdiB1bCB7CiAgICBtYXJnaW46IDA7Cn0KI25hdi1tb2JpbGUuYWRtaW4tbmF2IC50aW1lewogICAgY29sb3I6IGJsYWNrOwogICAgcGFkZGluZzogMCAxNXB4Owp9CiN0YWJsZS13cmFwcGVyLm1hcmdpbi10b3B7CiAgICBtYXJnaW4tdG9wOiAyMHB4IDsKfQouY3VzdG9tLWJhZGdlIHsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2M0YzRjNDsKICAgIHBhZGRpbmc6IDJweCAxMHB4OwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CnRhYmxlIHVsIHsKICAgIHBhZGRpbmctbGVmdDogMCAhaW1wb3J0YW50Owp9CnRhYmxlIGxpIHsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQp0YWJsZSBsaTpiZWZvcmV7CiAgICBjb250ZW50OiAn4oCiJzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICBmb250LXdlaWdodDogYm9sZDsKfQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="26" hostname="learning2.pflb.ru:56902" path="/js/core/legacy.js" url="http://learning2.pflb.ru:56902/js/core/legacy.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52237" connectionId="2228" origin="HTML" encodingType="ANSI" ordinal="4" startDateTime="2020-02-23T18:01:14.455+04:00" startTime="4706" endTime="4784" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb3JlL2xlZ2FjeS5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2luDQpVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzOiAxDQpYLVJlcXVlc3RlZC1XaXRoOiBYTUxIdHRwUmVxdWVzdA0KZG50OiAxDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzkuMC4zOTQ1LjEzMCBTYWZhcmkvNTM3LjM2IE9QUi82Ni4wLjM1MTUuMTAzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjcNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBsZWFybmluZzIucGZsYi5ydTo1NjkwMg0KQ29va2llOiBzZXNzaW9uRXhwaXJlZD1mYWxzZTsgUEZMQi5wcmUubG9naW4ubGluaz1udWxsOyBmaWx0ZXJTZXR0aW5nPSU3QiUyMnBhZ2UlMjIlM0ElMjJodHRwJTNBJTJGJTJGbGVhcm5pbmcyLnBmbGIucnUlM0E1NjkwMiUyRiUyM3RpY2tldHMlM0ZzdGF0ZSUzRG9wZW5lZCUyNnBhZ2UlM0QxJTIyJTJDJTIyc21obyUyMiUzQW51bGwlMkMlMjJkYXRlU3RhcnQlMjIlM0ElMjIlMjIlMkMlMjJkYXRlRW5kJTIyJTNBJTIyJTIyJTJDJTIyY2F0MSUyMiUzQW51bGwlMkMlMjJjYXQyJTIyJTNBbnVsbCUyQyUyMmNhdDMlMjIlM0FudWxsJTJDJTIyY2F0NCUyMiUzQW51bGwlMkMlMjJ0aGVtZSUyMiUzQW51bGwlMkMlMjJvdmVyZHVlJTIyJTNBZmFsc2UlMkMlMjJmaWx0ZXJzJTIyJTNBJTdCJTIybmV3Q2hlY2tib3glMjIlM0F0cnVlJTJDJTIyYXBwb2ludGVkQ2hlY2tib3glMjIlM0F0cnVlJTJDJTIycGVyZm9ybWVkQ2hlY2tib3glMjIlM0F0cnVlJTJDJTIyY29udHJvbENoZWNrYm94JTIyJTNBdHJ1ZSU3RCU3RA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>438</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDM4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDQzOA0KRGF0ZTogU3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aWYoIUFycmF5LnByb3RvdHlwZS5maW5kKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCdmaW5kJyx7dmFsdWU6ZnVuY3Rpb24ocHJlZGljYXRlKXtpZih0aGlzPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCcidGhpcyIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO312YXIgbz1PYmplY3QodGhpcyk7dmFyIGxlbj1vLmxlbmd0aD4+PjA7aWYodHlwZW9mIHByZWRpY2F0ZSE9PSdmdW5jdGlvbicpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTt9dmFyIHRoaXNBcmc9YXJndW1lbnRzWzFdO3ZhciBrPTA7d2hpbGUgKGs8bGVuKXt2YXIga1ZhbHVlPW9ba107aWYocHJlZGljYXRlLmNhbGwodGhpc0FyZyxrVmFsdWUsayxvKSl7cmV0dXJuIGtWYWx1ZTt9aysrO31yZXR1cm4gdW5kZWZpbmVkO319KTt9</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="27" hostname="learning2.pflb.ru:56902" path="/js/core/jquery-3.1.1.js" url="http://learning2.pflb.ru:56902/js/core/jquery-3.1.1.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52238" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="5" startDateTime="2020-02-23T18:01:14.456+04:00" startTime="4707" endTime="5179" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb3JlL2pxdWVyeS0zLjEuMS5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2luDQpVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzOiAxDQpYLVJlcXVlc3RlZC1XaXRoOiBYTUxIdHRwUmVxdWVzdA0KZG50OiAxDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzkuMC4zOTQ1LjEzMCBTYWZhcmkvNTM3LjM2IE9QUi82Ni4wLjM1MTUuMTAzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjcNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBsZWFybmluZzIucGZsYi5ydTo1NjkwMg0KQ29va2llOiBzZXNzaW9uRXhwaXJlZD1mYWxzZTsgUEZMQi5wcmUubG9naW4ubGluaz1udWxsOyBmaWx0ZXJTZXR0aW5nPSU3QiUyMnBhZ2UlMjIlM0ElMjJodHRwJTNBJTJGJTJGbGVhcm5pbmcyLnBmbGIucnUlM0E1NjkwMiUyRiUyM3RpY2tldHMlM0ZzdGF0ZSUzRG9wZW5lZCUyNnBhZ2UlM0QxJTIyJTJDJTIyc21obyUyMiUzQW51bGwlMkMlMjJkYXRlU3RhcnQlMjIlM0ElMjIlMjIlMkMlMjJkYXRlRW5kJTIyJTNBJTIyJTIyJTJDJTIyY2F0MSUyMiUzQW51bGwlMkMlMjJjYXQyJTIyJTNBbnVsbCUyQyUyMmNhdDMlMjIlM0FudWxsJTJDJTIyY2F0NCUyMiUzQW51bGwlMkMlMjJ0aGVtZSUyMiUzQW51bGwlMkMlMjJvdmVyZHVlJTIyJTNBZmFsc2UlMkMlMjJmaWx0ZXJzJTIyJTNBJTdCJTIybmV3Q2hlY2tib3glMjIlM0F0cnVlJTJDJTIyYXBwb2ludGVkQ2hlY2tib3glMjIlM0F0cnVlJTJDJTIycGVyZm9ybWVkQ2hlY2tib3glMjIlM0F0cnVlJTJDJTIyY29udHJvbENoZWNrYm94JTIyJTNBdHJ1ZSU3RCU3RA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>267194</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjY3MTk0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDI2NzE5NA0KRGF0ZTogU3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjMuMS4xCiAqIGh0dHBzOi8vanF1ZXJ5LmNvbS8KICoKICogSW5jbHVkZXMgU2l6emxlLmpzCiAqIGh0dHBzOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogRGF0ZTogMjAxNi0wOS0yMlQyMjozMFoKICovCiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHsKCgkidXNlIHN0cmljdCI7CgoJaWYgKCB0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJvYmplY3QiICkgewoKCQkvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgCgkJLy8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS4KCQkvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YAoJCS8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLgoJCS8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuCgkJLy8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZSgianF1ZXJ5Iikod2luZG93KTsKCQkvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLgoJCW1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID8KCQkJZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOgoJCQlmdW5jdGlvbiggdyApIHsKCQkJCWlmICggIXcuZG9jdW1lbnQgKSB7CgkJCQkJdGhyb3cgbmV3IEVycm9yKCAialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIgKTsKCQkJCX0KCQkJCXJldHVybiBmYWN0b3J5KCB3ICk7CgkJCX07Cgl9IGVsc2UgewoJCWZhY3RvcnkoIGdsb2JhbCApOwoJfQoKLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXQKfSApKCB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkgewoKLy8gRWRnZSA8PSAxMiAtIDEzKywgRmlyZWZveCA8PTE4IC0gNDUrLCBJRSAxMCAtIDExLCBTYWZhcmkgNS4xIC0gOSssIGlPUyA2IC0gOS4xCi8vIHRocm93IGV4Y2VwdGlvbnMgd2hlbiBub24tc3RyaWN0IGNvZGUgKGUuZy4sIEFTUC5ORVQgNC41KSBhY2Nlc3NlcyBzdHJpY3QgbW9kZQovLyBhcmd1bWVudHMuY2FsbGVlLmNhbGxlciAodHJhYy0xMzMzNSkuIEJ1dCBhcyBvZiBqUXVlcnkgMy4wICgyMDE2KSwgc3RyaWN0IG1vZGUgc2hvdWxkIGJlIGNvbW1vbgovLyBlbm91Z2ggdGhhdCBhbGwgc3VjaCBhdHRlbXB0cyBhcmUgZ3VhcmRlZCBpbiBhIHRyeSBibG9jay4KInVzZSBzdHJpY3QiOwoKdmFyIGFyciA9IFtdOwoKdmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50OwoKdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mOwoKdmFyIHNsaWNlID0gYXJyLnNsaWNlOwoKdmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7Cgp2YXIgcHVzaCA9IGFyci5wdXNoOwoKdmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjsKCnZhciBjbGFzczJ0eXBlID0ge307Cgp2YXIgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nOwoKdmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7Cgp2YXIgZm5Ub1N0cmluZyA9IGhhc093bi50b1N0cmluZzsKCnZhciBPYmplY3RGdW5jdGlvblN0cmluZyA9IGZuVG9TdHJpbmcuY2FsbCggT2JqZWN0ICk7Cgp2YXIgc3VwcG9ydCA9IHt9OwoKCgoJZnVuY3Rpb24gRE9NRXZhbCggY29kZSwgZG9jICkgewoJCWRvYyA9IGRvYyB8fCBkb2N1bWVudDsKCgkJdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCAic2NyaXB0IiApOwoKCQlzY3JpcHQudGV4dCA9IGNvZGU7CgkJZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApOwoJfQovKiBnbG9iYWwgU3ltYm9sICovCi8vIERlZmluaW5nIHRoaXMgZ2xvYmFsIGluIC5lc2xpbnRyYy5qc29uIHdvdWxkIGNyZWF0ZSBhIGRhbmdlciBvZiB1c2luZyB0aGUgZ2xvYmFsCi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBkZWZpbmUgZ2xvYmFsIG9ubHkgZm9yIHRoaXMgbW9kdWxlCgoKCnZhcgoJdmVyc2lvbiA9ICIzLjEuMSIsCgoJLy8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnkKCWpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHsKCgkJLy8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnCgkJLy8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZCkKCQlyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApOwoJfSwKCgkvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHkKCS8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUAoJcnRyaW0gPSAvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csCgoJLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nCglybXNQcmVmaXggPSAvXi1tcy0vLAoJcmRhc2hBbHBoYSA9IC8tKFthLXpdKS9nLAoKCS8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKCkKCWZjYW1lbENhc2UgPSBmdW5jdGlvbiggYWxsLCBsZXR0ZXIgKSB7CgkJcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpOwoJfTsKCmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7CgoJLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZAoJanF1ZXJ5OiB2ZXJzaW9uLAoKCWNvbnN0cnVjdG9yOiBqUXVlcnksCgoJLy8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwCglsZW5ndGg6IDAsCgoJdG9BcnJheTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTsKCX0sCgoJLy8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUgoJLy8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXkKCWdldDogZnVuY3Rpb24oIG51bSApIHsKCgkJLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheQoJCWlmICggbnVtID09IG51bGwgKSB7CgkJCXJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7CgkJfQoKCQkvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0CgkJcmV0dXJuIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF07Cgl9LAoKCS8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2sKCS8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KQoJcHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7CgoJCS8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0CgkJdmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApOwoKCQkvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKQoJCXJldC5wcmV2T2JqZWN0ID0gdGhpczsKCgkJLy8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXQKCQlyZXR1cm4gcmV0OwoJfSwKCgkvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LgoJZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkgewoJCXJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTsKCX0sCgoJbWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHsKCQkJcmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTsKCQl9ICkgKTsKCX0sCgoJc2xpY2U6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7Cgl9LAoKCWZpcnN0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lcSggMCApOwoJfSwKCglsYXN0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lcSggLTEgKTsKCX0sCgoJZXE6IGZ1bmN0aW9uKCBpICkgewoJCXZhciBsZW4gPSB0aGlzLmxlbmd0aCwKCQkJaiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTsKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7Cgl9LAoKCWVuZDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKCk7Cgl9LAoKCS8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS4KCS8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLgoJcHVzaDogcHVzaCwKCXNvcnQ6IGFyci5zb3J0LAoJc3BsaWNlOiBhcnIuc3BsaWNlCn07CgpqUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkgewoJdmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLAoJCXRhcmdldCA9IGFyZ3VtZW50c1sgMCBdIHx8IHt9LAoJCWkgPSAxLAoJCWxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsCgkJZGVlcCA9IGZhbHNlOwoKCS8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb24KCWlmICggdHlwZW9mIHRhcmdldCA9PT0gImJvb2xlYW4iICkgewoJCWRlZXAgPSB0YXJnZXQ7CgoJCS8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXQKCQl0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTsKCQlpKys7Cgl9CgoJLy8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpCglpZiAoIHR5cGVvZiB0YXJnZXQgIT09ICJvYmplY3QiICYmICFqUXVlcnkuaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7CgkJdGFyZ2V0ID0ge307Cgl9CgoJLy8gRXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkCglpZiAoIGkgPT09IGxlbmd0aCApIHsKCQl0YXJnZXQgPSB0aGlzOwoJCWktLTsKCX0KCglmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCgkJLy8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlcwoJCWlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkgewoKCQkJLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdAoJCQlmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7CgkJCQlzcmMgPSB0YXJnZXRbIG5hbWUgXTsKCQkJCWNvcHkgPSBvcHRpb25zWyBuYW1lIF07CgoJCQkJLy8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcAoJCQkJaWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7CgkJCQkJY29udGludWU7CgkJCQl9CgoJCQkJLy8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzCgkJCQlpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb3B5ICkgfHwKCQkJCQkoIGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoIGNvcHkgKSApICkgKSB7CgoJCQkJCWlmICggY29weUlzQXJyYXkgKSB7CgkJCQkJCWNvcHlJc0FycmF5ID0gZmFsc2U7CgkJCQkJCWNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KCBzcmMgKSA/IHNyYyA6IFtdOwoKCQkJCQl9IGVsc2UgewoJCQkJCQljbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggc3JjICkgPyBzcmMgOiB7fTsKCQkJCQl9CgoJCQkJCS8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbQoJCQkJCXRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTsKCgkJCQkvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzCgkJCQl9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJdGFyZ2V0WyBuYW1lIF0gPSBjb3B5OwoJCQkJfQoJCQl9CgkJfQoJfQoKCS8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0CglyZXR1cm4gdGFyZ2V0Owp9OwoKalF1ZXJ5LmV4dGVuZCggewoKCS8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZQoJZXhwYW5kbzogImpRdWVyeSIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xEL2csICIiICksCgoJLy8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGUKCWlzUmVhZHk6IHRydWUsCgoJZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7CgkJdGhyb3cgbmV3IEVycm9yKCBtc2cgKTsKCX0sCgoJbm9vcDogZnVuY3Rpb24oKSB7fSwKCglpc0Z1bmN0aW9uOiBmdW5jdGlvbiggb2JqICkgewoJCXJldHVybiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJmdW5jdGlvbiI7Cgl9LAoKCWlzQXJyYXk6IEFycmF5LmlzQXJyYXksCgoJaXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7CgkJcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdzsKCX0sCgoJaXNOdW1lcmljOiBmdW5jdGlvbiggb2JqICkgewoKCQkvLyBBcyBvZiBqUXVlcnkgMy4wLCBpc051bWVyaWMgaXMgbGltaXRlZCB0bwoJCS8vIHN0cmluZ3MgYW5kIG51bWJlcnMgKHByaW1pdGl2ZXMgb3Igb2JqZWN0cykKCQkvLyB0aGF0IGNhbiBiZSBjb2VyY2VkIHRvIGZpbml0ZSBudW1iZXJzIChnaC0yNjYyKQoJCXZhciB0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApOwoJCXJldHVybiAoIHR5cGUgPT09ICJudW1iZXIiIHx8IHR5cGUgPT09ICJzdHJpbmciICkgJiYKCgkJCS8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzICgiIikKCQkJLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoIjB4Li4uIikKCQkJLy8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOCgkJCSFpc05hTiggb2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKTsKCX0sCgoJaXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHsKCQl2YXIgcHJvdG8sIEN0b3I7CgoJCS8vIERldGVjdCBvYnZpb3VzIG5lZ2F0aXZlcwoJCS8vIFVzZSB0b1N0cmluZyBpbnN0ZWFkIG9mIGpRdWVyeS50eXBlIHRvIGNhdGNoIGhvc3Qgb2JqZWN0cwoJCWlmICggIW9iaiB8fCB0b1N0cmluZy5jYWxsKCBvYmogKSAhPT0gIltvYmplY3QgT2JqZWN0XSIgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXByb3RvID0gZ2V0UHJvdG8oIG9iaiApOwoKCQkvLyBPYmplY3RzIHdpdGggbm8gcHJvdG90eXBlIChlLmcuLCBgT2JqZWN0LmNyZWF0ZSggbnVsbCApYCkgYXJlIHBsYWluCgkJaWYgKCAhcHJvdG8gKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCgkJLy8gT2JqZWN0cyB3aXRoIHByb3RvdHlwZSBhcmUgcGxhaW4gaWZmIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZCBieSBhIGdsb2JhbCBPYmplY3QgZnVuY3Rpb24KCQlDdG9yID0gaGFzT3duLmNhbGwoIHByb3RvLCAiY29uc3RydWN0b3IiICkgJiYgcHJvdG8uY29uc3RydWN0b3I7CgkJcmV0dXJuIHR5cGVvZiBDdG9yID09PSAiZnVuY3Rpb24iICYmIGZuVG9TdHJpbmcuY2FsbCggQ3RvciApID09PSBPYmplY3RGdW5jdGlvblN0cmluZzsKCX0sCgoJaXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHsKCgkJLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KCQkvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzbGludC9lc2xpbnQvaXNzdWVzLzYxMjUKCQl2YXIgbmFtZTsKCgkJZm9yICggbmFtZSBpbiBvYmogKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9LAoKCXR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7CgkJaWYgKCBvYmogPT0gbnVsbCApIHsKCQkJcmV0dXJuIG9iaiArICIiOwoJCX0KCgkJLy8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5IChmdW5jdGlvbmlzaCBSZWdFeHApCgkJcmV0dXJuIHR5cGVvZiBvYmogPT09ICJvYmplY3QiIHx8IHR5cGVvZiBvYmogPT09ICJmdW5jdGlvbiIgPwoJCQljbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8ICJvYmplY3QiIDoKCQkJdHlwZW9mIG9iajsKCX0sCgoJLy8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHQKCWdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkgewoJCURPTUV2YWwoIGNvZGUgKTsKCX0sCgoJLy8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlcwoJLy8gU3VwcG9ydDogSUUgPD05IC0gMTEsIEVkZ2UgMTIgLSAxMwoJLy8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKQoJY2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkgewoJCXJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCAibXMtIiApLnJlcGxhY2UoIHJkYXNoQWxwaGEsIGZjYW1lbENhc2UgKTsKCX0sCgoJbm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCXJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJfSwKCgllYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHsKCQl2YXIgbGVuZ3RoLCBpID0gMDsKCgkJaWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7CgkJCWxlbmd0aCA9IG9iai5sZW5ndGg7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJaWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlmb3IgKCBpIGluIG9iaiApIHsKCQkJCWlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gb2JqOwoJfSwKCgkvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHkKCXRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCXJldHVybiB0ZXh0ID09IG51bGwgPwoJCQkiIiA6CgkJCSggdGV4dCArICIiICkucmVwbGFjZSggcnRyaW0sICIiICk7Cgl9LAoKCS8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHkKCW1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHsKCQl2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTsKCgkJaWYgKCBhcnIgIT0gbnVsbCApIHsKCQkJaWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkgewoJCQkJalF1ZXJ5Lm1lcmdlKCByZXQsCgkJCQkJdHlwZW9mIGFyciA9PT0gInN0cmluZyIgPwoJCQkJCVsgYXJyIF0gOiBhcnIKCQkJCSk7CgkJCX0gZWxzZSB7CgkJCQlwdXNoLmNhbGwoIHJldCwgYXJyICk7CgkJCX0KCQl9CgoJCXJldHVybiByZXQ7Cgl9LAoKCWluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7CgkJcmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApOwoJfSwKCgkvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHkKCS8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXQKCW1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHsKCQl2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsCgkJCWogPSAwLAoJCQlpID0gZmlyc3QubGVuZ3RoOwoKCQlmb3IgKCA7IGogPCBsZW47IGorKyApIHsKCQkJZmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07CgkJfQoKCQlmaXJzdC5sZW5ndGggPSBpOwoKCQlyZXR1cm4gZmlyc3Q7Cgl9LAoKCWdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHsKCQl2YXIgY2FsbGJhY2tJbnZlcnNlLAoJCQltYXRjaGVzID0gW10sCgkJCWkgPSAwLAoJCQlsZW5ndGggPSBlbGVtcy5sZW5ndGgsCgkJCWNhbGxiYWNrRXhwZWN0ID0gIWludmVydDsKCgkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtcwoJCS8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uCgkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCWNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApOwoJCQlpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7CgkJCQltYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTsKCQkJfQoJCX0KCgkJcmV0dXJuIG1hdGNoZXM7Cgl9LAoKCS8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seQoJbWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7CgkJdmFyIGxlbmd0aCwgdmFsdWUsCgkJCWkgPSAwLAoJCQlyZXQgPSBbXTsKCgkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXMKCQlpZiAoIGlzQXJyYXlMaWtlKCBlbGVtcyApICkgewoJCQlsZW5ndGggPSBlbGVtcy5sZW5ndGg7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJdmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7CgoJCQkJaWYgKCB2YWx1ZSAhPSBudWxsICkgewoJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJfQoJCQl9CgoJCS8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsCgkJfSBlbHNlIHsKCQkJZm9yICggaSBpbiBlbGVtcyApIHsKCQkJCXZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApOwoKCQkJCWlmICggdmFsdWUgIT0gbnVsbCApIHsKCQkJCQlyZXQucHVzaCggdmFsdWUgKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5cwoJCXJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTsKCX0sCgoJLy8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzCglndWlkOiAxLAoKCS8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueQoJLy8gYXJndW1lbnRzLgoJcHJveHk6IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHsKCQl2YXIgdG1wLCBhcmdzLCBwcm94eTsKCgkJaWYgKCB0eXBlb2YgY29udGV4dCA9PT0gInN0cmluZyIgKSB7CgkJCXRtcCA9IGZuWyBjb250ZXh0IF07CgkJCWNvbnRleHQgPSBmbjsKCQkJZm4gPSB0bXA7CgkJfQoKCQkvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlYwoJCS8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuCgkJaWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIGZuICkgKSB7CgkJCXJldHVybiB1bmRlZmluZWQ7CgkJfQoKCQkvLyBTaW11bGF0ZWQgYmluZAoJCWFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTsKCQlwcm94eSA9IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTsKCQl9OwoKCQkvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWQKCQlwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKzsKCgkJcmV0dXJuIHByb3h5OwoJfSwKCglub3c6IERhdGUubm93LAoKCS8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpcgoJLy8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC4KCXN1cHBvcnQ6IHN1cHBvcnQKfSApOwoKaWYgKCB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICkgewoJalF1ZXJ5LmZuWyBTeW1ib2wuaXRlcmF0b3IgXSA9IGFyclsgU3ltYm9sLml0ZXJhdG9yIF07Cn0KCi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcApqUXVlcnkuZWFjaCggIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCggIiAiICksCmZ1bmN0aW9uKCBpLCBuYW1lICkgewoJY2xhc3MydHlwZVsgIltvYmplY3QgIiArIG5hbWUgKyAiXSIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKfSApOwoKZnVuY3Rpb24gaXNBcnJheUxpa2UoIG9iaiApIHsKCgkvLyBTdXBwb3J0OiByZWFsIGlPUyA4LjIgb25seSAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpCgkvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpCgkvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXMKCS8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUUKCXZhciBsZW5ndGggPSAhIW9iaiAmJiAibGVuZ3RoIiBpbiBvYmogJiYgb2JqLmxlbmd0aCwKCQl0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApOwoKCWlmICggdHlwZSA9PT0gImZ1bmN0aW9uIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkgewoJCXJldHVybiBmYWxzZTsKCX0KCglyZXR1cm4gdHlwZSA9PT0gImFycmF5IiB8fCBsZW5ndGggPT09IDAgfHwKCQl0eXBlb2YgbGVuZ3RoID09PSAibnVtYmVyIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajsKfQp2YXIgU2l6emxlID0KLyohCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjMuMwogKiBodHRwczovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogRGF0ZTogMjAxNi0wOC0wOAogKi8KKGZ1bmN0aW9uKCB3aW5kb3cgKSB7Cgp2YXIgaSwKCXN1cHBvcnQsCglFeHByLAoJZ2V0VGV4dCwKCWlzWE1MLAoJdG9rZW5pemUsCgljb21waWxlLAoJc2VsZWN0LAoJb3V0ZXJtb3N0Q29udGV4dCwKCXNvcnRJbnB1dCwKCWhhc0R1cGxpY2F0ZSwKCgkvLyBMb2NhbCBkb2N1bWVudCB2YXJzCglzZXREb2N1bWVudCwKCWRvY3VtZW50LAoJZG9jRWxlbSwKCWRvY3VtZW50SXNIVE1MLAoJcmJ1Z2d5UVNBLAoJcmJ1Z2d5TWF0Y2hlcywKCW1hdGNoZXMsCgljb250YWlucywKCgkvLyBJbnN0YW5jZS1zcGVjaWZpYyBkYXRhCglleHBhbmRvID0gInNpenpsZSIgKyAxICogbmV3IERhdGUoKSwKCXByZWZlcnJlZERvYyA9IHdpbmRvdy5kb2N1bWVudCwKCWRpcnJ1bnMgPSAwLAoJZG9uZSA9IDAsCgljbGFzc0NhY2hlID0gY3JlYXRlQ2FjaGUoKSwKCXRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJY29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCglzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHsKCQlpZiAoIGEgPT09IGIgKSB7CgkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJfQoJCXJldHVybiAwOwoJfSwKCgkvLyBJbnN0YW5jZSBtZXRob2RzCgloYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LAoJYXJyID0gW10sCglwb3AgPSBhcnIucG9wLAoJcHVzaF9uYXRpdmUgPSBhcnIucHVzaCwKCXB1c2ggPSBhcnIucHVzaCwKCXNsaWNlID0gYXJyLnNsaWNlLAoJLy8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlCgkvLyBodHRwczovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81CglpbmRleE9mID0gZnVuY3Rpb24oIGxpc3QsIGVsZW0gKSB7CgkJdmFyIGkgPSAwLAoJCQlsZW4gPSBsaXN0Lmxlbmd0aDsKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCBsaXN0W2ldID09PSBlbGVtICkgewoJCQkJcmV0dXJuIGk7CgkJCX0KCQl9CgkJcmV0dXJuIC0xOwoJfSwKCglib29sZWFucyA9ICJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsCgoJLy8gUmVndWxhciBleHByZXNzaW9ucwoKCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlCgl3aGl0ZXNwYWNlID0gIltcXHgyMFxcdFxcclxcblxcZl0iLAoKCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllcgoJaWRlbnRpZmllciA9ICIoPzpcXFxcLnxbXFx3LV18W15cMC1cXHhhMF0pKyIsCgoJLy8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzCglhdHRyaWJ1dGVzID0gIlxcWyIgKyB3aGl0ZXNwYWNlICsgIiooIiArIGlkZW50aWZpZXIgKyAiKSg/OiIgKyB3aGl0ZXNwYWNlICsKCQkvLyBPcGVyYXRvciAoY2FwdHVyZSAyKQoJCSIqKFsqXiR8IX5dPz0pIiArIHdoaXRlc3BhY2UgKwoJCS8vICJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdIgoJCSIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIgKyBpZGVudGlmaWVyICsgIikpfCkiICsgd2hpdGVzcGFjZSArCgkJIipcXF0iLAoKCXBzZXVkb3MgPSAiOigiICsgaWRlbnRpZmllciArICIpKD86XFwoKCIgKwoJCS8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6CgkJLy8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpCgkJIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IiArCgkJLy8gMi4gc2ltcGxlIChjYXB0dXJlIDYpCgkJIigoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIgKyBhdHRyaWJ1dGVzICsgIikqKXwiICsKCQkvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpCgkJIi4qIiArCgkJIilcXCl8KSIsCgoJLy8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlcgoJcndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgIisiLCAiZyIgKSwKCXJ0cmltID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiICsgd2hpdGVzcGFjZSArICIrJCIsICJnIiApLAoKCXJjb21tYSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKiwiICsgd2hpdGVzcGFjZSArICIqIiApLAoJcmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIqKFs+K35dfCIgKyB3aGl0ZXNwYWNlICsgIikiICsgd2hpdGVzcGFjZSArICIqIiApLAoKCXJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCAiPSIgKyB3aGl0ZXNwYWNlICsgIiooW15cXF0nXCJdKj8pIiArIHdoaXRlc3BhY2UgKyAiKlxcXSIsICJnIiApLAoKCXJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksCglyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoICJeIiArIGlkZW50aWZpZXIgKyAiJCIgKSwKCgltYXRjaEV4cHIgPSB7CgkJIklEIjogbmV3IFJlZ0V4cCggIl4jKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJIkNMQVNTIjogbmV3IFJlZ0V4cCggIl5cXC4oIiArIGlkZW50aWZpZXIgKyAiKSIgKSwKCQkiVEFHIjogbmV3IFJlZ0V4cCggIl4oIiArIGlkZW50aWZpZXIgKyAifFsqXSkiICksCgkJIkFUVFIiOiBuZXcgUmVnRXhwKCAiXiIgKyBhdHRyaWJ1dGVzICksCgkJIlBTRVVETyI6IG5ldyBSZWdFeHAoICJeIiArIHBzZXVkb3MgKSwKCQkiQ0hJTEQiOiBuZXcgUmVnRXhwKCAiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIiArIHdoaXRlc3BhY2UgKwoJCQkiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIgKyB3aGl0ZXNwYWNlICsgIiooPzooWystXXwpIiArIHdoaXRlc3BhY2UgKwoJCQkiKihcXGQrKXwpKSIgKyB3aGl0ZXNwYWNlICsgIipcXCl8KSIsICJpIiApLAoJCSJib29sIjogbmV3IFJlZ0V4cCggIl4oPzoiICsgYm9vbGVhbnMgKyAiKSQiLCAiaSIgKSwKCQkvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKCkKCQkvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgCgkJIm5lZWRzQ29udGV4dCI6IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIiArCgkJCXdoaXRlc3BhY2UgKyAiKigoPzotXFxkKT9cXGQqKSIgKyB3aGl0ZXNwYWNlICsgIipcXCl8KSg/PVteLV18JCkiLCAiaSIgKQoJfSwKCglyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSwKCXJoZWFkZXIgPSAvXmhcZCQvaSwKCglybmF0aXZlID0gL15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLAoKCS8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9ycwoJcnF1aWNrRXhwciA9IC9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sCgoJcnNpYmxpbmcgPSAvWyt+XS8sCgoJLy8gQ1NTIGVzY2FwZXMKCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnMKCXJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoICJcXFxcKFtcXGRhLWZdezEsNn0iICsgd2hpdGVzcGFjZSArICI/fCgiICsgd2hpdGVzcGFjZSArICIpfC4pIiwgImlnIiApLAoJZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkgewoJCXZhciBoaWdoID0gIjB4IiArIGVzY2FwZWQgLSAweDEwMDAwOwoJCS8vIE5hTiBtZWFucyBub24tY29kZXBvaW50CgkJLy8gU3VwcG9ydDogRmlyZWZveDwyNAoJCS8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgKyIweCIKCQlyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/CgkJCWVzY2FwZWQgOgoJCQloaWdoIDwgMCA/CgkJCQkvLyBCTVAgY29kZXBvaW50CgkJCQlTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDoKCQkJCS8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKQoJCQkJU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7Cgl9LAoKCS8vIENTUyBzdHJpbmcvaWRlbnRpZmllciBzZXJpYWxpemF0aW9uCgkvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI2NvbW1vbi1zZXJpYWxpemluZy1pZGlvbXMKCXJjc3Nlc2NhcGUgPSAvKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZywKCWZjc3Nlc2NhcGUgPSBmdW5jdGlvbiggY2gsIGFzQ29kZVBvaW50ICkgewoJCWlmICggYXNDb2RlUG9pbnQgKSB7CgoJCQkvLyBVKzAwMDAgTlVMTCBiZWNvbWVzIFUrRkZGRCBSRVBMQUNFTUVOVCBDSEFSQUNURVIKCQkJaWYgKCBjaCA9PT0gIlwwIiApIHsKCQkJCXJldHVybiAiXHVGRkZEIjsKCQkJfQoKCQkJLy8gQ29udHJvbCBjaGFyYWN0ZXJzIGFuZCAoZGVwZW5kZW50IHVwb24gcG9zaXRpb24pIG51bWJlcnMgZ2V0IGVzY2FwZWQgYXMgY29kZSBwb2ludHMKCQkJcmV0dXJuIGNoLnNsaWNlKCAwLCAtMSApICsgIlxcIiArIGNoLmNoYXJDb2RlQXQoIGNoLmxlbmd0aCAtIDEgKS50b1N0cmluZyggMTYgKSArICIgIjsKCQl9CgoJCS8vIE90aGVyIHBvdGVudGlhbGx5LXNwZWNpYWwgQVNDSUkgY2hhcmFjdGVycyBnZXQgYmFja3NsYXNoLWVzY2FwZWQKCQlyZXR1cm4gIlxcIiArIGNoOwoJfSwKCgkvLyBVc2VkIGZvciBpZnJhbWVzCgkvLyBTZWUgc2V0RG9jdW1lbnQoKQoJLy8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgIlBlcm1pc3Npb24gRGVuaWVkIgoJLy8gZXJyb3IgaW4gSUUKCXVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHsKCQlzZXREb2N1bWVudCgpOwoJfSwKCglkaXNhYmxlZEFuY2VzdG9yID0gYWRkQ29tYmluYXRvcigKCQlmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWUgJiYgKCJmb3JtIiBpbiBlbGVtIHx8ICJsYWJlbCIgaW4gZWxlbSk7CgkJfSwKCQl7IGRpcjogInBhcmVudE5vZGUiLCBuZXh0OiAibGVnZW5kIiB9CgkpOwoKLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0ICkKdHJ5IHsKCXB1c2guYXBwbHkoCgkJKGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLAoJCXByZWZlcnJlZERvYy5jaGlsZE5vZGVzCgkpOwoJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjAKCS8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHkKCWFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7Cn0gY2F0Y2ggKCBlICkgewoJcHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggPwoKCQkvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZQoJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJcHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7CgkJfSA6CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5CgkJZnVuY3Rpb24oIHRhcmdldCwgZWxzICkgewoJCQl2YXIgaiA9IHRhcmdldC5sZW5ndGgsCgkJCQlpID0gMDsKCQkJLy8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoCgkJCXdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge30KCQkJdGFyZ2V0Lmxlbmd0aCA9IGogLSAxOwoJCX0KCX07Cn0KCmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7Cgl2YXIgbSwgaSwgZWxlbSwgbmlkLCBtYXRjaCwgZ3JvdXBzLCBuZXdTZWxlY3RvciwKCQluZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsCgoJCS8vIG5vZGVUeXBlIGRlZmF1bHRzIHRvIDksIHNpbmNlIGNvbnRleHQgZGVmYXVsdHMgdG8gZG9jdW1lbnQKCQlub2RlVHlwZSA9IGNvbnRleHQgPyBjb250ZXh0Lm5vZGVUeXBlIDogOTsKCglyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTsKCgkvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dAoJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09ICJzdHJpbmciIHx8ICFzZWxlY3RvciB8fAoJCW5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHsKCgkJcmV0dXJuIHJlc3VsdHM7Cgl9CgoJLy8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50cwoJaWYgKCAhc2VlZCApIHsKCgkJaWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHsKCQkJc2V0RG9jdW1lbnQoIGNvbnRleHQgKTsKCQl9CgkJY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7CgoJCWlmICggZG9jdW1lbnRJc0hUTUwgKSB7CgoJCQkvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgImdldCpCeSoiIERPTSBtZXRob2QKCQkJLy8gKGV4Y2VwdGluZyBEb2N1bWVudEZyYWdtZW50IGNvbnRleHQsIHdoZXJlIHRoZSBtZXRob2RzIGRvbid0IGV4aXN0KQoJCQlpZiAoIG5vZGVUeXBlICE9PSAxMSAmJiAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkgewoKCQkJCS8vIElEIHNlbGVjdG9yCgkJCQlpZiAoIChtID0gbWF0Y2hbMV0pICkgewoKCQkJCQkvLyBEb2N1bWVudCBjb250ZXh0CgkJCQkJaWYgKCBub2RlVHlwZSA9PT0gOSApIHsKCQkJCQkJaWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXQKCQkJCQkJCS8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zCgkJCQkJCQkvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElECgkJCQkJCQlpZiAoIGVsZW0uaWQgPT09IG0gKSB7CgkJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJfQoKCQkJCQkvLyBFbGVtZW50IGNvbnRleHQKCQkJCQl9IGVsc2UgewoKCQkJCQkJLy8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXQKCQkJCQkJLy8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnMKCQkJCQkJLy8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRAoJCQkJCQlpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmCgkJCQkJCQljb250YWlucyggY29udGV4dCwgZWxlbSApICYmCgkJCQkJCQllbGVtLmlkID09PSBtICkgewoKCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0KCQkJCQl9CgoJCQkJLy8gVHlwZSBzZWxlY3RvcgoJCQkJfSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7CgkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApOwoJCQkJCXJldHVybiByZXN1bHRzOwoKCQkJCS8vIENsYXNzIHNlbGVjdG9yCgkJCQl9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYKCQkJCQljb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7CgoJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7CgkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQl9CgkJCX0KCgkJCS8vIFRha2UgYWR2YW50YWdlIG9mIHF1ZXJ5U2VsZWN0b3JBbGwKCQkJaWYgKCBzdXBwb3J0LnFzYSAmJgoJCQkJIWNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF0gJiYKCQkJCSghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7CgoJCQkJaWYgKCBub2RlVHlwZSAhPT0gMSApIHsKCQkJCQluZXdDb250ZXh0ID0gY29udGV4dDsKCQkJCQluZXdTZWxlY3RvciA9IHNlbGVjdG9yOwoKCQkJCS8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudAoJCQkJLy8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgd29ya2Fyb3VuZCB0ZWNobmlxdWUKCQkJCS8vIFN1cHBvcnQ6IElFIDw9OAoJCQkJLy8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHMKCQkJCX0gZWxzZSBpZiAoIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gIm9iamVjdCIgKSB7CgoJCQkJCS8vIENhcHR1cmUgdGhlIGNvbnRleHQgSUQsIHNldHRpbmcgaXQgZmlyc3QgaWYgbmVjZXNzYXJ5CgkJCQkJaWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoICJpZCIgKSkgKSB7CgkJCQkJCW5pZCA9IG5pZC5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJY29udGV4dC5zZXRBdHRyaWJ1dGUoICJpZCIsIChuaWQgPSBleHBhbmRvKSApOwoJCQkJCX0KCgkJCQkJLy8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0CgkJCQkJZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJCQkJaSA9IGdyb3Vwcy5sZW5ndGg7CgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWdyb3Vwc1tpXSA9ICIjIiArIG5pZCArICIgIiArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApOwoJCQkJCX0KCQkJCQluZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCAiLCIgKTsKCgkJCQkJLy8gRXhwYW5kIGNvbnRleHQgZm9yIHNpYmxpbmcgc2VsZWN0b3JzCgkJCQkJbmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8CgkJCQkJCWNvbnRleHQ7CgkJCQl9CgoJCQkJaWYgKCBuZXdTZWxlY3RvciApIHsKCQkJCQl0cnkgewoJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLAoJCQkJCQkJbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApCgkJCQkJCSk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0gY2F0Y2ggKCBxc2FFcnJvciApIHsKCQkJCQl9IGZpbmFsbHkgewoJCQkJCQlpZiAoIG5pZCA9PT0gZXhwYW5kbyApIHsKCQkJCQkJCWNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCAiaWQiICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgoJLy8gQWxsIG90aGVycwoJcmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApOwp9CgovKioKICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplCiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGgKICoJcHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aCkKICoJZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeQogKi8KZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7Cgl2YXIga2V5cyA9IFtdOwoKCWZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkgewoJCS8vIFVzZSAoa2V5ICsgIiAiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KQoJCWlmICgga2V5cy5wdXNoKCBrZXkgKyAiICIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7CgkJCS8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllcwoJCQlkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdOwoJCX0KCQlyZXR1cm4gKGNhY2hlWyBrZXkgKyAiICIgXSA9IHZhbHVlKTsKCX0KCXJldHVybiBjYWNoZTsKfQoKLyoqCiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrCiAqLwpmdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkgewoJZm5bIGV4cGFuZG8gXSA9IHRydWU7CglyZXR1cm4gZm47Cn0KCi8qKgogKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0CiAqLwpmdW5jdGlvbiBhc3NlcnQoIGZuICkgewoJdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKTsKCgl0cnkgewoJCXJldHVybiAhIWZuKCBlbCApOwoJfSBjYXRjaCAoZSkgewoJCXJldHVybiBmYWxzZTsKCX0gZmluYWxseSB7CgkJLy8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0CgkJaWYgKCBlbC5wYXJlbnROb2RlICkgewoJCQllbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbCApOwoJCX0KCQkvLyByZWxlYXNlIG1lbW9yeSBpbiBJRQoJCWVsID0gbnVsbDsKCX0KfQoKLyoqCiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnMKICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWQKICovCmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7Cgl2YXIgYXJyID0gYXR0cnMuc3BsaXQoInwiKSwKCQlpID0gYXJyLmxlbmd0aDsKCgl3aGlsZSAoIGktLSApIHsKCQlFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjsKCX0KfQoKLyoqCiAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3MKICogQHBhcmFtIHtFbGVtZW50fSBhCiAqIEBwYXJhbSB7RWxlbWVudH0gYgogKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGIKICovCmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHsKCXZhciBjdXIgPSBiICYmIGEsCgkJZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiYKCQkJYS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7CgoJLy8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzCglpZiAoIGRpZmYgKSB7CgkJcmV0dXJuIGRpZmY7Cgl9CgoJLy8gQ2hlY2sgaWYgYiBmb2xsb3dzIGEKCWlmICggY3VyICkgewoJCXdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7CgkJCWlmICggY3VyID09PSBiICkgewoJCQkJcmV0dXJuIC0xOwoJCQl9CgkJfQoJfQoKCXJldHVybiBhID8gMSA6IC0xOwp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlcwogKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogKi8KZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7CglyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSB0eXBlOwoJfTsKfQoKLyoqCiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgYnV0dG9ucwogKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogKi8KZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKCB0eXBlICkgewoJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCXZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCXJldHVybiAobmFtZSA9PT0gImlucHV0IiB8fCBuYW1lID09PSAiYnV0dG9uIikgJiYgZWxlbS50eXBlID09PSB0eXBlOwoJfTsKfQoKLyoqCiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgOmVuYWJsZWQvOmRpc2FibGVkCiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZWQgdHJ1ZSBmb3IgOmRpc2FibGVkOyBmYWxzZSBmb3IgOmVuYWJsZWQKICovCmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKCBkaXNhYmxlZCApIHsKCgkvLyBLbm93biA6ZGlzYWJsZWQgZmFsc2UgcG9zaXRpdmVzOiBmaWVsZHNldFtkaXNhYmxlZF0gPiBsZWdlbmQ6bnRoLW9mLXR5cGUobisyKSA6Y2FuLWRpc2FibGUKCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCgkJLy8gT25seSBjZXJ0YWluIGVsZW1lbnRzIGNhbiBtYXRjaCA6ZW5hYmxlZCBvciA6ZGlzYWJsZWQKCQkvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1lbmFibGVkCgkJLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjc2VsZWN0b3ItZGlzYWJsZWQKCQlpZiAoICJmb3JtIiBpbiBlbGVtICkgewoKCQkJLy8gQ2hlY2sgZm9yIGluaGVyaXRlZCBkaXNhYmxlZG5lc3Mgb24gcmVsZXZhbnQgbm9uLWRpc2FibGVkIGVsZW1lbnRzOgoJCQkvLyAqIGxpc3RlZCBmb3JtLWFzc29jaWF0ZWQgZWxlbWVudHMgaW4gYSBkaXNhYmxlZCBmaWVsZHNldAoJCQkvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY2F0ZWdvcnktbGlzdGVkCgkJCS8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkCgkJCS8vICogb3B0aW9uIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXAKCQkJLy8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NvbmNlcHQtb3B0aW9uLWRpc2FibGVkCgkJCS8vIEFsbCBzdWNoIGVsZW1lbnRzIGhhdmUgYSAiZm9ybSIgcHJvcGVydHkuCgkJCWlmICggZWxlbS5wYXJlbnROb2RlICYmIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlICkgewoKCQkJCS8vIE9wdGlvbiBlbGVtZW50cyBkZWZlciB0byBhIHBhcmVudCBvcHRncm91cCBpZiBwcmVzZW50CgkJCQlpZiAoICJsYWJlbCIgaW4gZWxlbSApIHsKCQkJCQlpZiAoICJsYWJlbCIgaW4gZWxlbS5wYXJlbnROb2RlICkgewoJCQkJCQlyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkID09PSBkaXNhYmxlZDsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIFN1cHBvcnQ6IElFIDYgLSAxMQoJCQkJLy8gVXNlIHRoZSBpc0Rpc2FibGVkIHNob3J0Y3V0IHByb3BlcnR5IHRvIGNoZWNrIGZvciBkaXNhYmxlZCBmaWVsZHNldCBhbmNlc3RvcnMKCQkJCXJldHVybiBlbGVtLmlzRGlzYWJsZWQgPT09IGRpc2FibGVkIHx8CgoJCQkJCS8vIFdoZXJlIHRoZXJlIGlzIG5vIGlzRGlzYWJsZWQsIGNoZWNrIG1hbnVhbGx5CgkJCQkJLyoganNoaW50IC1XMDE4ICovCgkJCQkJZWxlbS5pc0Rpc2FibGVkICE9PSAhZGlzYWJsZWQgJiYKCQkJCQkJZGlzYWJsZWRBbmNlc3RvciggZWxlbSApID09PSBkaXNhYmxlZDsKCQkJfQoKCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkOwoKCQkvLyBUcnkgdG8gd2lubm93IG91dCBlbGVtZW50cyB0aGF0IGNhbid0IGJlIGRpc2FibGVkIGJlZm9yZSB0cnVzdGluZyB0aGUgZGlzYWJsZWQgcHJvcGVydHkuCgkJLy8gU29tZSB2aWN0aW1zIGdldCBjYXVnaHQgaW4gb3VyIG5ldCAobGFiZWwsIGxlZ2VuZCwgbWVudSwgdHJhY2spLCBidXQgaXQgc2hvdWxkbid0CgkJLy8gZXZlbiBleGlzdCBvbiB0aGVtLCBsZXQgYWxvbmUgaGF2ZSBhIGJvb2xlYW4gdmFsdWUuCgkJfSBlbHNlIGlmICggImxhYmVsIiBpbiBlbGVtICkgewoJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7CgkJfQoKCQkvLyBSZW1haW5pbmcgZWxlbWVudHMgYXJlIG5laXRoZXIgOmVuYWJsZWQgbm9yIDpkaXNhYmxlZAoJCXJldHVybiBmYWxzZTsKCX07Cn0KCi8qKgogKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuCiAqLwpmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHsKCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkgewoJCWFyZ3VtZW50ID0gK2FyZ3VtZW50OwoJCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7CgkJCXZhciBqLAoJCQkJbWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSwKCQkJCWkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoOwoKCQkJLy8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzCgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHsKCQkJCQlzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7CgkJCQl9CgkJCX0KCQl9KTsKCX0pOwp9CgovKioKICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dAogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dAogKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWUKICovCmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkgewoJcmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09ICJ1bmRlZmluZWQiICYmIGNvbnRleHQ7Cn0KCi8vIEV4cG9zZSBzdXBwb3J0IHZhcnMgZm9yIGNvbnZlbmllbmNlCnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9OwoKLyoqCiAqIERldGVjdHMgWE1MIG5vZGVzCiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50CiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmZiBlbGVtIGlzIGEgbm9uLUhUTUwgWE1MIG5vZGUKICovCmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0CgkvLyAoc3VjaCBhcyBsb2FkaW5nIGlmcmFtZXMgaW4gSUUgLSAjNDgzMykKCXZhciBkb2N1bWVudEVsZW1lbnQgPSBlbGVtICYmIChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50OwoJcmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gIkhUTUwiIDogZmFsc2U7Cn07CgovKioKICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50CiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50CiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGN1cnJlbnQgZG9jdW1lbnQKICovCnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7Cgl2YXIgaGFzQ29tcGFyZSwgc3ViV2luZG93LAoJCWRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYzsKCgkvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZAoJaWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHsKCQlyZXR1cm4gZG9jdW1lbnQ7Cgl9CgoJLy8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXMKCWRvY3VtZW50ID0gZG9jOwoJZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCWRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApOwoKCS8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2UKCS8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgInBlcm1pc3Npb24gZGVuaWVkIiBlcnJvcnMgKGpRdWVyeSAjMTM5MzYpCglpZiAoIHByZWZlcnJlZERvYyAhPT0gZG9jdW1lbnQgJiYKCQkoc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHN1YldpbmRvdy50b3AgIT09IHN1YldpbmRvdyApIHsKCgkJLy8gU3VwcG9ydDogSUUgMTEsIEVkZ2UKCQlpZiAoIHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyICkgewoJCQlzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggInVubG9hZCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7CgoJCS8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5CgkJfSBlbHNlIGlmICggc3ViV2luZG93LmF0dGFjaEV2ZW50ICkgewoJCQlzdWJXaW5kb3cuYXR0YWNoRXZlbnQoICJvbnVubG9hZCIsIHVubG9hZEhhbmRsZXIgKTsKCQl9Cgl9CgoJLyogQXR0cmlidXRlcwoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCS8vIFN1cHBvcnQ6IElFPDgKCS8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllcwoJLy8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpCglzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkgewoJCWVsLmNsYXNzTmFtZSA9ICJpIjsKCQlyZXR1cm4gIWVsLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIik7Cgl9KTsKCgkvKiBnZXRFbGVtZW50KHMpQnkqCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJLy8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSByZXR1cm5zIG9ubHkgZWxlbWVudHMKCXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkgewoJCWVsLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSApOwoJCXJldHVybiAhZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg7Cgl9KTsKCgkvLyBTdXBwb3J0OiBJRTw5CglzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTsKCgkvLyBTdXBwb3J0OiBJRTwxMAoJLy8gQ2hlY2sgaWYgZ2V0RWxlbWVudEJ5SWQgcmV0dXJucyBlbGVtZW50cyBieSBuYW1lCgkvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtbWF0aWNhbGx5LXNldCBuYW1lcywKCS8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdAoJc3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHsKCQlkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlkID0gZXhwYW5kbzsKCQlyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDsKCX0pOwoKCS8vIElEIGZpbHRlciBhbmQgZmluZAoJaWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7CgkJRXhwci5maWx0ZXJbIklEIl0gPSBmdW5jdGlvbiggaWQgKSB7CgkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIikgPT09IGF0dHJJZDsKCQkJfTsKCQl9OwoJCUV4cHIuZmluZFsiSUQiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHsKCQkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gInVuZGVmaW5lZCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7CgkJCQl2YXIgZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7CgkJCQlyZXR1cm4gZWxlbSA/IFsgZWxlbSBdIDogW107CgkJCX0KCQl9OwoJfSBlbHNlIHsKCQlFeHByLmZpbHRlclsiSUQiXSA9ICBmdW5jdGlvbiggaWQgKSB7CgkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09ICJ1bmRlZmluZWQiICYmCgkJCQkJZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOwoJCQkJcmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkOwoJCQl9OwoJCX07CgoJCS8vIFN1cHBvcnQ6IElFIDYgLSA3IG9ubHkKCQkvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0CgkJRXhwci5maW5kWyJJRCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSAidW5kZWZpbmVkIiAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCXZhciBub2RlLCBpLCBlbGVtcywKCQkJCQllbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTsKCgkJCQlpZiAoIGVsZW0gKSB7CgoJCQkJCS8vIFZlcmlmeSB0aGUgaWQgYXR0cmlidXRlCgkJCQkJbm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKCQkJCQlpZiAoIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gaWQgKSB7CgkJCQkJCXJldHVybiBbIGVsZW0gXTsKCQkJCQl9CgoJCQkJCS8vIEZhbGwgYmFjayBvbiBnZXRFbGVtZW50c0J5TmFtZQoJCQkJCWVsZW1zID0gY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZSggaWQgKTsKCQkJCQlpID0gMDsKCQkJCQl3aGlsZSAoIChlbGVtID0gZWxlbXNbaSsrXSkgKSB7CgkJCQkJCW5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7CgkJCQkJCWlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHsKCQkJCQkJCXJldHVybiBbIGVsZW0gXTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gW107CgkJCX0KCQl9OwoJfQoKCS8vIFRhZwoJRXhwci5maW5kWyJUQUciXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPwoJCWZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7CgkJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09ICJ1bmRlZmluZWQiICkgewoJCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApOwoKCQkJLy8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROCgkJCX0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkgewoJCQkJcmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7CgkJCX0KCQl9IDoKCgkJZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHsKCQkJdmFyIGVsZW0sCgkJCQl0bXAgPSBbXSwKCQkJCWkgPSAwLAoJCQkJLy8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvbwoJCQkJcmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApOwoKCQkJLy8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50cwoJCQlpZiAoIHRhZyA9PT0gIioiICkgewoJCQkJd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQl0bXAucHVzaCggZWxlbSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdG1wOwoJCQl9CgkJCXJldHVybiByZXN1bHRzOwoJCX07CgoJLy8gQ2xhc3MKCUV4cHIuZmluZFsiQ0xBU1MiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkgewoJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gInVuZGVmaW5lZCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7CgkJCXJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApOwoJCX0KCX07CgoJLyogUVNBL21hdGNoZXNTZWxlY3RvcgoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCS8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnQKCgkvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KQoJcmJ1Z2d5TWF0Y2hlcyA9IFtdOwoKCS8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpCgkvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3IKCS8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWUKCS8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yCgkvLyBTZWUgaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4CglyYnVnZ3lRU0EgPSBbXTsKCglpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApKSApIHsKCQkvLyBCdWlsZCBRU0EgcmVnZXgKCQkvLyBSZWdleCBzdHJhdGVneSBhZG9wdGVkIGZyb20gRGllZ28gUGVyaW5pCgkJYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHsKCQkJLy8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZQoJCQkvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHkKCQkJLy8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsCgkJCS8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoCgkJCS8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OQoJCQlkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlubmVySFRNTCA9ICI8YSBpZD0nIiArIGV4cGFuZG8gKyAiJz48L2E+IiArCgkJCQkiPHNlbGVjdCBpZD0nIiArIGV4cGFuZG8gKyAiLVxyXFwnIG1zYWxsb3djYXB0dXJlPScnPiIgKwoJCQkJIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjsKCgkJCS8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTYKCQkJLy8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPQoJCQkvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCAic2FmZSIgZm9yIFdpblJUCgkJCS8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGlvbgoJCQlpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2FwdHVyZV49JyddIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJbKl4kXT0iICsgd2hpdGVzcGFjZSArICIqKD86Jyd8XCJcIikiICk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFOAoJCQkvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kICJ2YWx1ZSIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseQoJCQlpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJcXFsiICsgd2hpdGVzcGFjZSArICIqKD86dmFsdWV8IiArIGJvb2xlYW5zICsgIikiICk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44KwoJCQlpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCAiW2lkfj0iICsgZXhwYW5kbyArICItXSIgKS5sZW5ndGggKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCgifj0iKTsKCQkJfQoKCQkJLy8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHMKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWQKCQkJLy8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHMKCQkJaWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGggKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCsKCQkJLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MQoJCQkvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJsaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzCgkJCWlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoICJhIyIgKyBleHBhbmRvICsgIisqIiApLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCIuIy4rWyt+XSIpOwoJCQl9CgkJfSk7CgoJCWFzc2VydChmdW5jdGlvbiggZWwgKSB7CgkJCWVsLmlubmVySFRNTCA9ICI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPiIgKwoJCQkJIjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iOwoKCQkJLy8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzCgkJCS8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudAoJCQl2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgImhpZGRlbiIgKTsKCQkJZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCAibmFtZSIsICJEIiApOwoKCQkJLy8gU3VwcG9ydDogSUU4CgkJCS8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZQoJCQlpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJuYW1lIiArIHdoaXRlc3BhY2UgKyAiKlsqXiR8IX5dPz0iICk7CgkJCX0KCgkJCS8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpCgkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCWlmICggZWwucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggIT09IDIgKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCggIjplbmFibGVkIiwgIjpkaXNhYmxlZCIgKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU5LTExKwoJCQkvLyBJRSdzIDpkaXNhYmxlZCBzZWxlY3RvciBkb2VzIG5vdCBwaWNrIHVwIHRoZSBjaGlsZHJlbiBvZiBkaXNhYmxlZCBmaWVsZHNldHMKCQkJZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7CgkJCWlmICggZWwucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoICE9PSAyICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICI6ZW5hYmxlZCIsICI6ZGlzYWJsZWQiICk7CgkJCX0KCgkJCS8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zCgkJCWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTsKCQkJcmJ1Z2d5UVNBLnB1c2goIiwuKjoiKTsKCQl9KTsKCX0KCglpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHwKCQlkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fAoJCWRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7CgoJCWFzc2VydChmdW5jdGlvbiggZWwgKSB7CgkJCS8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvcgoJCQkvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KQoJCQlzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBlbCwgIioiICk7CgoJCQkvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uCgkJCS8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWQKCQkJbWF0Y2hlcy5jYWxsKCBlbCwgIltzIT0nJ106eCIgKTsKCQkJcmJ1Z2d5TWF0Y2hlcy5wdXNoKCAiIT0iLCBwc2V1ZG9zICk7CgkJfSk7Cgl9CgoJcmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbigifCIpICk7CglyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKCJ8IikgKTsKCgkvKiBDb250YWlucwoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoJaGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApOwoKCS8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlcgoJLy8gUHVycG9zZWZ1bGx5IHNlbGYtZXhjbHVzaXZlCgkvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZgoJY29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID8KCQlmdW5jdGlvbiggYSwgYiApIHsKCQkJdmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSwKCQkJCWJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlOwoJCQlyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmICgKCQkJCWFkb3duLmNvbnRhaW5zID8KCQkJCQlhZG93bi5jb250YWlucyggYnVwICkgOgoJCQkJCWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYnVwICkgJiAxNgoJCQkpKTsKCQl9IDoKCQlmdW5jdGlvbiggYSwgYiApIHsKCQkJaWYgKCBiICkgewoJCQkJd2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7CgkJCQkJaWYgKCBiID09PSBhICkgewoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX07CgoJLyogU29ydGluZwoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCS8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmcKCXNvcnRPcmRlciA9IGhhc0NvbXBhcmUgPwoJZnVuY3Rpb24oIGEsIGIgKSB7CgoJCS8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsCgkJaWYgKCBhID09PSBiICkgewoJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQlyZXR1cm4gMDsKCQl9CgoJCS8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb24KCQl2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247CgkJaWYgKCBjb21wYXJlICkgewoJCQlyZXR1cm4gY29tcGFyZTsKCQl9CgoJCS8vIENhbGN1bGF0ZSBwb3NpdGlvbiBpZiBib3RoIGlucHV0cyBiZWxvbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnQKCQljb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgPwoJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOgoKCQkJLy8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkCgkJCTE7CgoJCS8vIERpc2Nvbm5lY3RlZCBub2RlcwoJCWlmICggY29tcGFyZSAmIDEgfHwKCQkJKCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkgewoKCQkJLy8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50CgkJCWlmICggYSA9PT0gZG9jdW1lbnQgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHsKCQkJCXJldHVybiAtMTsKCQkJfQoJCQlpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7CgkJCQlyZXR1cm4gMTsKCQkJfQoKCQkJLy8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXIKCQkJcmV0dXJuIHNvcnRJbnB1dCA/CgkJCQkoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6CgkJCQkwOwoJCX0KCgkJcmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxOwoJfSA6CglmdW5jdGlvbiggYSwgYiApIHsKCQkvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsCgkJaWYgKCBhID09PSBiICkgewoJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQlyZXR1cm4gMDsKCQl9CgoJCXZhciBjdXIsCgkJCWkgPSAwLAoJCQlhdXAgPSBhLnBhcmVudE5vZGUsCgkJCWJ1cCA9IGIucGFyZW50Tm9kZSwKCQkJYXAgPSBbIGEgXSwKCQkJYnAgPSBbIGIgXTsKCgkJLy8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWQKCQlpZiAoICFhdXAgfHwgIWJ1cCApIHsKCQkJcmV0dXJuIGEgPT09IGRvY3VtZW50ID8gLTEgOgoJCQkJYiA9PT0gZG9jdW1lbnQgPyAxIDoKCQkJCWF1cCA/IC0xIDoKCQkJCWJ1cCA/IDEgOgoJCQkJc29ydElucHV0ID8KCQkJCSggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDoKCQkJCTA7CgoJCS8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrCgkJfSBlbHNlIGlmICggYXVwID09PSBidXAgKSB7CgkJCXJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTsKCQl9CgoJCS8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uCgkJY3VyID0gYTsKCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCWFwLnVuc2hpZnQoIGN1ciApOwoJCX0KCQljdXIgPSBiOwoJCXdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHsKCQkJYnAudW5zaGlmdCggY3VyICk7CgkJfQoKCQkvLyBXYWxrIGRvd24gdGhlIHRyZWUgbG9va2luZyBmb3IgYSBkaXNjcmVwYW5jeQoJCXdoaWxlICggYXBbaV0gPT09IGJwW2ldICkgewoJCQlpKys7CgkJfQoKCQlyZXR1cm4gaSA/CgkJCS8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvcgoJCQlzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDoKCgkJCS8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdAoJCQlhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOgoJCQlicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6CgkJCTA7Cgl9OwoKCXJldHVybiBkb2N1bWVudDsKfTsKClNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkgewoJcmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTsKfTsKClNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHsKCS8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZAoJaWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkgewoJCXNldERvY3VtZW50KCBlbGVtICk7Cgl9CgoJLy8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkCglleHByID0gZXhwci5yZXBsYWNlKCByYXR0cmlidXRlUXVvdGVzLCAiPSckMSddIiApOwoKCWlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiYKCQkhY29tcGlsZXJDYWNoZVsgZXhwciArICIgIiBdICYmCgkJKCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJgoJCSggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHsKCgkJdHJ5IHsKCQkJdmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApOwoKCQkJLy8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2RlcwoJCQlpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8CgkJCQkJLy8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnQKCQkJCQkvLyBmcmFnbWVudCBpbiBJRSA5CgkJCQkJZWxlbS5kb2N1bWVudCAmJiBlbGVtLmRvY3VtZW50Lm5vZGVUeXBlICE9PSAxMSApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCQl9IGNhdGNoIChlKSB7fQoJfQoKCXJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7Cn07CgpTaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHsKCS8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZAoJaWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkgewoJCXNldERvY3VtZW50KCBjb250ZXh0ICk7Cgl9CglyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTsKfTsKClNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQlzZXREb2N1bWVudCggZWxlbSApOwoJfQoKCXZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sCgkJLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpCgkJdmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgPwoJCQlmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOgoJCQl1bmRlZmluZWQ7CgoJcmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkID8KCQl2YWwgOgoJCXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhZG9jdW1lbnRJc0hUTUwgPwoJCQllbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDoKCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/CgkJCQl2YWwudmFsdWUgOgoJCQkJbnVsbDsKfTsKClNpenpsZS5lc2NhcGUgPSBmdW5jdGlvbiggc2VsICkgewoJcmV0dXJuIChzZWwgKyAiIikucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApOwp9OwoKU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHsKCXRocm93IG5ldyBFcnJvciggIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIgKyBtc2cgKTsKfTsKCi8qKgogKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzCiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzCiAqLwpTaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkgewoJdmFyIGVsZW0sCgkJZHVwbGljYXRlcyA9IFtdLAoJCWogPSAwLAoJCWkgPSAwOwoKCS8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2UKCWhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7Cglzb3J0SW5wdXQgPSAhc3VwcG9ydC5zb3J0U3RhYmxlICYmIHJlc3VsdHMuc2xpY2UoIDAgKTsKCXJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7CgoJaWYgKCBoYXNEdXBsaWNhdGUgKSB7CgkJd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7CgkJCWlmICggZWxlbSA9PT0gcmVzdWx0c1sgaSBdICkgewoJCQkJaiA9IGR1cGxpY2F0ZXMucHVzaCggaSApOwoJCQl9CgkJfQoJCXdoaWxlICggai0tICkgewoJCQlyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7CgkJfQoJfQoKCS8vIENsZWFyIGlucHV0IGFmdGVyIHNvcnRpbmcgdG8gcmVsZWFzZSBvYmplY3RzCgkvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjUKCXNvcnRJbnB1dCA9IG51bGw7CgoJcmV0dXJuIHJlc3VsdHM7Cn07CgovKioKICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXMKICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBlbGVtCiAqLwpnZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHsKCXZhciBub2RlLAoJCXJldCA9ICIiLAoJCWkgPSAwLAoJCW5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTsKCglpZiAoICFub2RlVHlwZSApIHsKCQkvLyBJZiBubyBub2RlVHlwZSwgdGhpcyBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheQoJCXdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkgewoJCQkvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2RlcwoJCQlyZXQgKz0gZ2V0VGV4dCggbm9kZSApOwoJCX0KCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHsKCQkvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzCgkJLy8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1MykKCQlpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSAic3RyaW5nIiApIHsKCQkJcmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7CgkJfSBlbHNlIHsKCQkJLy8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuCgkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJcmV0ICs9IGdldFRleHQoIGVsZW0gKTsKCQkJfQoJCX0KCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkgewoJCXJldHVybiBlbGVtLm5vZGVWYWx1ZTsKCX0KCS8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2RlcwoKCXJldHVybiByZXQ7Cn07CgpFeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHsKCgkvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXIKCWNhY2hlTGVuZ3RoOiA1MCwKCgljcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbiwKCgltYXRjaDogbWF0Y2hFeHByLAoKCWF0dHJIYW5kbGU6IHt9LAoKCWZpbmQ6IHt9LAoKCXJlbGF0aXZlOiB7CgkJIj4iOiB7IGRpcjogInBhcmVudE5vZGUiLCBmaXJzdDogdHJ1ZSB9LAoJCSIgIjogeyBkaXI6ICJwYXJlbnROb2RlIiB9LAoJCSIrIjogeyBkaXI6ICJwcmV2aW91c1NpYmxpbmciLCBmaXJzdDogdHJ1ZSB9LAoJCSJ+IjogeyBkaXI6ICJwcmV2aW91c1NpYmxpbmciIH0KCX0sCgoJcHJlRmlsdGVyOiB7CgkJIkFUVFIiOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJCW1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCgkJCS8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkCgkJCW1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCAiIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgoJCQlpZiAoIG1hdGNoWzJdID09PSAifj0iICkgewoJCQkJbWF0Y2hbM10gPSAiICIgKyBtYXRjaFszXSArICIgIjsKCQkJfQoKCQkJcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7CgkJfSwKCgkJIkNISUxEIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQkvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByWyJDSElMRCJdCgkJCQkxIHR5cGUgKG9ubHl8bnRofC4uLikKCQkJCTIgd2hhdCAoY2hpbGR8b2YtdHlwZSkKCQkJCTMgYXJndW1lbnQgKGV2ZW58b2RkfFxkKnxcZCpuKFsrLV1cZCspP3wuLi4pCgkJCQk0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xkKm58KQoJCQkJNSBzaWduIG9mIHhuLWNvbXBvbmVudAoJCQkJNiB4IG9mIHhuLWNvbXBvbmVudAoJCQkJNyBzaWduIG9mIHktY29tcG9uZW50CgkJCQk4IHkgb2YgeS1jb21wb25lbnQKCQkJKi8KCQkJbWF0Y2hbMV0gPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpOwoKCQkJaWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSAibnRoIiApIHsKCQkJCS8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50CgkJCQlpZiAoICFtYXRjaFszXSApIHsKCQkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCQl9CgoJCQkJLy8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxECgkJCQkvLyByZW1lbWJlciB0aGF0IGZhbHNlL3RydWUgY2FzdCByZXNwZWN0aXZlbHkgdG8gMC8xCgkJCQltYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gImV2ZW4iIHx8IG1hdGNoWzNdID09PSAib2RkIiApICk7CgkJCQltYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSAib2RkIiApOwoKCQkJLy8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzCgkJCX0gZWxzZSBpZiAoIG1hdGNoWzNdICkgewoJCQkJU2l6emxlLmVycm9yKCBtYXRjaFswXSApOwoJCQl9CgoJCQlyZXR1cm4gbWF0Y2g7CgkJfSwKCgkJIlBTRVVETyI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJdmFyIGV4Y2VzcywKCQkJCXVucXVvdGVkID0gIW1hdGNoWzZdICYmIG1hdGNoWzJdOwoKCQkJaWYgKCBtYXRjaEV4cHJbIkNISUxEIl0udGVzdCggbWF0Y2hbMF0gKSApIHsKCQkJCXJldHVybiBudWxsOwoJCQl9CgoJCQkvLyBBY2NlcHQgcXVvdGVkIGFyZ3VtZW50cyBhcy1pcwoJCQlpZiAoIG1hdGNoWzNdICkgewoJCQkJbWF0Y2hbMl0gPSBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCAiIjsKCgkJCS8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzCgkJCX0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJgoJCQkJLy8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSkKCQkJCShleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSkgJiYKCQkJCS8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpcwoJCQkJKGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoICIpIiwgdW5xdW90ZWQubGVuZ3RoIC0gZXhjZXNzICkgLSB1bnF1b3RlZC5sZW5ndGgpICkgewoKCQkJCS8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4CgkJCQltYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJCW1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApOwoJCQl9CgoJCQkvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudCkKCQkJcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7CgkJfQoJfSwKCglmaWx0ZXI6IHsKCgkJIlRBRyI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkgewoJCQl2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09ICIqIiA/CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOgoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTsKCQkJCX07CgkJfSwKCgkJIkNMQVNTIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHsKCQkJdmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyAiICIgXTsKCgkJCXJldHVybiBwYXR0ZXJuIHx8CgkJCQkocGF0dGVybiA9IG5ldyBSZWdFeHAoICIoXnwiICsgd2hpdGVzcGFjZSArICIpIiArIGNsYXNzTmFtZSArICIoIiArIHdoaXRlc3BhY2UgKyAifCQpIiApKSAmJgoJCQkJY2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09ICJzdHJpbmciICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoImNsYXNzIikgfHwgIiIgKTsKCQkJCX0pOwoJCX0sCgoJCSJBVFRSIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHsKCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7CgoJCQkJaWYgKCByZXN1bHQgPT0gbnVsbCApIHsKCQkJCQlyZXR1cm4gb3BlcmF0b3IgPT09ICIhPSI7CgkJCQl9CgkJCQlpZiAoICFvcGVyYXRvciApIHsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCgkJCQlyZXN1bHQgKz0gIiI7CgoJCQkJcmV0dXJuIG9wZXJhdG9yID09PSAiPSIgPyByZXN1bHQgPT09IGNoZWNrIDoKCQkJCQlvcGVyYXRvciA9PT0gIiE9IiA/IHJlc3VsdCAhPT0gY2hlY2sgOgoJCQkJCW9wZXJhdG9yID09PSAiXj0iID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOgoJCQkJCW9wZXJhdG9yID09PSAiKj0iID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6CgkJCQkJb3BlcmF0b3IgPT09ICIkPSIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOgoJCQkJCW9wZXJhdG9yID09PSAifj0iID8gKCAiICIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsICIgIiApICsgIiAiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQlvcGVyYXRvciA9PT0gInw9IiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgIi0iIDoKCQkJCQlmYWxzZTsKCQkJfTsKCQl9LAoKCQkiQ0hJTEQiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkgewoJCQl2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSAibnRoIiwKCQkJCWZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSAibGFzdCIsCgkJCQlvZlR5cGUgPSB3aGF0ID09PSAib2YtdHlwZSI7CgoJCQlyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/CgoJCQkJLy8gU2hvcnRjdXQgZm9yIDpudGgtKihuKQoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuICEhZWxlbS5wYXJlbnROb2RlOwoJCQkJfSA6CgoJCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCQl2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LAoJCQkJCQlkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyAibmV4dFNpYmxpbmciIDogInByZXZpb3VzU2libGluZyIsCgkJCQkJCXBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSwKCQkJCQkJbmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksCgkJCQkJCXVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlLAoJCQkJCQlkaWZmID0gZmFsc2U7CgoJCQkJCWlmICggcGFyZW50ICkgewoKCQkJCQkJLy8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKQoJCQkJCQlpZiAoIHNpbXBsZSApIHsKCQkJCQkJCXdoaWxlICggZGlyICkgewoJCQkJCQkJCW5vZGUgPSBlbGVtOwoJCQkJCQkJCXdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7CgkJCQkJCQkJCWlmICggb2ZUeXBlID8KCQkJCQkJCQkJCW5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6CgkJCQkJCQkJCQlub2RlLm5vZGVUeXBlID09PSAxICkgewoKCQkJCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCQkvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbykKCQkJCQkJCQlzdGFydCA9IGRpciA9IHR5cGUgPT09ICJvbmx5IiAmJiAhc3RhcnQgJiYgIm5leHRTaWJsaW5nIjsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQl9CgoJCQkJCQlzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdOwoKCQkJCQkJLy8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGAKCQkJCQkJaWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkgewoKCQkJCQkJCS8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleAoKCQkJCQkJCS8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXkKCQkJCQkJCW5vZGUgPSBwYXJlbnQ7CgkJCQkJCQlvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJLy8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpCgkJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fAoJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJY2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdOwoJCQkJCQkJbm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdOwoJCQkJCQkJZGlmZiA9IG5vZGVJbmRleCAmJiBjYWNoZVsgMiBdOwoJCQkJCQkJbm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07CgoJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCgkJCQkJCQkJLy8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnQKCQkJCQkJCQkoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHsKCgkJCQkJCQkJLy8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWsKCQkJCQkJCQlpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCXVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJLy8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlCgkJCQkJCQlpZiAoIHVzZUNhY2hlICkgewoJCQkJCQkJCS8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXkKCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQlvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fAoJCQkJCQkJCQkob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCQljYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107CgkJCQkJCQkJbm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdOwoJCQkJCQkJCWRpZmYgPSBub2RlSW5kZXg7CgkJCQkJCQl9CgoJCQkJCQkJLy8geG1sIDpudGgtY2hpbGQoLi4uKQoJCQkJCQkJLy8gb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKQoJCQkJCQkJaWYgKCBkaWZmID09PSBmYWxzZSApIHsKCQkJCQkJCQkvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydAoJCQkJCQkJCXdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8CgkJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQkJaWYgKCAoIG9mVHlwZSA/CgkJCQkJCQkJCQlub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOgoJCQkJCQkJCQkJbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmCgkJCQkJCQkJCQkrK2RpZmYgKSB7CgoJCQkJCQkJCQkJLy8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudAoJCQkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJCQlvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fAoJCQkJCQkJCQkJCQkob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCQkJCQl1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07CgkJCQkJCQkJCQl9CgoJCQkJCQkJCQkJaWYgKCBub2RlID09PSBlbGVtICkgewoJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZQoJCQkJCQlkaWZmIC09IGxhc3Q7CgkJCQkJCXJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApOwoJCQkJCX0KCQkJCX07CgkJfSwKCgkJIlBTRVVETyI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkgewoJCQkvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3NlcwoJCQkvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVycwoJCQkvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zCgkJCXZhciBhcmdzLAoJCQkJZm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fAoJCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIHBzZXVkbzogIiArIHBzZXVkbyApOwoKCQkJLy8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdAoJCQkvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvbgoJCQkvLyBqdXN0IGFzIFNpenpsZSBkb2VzCgkJCWlmICggZm5bIGV4cGFuZG8gXSApIHsKCQkJCXJldHVybiBmbiggYXJndW1lbnQgKTsKCQkJfQoKCQkJLy8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzCgkJCWlmICggZm4ubGVuZ3RoID4gMSApIHsKCQkJCWFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCAiIiwgYXJndW1lbnQgXTsKCQkJCXJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgPwoJCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCQkJdmFyIGlkeCwKCQkJCQkJCW1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSwKCQkJCQkJCWkgPSBtYXRjaGVkLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7CgkJCQkJCQlzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApOwoJCQkJCQl9CgkJCQkJfSkgOgoJCQkJCWZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQlyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTsKCQkJCQl9OwoJCQl9CgoJCQlyZXR1cm4gZm47CgkJfQoJfSwKCglwc2V1ZG9zOiB7CgkJLy8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zCgkJIm5vdCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCS8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlCgkJCS8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nCgkJCS8vIHNwYWNlcyBhcyBjb21iaW5hdG9ycwoJCQl2YXIgaW5wdXQgPSBbXSwKCQkJCXJlc3VsdHMgPSBbXSwKCQkJCW1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApICk7CgoJCQlyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID8KCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkgewoJCQkJCXZhciBlbGVtLAoJCQkJCQl1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksCgkJCQkJCWkgPSBzZWVkLmxlbmd0aDsKCgkJCQkJLy8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYAoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHsKCQkJCQkJCXNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pIDoKCQkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJaW5wdXRbMF0gPSBlbGVtOwoJCQkJCW1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTsKCQkJCQkvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KQoJCQkJCWlucHV0WzBdID0gbnVsbDsKCQkJCQlyZXR1cm4gIXJlc3VsdHMucG9wKCk7CgkJCQl9OwoJCX0pLAoKCQkiaGFzIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwOwoJCQl9OwoJCX0pLAoKCQkiY29udGFpbnMiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7CgkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7CgkJCX07CgkJfSksCgoJCS8vICJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yCgkJLy8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUKCQkvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLAoJCS8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgIi0iLgoJCS8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LgoJCS8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuIgoJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG8KCQkibGFuZyI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7CgkJCS8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXIKCQkJaWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8ICIiKSApIHsKCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBsYW5nICk7CgkJCX0KCQkJbGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgZWxlbUxhbmc7CgkJCQlkbyB7CgkJCQkJaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/CgkJCQkJCWVsZW0ubGFuZyA6CgkJCQkJCWVsZW0uZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKCJsYW5nIikpICkgewoKCQkJCQkJZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpOwoJCQkJCQlyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArICItIiApID09PSAwOwoJCQkJCX0KCQkJCX0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoJCX0pLAoKCQkvLyBNaXNjZWxsYW5lb3VzCgkJInRhcmdldCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDsKCQkJcmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkOwoJCX0sCgoJCSJyb290IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtID09PSBkb2NFbGVtOwoJCX0sCgoJCSJmb2N1cyI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpOwoJCX0sCgoJCS8vIEJvb2xlYW4gcHJvcGVydGllcwoJCSJlbmFibGVkIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGZhbHNlICksCgkJImRpc2FibGVkIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIHRydWUgKSwKCgkJImNoZWNrZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJLy8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzCgkJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkCgkJCXZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIChub2RlTmFtZSA9PT0gImlucHV0IiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSAib3B0aW9uIiAmJiAhIWVsZW0uc2VsZWN0ZWQpOwoJCX0sCgoJCSJzZWxlY3RlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0CgkJCS8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHkKCQkJaWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7CgkJCQllbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJfQoKCQkJcmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7CgkJfSwKCgkJLy8gQ29udGVudHMKCQkiZW1wdHkiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG8KCQkJLy8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLAoJCQkvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKQoJCQkvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuCgkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSwKCgkJInBhcmVudCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gIUV4cHIucHNldWRvc1siZW1wdHkiXSggZWxlbSApOwoJCX0sCgoJCS8vIEVsZW1lbnQvaW5wdXQgdHlwZXMKCQkiaGVhZGVyIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTsKCQl9LAoKCQkiaW5wdXQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCX0sCgoJCSJidXR0b24iOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiBuYW1lID09PSAiaW5wdXQiICYmIGVsZW0udHlwZSA9PT0gImJ1dHRvbiIgfHwgbmFtZSA9PT0gImJ1dHRvbiI7CgkJfSwKCgkJInRleHQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIGF0dHI7CgkJCXJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJpbnB1dCIgJiYKCQkJCWVsZW0udHlwZSA9PT0gInRleHQiICYmCgoJCQkJLy8gU3VwcG9ydDogSUU8OAoJCQkJLy8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sICJzZWFyY2giKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09ICJ0ZXh0IgoJCQkJKCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSAidGV4dCIgKTsKCQl9LAoKCQkvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uCgkJImZpcnN0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHsKCQkJcmV0dXJuIFsgMCBdOwoJCX0pLAoKCQkibGFzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQlyZXR1cm4gWyBsZW5ndGggLSAxIF07CgkJfSksCgoJCSJlcSI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJcmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdOwoJCX0pLAoKCQkiZXZlbiI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQl2YXIgaSA9IDA7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkgewoJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJfQoJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCX0pLAoKCQkib2RkIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7CgkJCXZhciBpID0gMTsKCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSksCgoJCSJsdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQlmb3IgKCA7IC0taSA+PSAwOyApIHsKCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCX0KCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQl9KSwKCgkJImd0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQl2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7CgkJCWZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHsKCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCX0KCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQl9KQoJfQp9OwoKRXhwci5wc2V1ZG9zWyJudGgiXSA9IEV4cHIucHNldWRvc1siZXEiXTsKCi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zCmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkgewoJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApOwp9CmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7CglFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApOwp9CgovLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnMKZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9CnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zOwpFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpOwoKdG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHsKCXZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLAoJCXNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsCgkJY2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyAiICIgXTsKCglpZiAoIGNhY2hlZCApIHsKCQlyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApOwoJfQoKCXNvRmFyID0gc2VsZWN0b3I7Cglncm91cHMgPSBbXTsKCXByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjsKCgl3aGlsZSAoIHNvRmFyICkgewoKCQkvLyBDb21tYSBhbmQgZmlyc3QgcnVuCgkJaWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7CgkJCWlmICggbWF0Y2ggKSB7CgkJCQkvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZAoJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7CgkJCX0KCQkJZ3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTsKCQl9CgoJCW1hdGNoZWQgPSBmYWxzZTsKCgkJLy8gQ29tYmluYXRvcnMKCQlpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHsKCQkJbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7CgkJCXRva2Vucy5wdXNoKHsKCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJLy8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlCgkJCQl0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgIiAiICkKCQkJfSk7CgkJCXNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7CgkJfQoKCQkvLyBGaWx0ZXJzCgkJZm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHsKCQkJaWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fAoJCQkJKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7CgkJCQltYXRjaGVkID0gbWF0Y2guc2hpZnQoKTsKCQkJCXRva2Vucy5wdXNoKHsKCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQl0eXBlOiB0eXBlLAoJCQkJCW1hdGNoZXM6IG1hdGNoCgkJCQl9KTsKCQkJCXNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7CgkJCX0KCQl9CgoJCWlmICggIW1hdGNoZWQgKSB7CgkJCWJyZWFrOwoJCX0KCX0KCgkvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3MKCS8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZwoJLy8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zCglyZXR1cm4gcGFyc2VPbmx5ID8KCQlzb0Zhci5sZW5ndGggOgoJCXNvRmFyID8KCQkJU2l6emxlLmVycm9yKCBzZWxlY3RvciApIDoKCQkJLy8gQ2FjaGUgdGhlIHRva2VucwoJCQl0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTsKfTsKCmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHsKCXZhciBpID0gMCwKCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCXNlbGVjdG9yID0gIiI7Cglmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQlzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7Cgl9CglyZXR1cm4gc2VsZWN0b3I7Cn0KCmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7Cgl2YXIgZGlyID0gY29tYmluYXRvci5kaXIsCgkJc2tpcCA9IGNvbWJpbmF0b3IubmV4dCwKCQlrZXkgPSBza2lwIHx8IGRpciwKCQljaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBrZXkgPT09ICJwYXJlbnROb2RlIiwKCQlkb25lTmFtZSA9IGRvbmUrKzsKCglyZXR1cm4gY29tYmluYXRvci5maXJzdCA/CgkJLy8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50CgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJd2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHsKCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCXJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfSA6CgoJCS8vIENoZWNrIGFnYWluc3QgYWxsIGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50cwoJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsCgkJCQluZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTsKCgkJCS8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZwoJCQlpZiAoIHhtbCApIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCWlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCW91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJLy8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpCgkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQlpZiAoIHNraXAgJiYgc2tpcCA9PT0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICkgewoJCQkJCQkJZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07CgkJCQkJCX0gZWxzZSBpZiAoIChvbGRDYWNoZSA9IHVuaXF1ZUNhY2hlWyBrZXkgXSkgJiYKCQkJCQkJCW9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7CgoJCQkJCQkJLy8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHMKCQkJCQkJCXJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJLy8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50cwoJCQkJCQkJdW5pcXVlQ2FjaGVbIGtleSBdID0gbmV3Q2FjaGU7CgoJCQkJCQkJLy8gQSBtYXRjaCBtZWFucyB3ZSdyZSBkb25lOyBhIGZhaWwgbWVhbnMgd2UgaGF2ZSB0byBrZWVwIGNoZWNraW5nCgkJCQkJCQlpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkgewoJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9Owp9CgpmdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7CglyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/CgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9IDoKCQltYXRjaGVyc1swXTsKfQoKZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkgewoJdmFyIGkgPSAwLAoJCWxlbiA9IGNvbnRleHRzLmxlbmd0aDsKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCVNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7Cgl9CglyZXR1cm4gcmVzdWx0czsKfQoKZnVuY3Rpb24gY29uZGVuc2UoIHVubWF0Y2hlZCwgbWFwLCBmaWx0ZXIsIGNvbnRleHQsIHhtbCApIHsKCXZhciBlbGVtLAoJCW5ld1VubWF0Y2hlZCA9IFtdLAoJCWkgPSAwLAoJCWxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsCgkJbWFwcGVkID0gbWFwICE9IG51bGw7CgoJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCWlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJbmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCWlmICggbWFwcGVkICkgewoJCQkJCW1hcC5wdXNoKCBpICk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIG5ld1VubWF0Y2hlZDsKfQoKZnVuY3Rpb24gc2V0TWF0Y2hlciggcHJlRmlsdGVyLCBzZWxlY3RvciwgbWF0Y2hlciwgcG9zdEZpbHRlciwgcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICkgewoJaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7CgkJcG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTsKCX0KCWlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkgewoJCXBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTsKCX0KCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHsKCQl2YXIgdGVtcCwgaSwgZWxlbSwKCQkJcHJlTWFwID0gW10sCgkJCXBvc3RNYXAgPSBbXSwKCQkJcHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCwKCgkJCS8vIEdldCBpbml0aWFsIGVsZW1lbnRzIGZyb20gc2VlZCBvciBjb250ZXh0CgkJCWVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCAiKiIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksCgoJCQkvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb24KCQkJbWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/CgkJCQljb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6CgkJCQllbGVtcywKCgkJCW1hdGNoZXJPdXQgPSBtYXRjaGVyID8KCQkJCS8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsCgkJCQlwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/CgoJCQkJCS8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeQoJCQkJCVtdIDoKCgkJCQkJLy8gLi4ub3RoZXJ3aXNlIHVzZSByZXN1bHRzIGRpcmVjdGx5CgkJCQkJcmVzdWx0cyA6CgkJCQltYXRjaGVySW47CgoJCS8vIEZpbmQgcHJpbWFyeSBtYXRjaGVzCgkJaWYgKCBtYXRjaGVyICkgewoJCQltYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApOwoJCX0KCgkJLy8gQXBwbHkgcG9zdEZpbHRlcgoJCWlmICggcG9zdEZpbHRlciApIHsKCQkJdGVtcCA9IGNvbmRlbnNlKCBtYXRjaGVyT3V0LCBwb3N0TWFwICk7CgkJCXBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTsKCgkJCS8vIFVuLW1hdGNoIGZhaWxpbmcgZWxlbWVudHMgYnkgbW92aW5nIHRoZW0gYmFjayB0byBtYXRjaGVySW4KCQkJaSA9IHRlbXAubGVuZ3RoOwoJCQl3aGlsZSAoIGktLSApIHsKCQkJCWlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHsKCQkJCQltYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7CgkJCQl9CgkJCX0KCQl9CgoJCWlmICggc2VlZCApIHsKCQkJaWYgKCBwb3N0RmluZGVyIHx8IHByZUZpbHRlciApIHsKCQkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCQkvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHMKCQkJCQl0ZW1wID0gW107CgkJCQkJaSA9IG1hdGNoZXJPdXQubGVuZ3RoOwoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgKSB7CgkJCQkJCQkvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaAoJCQkJCQkJdGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7CgkJCQl9CgoJCQkJLy8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWQKCQkJCWkgPSBtYXRjaGVyT3V0Lmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJgoJCQkJCQkodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbaV0pID4gLTEgKSB7CgoJCQkJCQlzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCS8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZAoJCX0gZWxzZSB7CgkJCW1hdGNoZXJPdXQgPSBjb25kZW5zZSgKCQkJCW1hdGNoZXJPdXQgPT09IHJlc3VsdHMgPwoJCQkJCW1hdGNoZXJPdXQuc3BsaWNlKCBwcmVleGlzdGluZywgbWF0Y2hlck91dC5sZW5ndGggKSA6CgkJCQkJbWF0Y2hlck91dAoJCQkpOwoJCQlpZiAoIHBvc3RGaW5kZXIgKSB7CgkJCQlwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTsKCQkJfSBlbHNlIHsKCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTsKCQkJfQoJCX0KCX0pOwp9CgpmdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkgewoJdmFyIGNoZWNrQ29udGV4dCwgbWF0Y2hlciwgaiwKCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCWxlYWRpbmdSZWxhdGl2ZSA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1swXS50eXBlIF0sCgkJaW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlWyIgIl0sCgkJaSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLAoKCQkvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKQoJCW1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0OwoJCX0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSwKCQltYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7CgkJfSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLAoJCW1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQl2YXIgcmV0ID0gKCAhbGVhZGluZ1JlbGF0aXZlICYmICggeG1sIHx8IGNvbnRleHQgIT09IG91dGVybW9zdENvbnRleHQgKSApIHx8ICgKCQkJCShjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/CgkJCQkJbWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6CgkJCQkJbWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApOwoJCQkvLyBBdm9pZCBoYW5naW5nIG9udG8gZWxlbWVudCAoaXNzdWUgIzI5OSkKCQkJY2hlY2tDb250ZXh0ID0gbnVsbDsKCQkJcmV0dXJuIHJldDsKCQl9IF07CgoJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJaWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkgewoJCQltYXRjaGVycyA9IFsgYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlcikgXTsKCQl9IGVsc2UgewoJCQltYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7CgoJCQkvLyBSZXR1cm4gc3BlY2lhbCB1cG9uIHNlZWluZyBhIHBvc2l0aW9uYWwgbWF0Y2hlcgoJCQlpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHsKCQkJCS8vIEZpbmQgdGhlIG5leHQgcmVsYXRpdmUgb3BlcmF0b3IgKGlmIGFueSkgZm9yIHByb3BlciBoYW5kbGluZwoJCQkJaiA9ICsraTsKCQkJCWZvciAoIDsgaiA8IGxlbjsgaisrICkgewoJCQkJCWlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHNldE1hdGNoZXIoCgkJCQkJaSA+IDEgJiYgZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksCgkJCQkJaSA+IDEgJiYgdG9TZWxlY3RvcigKCQkJCQkJLy8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmAKCQkJCQkJdG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gIiAiID8gIioiIDogIiIgfSkKCQkJCQkpLnJlcGxhY2UoIHJ0cmltLCAiJDEiICksCgkJCQkJbWF0Y2hlciwKCQkJCQlpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSwKCQkJCQlqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksCgkJCQkJaiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKQoJCQkJKTsKCQkJfQoJCQltYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7CgkJfQoJfQoKCXJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTsKfQoKZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgewoJdmFyIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCwKCQlieUVsZW1lbnQgPSBlbGVtZW50TWF0Y2hlcnMubGVuZ3RoID4gMCwKCQlzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBvdXRlcm1vc3QgKSB7CgkJCXZhciBlbGVtLCBqLCBtYXRjaGVyLAoJCQkJbWF0Y2hlZENvdW50ID0gMCwKCQkJCWkgPSAiMCIsCgkJCQl1bm1hdGNoZWQgPSBzZWVkICYmIFtdLAoJCQkJc2V0TWF0Y2hlZCA9IFtdLAoJCQkJY29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsCgkJCQkvLyBXZSBtdXN0IGFsd2F5cyBoYXZlIGVpdGhlciBzZWVkIGVsZW1lbnRzIG9yIG91dGVybW9zdCBjb250ZXh0CgkJCQllbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFsiVEFHIl0oICIqIiwgb3V0ZXJtb3N0ICksCgkJCQkvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlcgoJCQkJZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksCgkJCQlsZW4gPSBlbGVtcy5sZW5ndGg7CgoJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCW91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDsKCQkJfQoKCQkJLy8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHMKCQkJLy8gU3VwcG9ydDogSUU8OSwgU2FmYXJpCgkJCS8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiAibGVuZ3RoIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWQKCQkJZm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkgewoJCQkJaWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHsKCQkJCQlqID0gMDsKCQkJCQlpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7CgkJCQkJCXNldERvY3VtZW50KCBlbGVtICk7CgkJCQkJCXhtbCA9ICFkb2N1bWVudElzSFRNTDsKCQkJCQl9CgkJCQkJd2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHsKCQkJCQkJaWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkgewoJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnMKCQkJCWlmICggYnlTZXQgKSB7CgkJCQkJLy8gVGhleSB3aWxsIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBwb3NzaWJsZSBtYXRjaGVycwoJCQkJCWlmICggKGVsZW0gPSAhbWF0Y2hlciAmJiBlbGVtKSApIHsKCQkJCQkJbWF0Y2hlZENvdW50LS07CgkJCQkJfQoKCQkJCQkvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90CgkJCQkJaWYgKCBzZWVkICkgewoJCQkJCQl1bm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YAoJCQkvLyBtYWtlcyB0aGUgbGF0dGVyIG5vbm5lZ2F0aXZlLgoJCQltYXRjaGVkQ291bnQgKz0gaTsKCgkJCS8vIEFwcGx5IHNldCBmaWx0ZXJzIHRvIHVubWF0Y2hlZCBlbGVtZW50cwoJCQkvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgCgkJCS8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZQoJCQkvLyBubyBlbGVtZW50IG1hdGNoZXJzIGFuZCBubyBzZWVkLgoJCQkvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyAiMCIgYGlgIGFsbG93cyBgaWAgdG8gcmVtYWluIGEgc3RyaW5nIG9ubHkgaW4gdGhhdAoJCQkvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhICIwMCIgYG1hdGNoZWRDb3VudGAgdGhhdCBkaWZmZXJzIGZyb20gYGlgIGJ1dCBpcyBhbHNvCgkJCS8vIG51bWVyaWNhbGx5IHplcm8uCgkJCWlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkgewoJCQkJaiA9IDA7CgkJCQl3aGlsZSAoIChtYXRjaGVyID0gc2V0TWF0Y2hlcnNbaisrXSkgKSB7CgkJCQkJbWF0Y2hlciggdW5tYXRjaGVkLCBzZXRNYXRjaGVkLCBjb250ZXh0LCB4bWwgKTsKCQkJCX0KCgkJCQlpZiAoIHNlZWQgKSB7CgkJCQkJLy8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZwoJCQkJCWlmICggbWF0Y2hlZENvdW50ID4gMCApIHsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkgewoJCQkJCQkJCXNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBEaXNjYXJkIGluZGV4IHBsYWNlaG9sZGVyIHZhbHVlcyB0byBnZXQgb25seSBhY3R1YWwgbWF0Y2hlcwoJCQkJCXNldE1hdGNoZWQgPSBjb25kZW5zZSggc2V0TWF0Y2hlZCApOwoJCQkJfQoKCQkJCS8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHMKCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTsKCgkJCQkvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmcKCQkJCWlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJgoJCQkJCSggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkgewoKCQkJCQlTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApOwoJCQkJfQoJCQl9CgoJCQkvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnMKCQkJaWYgKCBvdXRlcm1vc3QgKSB7CgkJCQlkaXJydW5zID0gZGlycnVuc1VuaXF1ZTsKCQkJCW91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwOwoJCQl9CgoJCQlyZXR1cm4gdW5tYXRjaGVkOwoJCX07CgoJcmV0dXJuIGJ5U2V0ID8KCQltYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDoKCQlzdXBlck1hdGNoZXI7Cn0KCmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7Cgl2YXIgaSwKCQlzZXRNYXRjaGVycyA9IFtdLAoJCWVsZW1lbnRNYXRjaGVycyA9IFtdLAoJCWNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF07CgoJaWYgKCAhY2FjaGVkICkgewoJCS8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudAoJCWlmICggIW1hdGNoICkgewoJCQltYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApOwoJCX0KCQlpID0gbWF0Y2gubGVuZ3RoOwoJCXdoaWxlICggaS0tICkgewoJCQljYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTsKCQkJaWYgKCBjYWNoZWRbIGV4cGFuZG8gXSApIHsKCQkJCXNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApOwoJCQl9IGVsc2UgewoJCQkJZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApOwoJCQl9CgkJfQoKCQkvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24KCQljYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTsKCgkJLy8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uCgkJY2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7Cgl9CglyZXR1cm4gY2FjaGVkOwp9OwoKLyoqCiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWQKICogIHNlbGVjdG9yIGZ1bmN0aW9ucwogKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gc2VsZWN0b3IgQSBzZWxlY3RvciBvciBhIHByZS1jb21waWxlZAogKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZQogKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHQKICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdHNdCiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0CiAqLwpzZWxlY3QgPSBTaXp6bGUuc2VsZWN0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkgewoJdmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsCgkJY29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09ICJmdW5jdGlvbiIgJiYgc2VsZWN0b3IsCgkJbWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7CgoJcmVzdWx0cyA9IHJlc3VsdHMgfHwgW107CgoJLy8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWQKCS8vICh0aGUgbGF0dGVyIG9mIHdoaWNoIGd1YXJhbnRlZXMgdXMgY29udGV4dCkKCWlmICggbWF0Y2gubGVuZ3RoID09PSAxICkgewoKCQkvLyBSZWR1Y2UgY29udGV4dCBpZiB0aGUgbGVhZGluZyBjb21wb3VuZCBzZWxlY3RvciBpcyBhbiBJRAoJCXRva2VucyA9IG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAgKTsKCQlpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gIklEIiAmJgoJCQkJY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJiBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkgewoKCQkJY29udGV4dCA9ICggRXhwci5maW5kWyJJRCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTsKCQkJaWYgKCAhY29udGV4dCApIHsKCQkJCXJldHVybiByZXN1bHRzOwoKCQkJLy8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbAoJCQl9IGVsc2UgaWYgKCBjb21waWxlZCApIHsKCQkJCWNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7CgkJCX0KCgkJCXNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApOwoJCX0KCgkJLy8gRmV0Y2ggYSBzZWVkIHNldCBmb3IgcmlnaHQtdG8tbGVmdCBtYXRjaGluZwoJCWkgPSBtYXRjaEV4cHJbIm5lZWRzQ29udGV4dCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDsKCQl3aGlsZSAoIGktLSApIHsKCQkJdG9rZW4gPSB0b2tlbnNbaV07CgoJCQkvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yCgkJCWlmICggRXhwci5yZWxhdGl2ZVsgKHR5cGUgPSB0b2tlbi50eXBlKSBdICkgewoJCQkJYnJlYWs7CgkJCX0KCQkJaWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHsKCQkJCS8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9ycwoJCQkJaWYgKCAoc2VlZCA9IGZpbmQoCgkJCQkJdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLAoJCQkJCXJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQKCQkJCSkpICkgewoKCQkJCQkvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHkKCQkJCQl0b2tlbnMuc3BsaWNlKCBpLCAxICk7CgkJCQkJc2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTsKCQkJCQlpZiAoICFzZWxlY3RvciApIHsKCQkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApOwoJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQl9CgoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoJfQoKCS8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZAoJLy8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZQoJKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKAoJCXNlZWQsCgkJY29udGV4dCwKCQkhZG9jdW1lbnRJc0hUTUwsCgkJcmVzdWx0cywKCQkhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0CgkpOwoJcmV0dXJuIHJlc3VsdHM7Cn07CgovLyBPbmUtdGltZSBhc3NpZ25tZW50cwoKLy8gU29ydCBzdGFiaWxpdHkKc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdCgiIikuc29ydCggc29ydE9yZGVyICkuam9pbigiIikgPT09IGV4cGFuZG87CgovLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrCi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb24Kc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7CgovLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnQKc2V0RG9jdW1lbnQoKTsKCi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpCi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKgpzdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7CgkvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZykKCXJldHVybiBlbC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSApICYgMTsKfSk7CgovLyBTdXBwb3J0OiBJRTw4Ci8vIFByZXZlbnQgYXR0cmlidXRlL3Byb3BlcnR5ICJpbnRlcnBvbGF0aW9uIgovLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweAppZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkgewoJZWwuaW5uZXJIVE1MID0gIjxhIGhyZWY9JyMnPjwvYT4iOwoJcmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikgPT09ICIjIiA7Cn0pICkgewoJYWRkSGFuZGxlKCAidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJ0eXBlIiA/IDEgOiAyICk7CgkJfQoJfSk7Cn0KCi8vIFN1cHBvcnQ6IElFPDkKLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoInZhbHVlIikKaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGVsICkgewoJZWwuaW5uZXJIVE1MID0gIjxpbnB1dC8+IjsKCWVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCAidmFsdWUiLCAiIiApOwoJcmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09ICIiOwp9KSApIHsKCWFkZEhhbmRsZSggInZhbHVlIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCWlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiApIHsKCQkJcmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlOwoJCX0KCX0pOwp9CgovLyBTdXBwb3J0OiBJRTw5Ci8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXMKaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHsKCXJldHVybiBlbC5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikgPT0gbnVsbDsKfSkgKSB7CglhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJdmFyIHZhbDsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID8KCQkJCQl2YWwudmFsdWUgOgoJCQkJbnVsbDsKCQl9Cgl9KTsKfQoKcmV0dXJuIFNpenpsZTsKCn0pKCB3aW5kb3cgKTsKCgoKalF1ZXJ5LmZpbmQgPSBTaXp6bGU7CmpRdWVyeS5leHByID0gU2l6emxlLnNlbGVjdG9yczsKCi8vIERlcHJlY2F0ZWQKalF1ZXJ5LmV4cHJbICI6IiBdID0galF1ZXJ5LmV4cHIucHNldWRvczsKalF1ZXJ5LnVuaXF1ZVNvcnQgPSBqUXVlcnkudW5pcXVlID0gU2l6emxlLnVuaXF1ZVNvcnQ7CmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7CmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDsKalF1ZXJ5LmNvbnRhaW5zID0gU2l6emxlLmNvbnRhaW5zOwpqUXVlcnkuZXNjYXBlU2VsZWN0b3IgPSBTaXp6bGUuZXNjYXBlOwoKCgoKdmFyIGRpciA9IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkgewoJdmFyIG1hdGNoZWQgPSBbXSwKCQl0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7CgoJd2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7CgkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQlpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkgewoJCQkJYnJlYWs7CgkJCX0KCQkJbWF0Y2hlZC5wdXNoKCBlbGVtICk7CgkJfQoJfQoJcmV0dXJuIG1hdGNoZWQ7Cn07CgoKdmFyIHNpYmxpbmdzID0gZnVuY3Rpb24oIG4sIGVsZW0gKSB7Cgl2YXIgbWF0Y2hlZCA9IFtdOwoKCWZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7CgkJaWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7CgkJCW1hdGNoZWQucHVzaCggbiApOwoJCX0KCX0KCglyZXR1cm4gbWF0Y2hlZDsKfTsKCgp2YXIgcm5lZWRzQ29udGV4dCA9IGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDsKCnZhciByc2luZ2xlVGFnID0gKCAvXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSApOwoKCgp2YXIgcmlzU2ltcGxlID0gL14uW146I1xbXC4sXSokLzsKCi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90CmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkgewoJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7CgkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7CgkJCXJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDsKCQl9ICk7Cgl9CgoJLy8gU2luZ2xlIGVsZW1lbnQKCWlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkgewoJCXJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90OwoJCX0gKTsKCX0KCgkvLyBBcnJheWxpa2Ugb2YgZWxlbWVudHMgKGpRdWVyeSwgYXJndW1lbnRzLCBBcnJheSkKCWlmICggdHlwZW9mIHF1YWxpZmllciAhPT0gInN0cmluZyIgKSB7CgkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPiAtMSApICE9PSBub3Q7CgkJfSApOwoJfQoKCS8vIFNpbXBsZSBzZWxlY3RvciB0aGF0IGNhbiBiZSBmaWx0ZXJlZCBkaXJlY3RseSwgcmVtb3Zpbmcgbm9uLUVsZW1lbnRzCglpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHsKCQlyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7Cgl9CgoJLy8gQ29tcGxleCBzZWxlY3RvciwgY29tcGFyZSB0aGUgdHdvIHNldHMsIHJlbW92aW5nIG5vbi1FbGVtZW50cwoJcXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApOwoJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdCAmJiBlbGVtLm5vZGVUeXBlID09PSAxOwoJfSApOwp9CgpqUXVlcnkuZmlsdGVyID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1zLCBub3QgKSB7Cgl2YXIgZWxlbSA9IGVsZW1zWyAwIF07CgoJaWYgKCBub3QgKSB7CgkJZXhwciA9ICI6bm90KCIgKyBleHByICsgIikiOwoJfQoKCWlmICggZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJcmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXTsKCX0KCglyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTsKCX0gKSApOwp9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXZhciBpLCByZXQsCgkJCWxlbiA9IHRoaXMubGVuZ3RoLAoJCQlzZWxmID0gdGhpczsKCgkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCQlpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfSApICk7CgkJfQoKCQlyZXQgPSB0aGlzLnB1c2hTdGFjayggW10gKTsKCgkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJalF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApOwoJCX0KCgkJcmV0dXJuIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggcmV0ICkgOiByZXQ7Cgl9LAoJZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7Cgl9LAoJbm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTsKCX0sCglpczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXJldHVybiAhIXdpbm5vdygKCQkJdGhpcywKCgkJCS8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXQKCQkJLy8gc28gJCgicDpmaXJzdCIpLmlzKCJwOmxhc3QiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gInAiLgoJCQl0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/CgkJCQlqUXVlcnkoIHNlbGVjdG9yICkgOgoJCQkJc2VsZWN0b3IgfHwgW10sCgkJCWZhbHNlCgkJKS5sZW5ndGg7Cgl9Cn0gKTsKCgovLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdAoKCi8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KQp2YXIgcm9vdGpRdWVyeSwKCgkvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5ncwoJLy8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKQoJLy8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpCgkvLyBTaG9ydGN1dCBzaW1wbGUgI2lkIGNhc2UgZm9yIHNwZWVkCglycXVpY2tFeHByID0gL14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLywKCglpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7CgkJdmFyIG1hdGNoLCBlbGVtOwoKCQkvLyBIQU5ETEU6ICQoIiIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpCgkJaWYgKCAhc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzOwoJCX0KCgkJLy8gTWV0aG9kIGluaXQoKSBhY2NlcHRzIGFuIGFsdGVybmF0ZSByb290alF1ZXJ5CgkJLy8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKQoJCXJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7CgoJCS8vIEhhbmRsZSBIVE1MIHN0cmluZ3MKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgKSB7CgkJCWlmICggc2VsZWN0b3JbIDAgXSA9PT0gIjwiICYmCgkJCQlzZWxlY3Rvclsgc2VsZWN0b3IubGVuZ3RoIC0gMSBdID09PSAiPiIgJiYKCQkJCXNlbGVjdG9yLmxlbmd0aCA+PSAzICkgewoKCQkJCS8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrCgkJCQltYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTsKCgkJCX0gZWxzZSB7CgkJCQltYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTsKCQkJfQoKCQkJLy8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZAoJCQlpZiAoIG1hdGNoICYmICggbWF0Y2hbIDEgXSB8fCAhY29udGV4dCApICkgewoKCQkJCS8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KQoJCQkJaWYgKCBtYXRjaFsgMSBdICkgewoJCQkJCWNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDsKCgkJCQkJLy8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0CgkJCQkJLy8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnQKCQkJCQlqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoCgkJCQkJCW1hdGNoWyAxIF0sCgkJCQkJCWNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsCgkJCQkJCXRydWUKCQkJCQkpICk7CgoJCQkJCS8vIEhBTkRMRTogJChodG1sLCBwcm9wcykKCQkJCQlpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7CgkJCQkJCWZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7CgoJCQkJCQkJLy8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZQoJCQkJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkgewoJCQkJCQkJCXRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTsKCgkJCQkJCQkvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzCgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXRoaXMuYXR0ciggbWF0Y2gsIGNvbnRleHRbIG1hdGNoIF0gKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIHRoaXM7CgoJCQkJLy8gSEFORExFOiAkKCNpZCkKCQkJCX0gZWxzZSB7CgkJCQkJZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtYXRjaFsgMiBdICk7CgoJCQkJCWlmICggZWxlbSApIHsKCgkJCQkJCS8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0CgkJCQkJCXRoaXNbIDAgXSA9IGVsZW07CgkJCQkJCXRoaXMubGVuZ3RoID0gMTsKCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgoJCQkvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKQoJCQl9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHsKCQkJCXJldHVybiAoIGNvbnRleHQgfHwgcm9vdCApLmZpbmQoIHNlbGVjdG9yICk7CgoJCQkvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dCkKCQkJLy8gKHdoaWNoIGlzIGp1c3QgZXF1aXZhbGVudCB0bzogJChjb250ZXh0KS5maW5kKGV4cHIpCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvciggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICk7CgkJCX0KCgkJLy8gSEFORExFOiAkKERPTUVsZW1lbnQpCgkJfSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7CgkJCXRoaXNbIDAgXSA9IHNlbGVjdG9yOwoJCQl0aGlzLmxlbmd0aCA9IDE7CgkJCXJldHVybiB0aGlzOwoKCQkvLyBIQU5ETEU6ICQoZnVuY3Rpb24pCgkJLy8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5CgkJfSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7CgkJCXJldHVybiByb290LnJlYWR5ICE9PSB1bmRlZmluZWQgPwoJCQkJcm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6CgoJCQkJLy8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudAoJCQkJc2VsZWN0b3IoIGpRdWVyeSApOwoJCX0KCgkJcmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7Cgl9OwoKLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvbgppbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjsKCi8vIEluaXRpYWxpemUgY2VudHJhbCByZWZlcmVuY2UKcm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTsKCgp2YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sCgoJLy8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXQKCWd1YXJhbnRlZWRVbmlxdWUgPSB7CgkJY2hpbGRyZW46IHRydWUsCgkJY29udGVudHM6IHRydWUsCgkJbmV4dDogdHJ1ZSwKCQlwcmV2OiB0cnVlCgl9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJaGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkgewoJCXZhciB0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSwKCQkJbCA9IHRhcmdldHMubGVuZ3RoOwoKCQlyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQl2YXIgaSA9IDA7CgkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJCWlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzWyBpIF0gKSApIHsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfQoJCX0gKTsKCX0sCgoJY2xvc2VzdDogZnVuY3Rpb24oIHNlbGVjdG9ycywgY29udGV4dCApIHsKCQl2YXIgY3VyLAoJCQlpID0gMCwKCQkJbCA9IHRoaXMubGVuZ3RoLAoJCQltYXRjaGVkID0gW10sCgkJCXRhcmdldHMgPSB0eXBlb2Ygc2VsZWN0b3JzICE9PSAic3RyaW5nIiAmJiBqUXVlcnkoIHNlbGVjdG9ycyApOwoKCQkvLyBQb3NpdGlvbmFsIHNlbGVjdG9ycyBuZXZlciBtYXRjaCwgc2luY2UgdGhlcmUncyBubyBfc2VsZWN0aW9uXyBjb250ZXh0CgkJaWYgKCAhcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSApIHsKCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCQkJZm9yICggY3VyID0gdGhpc1sgaSBdOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHsKCgkJCQkJLy8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzCgkJCQkJaWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgPwoJCQkJCQl0YXJnZXRzLmluZGV4KCBjdXIgKSA+IC0xIDoKCgkJCQkJCS8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZQoJCQkJCQljdXIubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkJCWpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkgewoKCQkJCQkJbWF0Y2hlZC5wdXNoKCBjdXIgKTsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICkgOiBtYXRjaGVkICk7Cgl9LAoKCS8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldAoJaW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudAoJCWlmICggIWVsZW0gKSB7CgkJCXJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTsKCQl9CgoJCS8vIEluZGV4IGluIHNlbGVjdG9yCgkJaWYgKCB0eXBlb2YgZWxlbSA9PT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBpbmRleE9mLmNhbGwoIGpRdWVyeSggZWxlbSApLCB0aGlzWyAwIF0gKTsKCQl9CgoJCS8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudAoJCXJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsCgoJCQkvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWQKCQkJZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtCgkJKTsKCX0sCgoJYWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7CgkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKAoJCQlqUXVlcnkudW5pcXVlU29ydCgKCQkJCWpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApICkKCQkJKQoJCSk7Cgl9LAoKCWFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQlyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgPwoJCQl0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApCgkJKTsKCX0KfSApOwoKZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7Cgl3aGlsZSAoICggY3VyID0gY3VyWyBkaXIgXSApICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApIHt9CglyZXR1cm4gY3VyOwp9CgpqUXVlcnkuZWFjaCggewoJcGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlOwoJCXJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7Cgl9LAoJcGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiICk7Cgl9LAoJcGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7CgkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiLCB1bnRpbCApOwoJfSwKCW5leHQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiBzaWJsaW5nKCBlbGVtLCAibmV4dFNpYmxpbmciICk7Cgl9LAoJcHJldjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIHNpYmxpbmcoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7Cgl9LAoJbmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiApOwoJfSwKCXByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiBkaXIoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7Cgl9LAoJbmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7CgkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiwgdW50aWwgKTsKCX0sCglwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQlyZXR1cm4gZGlyKCBlbGVtLCAicHJldmlvdXNTaWJsaW5nIiwgdW50aWwgKTsKCX0sCglzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTsKCX0sCgljaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTsKCX0sCgljb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50IHx8IGpRdWVyeS5tZXJnZSggW10sIGVsZW0uY2hpbGROb2RlcyApOwoJfQp9LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7CglqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7CgkJdmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTsKCgkJaWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSAiVW50aWwiICkgewoJCQlzZWxlY3RvciA9IHVudGlsOwoJCX0KCgkJaWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICkgewoJCQltYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTsKCQl9CgoJCWlmICggdGhpcy5sZW5ndGggPiAxICkgewoKCQkJLy8gUmVtb3ZlIGR1cGxpY2F0ZXMKCQkJaWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkgewoJCQkJalF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKTsKCQkJfQoKCQkJLy8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXMKCQkJaWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkgewoJCQkJbWF0Y2hlZC5yZXZlcnNlKCk7CgkJCX0KCQl9CgoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZCApOwoJfTsKfSApOwp2YXIgcm5vdGh0bWx3aGl0ZSA9ICggL1teXHgyMFx0XHJcblxmXSsvZyApOwoKCgovLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lcwpmdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgewoJdmFyIG9iamVjdCA9IHt9OwoJalF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7CgkJb2JqZWN0WyBmbGFnIF0gPSB0cnVlOwoJfSApOwoJcmV0dXJuIG9iamVjdDsKfQoKLyoKICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6CiAqCiAqCW9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3cKICoJCQl0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0CiAqCiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlCiAqICJmaXJlZCIgbXVsdGlwbGUgdGltZXMuCiAqCiAqIFBvc3NpYmxlIG9wdGlvbnM6CiAqCiAqCW9uY2U6CQkJd2lsbCBlbnN1cmUgdGhlIGNhbGxiYWNrIGxpc3QgY2FuIG9ubHkgYmUgZmlyZWQgb25jZSAobGlrZSBhIERlZmVycmVkKQogKgogKgltZW1vcnk6CQkJd2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZAogKgkJCQkJYWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgIm1lbW9yaXplZCIKICoJCQkJCXZhbHVlcyAobGlrZSBhIERlZmVycmVkKQogKgogKgl1bmlxdWU6CQkJd2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpCiAqCiAqCXN0b3BPbkZhbHNlOglpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UKICoKICovCmpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCgkvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkCgkvLyAod2UgY2hlY2sgaW4gY2FjaGUgZmlyc3QpCglvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciID8KCQljcmVhdGVPcHRpb25zKCBvcHRpb25zICkgOgoJCWpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7CgoJdmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmcKCQlmaXJpbmcsCgoJCS8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzCgkJbWVtb3J5LAoKCQkvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZAoJCWZpcmVkLAoKCQkvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nCgkJbG9ja2VkLAoKCQkvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdAoJCWxpc3QgPSBbXSwKCgkJLy8gUXVldWUgb2YgZXhlY3V0aW9uIGRhdGEgZm9yIHJlcGVhdGFibGUgbGlzdHMKCQlxdWV1ZSA9IFtdLAoKCQkvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZCkKCQlmaXJpbmdJbmRleCA9IC0xLAoKCQkvLyBGaXJlIGNhbGxiYWNrcwoJCWZpcmUgPSBmdW5jdGlvbigpIHsKCgkJCS8vIEVuZm9yY2Ugc2luZ2xlLWZpcmluZwoJCQlsb2NrZWQgPSBvcHRpb25zLm9uY2U7CgoJCQkvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucywKCQkJLy8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlcwoJCQlmaXJlZCA9IGZpcmluZyA9IHRydWU7CgkJCWZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkgewoJCQkJbWVtb3J5ID0gcXVldWUuc2hpZnQoKTsKCQkJCXdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkgewoKCQkJCQkvLyBSdW4gY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBlYXJseSB0ZXJtaW5hdGlvbgoJCQkJCWlmICggbGlzdFsgZmlyaW5nSW5kZXggXS5hcHBseSggbWVtb3J5WyAwIF0sIG1lbW9yeVsgMSBdICkgPT09IGZhbHNlICYmCgkJCQkJCW9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7CgoJCQkJCQkvLyBKdW1wIHRvIGVuZCBhbmQgZm9yZ2V0IHRoZSBkYXRhIHNvIC5hZGQgZG9lc24ndCByZS1maXJlCgkJCQkJCWZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7CgkJCQkJCW1lbW9yeSA9IGZhbHNlOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdAoJCQlpZiAoICFvcHRpb25zLm1lbW9yeSApIHsKCQkJCW1lbW9yeSA9IGZhbHNlOwoJCQl9CgoJCQlmaXJpbmcgPSBmYWxzZTsKCgkJCS8vIENsZWFuIHVwIGlmIHdlJ3JlIGRvbmUgZmlyaW5nIGZvciBnb29kCgkJCWlmICggbG9ja2VkICkgewoKCQkJCS8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHMKCQkJCWlmICggbWVtb3J5ICkgewoJCQkJCWxpc3QgPSBbXTsKCgkJCQkvLyBPdGhlcndpc2UsIHRoaXMgb2JqZWN0IGlzIHNwZW50CgkJCQl9IGVsc2UgewoJCQkJCWxpc3QgPSAiIjsKCQkJCX0KCQkJfQoJCX0sCgoJCS8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0CgkJc2VsZiA9IHsKCgkJCS8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3QKCQkJYWRkOiBmdW5jdGlvbigpIHsKCQkJCWlmICggbGlzdCApIHsKCgkJCQkJLy8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmcKCQkJCQlpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkgewoJCQkJCQlmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoIC0gMTsKCQkJCQkJcXVldWUucHVzaCggbWVtb3J5ICk7CgkJCQkJfQoKCQkJCQkoIGZ1bmN0aW9uIGFkZCggYXJncyApIHsKCQkJCQkJalF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7CgkJCQkJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhcmcgKSApIHsKCQkJCQkJCQlpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkgewoJCQkJCQkJCQlsaXN0LnB1c2goIGFyZyApOwoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIGpRdWVyeS50eXBlKCBhcmcgKSAhPT0gInN0cmluZyIgKSB7CgoJCQkJCQkJCS8vIEluc3BlY3QgcmVjdXJzaXZlbHkKCQkJCQkJCQlhZGQoIGFyZyApOwoJCQkJCQkJfQoJCQkJCQl9ICk7CgkJCQkJfSApKCBhcmd1bWVudHMgKTsKCgkJCQkJaWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHsKCQkJCQkJZmlyZSgpOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0aGlzOwoJCQl9LAoKCQkJLy8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdAoJCQlyZW1vdmU6IGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHsKCQkJCQl2YXIgaW5kZXg7CgkJCQkJd2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7CgkJCQkJCWxpc3Quc3BsaWNlKCBpbmRleCwgMSApOwoKCQkJCQkJLy8gSGFuZGxlIGZpcmluZyBpbmRleGVzCgkJCQkJCWlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7CgkJCQkJCQlmaXJpbmdJbmRleC0tOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSApOwoJCQkJcmV0dXJuIHRoaXM7CgkJCX0sCgoJCQkvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LgoJCQkvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC4KCQkJaGFzOiBmdW5jdGlvbiggZm4gKSB7CgkJCQlyZXR1cm4gZm4gPwoJCQkJCWpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOgoJCQkJCWxpc3QubGVuZ3RoID4gMDsKCQkJfSwKCgkJCS8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3QKCQkJZW1wdHk6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBsaXN0ICkgewoJCQkJCWxpc3QgPSBbXTsKCQkJCX0KCQkJCXJldHVybiB0aGlzOwoJCQl9LAoKCQkJLy8gRGlzYWJsZSAuZmlyZSBhbmQgLmFkZAoJCQkvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnMKCQkJLy8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzCgkJCWRpc2FibGU6IGZ1bmN0aW9uKCkgewoJCQkJbG9ja2VkID0gcXVldWUgPSBbXTsKCQkJCWxpc3QgPSBtZW1vcnkgPSAiIjsKCQkJCXJldHVybiB0aGlzOwoJCQl9LAoJCQlkaXNhYmxlZDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gIWxpc3Q7CgkJCX0sCgoJCQkvLyBEaXNhYmxlIC5maXJlCgkJCS8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpCgkJCS8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnMKCQkJbG9jazogZnVuY3Rpb24oKSB7CgkJCQlsb2NrZWQgPSBxdWV1ZSA9IFtdOwoJCQkJaWYgKCAhbWVtb3J5ICYmICFmaXJpbmcgKSB7CgkJCQkJbGlzdCA9IG1lbW9yeSA9ICIiOwoJCQkJfQoJCQkJcmV0dXJuIHRoaXM7CgkJCX0sCgkJCWxvY2tlZDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gISFsb2NrZWQ7CgkJCX0sCgoJCQkvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzCgkJCWZpcmVXaXRoOiBmdW5jdGlvbiggY29udGV4dCwgYXJncyApIHsKCQkJCWlmICggIWxvY2tlZCApIHsKCQkJCQlhcmdzID0gYXJncyB8fCBbXTsKCQkJCQlhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdOwoJCQkJCXF1ZXVlLnB1c2goIGFyZ3MgKTsKCQkJCQlpZiAoICFmaXJpbmcgKSB7CgkJCQkJCWZpcmUoKTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gdGhpczsKCQkJfSwKCgkJCS8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzCgkJCWZpcmU6IGZ1bmN0aW9uKCkgewoJCQkJc2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7CgkJCQlyZXR1cm4gdGhpczsKCQkJfSwKCgkJCS8vIFRvIGtub3cgaWYgdGhlIGNhbGxiYWNrcyBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQgYXQgbGVhc3Qgb25jZQoJCQlmaXJlZDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gISFmaXJlZDsKCQkJfQoJCX07CgoJcmV0dXJuIHNlbGY7Cn07CgoKZnVuY3Rpb24gSWRlbnRpdHkoIHYgKSB7CglyZXR1cm4gdjsKfQpmdW5jdGlvbiBUaHJvd2VyKCBleCApIHsKCXRocm93IGV4Owp9CgpmdW5jdGlvbiBhZG9wdFZhbHVlKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0ICkgewoJdmFyIG1ldGhvZDsKCgl0cnkgewoKCQkvLyBDaGVjayBmb3IgcHJvbWlzZSBhc3BlY3QgZmlyc3QgdG8gcHJpdmlsZWdlIHN5bmNocm9ub3VzIGJlaGF2aW9yCgkJaWYgKCB2YWx1ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHsKCQkJbWV0aG9kLmNhbGwoIHZhbHVlICkuZG9uZSggcmVzb2x2ZSApLmZhaWwoIHJlamVjdCApOwoKCQkvLyBPdGhlciB0aGVuYWJsZXMKCQl9IGVsc2UgaWYgKCB2YWx1ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS50aGVuICkgKSApIHsKCQkJbWV0aG9kLmNhbGwoIHZhbHVlLCByZXNvbHZlLCByZWplY3QgKTsKCgkJLy8gT3RoZXIgbm9uLXRoZW5hYmxlcwoJCX0gZWxzZSB7CgoJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCBvbmx5CgkJCS8vIFN0cmljdCBtb2RlIGZ1bmN0aW9ucyBpbnZva2VkIHdpdGhvdXQgLmNhbGwvLmFwcGx5IGdldCBnbG9iYWwtb2JqZWN0IGNvbnRleHQKCQkJcmVzb2x2ZS5jYWxsKCB1bmRlZmluZWQsIHZhbHVlICk7CgkJfQoKCS8vIEZvciBQcm9taXNlcy9BKywgY29udmVydCBleGNlcHRpb25zIGludG8gcmVqZWN0aW9ucwoJLy8gU2luY2UgalF1ZXJ5LndoZW4gZG9lc24ndCB1bndyYXAgdGhlbmFibGVzLCB3ZSBjYW4gc2tpcCB0aGUgZXh0cmEgY2hlY2tzIGFwcGVhcmluZyBpbgoJLy8gRGVmZXJyZWQjdGhlbiB0byBjb25kaXRpb25hbGx5IHN1cHByZXNzIHJlamVjdGlvbi4KCX0gY2F0Y2ggKCB2YWx1ZSApIHsKCgkJLy8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seQoJCS8vIFN0cmljdCBtb2RlIGZ1bmN0aW9ucyBpbnZva2VkIHdpdGhvdXQgLmNhbGwvLmFwcGx5IGdldCBnbG9iYWwtb2JqZWN0IGNvbnRleHQKCQlyZWplY3QuY2FsbCggdW5kZWZpbmVkLCB2YWx1ZSApOwoJfQp9CgpqUXVlcnkuZXh0ZW5kKCB7CgoJRGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkgewoJCXZhciB0dXBsZXMgPSBbCgoJCQkJLy8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcywKCQkJCS8vIC4uLiAudGhlbiBoYW5kbGVycywgYXJndW1lbnQgaW5kZXgsIFtmaW5hbCBzdGF0ZV0KCQkJCVsgIm5vdGlmeSIsICJwcm9ncmVzcyIsIGpRdWVyeS5DYWxsYmFja3MoICJtZW1vcnkiICksCgkJCQkJalF1ZXJ5LkNhbGxiYWNrcyggIm1lbW9yeSIgKSwgMiBdLAoJCQkJWyAicmVzb2x2ZSIsICJkb25lIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLAoJCQkJCWpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKSwgMCwgInJlc29sdmVkIiBdLAoJCQkJWyAicmVqZWN0IiwgImZhaWwiLCBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksCgkJCQkJalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLCAxLCAicmVqZWN0ZWQiIF0KCQkJXSwKCQkJc3RhdGUgPSAicGVuZGluZyIsCgkJCXByb21pc2UgPSB7CgkJCQlzdGF0ZTogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHN0YXRlOwoJCQkJfSwKCQkJCWFsd2F5czogZnVuY3Rpb24oKSB7CgkJCQkJZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoJCQkJImNhdGNoIjogZnVuY3Rpb24oIGZuICkgewoJCQkJCXJldHVybiBwcm9taXNlLnRoZW4oIG51bGwsIGZuICk7CgkJCQl9LAoKCQkJCS8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXQKCQkJCXBpcGU6IGZ1bmN0aW9uKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLyApIHsKCQkJCQl2YXIgZm5zID0gYXJndW1lbnRzOwoKCQkJCQlyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7CgkJCQkJCWpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHsKCgkJCQkJCQkvLyBNYXAgdHVwbGVzIChwcm9ncmVzcywgZG9uZSwgZmFpbCkgdG8gYXJndW1lbnRzIChkb25lLCBmYWlsLCBwcm9ncmVzcykKCQkJCQkJCXZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIHR1cGxlWyA0IF0gXSApICYmIGZuc1sgdHVwbGVbIDQgXSBdOwoKCQkJCQkJCS8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KQoJCQkJCQkJLy8gZGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pCgkJCQkJCQkvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KQoJCQkJCQkJZGVmZXJyZWRbIHR1cGxlWyAxIF0gXSggZnVuY3Rpb24oKSB7CgkJCQkJCQkJdmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJCQkJCWlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHsKCQkJCQkJCQkJcmV0dXJuZWQucHJvbWlzZSgpCgkJCQkJCQkJCQkucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApCgkJCQkJCQkJCQkuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApCgkJCQkJCQkJCQkuZmFpbCggbmV3RGVmZXIucmVqZWN0ICk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbmV3RGVmZXJbIHR1cGxlWyAwIF0gKyAiV2l0aCIgXSgKCQkJCQkJCQkJCXRoaXMsCgkJCQkJCQkJCQlmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cwoJCQkJCQkJCQkpOwoJCQkJCQkJCX0KCQkJCQkJCX0gKTsKCQkJCQkJfSApOwoJCQkJCQlmbnMgPSBudWxsOwoJCQkJCX0gKS5wcm9taXNlKCk7CgkJCQl9LAoJCQkJdGhlbjogZnVuY3Rpb24oIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzICkgewoJCQkJCXZhciBtYXhEZXB0aCA9IDA7CgkJCQkJZnVuY3Rpb24gcmVzb2x2ZSggZGVwdGgsIGRlZmVycmVkLCBoYW5kbGVyLCBzcGVjaWFsICkgewoJCQkJCQlyZXR1cm4gZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgdGhhdCA9IHRoaXMsCgkJCQkJCQkJYXJncyA9IGFyZ3VtZW50cywKCQkJCQkJCQltaWdodFRocm93ID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXZhciByZXR1cm5lZCwgdGhlbjsKCgkJCQkJCQkJCS8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4zCgkJCQkJCQkJCS8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU5CgkJCQkJCQkJCS8vIElnbm9yZSBkb3VibGUtcmVzb2x1dGlvbiBhdHRlbXB0cwoJCQkJCQkJCQlpZiAoIGRlcHRoIDwgbWF4RGVwdGggKSB7CgkJCQkJCQkJCQlyZXR1cm47CgkJCQkJCQkJCX0KCgkJCQkJCQkJCXJldHVybmVkID0gaGFuZGxlci5hcHBseSggdGhhdCwgYXJncyApOwoKCQkJCQkJCQkJLy8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMQoJCQkJCQkJCQkvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC00OAoJCQkJCQkJCQlpZiAoIHJldHVybmVkID09PSBkZWZlcnJlZC5wcm9taXNlKCkgKSB7CgkJCQkJCQkJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCAiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uIiApOwoJCQkJCQkJCQl9CgoJCQkJCQkJCQkvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9ucyAyLjMuMy4xLCAzLjUKCQkJCQkJCQkJLy8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNTQKCQkJCQkJCQkJLy8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNzUKCQkJCQkJCQkJLy8gUmV0cmlldmUgYHRoZW5gIG9ubHkgb25jZQoJCQkJCQkJCQl0aGVuID0gcmV0dXJuZWQgJiYKCgkJCQkJCQkJCQkvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy40CgkJCQkJCQkJCQkvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02NAoJCQkJCQkJCQkJLy8gT25seSBjaGVjayBvYmplY3RzIGFuZCBmdW5jdGlvbnMgZm9yIHRoZW5hYmlsaXR5CgkJCQkJCQkJCQkoIHR5cGVvZiByZXR1cm5lZCA9PT0gIm9iamVjdCIgfHwKCQkJCQkJCQkJCQl0eXBlb2YgcmV0dXJuZWQgPT09ICJmdW5jdGlvbiIgKSAmJgoJCQkJCQkJCQkJcmV0dXJuZWQudGhlbjsKCgkJCQkJCQkJCS8vIEhhbmRsZSBhIHJldHVybmVkIHRoZW5hYmxlCgkJCQkJCQkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHRoZW4gKSApIHsKCgkJCQkJCQkJCQkvLyBTcGVjaWFsIHByb2Nlc3NvcnMgKG5vdGlmeSkganVzdCB3YWl0IGZvciByZXNvbHV0aW9uCgkJCQkJCQkJCQlpZiAoIHNwZWNpYWwgKSB7CgkJCQkJCQkJCQkJdGhlbi5jYWxsKAoJCQkJCQkJCQkJCQlyZXR1cm5lZCwKCQkJCQkJCQkJCQkJcmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLAoJCQkJCQkJCQkJCQlyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKQoJCQkJCQkJCQkJCSk7CgoJCQkJCQkJCQkJLy8gTm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGFsc28gaG9vayBpbnRvIHByb2dyZXNzCgkJCQkJCQkJCQl9IGVsc2UgewoKCQkJCQkJCQkJCQkvLyAuLi5hbmQgZGlzcmVnYXJkIG9sZGVyIHJlc29sdXRpb24gdmFsdWVzCgkJCQkJCQkJCQkJbWF4RGVwdGgrKzsKCgkJCQkJCQkJCQkJdGhlbi5jYWxsKAoJCQkJCQkJCQkJCQlyZXR1cm5lZCwKCQkJCQkJCQkJCQkJcmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLAoJCQkJCQkJCQkJCQlyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKSwKCQkJCQkJCQkJCQkJcmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwKCQkJCQkJCQkJCQkJCWRlZmVycmVkLm5vdGlmeVdpdGggKQoJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQl9CgoJCQkJCQkJCQkvLyBIYW5kbGUgYWxsIG90aGVyIHJldHVybmVkIHZhbHVlcwoJCQkJCQkJCQl9IGVsc2UgewoKCQkJCQkJCQkJCS8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHQKCQkJCQkJCQkJCS8vIGFuZCBtdWx0aXBsZSB2YWx1ZXMgKG5vbi1zcGVjIGJlaGF2aW9yKQoJCQkJCQkJCQkJaWYgKCBoYW5kbGVyICE9PSBJZGVudGl0eSApIHsKCQkJCQkJCQkJCQl0aGF0ID0gdW5kZWZpbmVkOwoJCQkJCQkJCQkJCWFyZ3MgPSBbIHJldHVybmVkIF07CgkJCQkJCQkJCQl9CgoJCQkJCQkJCQkJLy8gUHJvY2VzcyB0aGUgdmFsdWUocykKCQkJCQkJCQkJCS8vIERlZmF1bHQgcHJvY2VzcyBpcyByZXNvbHZlCgkJCQkJCQkJCQkoIHNwZWNpYWwgfHwgZGVmZXJyZWQucmVzb2x2ZVdpdGggKSggdGhhdCwgYXJncyApOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCgkJCQkJCQkJLy8gT25seSBub3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgY2F0Y2ggYW5kIHJlamVjdCBleGNlcHRpb25zCgkJCQkJCQkJcHJvY2VzcyA9IHNwZWNpYWwgPwoJCQkJCQkJCQltaWdodFRocm93IDoKCQkJCQkJCQkJZnVuY3Rpb24oKSB7CgkJCQkJCQkJCQl0cnkgewoJCQkJCQkJCQkJCW1pZ2h0VGhyb3coKTsKCQkJCQkJCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkJCQkJCQlpZiAoIGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rICkgewoJCQkJCQkJCQkJCQlqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayggZSwKCQkJCQkJCQkJCQkJCXByb2Nlc3Muc3RhY2tUcmFjZSApOwoJCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQkJLy8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjQuMQoJCQkJCQkJCQkJCS8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTYxCgkJCQkJCQkJCQkJLy8gSWdub3JlIHBvc3QtcmVzb2x1dGlvbiBleGNlcHRpb25zCgkJCQkJCQkJCQkJaWYgKCBkZXB0aCArIDEgPj0gbWF4RGVwdGggKSB7CgoJCQkJCQkJCQkJCQkvLyBPbmx5IHN1YnN0aXR1dGUgaGFuZGxlcnMgcGFzcyBvbiBjb250ZXh0CgkJCQkJCQkJCQkJCS8vIGFuZCBtdWx0aXBsZSB2YWx1ZXMgKG5vbi1zcGVjIGJlaGF2aW9yKQoJCQkJCQkJCQkJCQlpZiAoIGhhbmRsZXIgIT09IFRocm93ZXIgKSB7CgkJCQkJCQkJCQkJCQl0aGF0ID0gdW5kZWZpbmVkOwoJCQkJCQkJCQkJCQkJYXJncyA9IFsgZSBdOwoJCQkJCQkJCQkJCQl9CgoJCQkJCQkJCQkJCQlkZWZlcnJlZC5yZWplY3RXaXRoKCB0aGF0LCBhcmdzICk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9OwoKCQkJCQkJCS8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4xCgkJCQkJCQkvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01NwoJCQkJCQkJLy8gUmUtcmVzb2x2ZSBwcm9taXNlcyBpbW1lZGlhdGVseSB0byBkb2RnZSBmYWxzZSByZWplY3Rpb24gZnJvbQoJCQkJCQkJLy8gc3Vic2VxdWVudCBlcnJvcnMKCQkJCQkJCWlmICggZGVwdGggKSB7CgkJCQkJCQkJcHJvY2VzcygpOwoJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJLy8gQ2FsbCBhbiBvcHRpb25hbCBob29rIHRvIHJlY29yZCB0aGUgc3RhY2ssIGluIGNhc2Ugb2YgZXhjZXB0aW9uCgkJCQkJCQkJLy8gc2luY2UgaXQncyBvdGhlcndpc2UgbG9zdCB3aGVuIGV4ZWN1dGlvbiBnb2VzIGFzeW5jCgkJCQkJCQkJaWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkgewoJCQkJCQkJCQlwcm9jZXNzLnN0YWNrVHJhY2UgPSBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7CgkJCQkJCQkJfQoJCQkJCQkJCXdpbmRvdy5zZXRUaW1lb3V0KCBwcm9jZXNzICk7CgkJCQkJCQl9CgkJCQkJCX07CgkJCQkJfQoKCQkJCQlyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7CgoJCQkJCQkvLyBwcm9ncmVzc19oYW5kbGVycy5hZGQoIC4uLiApCgkJCQkJCXR1cGxlc1sgMCBdWyAzIF0uYWRkKAoJCQkJCQkJcmVzb2x2ZSgKCQkJCQkJCQkwLAoJCQkJCQkJCW5ld0RlZmVyLAoJCQkJCQkJCWpRdWVyeS5pc0Z1bmN0aW9uKCBvblByb2dyZXNzICkgPwoJCQkJCQkJCQlvblByb2dyZXNzIDoKCQkJCQkJCQkJSWRlbnRpdHksCgkJCQkJCQkJbmV3RGVmZXIubm90aWZ5V2l0aAoJCQkJCQkJKQoJCQkJCQkpOwoKCQkJCQkJLy8gZnVsZmlsbGVkX2hhbmRsZXJzLmFkZCggLi4uICkKCQkJCQkJdHVwbGVzWyAxIF1bIDMgXS5hZGQoCgkJCQkJCQlyZXNvbHZlKAoJCQkJCQkJCTAsCgkJCQkJCQkJbmV3RGVmZXIsCgkJCQkJCQkJalF1ZXJ5LmlzRnVuY3Rpb24oIG9uRnVsZmlsbGVkICkgPwoJCQkJCQkJCQlvbkZ1bGZpbGxlZCA6CgkJCQkJCQkJCUlkZW50aXR5CgkJCQkJCQkpCgkJCQkJCSk7CgoJCQkJCQkvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApCgkJCQkJCXR1cGxlc1sgMiBdWyAzIF0uYWRkKAoJCQkJCQkJcmVzb2x2ZSgKCQkJCQkJCQkwLAoJCQkJCQkJCW5ld0RlZmVyLAoJCQkJCQkJCWpRdWVyeS5pc0Z1bmN0aW9uKCBvblJlamVjdGVkICkgPwoJCQkJCQkJCQlvblJlamVjdGVkIDoKCQkJCQkJCQkJVGhyb3dlcgoJCQkJCQkJKQoJCQkJCQkpOwoJCQkJCX0gKS5wcm9taXNlKCk7CgkJCQl9LAoKCQkJCS8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWQKCQkJCS8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3QKCQkJCXByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7CgkJCQkJcmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlOwoJCQkJfQoJCQl9LAoJCQlkZWZlcnJlZCA9IHt9OwoKCQkvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzCgkJalF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkgewoJCQl2YXIgbGlzdCA9IHR1cGxlWyAyIF0sCgkJCQlzdGF0ZVN0cmluZyA9IHR1cGxlWyA1IF07CgoJCQkvLyBwcm9taXNlLnByb2dyZXNzID0gbGlzdC5hZGQKCQkJLy8gcHJvbWlzZS5kb25lID0gbGlzdC5hZGQKCQkJLy8gcHJvbWlzZS5mYWlsID0gbGlzdC5hZGQKCQkJcHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7CgoJCQkvLyBIYW5kbGUgc3RhdGUKCQkJaWYgKCBzdGF0ZVN0cmluZyApIHsKCQkJCWxpc3QuYWRkKAoJCQkJCWZ1bmN0aW9uKCkgewoKCQkJCQkJLy8gc3RhdGUgPSAicmVzb2x2ZWQiIChpLmUuLCBmdWxmaWxsZWQpCgkJCQkJCS8vIHN0YXRlID0gInJlamVjdGVkIgoJCQkJCQlzdGF0ZSA9IHN0YXRlU3RyaW5nOwoJCQkJCX0sCgoJCQkJCS8vIHJlamVjdGVkX2NhbGxiYWNrcy5kaXNhYmxlCgkJCQkJLy8gZnVsZmlsbGVkX2NhbGxiYWNrcy5kaXNhYmxlCgkJCQkJdHVwbGVzWyAzIC0gaSBdWyAyIF0uZGlzYWJsZSwKCgkJCQkJLy8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2sKCQkJCQl0dXBsZXNbIDAgXVsgMiBdLmxvY2sKCQkJCSk7CgkJCX0KCgkJCS8vIHByb2dyZXNzX2hhbmRsZXJzLmZpcmUKCQkJLy8gZnVsZmlsbGVkX2hhbmRsZXJzLmZpcmUKCQkJLy8gcmVqZWN0ZWRfaGFuZGxlcnMuZmlyZQoJCQlsaXN0LmFkZCggdHVwbGVbIDMgXS5maXJlICk7CgoJCQkvLyBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQubm90aWZ5V2l0aCguLi4pIH0KCQkJLy8gZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZXNvbHZlV2l0aCguLi4pIH0KCQkJLy8gZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlamVjdFdpdGgoLi4uKSB9CgkJCWRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHsKCQkJCWRlZmVycmVkWyB0dXBsZVsgMCBdICsgIldpdGgiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gdW5kZWZpbmVkIDogdGhpcywgYXJndW1lbnRzICk7CgkJCQlyZXR1cm4gdGhpczsKCQkJfTsKCgkJCS8vIGRlZmVycmVkLm5vdGlmeVdpdGggPSBsaXN0LmZpcmVXaXRoCgkJCS8vIGRlZmVycmVkLnJlc29sdmVXaXRoID0gbGlzdC5maXJlV2l0aAoJCQkvLyBkZWZlcnJlZC5yZWplY3RXaXRoID0gbGlzdC5maXJlV2l0aAoJCQlkZWZlcnJlZFsgdHVwbGVbIDAgXSArICJXaXRoIiBdID0gbGlzdC5maXJlV2l0aDsKCQl9ICk7CgoJCS8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZQoJCXByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTsKCgkJLy8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueQoJCWlmICggZnVuYyApIHsKCQkJZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTsKCQl9CgoJCS8vIEFsbCBkb25lIQoJCXJldHVybiBkZWZlcnJlZDsKCX0sCgoJLy8gRGVmZXJyZWQgaGVscGVyCgl3aGVuOiBmdW5jdGlvbiggc2luZ2xlVmFsdWUgKSB7CgkJdmFyCgoJCQkvLyBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXMKCQkJcmVtYWluaW5nID0gYXJndW1lbnRzLmxlbmd0aCwKCgkJCS8vIGNvdW50IG9mIHVucHJvY2Vzc2VkIGFyZ3VtZW50cwoJCQlpID0gcmVtYWluaW5nLAoKCQkJLy8gc3Vib3JkaW5hdGUgZnVsZmlsbG1lbnQgZGF0YQoJCQlyZXNvbHZlQ29udGV4dHMgPSBBcnJheSggaSApLAoJCQlyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksCgoJCQkvLyB0aGUgbWFzdGVyIERlZmVycmVkCgkJCW1hc3RlciA9IGpRdWVyeS5EZWZlcnJlZCgpLAoKCQkJLy8gc3Vib3JkaW5hdGUgY2FsbGJhY2sgZmFjdG9yeQoJCQl1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGkgKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJCXJlc29sdmVDb250ZXh0c1sgaSBdID0gdGhpczsKCQkJCQlyZXNvbHZlVmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7CgkJCQkJaWYgKCAhKCAtLXJlbWFpbmluZyApICkgewoJCQkJCQltYXN0ZXIucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApOwoJCQkJCX0KCQkJCX07CgkJCX07CgoJCS8vIFNpbmdsZS0gYW5kIGVtcHR5IGFyZ3VtZW50cyBhcmUgYWRvcHRlZCBsaWtlIFByb21pc2UucmVzb2x2ZQoJCWlmICggcmVtYWluaW5nIDw9IDEgKSB7CgkJCWFkb3B0VmFsdWUoIHNpbmdsZVZhbHVlLCBtYXN0ZXIuZG9uZSggdXBkYXRlRnVuYyggaSApICkucmVzb2x2ZSwgbWFzdGVyLnJlamVjdCApOwoKCQkJLy8gVXNlIC50aGVuKCkgdG8gdW53cmFwIHNlY29uZGFyeSB0aGVuYWJsZXMgKGNmLiBnaC0zMDAwKQoJCQlpZiAoIG1hc3Rlci5zdGF0ZSgpID09PSAicGVuZGluZyIgfHwKCQkJCWpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgcmVzb2x2ZVZhbHVlc1sgaSBdLnRoZW4gKSApIHsKCgkJCQlyZXR1cm4gbWFzdGVyLnRoZW4oKTsKCQkJfQoJCX0KCgkJLy8gTXVsdGlwbGUgYXJndW1lbnRzIGFyZSBhZ2dyZWdhdGVkIGxpa2UgUHJvbWlzZS5hbGwgYXJyYXkgZWxlbWVudHMKCQl3aGlsZSAoIGktLSApIHsKCQkJYWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTsKCQl9CgoJCXJldHVybiBtYXN0ZXIucHJvbWlzZSgpOwoJfQp9ICk7CgoKLy8gVGhlc2UgdXN1YWxseSBpbmRpY2F0ZSBhIHByb2dyYW1tZXIgbWlzdGFrZSBkdXJpbmcgZGV2ZWxvcG1lbnQsCi8vIHdhcm4gYWJvdXQgdGhlbSBBU0FQIHJhdGhlciB0aGFuIHN3YWxsb3dpbmcgdGhlbSBieSBkZWZhdWx0Lgp2YXIgcmVycm9yTmFtZXMgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLzsKCmpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rID0gZnVuY3Rpb24oIGVycm9yLCBzdGFjayApIHsKCgkvLyBTdXBwb3J0OiBJRSA4IC0gOSBvbmx5CgkvLyBDb25zb2xlIGV4aXN0cyB3aGVuIGRldiB0b29scyBhcmUgb3Blbiwgd2hpY2ggY2FuIGhhcHBlbiBhdCBhbnkgdGltZQoJaWYgKCB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS53YXJuICYmIGVycm9yICYmIHJlcnJvck5hbWVzLnRlc3QoIGVycm9yLm5hbWUgKSApIHsKCQl3aW5kb3cuY29uc29sZS53YXJuKCAialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIiArIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrLCBzdGFjayApOwoJfQp9OwoKCgoKalF1ZXJ5LnJlYWR5RXhjZXB0aW9uID0gZnVuY3Rpb24oIGVycm9yICkgewoJd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewoJCXRocm93IGVycm9yOwoJfSApOwp9OwoKCgoKLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5CnZhciByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTsKCmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHsKCglyZWFkeUxpc3QKCQkudGhlbiggZm4gKQoKCQkvLyBXcmFwIGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGxvb2t1cAoJCS8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFjawoJCS8vIHJlZ2lzdHJhdGlvbi4KCQkuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHsKCQkJalF1ZXJ5LnJlYWR5RXhjZXB0aW9uKCBlcnJvciApOwoJCX0gKTsKCglyZXR1cm4gdGhpczsKfTsKCmpRdWVyeS5leHRlbmQoIHsKCgkvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLgoJaXNSZWFkeTogZmFsc2UsCgoJLy8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZQoJLy8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODEKCXJlYWR5V2FpdDogMSwKCgkvLyBIb2xkIChvciByZWxlYXNlKSB0aGUgcmVhZHkgZXZlbnQKCWhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7CgkJaWYgKCBob2xkICkgewoJCQlqUXVlcnkucmVhZHlXYWl0Kys7CgkJfSBlbHNlIHsKCQkJalF1ZXJ5LnJlYWR5KCB0cnVlICk7CgkJfQoJfSwKCgkvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5CglyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7CgoJCS8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJ3JlIGFscmVhZHkgcmVhZHkKCQlpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5CgkJalF1ZXJ5LmlzUmVhZHkgPSB0cnVlOwoKCQkvLyBJZiBhIG5vcm1hbCBET00gUmVhZHkgZXZlbnQgZmlyZWQsIGRlY3JlbWVudCwgYW5kIHdhaXQgaWYgbmVlZCBiZQoJCWlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlCgkJcmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApOwoJfQp9ICk7CgpqUXVlcnkucmVhZHkudGhlbiA9IHJlYWR5TGlzdC50aGVuOwoKLy8gVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2QKZnVuY3Rpb24gY29tcGxldGVkKCkgewoJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggIkRPTUNvbnRlbnRMb2FkZWQiLCBjb21wbGV0ZWQgKTsKCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoJalF1ZXJ5LnJlYWR5KCk7Cn0KCi8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkCi8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLgovLyBTdXBwb3J0OiBJRSA8PTkgLSAxMCBvbmx5Ci8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzICJpbnRlcmFjdGl2ZSIgdG9vIHNvb24KaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiIHx8CgkoIGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICJsb2FkaW5nIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7CgoJLy8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5Cgl3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7Cgp9IGVsc2UgewoKCS8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2sKCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICJET01Db250ZW50TG9hZGVkIiwgY29tcGxldGVkICk7CgoJLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmsKCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwp9CgoKCgovLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb24KLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uCnZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7Cgl2YXIgaSA9IDAsCgkJbGVuID0gZWxlbXMubGVuZ3RoLAoJCWJ1bGsgPSBrZXkgPT0gbnVsbDsKCgkvLyBTZXRzIG1hbnkgdmFsdWVzCglpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gIm9iamVjdCIgKSB7CgkJY2hhaW5hYmxlID0gdHJ1ZTsKCQlmb3IgKCBpIGluIGtleSApIHsKCQkJYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7CgkJfQoKCS8vIFNldHMgb25lIHZhbHVlCgl9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCWNoYWluYWJsZSA9IHRydWU7CgoJCWlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQlyYXcgPSB0cnVlOwoJCX0KCgkJaWYgKCBidWxrICkgewoKCQkJLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0CgkJCWlmICggcmF3ICkgewoJCQkJZm4uY2FsbCggZWxlbXMsIHZhbHVlICk7CgkJCQlmbiA9IG51bGw7CgoJCQkvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzCgkJCX0gZWxzZSB7CgkJCQlidWxrID0gZm47CgkJCQlmbiA9IGZ1bmN0aW9uKCBlbGVtLCBrZXksIHZhbHVlICkgewoJCQkJCXJldHVybiBidWxrLmNhbGwoIGpRdWVyeSggZWxlbSApLCB2YWx1ZSApOwoJCQkJfTsKCQkJfQoJCX0KCgkJaWYgKCBmbiApIHsKCQkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCQlmbigKCQkJCQllbGVtc1sgaSBdLCBrZXksIHJhdyA/CgkJCQkJdmFsdWUgOgoJCQkJCXZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApCgkJCQkpOwoJCQl9CgkJfQoJfQoKCWlmICggY2hhaW5hYmxlICkgewoJCXJldHVybiBlbGVtczsKCX0KCgkvLyBHZXRzCglpZiAoIGJ1bGsgKSB7CgkJcmV0dXJuIGZuLmNhbGwoIGVsZW1zICk7Cgl9CgoJcmV0dXJuIGxlbiA/IGZuKCBlbGVtc1sgMCBdLCBrZXkgKSA6IGVtcHR5R2V0Owp9Owp2YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHsKCgkvLyBBY2NlcHRzIG9ubHk6CgkvLyAgLSBOb2RlCgkvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFCgkvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERQoJLy8gIC0gT2JqZWN0CgkvLyAgICAtIEFueQoJcmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApOwp9OwoKCgoKZnVuY3Rpb24gRGF0YSgpIHsKCXRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKzsKfQoKRGF0YS51aWQgPSAxOwoKRGF0YS5wcm90b3R5cGUgPSB7CgoJY2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHsKCgkJLy8gQ2hlY2sgaWYgdGhlIG93bmVyIG9iamVjdCBhbHJlYWR5IGhhcyBhIGNhY2hlCgkJdmFyIHZhbHVlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdOwoKCQkvLyBJZiBub3QsIGNyZWF0ZSBvbmUKCQlpZiAoICF2YWx1ZSApIHsKCQkJdmFsdWUgPSB7fTsKCgkJCS8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLAoJCQkvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LgoJCQkvLyBBbHdheXMgcmV0dXJuIGFuIGVtcHR5IG9iamVjdC4KCQkJaWYgKCBhY2NlcHREYXRhKCBvd25lciApICkgewoKCQkJCS8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXIKCQkJCS8vIHVzZSBwbGFpbiBhc3NpZ25tZW50CgkJCQlpZiAoIG93bmVyLm5vZGVUeXBlICkgewoJCQkJCW93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHZhbHVlOwoKCQkJCS8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eQoJCQkJLy8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmUKCQkJCS8vIGRlbGV0ZWQgd2hlbiBkYXRhIGlzIHJlbW92ZWQKCQkJCX0gZWxzZSB7CgkJCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KCBvd25lciwgdGhpcy5leHBhbmRvLCB7CgkJCQkJCXZhbHVlOiB2YWx1ZSwKCQkJCQkJY29uZmlndXJhYmxlOiB0cnVlCgkJCQkJfSApOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gdmFsdWU7Cgl9LAoJc2V0OiBmdW5jdGlvbiggb3duZXIsIGRhdGEsIHZhbHVlICkgewoJCXZhciBwcm9wLAoJCQljYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7CgoJCS8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3MKCQkvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpCgkJaWYgKCB0eXBlb2YgZGF0YSA9PT0gInN0cmluZyIgKSB7CgkJCWNhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlOwoKCQkvLyBIYW5kbGU6IFsgb3duZXIsIHsgcHJvcGVydGllcyB9IF0gYXJncwoJCX0gZWxzZSB7CgoJCQkvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdAoJCQlmb3IgKCBwcm9wIGluIGRhdGEgKSB7CgkJCQljYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggcHJvcCApIF0gPSBkYXRhWyBwcm9wIF07CgkJCX0KCQl9CgkJcmV0dXJuIGNhY2hlOwoJfSwKCWdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7CgkJcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID8KCQkJdGhpcy5jYWNoZSggb3duZXIgKSA6CgoJCQkvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpCgkJCW93bmVyWyB0aGlzLmV4cGFuZG8gXSAmJiBvd25lclsgdGhpcy5leHBhbmRvIF1bIGpRdWVyeS5jYW1lbENhc2UoIGtleSApIF07Cgl9LAoJYWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7CgoJCS8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjoKCQkvLwoJCS8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWQKCQkvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWQKCQkvLwoJCS8vIFRha2UgdGhlICJyZWFkIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmUKCQkvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6CgkJLy8KCQkvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0CgkJLy8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleQoJCS8vCgkJaWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fAoJCQkJKCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSAic3RyaW5nIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHsKCgkJCXJldHVybiB0aGlzLmdldCggb3duZXIsIGtleSApOwoJCX0KCgkJLy8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWUKCQkvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjoKCQkvLwoJCS8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXMKCQkvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZQoJCS8vCgkJdGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7CgoJCS8vIFNpbmNlIHRoZSAic2V0IiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHMKCQkvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl0KCQlyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5OwoJfSwKCXJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7CgkJdmFyIGksCgkJCWNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdOwoKCQlpZiAoIGNhY2hlID09PSB1bmRlZmluZWQgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICgga2V5ICE9PSB1bmRlZmluZWQgKSB7CgoJCQkvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5cwoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCBrZXkgKSApIHsKCgkJCQkvLyBJZiBrZXkgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLgoJCQkJLy8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuCgkJCQlrZXkgPSBrZXkubWFwKCBqUXVlcnkuY2FtZWxDYXNlICk7CgkJCX0gZWxzZSB7CgkJCQlrZXkgPSBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKTsKCgkJCQkvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuCgkJCQkvLyBPdGhlcndpc2UsIGNyZWF0ZSBhbiBhcnJheSBieSBtYXRjaGluZyBub24td2hpdGVzcGFjZQoJCQkJa2V5ID0ga2V5IGluIGNhY2hlID8KCQkJCQlbIGtleSBdIDoKCQkJCQkoIGtleS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdICk7CgkJCX0KCgkJCWkgPSBrZXkubGVuZ3RoOwoKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQlkZWxldGUgY2FjaGVbIGtleVsgaSBdIF07CgkJCX0KCQl9CgoJCS8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YQoJCWlmICgga2V5ID09PSB1bmRlZmluZWQgfHwgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7CgoJCQkvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1CgkJCS8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzCgkJCS8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWQKCQkJLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3IChidWcgcmVzdHJpY3RlZCkKCQkJaWYgKCBvd25lci5ub2RlVHlwZSApIHsKCQkJCW93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDsKCQkJfSBlbHNlIHsKCQkJCWRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07CgkJCX0KCQl9Cgl9LAoJaGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkgewoJCXZhciBjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTsKCQlyZXR1cm4gY2FjaGUgIT09IHVuZGVmaW5lZCAmJiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICk7Cgl9Cn07CnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7Cgp2YXIgZGF0YVVzZXIgPSBuZXcgRGF0YSgpOwoKCgovLwlJbXBsZW1lbnRhdGlvbiBTdW1tYXJ5Ci8vCi8vCTEuIEVuZm9yY2UgQVBJIHN1cmZhY2UgYW5kIHNlbWFudGljIGNvbXBhdGliaWxpdHkgd2l0aCAxLjkueCBicmFuY2gKLy8JMi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlCi8vCQlwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uCi8vCTMuIFVzZSB0aGUgc2FtZSBzaW5nbGUgbWVjaGFuaXNtIHRvIHN1cHBvcnQgInByaXZhdGUiIGFuZCAidXNlciIgZGF0YS4KLy8JNC4gX05ldmVyXyBleHBvc2UgInByaXZhdGUiIGRhdGEgdG8gdXNlciBjb2RlIChUT0RPOiBEcm9wIF9kYXRhLCBfcmVtb3ZlRGF0YSkKLy8JNS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpCi8vCTYuIFByb3ZpZGUgYSBjbGVhciBwYXRoIGZvciBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlIHRvIFdlYWtNYXAgaW4gMjAxNAoKdmFyIHJicmFjZSA9IC9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sCglybXVsdGlEYXNoID0gL1tBLVpdL2c7CgpmdW5jdGlvbiBnZXREYXRhKCBkYXRhICkgewoJaWYgKCBkYXRhID09PSAidHJ1ZSIgKSB7CgkJcmV0dXJuIHRydWU7Cgl9CgoJaWYgKCBkYXRhID09PSAiZmFsc2UiICkgewoJCXJldHVybiBmYWxzZTsKCX0KCglpZiAoIGRhdGEgPT09ICJudWxsIiApIHsKCQlyZXR1cm4gbnVsbDsKCX0KCgkvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZwoJaWYgKCBkYXRhID09PSArZGF0YSArICIiICkgewoJCXJldHVybiArZGF0YTsKCX0KCglpZiAoIHJicmFjZS50ZXN0KCBkYXRhICkgKSB7CgkJcmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKTsKCX0KCglyZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHsKCXZhciBuYW1lOwoKCS8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnkKCS8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZQoJaWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQluYW1lID0gImRhdGEtIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCAiLSQmIiApLnRvTG93ZXJDYXNlKCk7CgkJZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7CgoJCWlmICggdHlwZW9mIGRhdGEgPT09ICJzdHJpbmciICkgewoJCQl0cnkgewoJCQkJZGF0YSA9IGdldERhdGEoIGRhdGEgKTsKCQkJfSBjYXRjaCAoIGUgKSB7fQoKCQkJLy8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyCgkJCWRhdGFVc2VyLnNldCggZWxlbSwga2V5LCBkYXRhICk7CgkJfSBlbHNlIHsKCQkJZGF0YSA9IHVuZGVmaW5lZDsKCQl9Cgl9CglyZXR1cm4gZGF0YTsKfQoKalF1ZXJ5LmV4dGVuZCggewoJaGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGRhdGFVc2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICk7Cgl9LAoKCWRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkgewoJCXJldHVybiBkYXRhVXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTsKCX0sCgoJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7Cgl9LAoKCS8vIFRPRE86IE5vdyB0aGF0IGFsbCBjYWxscyB0byBfZGF0YSBhbmQgX3JlbW92ZURhdGEgaGF2ZSBiZWVuIHJlcGxhY2VkCgkvLyB3aXRoIGRpcmVjdCBjYWxscyB0byBkYXRhUHJpdiBtZXRob2RzLCB0aGVzZSBjYW4gYmUgZGVwcmVjYXRlZC4KCV9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHsKCQlyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7Cgl9LAoKCV9yZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQlkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTsKCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdmFyIGksIG5hbWUsIGRhdGEsCgkJCWVsZW0gPSB0aGlzWyAwIF0sCgkJCWF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7CgoJCS8vIEdldHMgYWxsIHZhbHVlcwoJCWlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7CgkJCWlmICggdGhpcy5sZW5ndGggKSB7CgkJCQlkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7CgoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sICJoYXNEYXRhQXR0cnMiICkgKSB7CgkJCQkJaSA9IGF0dHJzLmxlbmd0aDsKCQkJCQl3aGlsZSAoIGktLSApIHsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFIDExIG9ubHkKCQkJCQkJLy8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpCgkJCQkJCWlmICggYXR0cnNbIGkgXSApIHsKCQkJCQkJCW5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7CgkJCQkJCQlpZiAoIG5hbWUuaW5kZXhPZiggImRhdGEtIiApID09PSAwICkgewoJCQkJCQkJCW5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lLnNsaWNlKCA1ICkgKTsKCQkJCQkJCQlkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJZGF0YVByaXYuc2V0KCBlbGVtLCAiaGFzRGF0YUF0dHJzIiwgdHJ1ZSApOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gZGF0YTsKCQl9CgoJCS8vIFNldHMgbXVsdGlwbGUgdmFsdWVzCgkJaWYgKCB0eXBlb2Yga2V5ID09PSAib2JqZWN0IiApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApOwoJCQl9ICk7CgkJfQoKCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBkYXRhOwoKCQkJLy8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHkKCQkJLy8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGUKCQkJLy8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3QKCQkJLy8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbAoJCQkvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLgoJCQlpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHsKCgkJCQkvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlCgkJCQkvLyBUaGUga2V5IHdpbGwgYWx3YXlzIGJlIGNhbWVsQ2FzZWQgaW4gRGF0YQoJCQkJZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSwga2V5ICk7CgkJCQlpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm4gZGF0YTsKCQkJCX0KCgkJCQkvLyBBdHRlbXB0IHRvICJkaXNjb3ZlciIgdGhlIGRhdGEgaW4KCQkJCS8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnMKCQkJCWRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7CgkJCQlpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm4gZGF0YTsKCQkJCX0KCgkJCQkvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuCgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIFNldCB0aGUgZGF0YS4uLgoJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoKCQkJCS8vIFdlIGFsd2F5cyBzdG9yZSB0aGUgY2FtZWxDYXNlZCBrZXkKCQkJCWRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApOwoJCQl9ICk7CgkJfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7Cgl9LAoKCXJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7CgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7CgkJfSApOwoJfQp9ICk7CgoKalF1ZXJ5LmV4dGVuZCggewoJcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkgewoJCXZhciBxdWV1ZTsKCgkJaWYgKCBlbGVtICkgewoJCQl0eXBlID0gKCB0eXBlIHx8ICJmeCIgKSArICJxdWV1ZSI7CgkJCXF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7CgoJCQkvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwCgkJCWlmICggZGF0YSApIHsKCQkJCWlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7CgkJCQkJcXVldWUgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEgKSApOwoJCQkJfSBlbHNlIHsKCQkJCQlxdWV1ZS5wdXNoKCBkYXRhICk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHF1ZXVlIHx8IFtdOwoJCX0KCX0sCgoJZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7CgkJdHlwZSA9IHR5cGUgfHwgImZ4IjsKCgkJdmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksCgkJCXN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLAoJCQlmbiA9IHF1ZXVlLnNoaWZ0KCksCgkJCWhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksCgkJCW5leHQgPSBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7CgkJCX07CgoJCS8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWwKCQlpZiAoIGZuID09PSAiaW5wcm9ncmVzcyIgKSB7CgkJCWZuID0gcXVldWUuc2hpZnQoKTsKCQkJc3RhcnRMZW5ndGgtLTsKCQl9CgoJCWlmICggZm4gKSB7CgoJCQkvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nCgkJCS8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWQKCQkJaWYgKCB0eXBlID09PSAiZngiICkgewoJCQkJcXVldWUudW5zaGlmdCggImlucHJvZ3Jlc3MiICk7CgkJCX0KCgkJCS8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb24KCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCWZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7CgkJfQoKCQlpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHsKCQkJaG9va3MuZW1wdHkuZmlyZSgpOwoJCX0KCX0sCgoJLy8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmUKCV9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHsKCQl2YXIga2V5ID0gdHlwZSArICJxdWV1ZUhvb2tzIjsKCQlyZXR1cm4gZGF0YVByaXYuZ2V0KCBlbGVtLCBrZXkgKSB8fCBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIGtleSwgewoJCQllbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLmFkZCggZnVuY3Rpb24oKSB7CgkJCQlkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArICJxdWV1ZSIsIGtleSBdICk7CgkJCX0gKQoJCX0gKTsKCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJcXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkgewoJCXZhciBzZXR0ZXIgPSAyOwoKCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJZGF0YSA9IHR5cGU7CgkJCXR5cGUgPSAiZngiOwoJCQlzZXR0ZXItLTsKCQl9CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHsKCQkJcmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7CgkJfQoKCQlyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8KCQkJdGhpcyA6CgkJCXRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIGRhdGEgKTsKCgkJCQkvLyBFbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZQoJCQkJalF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7CgoJCQkJaWYgKCB0eXBlID09PSAiZngiICYmIHF1ZXVlWyAwIF0gIT09ICJpbnByb2dyZXNzIiApIHsKCQkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQkJfQoJCQl9ICk7Cgl9LAoJZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7CgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJfSApOwoJfSwKCWNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCXJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8ICJmeCIsIFtdICk7Cgl9LAoKCS8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGUKCS8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KQoJcHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHsKCQl2YXIgdG1wLAoJCQljb3VudCA9IDEsCgkJCWRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksCgkJCWVsZW1lbnRzID0gdGhpcywKCQkJaSA9IHRoaXMubGVuZ3RoLAoJCQlyZXNvbHZlID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoICEoIC0tY291bnQgKSApIHsKCQkJCQlkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApOwoJCQkJfQoJCQl9OwoKCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJb2JqID0gdHlwZTsKCQkJdHlwZSA9IHVuZGVmaW5lZDsKCQl9CgkJdHlwZSA9IHR5cGUgfHwgImZ4IjsKCgkJd2hpbGUgKCBpLS0gKSB7CgkJCXRtcCA9IGRhdGFQcml2LmdldCggZWxlbWVudHNbIGkgXSwgdHlwZSArICJxdWV1ZUhvb2tzIiApOwoJCQlpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7CgkJCQljb3VudCsrOwoJCQkJdG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApOwoJCQl9CgkJfQoJCXJlc29sdmUoKTsKCQlyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7Cgl9Cn0gKTsKdmFyIHBudW0gPSAoIC9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8gKS5zb3VyY2U7Cgp2YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoICJeKD86KFsrLV0pPXwpKCIgKyBwbnVtICsgIikoW2EteiVdKikkIiwgImkiICk7CgoKdmFyIGNzc0V4cGFuZCA9IFsgIlRvcCIsICJSaWdodCIsICJCb3R0b20iLCAiTGVmdCIgXTsKCnZhciBpc0hpZGRlbldpdGhpblRyZWUgPSBmdW5jdGlvbiggZWxlbSwgZWwgKSB7CgoJCS8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uOwoJCS8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudAoJCWVsZW0gPSBlbCB8fCBlbGVtOwoKCQkvLyBJbmxpbmUgc3R5bGUgdHJ1bXBzIGFsbAoJCXJldHVybiBlbGVtLnN0eWxlLmRpc3BsYXkgPT09ICJub25lIiB8fAoJCQllbGVtLnN0eWxlLmRpc3BsYXkgPT09ICIiICYmCgoJCQkvLyBPdGhlcndpc2UsIGNoZWNrIGNvbXB1dGVkIHN0eWxlCgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1CgkJCS8vIERpc2Nvbm5lY3RlZCBlbGVtZW50cyBjYW4gaGF2ZSBjb21wdXRlZCBkaXNwbGF5OiBub25lLCBzbyBmaXJzdCBjb25maXJtIHRoYXQgZWxlbSBpcwoJCQkvLyBpbiB0aGUgZG9jdW1lbnQuCgkJCWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgJiYKCgkJCWpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApID09PSAibm9uZSI7Cgl9OwoKdmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7Cgl2YXIgcmV0LCBuYW1lLAoJCW9sZCA9IHt9OwoKCS8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lcwoJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCW9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdOwoJCWVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTsKCX0KCglyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApOwoKCS8vIFJldmVydCB0aGUgb2xkIHZhbHVlcwoJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCWVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdOwoJfQoKCXJldHVybiByZXQ7Cn07CgoKCgpmdW5jdGlvbiBhZGp1c3RDU1MoIGVsZW0sIHByb3AsIHZhbHVlUGFydHMsIHR3ZWVuICkgewoJdmFyIGFkanVzdGVkLAoJCXNjYWxlID0gMSwKCQltYXhJdGVyYXRpb25zID0gMjAsCgkJY3VycmVudFZhbHVlID0gdHdlZW4gPwoJCQlmdW5jdGlvbigpIHsKCQkJCXJldHVybiB0d2Vlbi5jdXIoKTsKCQkJfSA6CgkJCWZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsICIiICk7CgkJCX0sCgkJaW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLAoJCXVuaXQgPSB2YWx1ZVBhcnRzICYmIHZhbHVlUGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/ICIiIDogInB4IiApLAoKCQkvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlcwoJCWluaXRpYWxJblVuaXQgPSAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSB8fCB1bml0ICE9PSAicHgiICYmICtpbml0aWFsICkgJiYKCQkJcmNzc051bS5leGVjKCBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wICkgKTsKCglpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkgewoKCQkvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzCgkJdW5pdCA9IHVuaXQgfHwgaW5pdGlhbEluVW5pdFsgMyBdOwoKCQkvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uCgkJdmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107CgoJCS8vIEl0ZXJhdGl2ZWx5IGFwcHJveGltYXRlIGZyb20gYSBub256ZXJvIHN0YXJ0aW5nIHBvaW50CgkJaW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7CgoJCWRvIHsKCgkJCS8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLgoJCQkvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvdwoJCQlzY2FsZSA9IHNjYWxlIHx8ICIuNSI7CgoJCQkvLyBBZGp1c3QgYW5kIGFwcGx5CgkJCWluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7CgkJCWpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTsKCgkJLy8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCkKCQkvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLgoJCX0gd2hpbGUgKAoJCQlzY2FsZSAhPT0gKCBzY2FsZSA9IGN1cnJlbnRWYWx1ZSgpIC8gaW5pdGlhbCApICYmIHNjYWxlICE9PSAxICYmIC0tbWF4SXRlcmF0aW9ucwoJCSk7Cgl9CgoJaWYgKCB2YWx1ZVBhcnRzICkgewoJCWluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwOwoKCQkvLyBBcHBseSByZWxhdGl2ZSBvZmZzZXQgKCs9Ly09KSBpZiBzcGVjaWZpZWQKCQlhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/CgkJCWluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6CgkJCSt2YWx1ZVBhcnRzWyAyIF07CgkJaWYgKCB0d2VlbiApIHsKCQkJdHdlZW4udW5pdCA9IHVuaXQ7CgkJCXR3ZWVuLnN0YXJ0ID0gaW5pdGlhbEluVW5pdDsKCQkJdHdlZW4uZW5kID0gYWRqdXN0ZWQ7CgkJfQoJfQoJcmV0dXJuIGFkanVzdGVkOwp9CgoKdmFyIGRlZmF1bHREaXNwbGF5TWFwID0ge307CgpmdW5jdGlvbiBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApIHsKCXZhciB0ZW1wLAoJCWRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCwKCQlub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUsCgkJZGlzcGxheSA9IGRlZmF1bHREaXNwbGF5TWFwWyBub2RlTmFtZSBdOwoKCWlmICggZGlzcGxheSApIHsKCQlyZXR1cm4gZGlzcGxheTsKCX0KCgl0ZW1wID0gZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVFbGVtZW50KCBub2RlTmFtZSApICk7CglkaXNwbGF5ID0galF1ZXJ5LmNzcyggdGVtcCwgImRpc3BsYXkiICk7CgoJdGVtcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0ZW1wICk7CgoJaWYgKCBkaXNwbGF5ID09PSAibm9uZSIgKSB7CgkJZGlzcGxheSA9ICJibG9jayI7Cgl9CglkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7CgoJcmV0dXJuIGRpc3BsYXk7Cn0KCmZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHsKCXZhciBkaXNwbGF5LCBlbGVtLAoJCXZhbHVlcyA9IFtdLAoJCWluZGV4ID0gMCwKCQlsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7CgoJLy8gRGV0ZXJtaW5lIG5ldyBkaXNwbGF5IHZhbHVlIGZvciBlbGVtZW50cyB0aGF0IG5lZWQgdG8gY2hhbmdlCglmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCWVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTsKCQlpZiAoICFlbGVtLnN0eWxlICkgewoJCQljb250aW51ZTsKCQl9CgoJCWRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7CgkJaWYgKCBzaG93ICkgewoKCQkJLy8gU2luY2Ugd2UgZm9yY2UgdmlzaWJpbGl0eSB1cG9uIGNhc2NhZGUtaGlkZGVuIGVsZW1lbnRzLCBhbiBpbW1lZGlhdGUgKGFuZCBzbG93KQoJCQkvLyBjaGVjayBpcyByZXF1aXJlZCBpbiB0aGlzIGZpcnN0IGxvb3AgdW5sZXNzIHdlIGhhdmUgYSBub25lbXB0eSBkaXNwbGF5IHZhbHVlIChlaXRoZXIKCQkJLy8gaW5saW5lIG9yIGFib3V0LXRvLWJlLXJlc3RvcmVkKQoJCQlpZiAoIGRpc3BsYXkgPT09ICJub25lIiApIHsKCQkJCXZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgImRpc3BsYXkiICkgfHwgbnVsbDsKCQkJCWlmICggIXZhbHVlc1sgaW5kZXggXSApIHsKCQkJCQllbGVtLnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJCX0KCQkJfQoJCQlpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gIiIgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICkgKSB7CgkJCQl2YWx1ZXNbIGluZGV4IF0gPSBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApOwoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCBkaXNwbGF5ICE9PSAibm9uZSIgKSB7CgkJCQl2YWx1ZXNbIGluZGV4IF0gPSAibm9uZSI7CgoJCQkJLy8gUmVtZW1iZXIgd2hhdCB3ZSdyZSBvdmVyd3JpdGluZwoJCQkJZGF0YVByaXYuc2V0KCBlbGVtLCAiZGlzcGxheSIsIGRpc3BsYXkgKTsKCQkJfQoJCX0KCX0KCgkvLyBTZXQgdGhlIGRpc3BsYXkgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AgdG8gYXZvaWQgY29uc3RhbnQgcmVmbG93Cglmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCWlmICggdmFsdWVzWyBpbmRleCBdICE9IG51bGwgKSB7CgkJCWVsZW1lbnRzWyBpbmRleCBdLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZXNbIGluZGV4IF07CgkJfQoJfQoKCXJldHVybiBlbGVtZW50czsKfQoKalF1ZXJ5LmZuLmV4dGVuZCggewoJc2hvdzogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7Cgl9LAoJaGlkZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHNob3dIaWRlKCB0aGlzICk7Cgl9LAoJdG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7CgkJaWYgKCB0eXBlb2Ygc3RhdGUgPT09ICJib29sZWFuIiApIHsKCQkJcmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTsKCQl9CgoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlpZiAoIGlzSGlkZGVuV2l0aGluVHJlZSggdGhpcyApICkgewoJCQkJalF1ZXJ5KCB0aGlzICkuc2hvdygpOwoJCQl9IGVsc2UgewoJCQkJalF1ZXJ5KCB0aGlzICkuaGlkZSgpOwoJCQl9CgkJfSApOwoJfQp9ICk7CnZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTsKCnZhciBydGFnTmFtZSA9ICggLzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSspL2kgKTsKCnZhciByc2NyaXB0VHlwZSA9ICggL14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7CgoKCi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApCnZhciB3cmFwTWFwID0gewoKCS8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5CglvcHRpb246IFsgMSwgIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCAiPC9zZWxlY3Q+IiBdLAoKCS8vIFhIVE1MIHBhcnNlcnMgZG8gbm90IG1hZ2ljYWxseSBpbnNlcnQgZWxlbWVudHMgaW4gdGhlCgkvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuCgkvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuCgl0aGVhZDogWyAxLCAiPHRhYmxlPiIsICI8L3RhYmxlPiIgXSwKCWNvbDogWyAyLCAiPHRhYmxlPjxjb2xncm91cD4iLCAiPC9jb2xncm91cD48L3RhYmxlPiIgXSwKCXRyOiBbIDIsICI8dGFibGU+PHRib2R5PiIsICI8L3Rib2R5PjwvdGFibGU+IiBdLAoJdGQ6IFsgMywgIjx0YWJsZT48dGJvZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCgoJX2RlZmF1bHQ6IFsgMCwgIiIsICIiIF0KfTsKCi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5CndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjsKCndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7CndyYXBNYXAudGggPSB3cmFwTWFwLnRkOwoKCmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkgewoKCS8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHkKCS8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSkKCXZhciByZXQ7CgoJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJcmV0ID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8ICIqIiApOwoKCX0gZWxzZSBpZiAoIHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09ICJ1bmRlZmluZWQiICkgewoJCXJldCA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8ICIqIiApOwoKCX0gZWxzZSB7CgkJcmV0ID0gW107Cgl9CgoJaWYgKCB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSApIHsKCQlyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICk7Cgl9CgoJcmV0dXJuIHJldDsKfQoKCi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZApmdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7Cgl2YXIgaSA9IDAsCgkJbCA9IGVsZW1zLmxlbmd0aDsKCglmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJZGF0YVByaXYuc2V0KAoJCQllbGVtc1sgaSBdLAoJCQkiZ2xvYmFsRXZhbCIsCgkJCSFyZWZFbGVtZW50cyB8fCBkYXRhUHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sICJnbG9iYWxFdmFsIiApCgkJKTsKCX0KfQoKCnZhciByaHRtbCA9IC88fCYjP1x3KzsvOwoKZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHsKCXZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosCgkJZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwKCQlub2RlcyA9IFtdLAoJCWkgPSAwLAoJCWwgPSBlbGVtcy5sZW5ndGg7CgoJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCWVsZW0gPSBlbGVtc1sgaSBdOwoKCQlpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHsKCgkJCS8vIEFkZCBub2RlcyBkaXJlY3RseQoJCQlpZiAoIGpRdWVyeS50eXBlKCBlbGVtICkgPT09ICJvYmplY3QiICkgewoKCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seQoJCQkJLy8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdAoJCQkJalF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApOwoKCQkJLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlCgkJCX0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7CgkJCQlub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTsKCgkJCS8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2RlcwoJCQl9IGVsc2UgewoJCQkJdG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoICJkaXYiICkgKTsKCgkJCQkvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uCgkJCQl0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbICIiLCAiIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpOwoJCQkJd3JhcCA9IHdyYXBNYXBbIHRhZyBdIHx8IHdyYXBNYXAuX2RlZmF1bHQ7CgkJCQl0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTsKCgkJCQkvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnQKCQkJCWogPSB3cmFwWyAwIF07CgkJCQl3aGlsZSAoIGotLSApIHsKCQkJCQl0bXAgPSB0bXAubGFzdENoaWxkOwoJCQkJfQoKCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seQoJCQkJLy8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdAoJCQkJalF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTsKCgkJCQkvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lcgoJCQkJdG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDsKCgkJCQkvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpCgkJCQl0bXAudGV4dENvbnRlbnQgPSAiIjsKCQkJfQoJCX0KCX0KCgkvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50CglmcmFnbWVudC50ZXh0Q29udGVudCA9ICIiOwoKCWkgPSAwOwoJd2hpbGUgKCAoIGVsZW0gPSBub2Rlc1sgaSsrIF0gKSApIHsKCgkJLy8gU2tpcCBlbGVtZW50cyBhbHJlYWR5IGluIHRoZSBjb250ZXh0IGNvbGxlY3Rpb24gKHRyYWMtNDA4NykKCQlpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgPiAtMSApIHsKCQkJaWYgKCBpZ25vcmVkICkgewoJCQkJaWdub3JlZC5wdXNoKCBlbGVtICk7CgkJCX0KCQkJY29udGludWU7CgkJfQoKCQljb250YWlucyA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7CgoJCS8vIEFwcGVuZCB0byBmcmFnbWVudAoJCXRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgInNjcmlwdCIgKTsKCgkJLy8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeQoJCWlmICggY29udGFpbnMgKSB7CgkJCXNldEdsb2JhbEV2YWwoIHRtcCApOwoJCX0KCgkJLy8gQ2FwdHVyZSBleGVjdXRhYmxlcwoJCWlmICggc2NyaXB0cyApIHsKCQkJaiA9IDA7CgkJCXdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkgewoJCQkJaWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgIiIgKSApIHsKCQkJCQlzY3JpcHRzLnB1c2goIGVsZW0gKTsKCQkJCX0KCQkJfQoJCX0KCX0KCglyZXR1cm4gZnJhZ21lbnQ7Cn0KCgooIGZ1bmN0aW9uKCkgewoJdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLAoJCWRpdiA9IGZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApICksCgkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgoJLy8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seQoJLy8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNykKCS8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSkKCS8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKQoJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJyYWRpbyIgKTsKCWlucHV0LnNldEF0dHJpYnV0ZSggImNoZWNrZWQiLCAiY2hlY2tlZCIgKTsKCWlucHV0LnNldEF0dHJpYnV0ZSggIm5hbWUiLCAidCIgKTsKCglkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7CgoJLy8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMSBvbmx5CgkvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHMKCXN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDsKCgkvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHkKCS8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkCglkaXYuaW5uZXJIVE1MID0gIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iOwoJc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7Cn0gKSgpOwp2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCgp2YXIKCXJrZXlFdmVudCA9IC9ea2V5LywKCXJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLAoJcnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcLiguKyl8KS87CgpmdW5jdGlvbiByZXR1cm5UcnVlKCkgewoJcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIHJldHVybkZhbHNlKCkgewoJcmV0dXJuIGZhbHNlOwp9CgovLyBTdXBwb3J0OiBJRSA8PTkgb25seQovLyBTZWUgIzEzMzkzIGZvciBtb3JlIGluZm8KZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7Cgl0cnkgewoJCXJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoJfSBjYXRjaCAoIGVyciApIHsgfQp9CgpmdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkgewoJdmFyIG9yaWdGbiwgdHlwZTsKCgkvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnMKCWlmICggdHlwZW9mIHR5cGVzID09PSAib2JqZWN0IiApIHsKCgkJLy8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhICkKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgoJCQkvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApCgkJCWRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yOwoJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQl9CgkJZm9yICggdHlwZSBpbiB0eXBlcyApIHsKCQkJb24oIGVsZW0sIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTsKCQl9CgkJcmV0dXJuIGVsZW07Cgl9CgoJaWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHsKCgkJLy8gKCB0eXBlcywgZm4gKQoJCWZuID0gc2VsZWN0b3I7CgkJZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkOwoJfSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHsKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgKSB7CgoJCQkvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKQoJCQlmbiA9IGRhdGE7CgkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJfSBlbHNlIHsKCgkJCS8vICggdHlwZXMsIGRhdGEsIGZuICkKCQkJZm4gPSBkYXRhOwoJCQlkYXRhID0gc2VsZWN0b3I7CgkJCXNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCX0KCX0KCWlmICggZm4gPT09IGZhbHNlICkgewoJCWZuID0gcmV0dXJuRmFsc2U7Cgl9IGVsc2UgaWYgKCAhZm4gKSB7CgkJcmV0dXJuIGVsZW07Cgl9CgoJaWYgKCBvbmUgPT09IDEgKSB7CgkJb3JpZ0ZuID0gZm47CgkJZm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm8KCQkJalF1ZXJ5KCkub2ZmKCBldmVudCApOwoJCQlyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9OwoKCQkvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGbgoJCWZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApOwoJfQoJcmV0dXJuIGVsZW0uZWFjaCggZnVuY3Rpb24oKSB7CgkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApOwoJfSApOwp9CgovKgogKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuCiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuCiAqLwpqUXVlcnkuZXZlbnQgPSB7CgoJZ2xvYmFsOiB7fSwKCglhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7CgoJCXZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCwKCQkJZXZlbnRzLCB0LCBoYW5kbGVPYmosCgkJCXNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSwKCQkJZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTsKCgkJLy8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cykKCQlpZiAoICFlbGVtRGF0YSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyCgkJaWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7CgkJCWhhbmRsZU9iakluID0gaGFuZGxlcjsKCQkJaGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7CgkJCXNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7CgkJfQoKCQkvLyBFbnN1cmUgdGhhdCBpbnZhbGlkIHNlbGVjdG9ycyB0aHJvdyBleGNlcHRpb25zIGF0IGF0dGFjaCB0aW1lCgkJLy8gRXZhbHVhdGUgYWdhaW5zdCBkb2N1bWVudEVsZW1lbnQgaW4gY2FzZSBlbGVtIGlzIGEgbm9uLWVsZW1lbnQgbm9kZSAoZS5nLiwgZG9jdW1lbnQpCgkJaWYgKCBzZWxlY3RvciApIHsKCQkJalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBkb2N1bWVudEVsZW1lbnQsIHNlbGVjdG9yICk7CgkJfQoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXIKCQlpZiAoICFoYW5kbGVyLmd1aWQgKSB7CgkJCWhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7CgkJfQoKCQkvLyBJbml0IHRoZSBlbGVtZW50J3MgZXZlbnQgc3RydWN0dXJlIGFuZCBtYWluIGhhbmRsZXIsIGlmIHRoaXMgaXMgdGhlIGZpcnN0CgkJaWYgKCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHsKCQkJZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307CgkJfQoJCWlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHsKCQkJZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHsKCgkJCQkvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZAoJCQkJLy8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZAoJCQkJcmV0dXJuIHR5cGVvZiBqUXVlcnkgIT09ICJ1bmRlZmluZWQiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/CgkJCQkJalF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDsKCQkJfTsKCQl9CgoJCS8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2UKCQl0eXBlcyA9ICggdHlwZXMgfHwgIiIgKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFsgIiIgXTsKCQl0ID0gdHlwZXMubGVuZ3RoOwoJCXdoaWxlICggdC0tICkgewoJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnMKCQkJaWYgKCAhdHlwZSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQkvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGUKCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgoJCQkvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGUKCQkJdHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlOwoKCQkJLy8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZQoJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCgkJCS8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzCgkJCWhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoIHsKCQkJCXR5cGU6IHR5cGUsCgkJCQlvcmlnVHlwZTogb3JpZ1R5cGUsCgkJCQlkYXRhOiBkYXRhLAoJCQkJaGFuZGxlcjogaGFuZGxlciwKCQkJCWd1aWQ6IGhhbmRsZXIuZ3VpZCwKCQkJCXNlbGVjdG9yOiBzZWxlY3RvciwKCQkJCW5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksCgkJCQluYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggIi4iICkKCQkJfSwgaGFuZGxlT2JqSW4gKTsKCgkJCS8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0CgkJCWlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkgewoJCQkJaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSA9IFtdOwoJCQkJaGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7CgoJCQkJLy8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlCgkJCQlpZiAoICFzcGVjaWFsLnNldHVwIHx8CgkJCQkJc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHsKCgkJCQkJaWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCQkJCWVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUgKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWlmICggc3BlY2lhbC5hZGQgKSB7CgkJCQlzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTsKCgkJCQlpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkgewoJCQkJCWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7CgkJCQl9CgkJCX0KCgkJCS8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250CgkJCWlmICggc2VsZWN0b3IgKSB7CgkJCQloYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7CgkJCX0gZWxzZSB7CgkJCQloYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTsKCQkJfQoKCQkJLy8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvbgoJCQlqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlOwoJCX0KCgl9LAoKCS8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudAoJcmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHsKCgkJdmFyIGosIG9yaWdDb3VudCwgdG1wLAoJCQlldmVudHMsIHQsIGhhbmRsZU9iaiwKCQkJc3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLAoJCQllbGVtRGF0YSA9IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhUHJpdi5nZXQoIGVsZW0gKTsKCgkJaWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWQKCQl0eXBlcyA9ICggdHlwZXMgfHwgIiIgKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFsgIiIgXTsKCQl0ID0gdHlwZXMubGVuZ3RoOwoJCXdoaWxlICggdC0tICkgewoJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnQKCQkJaWYgKCAhdHlwZSApIHsKCQkJCWZvciAoIHR5cGUgaW4gZXZlbnRzICkgewoJCQkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApOwoJCQkJfQoJCQkJY29udGludWU7CgkJCX0KCgkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoJCQl0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7CgkJCWhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107CgkJCXRtcCA9IHRtcFsgMiBdICYmCgkJCQluZXcgUmVnRXhwKCAiKF58XFwuKSIgKyBuYW1lc3BhY2VzLmpvaW4oICJcXC4oPzouKlxcLnwpIiApICsgIihcXC58JCkiICk7CgoJCQkvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzCgkJCW9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7CgkJCXdoaWxlICggai0tICkgewoJCQkJaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTsKCgkJCQlpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmCgkJCQkJKCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiYKCQkJCQkoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmCgkJCQkJKCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fAoJCQkJCQlzZWxlY3RvciA9PT0gIioqIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHsKCQkJCQloYW5kbGVycy5zcGxpY2UoIGosIDEgKTsKCgkJCQkJaWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7CgkJCQkJCWhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTsKCQkJCQl9CgkJCQkJaWYgKCBzcGVjaWFsLnJlbW92ZSApIHsKCQkJCQkJc3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0CgkJCS8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKQoJCQlpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkgewoJCQkJaWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fAoJCQkJCXNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkgewoKCQkJCQlqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApOwoJCQkJfQoKCQkJCWRlbGV0ZSBldmVudHNbIHR5cGUgXTsKCQkJfQoJCX0KCgkJLy8gUmVtb3ZlIGRhdGEgYW5kIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWQKCQlpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHsKCQkJZGF0YVByaXYucmVtb3ZlKCBlbGVtLCAiaGFuZGxlIGV2ZW50cyIgKTsKCQl9Cgl9LAoKCWRpc3BhdGNoOiBmdW5jdGlvbiggbmF0aXZlRXZlbnQgKSB7CgoJCS8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdAoJCXZhciBldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIG5hdGl2ZUV2ZW50ICk7CgoJCXZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaiwgaGFuZGxlclF1ZXVlLAoJCQlhcmdzID0gbmV3IEFycmF5KCBhcmd1bWVudHMubGVuZ3RoICksCgkJCWhhbmRsZXJzID0gKCBkYXRhUHJpdi5nZXQoIHRoaXMsICJldmVudHMiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLAoJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTsKCgkJLy8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnQKCQlhcmdzWyAwIF0gPSBldmVudDsKCgkJZm9yICggaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKysgKSB7CgkJCWFyZ3NbIGkgXSA9IGFyZ3VtZW50c1sgaSBdOwoJCX0KCgkJZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzOwoKCQkvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkCgkJaWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIERldGVybWluZSBoYW5kbGVycwoJCWhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTsKCgkJLy8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXMKCQlpID0gMDsKCQl3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCQkJZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTsKCgkJCWogPSAwOwoJCQl3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJgoJCQkJIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQkJLy8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKQoJCQkJLy8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuCgkJCQlpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgewoKCQkJCQlldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7CgkJCQkJZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhOwoKCQkJCQlyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8CgkJCQkJCWhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApOwoKCQkJCQlpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQlpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkgewoJCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlCgkJaWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHsKCQkJc3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTsKCQl9CgoJCXJldHVybiBldmVudC5yZXN1bHQ7Cgl9LAoKCWhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkgewoJCXZhciBpLCBoYW5kbGVPYmosIHNlbCwgbWF0Y2hlZEhhbmRsZXJzLCBtYXRjaGVkU2VsZWN0b3JzLAoJCQloYW5kbGVyUXVldWUgPSBbXSwKCQkJZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsCgkJCWN1ciA9IGV2ZW50LnRhcmdldDsKCgkJLy8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVycwoJCWlmICggZGVsZWdhdGVDb3VudCAmJgoKCQkJLy8gU3VwcG9ydDogSUUgPD05CgkJCS8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICh0cmFjLTEzMTgwKQoJCQljdXIubm9kZVR5cGUgJiYKCgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MgoJCQkvLyBTdXBwcmVzcyBzcGVjLXZpb2xhdGluZyBjbGlja3MgaW5kaWNhdGluZyBhIG5vbi1wcmltYXJ5IHBvaW50ZXIgYnV0dG9uICh0cmFjLTM4NjEpCgkJCS8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50LXR5cGUtY2xpY2sKCQkJLy8gU3VwcG9ydDogSUUgMTEgb25seQoJCQkvLyAuLi5idXQgbm90IGFycm93IGtleSAiY2xpY2tzIiBvZiByYWRpbyBpbnB1dHMsIHdoaWNoIGNhbiBoYXZlIGBidXR0b25gIC0xIChnaC0yMzQzKQoJCQkhKCBldmVudC50eXBlID09PSAiY2xpY2siICYmIGV2ZW50LmJ1dHRvbiA+PSAxICkgKSB7CgoJCQlmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHsKCgkJCQkvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOCkKCQkJCS8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KQoJCQkJaWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgISggZXZlbnQudHlwZSA9PT0gImNsaWNrIiAmJiBjdXIuZGlzYWJsZWQgPT09IHRydWUgKSApIHsKCQkJCQltYXRjaGVkSGFuZGxlcnMgPSBbXTsKCQkJCQltYXRjaGVkU2VsZWN0b3JzID0ge307CgkJCQkJZm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7CgkJCQkJCWhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07CgoJCQkJCQkvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKQoJCQkJCQlzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyAiICI7CgoJCQkJCQlpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7CgkJCQkJCQltYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgPwoJCQkJCQkJCWpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOgoJCQkJCQkJCWpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7CgkJCQkJCX0KCQkJCQkJaWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSApIHsKCQkJCQkJCW1hdGNoZWRIYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZiAoIG1hdGNoZWRIYW5kbGVycy5sZW5ndGggKSB7CgkJCQkJCWhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZWRIYW5kbGVycyB9ICk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzCgkJY3VyID0gdGhpczsKCQlpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7CgkJCWhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApOwoJCX0KCgkJcmV0dXJuIGhhbmRsZXJRdWV1ZTsKCX0sCgoJYWRkUHJvcDogZnVuY3Rpb24oIG5hbWUsIGhvb2sgKSB7CgkJT2JqZWN0LmRlZmluZVByb3BlcnR5KCBqUXVlcnkuRXZlbnQucHJvdG90eXBlLCBuYW1lLCB7CgkJCWVudW1lcmFibGU6IHRydWUsCgkJCWNvbmZpZ3VyYWJsZTogdHJ1ZSwKCgkJCWdldDogalF1ZXJ5LmlzRnVuY3Rpb24oIGhvb2sgKSA/CgkJCQlmdW5jdGlvbigpIHsKCQkJCQlpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHsKCQkJCQkJCXJldHVybiBob29rKCB0aGlzLm9yaWdpbmFsRXZlbnQgKTsKCQkJCQl9CgkJCQl9IDoKCQkJCWZ1bmN0aW9uKCkgewoJCQkJCWlmICggdGhpcy5vcmlnaW5hbEV2ZW50ICkgewoJCQkJCQkJcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdOwoJCQkJCX0KCQkJCX0sCgoJCQlzZXQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcywgbmFtZSwgewoJCQkJCWVudW1lcmFibGU6IHRydWUsCgkJCQkJY29uZmlndXJhYmxlOiB0cnVlLAoJCQkJCXdyaXRhYmxlOiB0cnVlLAoJCQkJCXZhbHVlOiB2YWx1ZQoJCQkJfSApOwoJCQl9CgkJfSApOwoJfSwKCglmaXg6IGZ1bmN0aW9uKCBvcmlnaW5hbEV2ZW50ICkgewoJCXJldHVybiBvcmlnaW5hbEV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID8KCQkJb3JpZ2luYWxFdmVudCA6CgkJCW5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTsKCX0sCgoJc3BlY2lhbDogewoJCWxvYWQ6IHsKCgkJCS8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWQKCQkJbm9CdWJibGU6IHRydWUKCQl9LAoJCWZvY3VzOiB7CgoJCQkvLyBGaXJlIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3QKCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQlpZiAoIHRoaXMgIT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5mb2N1cyApIHsKCQkJCQl0aGlzLmZvY3VzKCk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9LAoJCQlkZWxlZ2F0ZVR5cGU6ICJmb2N1c2luIgoJCX0sCgkJYmx1cjogewoJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCWlmICggdGhpcyA9PT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmJsdXIgKSB7CgkJCQkJdGhpcy5ibHVyKCk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9LAoJCQlkZWxlZ2F0ZVR5cGU6ICJmb2N1c291dCIKCQl9LAoJCWNsaWNrOiB7CgoJCQkvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodAoJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCWlmICggdGhpcy50eXBlID09PSAiY2hlY2tib3giICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiaW5wdXQiICkgKSB7CgkJCQkJdGhpcy5jbGljaygpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSwKCgkJCS8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rcwoJCQlfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCAiYSIgKTsKCQkJfQoJCX0sCgoJCWJlZm9yZXVubG9hZDogewoJCQlwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHsKCgkJCQkvLyBTdXBwb3J0OiBGaXJlZm94IDIwKwoJCQkJLy8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LgoJCQkJaWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkgewoJCQkJCWV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7CgkJCQl9CgkJCX0KCQl9Cgl9Cn07CgpqUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkgewoKCS8vIFRoaXMgImlmIiBpcyBuZWVkZWQgZm9yIHBsYWluIG9iamVjdHMKCWlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkgewoJCWVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlICk7Cgl9Cn07CgpqUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHsKCgkvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmQKCWlmICggISggdGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCApICkgewoJCXJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7Cgl9CgoJLy8gRXZlbnQgb2JqZWN0CglpZiAoIHNyYyAmJiBzcmMudHlwZSApIHsKCQl0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7CgkJdGhpcy50eXBlID0gc3JjLnR5cGU7CgoJCS8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkCgkJLy8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuCgkJdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fAoJCQkJc3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJgoKCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seQoJCQkJc3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/CgkJCXJldHVyblRydWUgOgoJCQlyZXR1cm5GYWxzZTsKCgkJLy8gQ3JlYXRlIHRhcmdldCBwcm9wZXJ0aWVzCgkJLy8gU3VwcG9ydDogU2FmYXJpIDw9NiAtIDcgb25seQoJCS8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpCgkJdGhpcy50YXJnZXQgPSAoIHNyYy50YXJnZXQgJiYgc3JjLnRhcmdldC5ub2RlVHlwZSA9PT0gMyApID8KCQkJc3JjLnRhcmdldC5wYXJlbnROb2RlIDoKCQkJc3JjLnRhcmdldDsKCgkJdGhpcy5jdXJyZW50VGFyZ2V0ID0gc3JjLmN1cnJlbnRUYXJnZXQ7CgkJdGhpcy5yZWxhdGVkVGFyZ2V0ID0gc3JjLnJlbGF0ZWRUYXJnZXQ7CgoJLy8gRXZlbnQgdHlwZQoJfSBlbHNlIHsKCQl0aGlzLnR5cGUgPSBzcmM7Cgl9CgoJLy8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3QKCWlmICggcHJvcHMgKSB7CgkJalF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTsKCX0KCgkvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZQoJdGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBqUXVlcnkubm93KCk7CgoJLy8gTWFyayBpdCBhcyBmaXhlZAoJdGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7Cn07CgovLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmcKLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbApqUXVlcnkuRXZlbnQucHJvdG90eXBlID0gewoJY29uc3RydWN0b3I6IGpRdWVyeS5FdmVudCwKCWlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsCglpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCglpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCglpc1NpbXVsYXRlZDogZmFsc2UsCgoJcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgewoJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQl0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7CgoJCWlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHsKCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCX0sCglzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewoJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQl0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTsKCgkJaWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkgewoJCQllLnN0b3BQcm9wYWdhdGlvbigpOwoJCX0KCX0sCglzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewoJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQl0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTsKCgkJaWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkgewoJCQllLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCX0KCgkJdGhpcy5zdG9wUHJvcGFnYXRpb24oKTsKCX0KfTsKCi8vIEluY2x1ZGVzIGFsbCBjb21tb24gZXZlbnQgcHJvcHMgaW5jbHVkaW5nIEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50IHNwZWNpZmljIHByb3BzCmpRdWVyeS5lYWNoKCB7CglhbHRLZXk6IHRydWUsCglidWJibGVzOiB0cnVlLAoJY2FuY2VsYWJsZTogdHJ1ZSwKCWNoYW5nZWRUb3VjaGVzOiB0cnVlLAoJY3RybEtleTogdHJ1ZSwKCWRldGFpbDogdHJ1ZSwKCWV2ZW50UGhhc2U6IHRydWUsCgltZXRhS2V5OiB0cnVlLAoJcGFnZVg6IHRydWUsCglwYWdlWTogdHJ1ZSwKCXNoaWZ0S2V5OiB0cnVlLAoJdmlldzogdHJ1ZSwKCSJjaGFyIjogdHJ1ZSwKCWNoYXJDb2RlOiB0cnVlLAoJa2V5OiB0cnVlLAoJa2V5Q29kZTogdHJ1ZSwKCWJ1dHRvbjogdHJ1ZSwKCWJ1dHRvbnM6IHRydWUsCgljbGllbnRYOiB0cnVlLAoJY2xpZW50WTogdHJ1ZSwKCW9mZnNldFg6IHRydWUsCglvZmZzZXRZOiB0cnVlLAoJcG9pbnRlcklkOiB0cnVlLAoJcG9pbnRlclR5cGU6IHRydWUsCglzY3JlZW5YOiB0cnVlLAoJc2NyZWVuWTogdHJ1ZSwKCXRhcmdldFRvdWNoZXM6IHRydWUsCgl0b0VsZW1lbnQ6IHRydWUsCgl0b3VjaGVzOiB0cnVlLAoKCXdoaWNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjsKCgkJLy8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzCgkJaWYgKCBldmVudC53aGljaCA9PSBudWxsICYmIHJrZXlFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7CgkJCXJldHVybiBldmVudC5jaGFyQ29kZSAhPSBudWxsID8gZXZlbnQuY2hhckNvZGUgOiBldmVudC5rZXlDb2RlOwoJCX0KCgkJLy8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodAoJCWlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIHJtb3VzZUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHsKCQkJaWYgKCBidXR0b24gJiAxICkgewoJCQkJcmV0dXJuIDE7CgkJCX0KCgkJCWlmICggYnV0dG9uICYgMiApIHsKCQkJCXJldHVybiAzOwoJCQl9CgoJCQlpZiAoIGJ1dHRvbiAmIDQgKSB7CgkJCQlyZXR1cm4gMjsKCQkJfQoKCQkJcmV0dXJuIDA7CgkJfQoKCQlyZXR1cm4gZXZlbnQud2hpY2g7Cgl9Cn0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7CgovLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3MKLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS4KLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXQKLy8KLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seQovLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZToKLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4Ci8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuCmpRdWVyeS5lYWNoKCB7Cgltb3VzZWVudGVyOiAibW91c2VvdmVyIiwKCW1vdXNlbGVhdmU6ICJtb3VzZW91dCIsCglwb2ludGVyZW50ZXI6ICJwb2ludGVyb3ZlciIsCglwb2ludGVybGVhdmU6ICJwb2ludGVyb3V0Igp9LCBmdW5jdGlvbiggb3JpZywgZml4ICkgewoJalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHsKCQlkZWxlZ2F0ZVR5cGU6IGZpeCwKCQliaW5kVHlwZTogZml4LAoKCQloYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJdmFyIHJldCwKCQkJCXRhcmdldCA9IHRoaXMsCgkJCQlyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCwKCQkJCWhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajsKCgkJCS8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuCgkJCS8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93CgkJCWlmICggIXJlbGF0ZWQgfHwgKCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkgKSApIHsKCQkJCWV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7CgkJCQlyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQlldmVudC50eXBlID0gZml4OwoJCQl9CgkJCXJldHVybiByZXQ7CgkJfQoJfTsKfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoKCW9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHsKCQlyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTsKCX0sCglvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkgewoJCXJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApOwoJfSwKCW9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7CgkJdmFyIGhhbmRsZU9iaiwgdHlwZTsKCQlpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHsKCgkJCS8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnQKCQkJaGFuZGxlT2JqID0gdHlwZXMuaGFuZGxlT2JqOwoJCQlqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKAoJCQkJaGFuZGxlT2JqLm5hbWVzcGFjZSA/CgkJCQkJaGFuZGxlT2JqLm9yaWdUeXBlICsgIi4iICsgaGFuZGxlT2JqLm5hbWVzcGFjZSA6CgkJCQkJaGFuZGxlT2JqLm9yaWdUeXBlLAoJCQkJaGFuZGxlT2JqLnNlbGVjdG9yLAoJCQkJaGFuZGxlT2JqLmhhbmRsZXIKCQkJKTsKCQkJcmV0dXJuIHRoaXM7CgkJfQoJCWlmICggdHlwZW9mIHR5cGVzID09PSAib2JqZWN0IiApIHsKCgkJCS8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApCgkJCWZvciAoIHR5cGUgaW4gdHlwZXMgKSB7CgkJCQl0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTsKCQkJfQoJCQlyZXR1cm4gdGhpczsKCQl9CgkJaWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICkgewoKCQkJLy8gKCB0eXBlcyBbLCBmbl0gKQoJCQlmbiA9IHNlbGVjdG9yOwoJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQl9CgkJaWYgKCBmbiA9PT0gZmFsc2UgKSB7CgkJCWZuID0gcmV0dXJuRmFsc2U7CgkJfQoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7CgkJfSApOwoJfQp9ICk7CgoKdmFyCgoJLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqLwoKCS8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXNsaW50L2VzbGludC9pc3N1ZXMvMzIyOQoJcnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopW14+XSopXC8+L2dpLAoKCS8qIGVzbGludC1lbmFibGUgKi8KCgkvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEsIEVkZ2UgMTIgLSAxMwoJLy8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy4KCS8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvCglybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSwKCgkvLyBjaGVja2VkPSJjaGVja2VkIiBvciBjaGVja2VkCglyY2hlY2tlZCA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAoJcnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcLyguKikvLAoJcmNsZWFuU2NyaXB0ID0gL15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nOwoKZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkgewoJaWYgKCBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJ0YWJsZSIgKSAmJgoJCWpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCAidHIiICkgKSB7CgoJCXJldHVybiBlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAidGJvZHkiIClbIDAgXSB8fCBlbGVtOwoJfQoKCXJldHVybiBlbGVtOwp9CgovLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uCmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7CgllbGVtLnR5cGUgPSAoIGVsZW0uZ2V0QXR0cmlidXRlKCAidHlwZSIgKSAhPT0gbnVsbCApICsgIi8iICsgZWxlbS50eXBlOwoJcmV0dXJuIGVsZW07Cn0KZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHsKCXZhciBtYXRjaCA9IHJzY3JpcHRUeXBlTWFza2VkLmV4ZWMoIGVsZW0udHlwZSApOwoKCWlmICggbWF0Y2ggKSB7CgkJZWxlbS50eXBlID0gbWF0Y2hbIDEgXTsKCX0gZWxzZSB7CgkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoICJ0eXBlIiApOwoJfQoKCXJldHVybiBlbGVtOwp9CgpmdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkgewoJdmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7CgoJaWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkgewoJCXJldHVybjsKCX0KCgkvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLgoJaWYgKCBkYXRhUHJpdi5oYXNEYXRhKCBzcmMgKSApIHsKCQlwZGF0YU9sZCA9IGRhdGFQcml2LmFjY2Vzcyggc3JjICk7CgkJcGRhdGFDdXIgPSBkYXRhUHJpdi5zZXQoIGRlc3QsIHBkYXRhT2xkICk7CgkJZXZlbnRzID0gcGRhdGFPbGQuZXZlbnRzOwoKCQlpZiAoIGV2ZW50cyApIHsKCQkJZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTsKCQkJcGRhdGFDdXIuZXZlbnRzID0ge307CgoJCQlmb3IgKCB0eXBlIGluIGV2ZW50cyApIHsKCQkJCWZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkgewoJCQkJCWpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTsKCQkJCX0KCQkJfQoJCX0KCX0KCgkvLyAyLiBDb3B5IHVzZXIgZGF0YQoJaWYgKCBkYXRhVXNlci5oYXNEYXRhKCBzcmMgKSApIHsKCQl1ZGF0YU9sZCA9IGRhdGFVc2VyLmFjY2Vzcyggc3JjICk7CgkJdWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTsKCgkJZGF0YVVzZXIuc2V0KCBkZXN0LCB1ZGF0YUN1ciApOwoJfQp9CgovLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHMKZnVuY3Rpb24gZml4SW5wdXQoIHNyYywgZGVzdCApIHsKCXZhciBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCgkvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi4KCWlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHsKCQlkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDsKCgkvLyBGYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZCBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9ucwoJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgfHwgbm9kZU5hbWUgPT09ICJ0ZXh0YXJlYSIgKSB7CgkJZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlOwoJfQp9CgpmdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7CgoJLy8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5cwoJYXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTsKCgl2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsCgkJaSA9IDAsCgkJbCA9IGNvbGxlY3Rpb24ubGVuZ3RoLAoJCWlOb0Nsb25lID0gbCAtIDEsCgkJdmFsdWUgPSBhcmdzWyAwIF0sCgkJaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApOwoKCS8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdAoJaWYgKCBpc0Z1bmN0aW9uIHx8CgkJCSggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJgoJCQkJIXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7CgkJcmV0dXJuIGNvbGxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGluZGV4ICkgewoJCQl2YXIgc2VsZiA9IGNvbGxlY3Rpb24uZXEoIGluZGV4ICk7CgkJCWlmICggaXNGdW5jdGlvbiApIHsKCQkJCWFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApOwoJCQl9CgkJCWRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApOwoJCX0gKTsKCX0KCglpZiAoIGwgKSB7CgkJZnJhZ21lbnQgPSBidWlsZEZyYWdtZW50KCBhcmdzLCBjb2xsZWN0aW9uWyAwIF0ub3duZXJEb2N1bWVudCwgZmFsc2UsIGNvbGxlY3Rpb24sIGlnbm9yZWQgKTsKCQlmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7CgoJCWlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7CgkJCWZyYWdtZW50ID0gZmlyc3Q7CgkJfQoKCQkvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2sKCQlpZiAoIGZpcnN0IHx8IGlnbm9yZWQgKSB7CgkJCXNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCAic2NyaXB0IiApLCBkaXNhYmxlU2NyaXB0ICk7CgkJCWhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDsKCgkJCS8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW0KCQkJLy8gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwCgkJCS8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuCgkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJCW5vZGUgPSBmcmFnbWVudDsKCgkJCQlpZiAoIGkgIT09IGlOb0Nsb25lICkgewoJCQkJCW5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTsKCgkJCQkJLy8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvbgoJCQkJCWlmICggaGFzU2NyaXB0cyApIHsKCgkJCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seQoJCQkJCQkvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0CgkJCQkJCWpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCQkJfQoJCQkJfQoKCQkJCWNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApOwoJCQl9CgoJCQlpZiAoIGhhc1NjcmlwdHMgKSB7CgkJCQlkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50OwoKCQkJCS8vIFJlZW5hYmxlIHNjcmlwdHMKCQkJCWpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTsKCgkJCQkvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uCgkJCQlmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHsKCQkJCQlub2RlID0gc2NyaXB0c1sgaSBdOwoJCQkJCWlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8ICIiICkgJiYKCQkJCQkJIWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgImdsb2JhbEV2YWwiICkgJiYKCQkJCQkJalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHsKCgkJCQkJCWlmICggbm9kZS5zcmMgKSB7CgoJCQkJCQkJLy8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnQKCQkJCQkJCWlmICggalF1ZXJ5Ll9ldmFsVXJsICkgewoJCQkJCQkJCWpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCURPTUV2YWwoIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSggcmNsZWFuU2NyaXB0LCAiIiApLCBkb2MgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCglyZXR1cm4gY29sbGVjdGlvbjsKfQoKZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7Cgl2YXIgbm9kZSwKCQlub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sCgkJaSA9IDA7CgoJZm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkgewoJCWlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCWpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7CgkJfQoKCQlpZiAoIG5vZGUucGFyZW50Tm9kZSApIHsKCQkJaWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkgewoJCQkJc2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCX0KCQkJbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7CgkJfQoJfQoKCXJldHVybiBlbGVtOwp9CgpqUXVlcnkuZXh0ZW5kKCB7CglodG1sUHJlZmlsdGVyOiBmdW5jdGlvbiggaHRtbCApIHsKCQlyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsICI8JDE+PC8kMj4iICk7Cgl9LAoKCWNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJdmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsCgkJCWNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSwKCQkJaW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTsKCgkJLy8gRml4IElFIGNsb25pbmcgaXNzdWVzCgkJaWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJgoJCQkJIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkgewoKCQkJLy8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yCgkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTsKCQkJc3JjRWxlbWVudHMgPSBnZXRBbGwoIGVsZW0gKTsKCgkJCWZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkgewoJCQkJZml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7CgkJCX0KCQl9CgoJCS8vIENvcHkgdGhlIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCB0byB0aGUgY2xvbmUKCQlpZiAoIGRhdGFBbmRFdmVudHMgKSB7CgkJCWlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJCQlzcmNFbGVtZW50cyA9IHNyY0VsZW1lbnRzIHx8IGdldEFsbCggZWxlbSApOwoJCQkJZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTsKCgkJCQlmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHsKCQkJCQljbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApOwoJCQl9CgkJfQoKCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSwgInNjcmlwdCIgKTsKCQlpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkgewoJCQlzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCAic2NyaXB0IiApICk7CgkJfQoKCQkvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXQKCQlyZXR1cm4gY2xvbmU7Cgl9LAoKCWNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkgewoJCXZhciBkYXRhLCBlbGVtLCB0eXBlLAoJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWwsCgkJCWkgPSAwOwoKCQlmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7CgkJCWlmICggYWNjZXB0RGF0YSggZWxlbSApICkgewoJCQkJaWYgKCAoIGRhdGEgPSBlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gKSApIHsKCQkJCQlpZiAoIGRhdGEuZXZlbnRzICkgewoJCQkJCQlmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkgewoJCQkJCQkJaWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7CgkJCQkJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApOwoKCQkJCQkJCS8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWQKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJalF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1KwoJCQkJCS8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZQoJCQkJCWVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSA9IHVuZGVmaW5lZDsKCQkJCX0KCQkJCWlmICggZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdICkgewoKCQkJCQkvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1KwoJCQkJCS8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZQoJCQkJCWVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDsKCQkJCX0KCQkJfQoJCX0KCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTsKCX0sCgoJcmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTsKCX0sCgoJdGV4dDogZnVuY3Rpb24oIHZhbHVlICkgewoJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPwoJCQkJalF1ZXJ5LnRleHQoIHRoaXMgKSA6CgkJCQl0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJCXRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTsKCQkJCQl9CgkJCQl9ICk7CgkJfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTsKCX0sCgoJYXBwZW5kOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkgewoJCQkJdmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApOwoJCQkJdGFyZ2V0LmFwcGVuZENoaWxkKCBlbGVtICk7CgkJCX0KCQl9ICk7Cgl9LAoKCXByZXBlbmQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7CgkJCQl2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7CgkJCQl0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApOwoJCQl9CgkJfSApOwoJfSwKCgliZWZvcmU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7CgkJCQl0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7CgkJCX0KCQl9ICk7Cgl9LAoKCWFmdGVyOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWlmICggdGhpcy5wYXJlbnROb2RlICkgewoJCQkJdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApOwoJCQl9CgkJfSApOwoJfSwKCgllbXB0eTogZnVuY3Rpb24oKSB7CgkJdmFyIGVsZW0sCgkJCWkgPSAwOwoKCQlmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoKCQkJCS8vIFByZXZlbnQgbWVtb3J5IGxlYWtzCgkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCgkJCQkvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2RlcwoJCQkJZWxlbS50ZXh0Q29udGVudCA9ICIiOwoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJY2xvbmU6IGZ1bmN0aW9uKCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQlkYXRhQW5kRXZlbnRzID0gZGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZmFsc2UgOiBkYXRhQW5kRXZlbnRzOwoJCWRlZXBEYXRhQW5kRXZlbnRzID0gZGVlcERhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGRhdGFBbmRFdmVudHMgOiBkZWVwRGF0YUFuZEV2ZW50czsKCgkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTsKCQl9ICk7Cgl9LAoKCWh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LAoJCQkJaSA9IDAsCgkJCQlsID0gdGhpcy5sZW5ndGg7CgoJCQlpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCXJldHVybiBlbGVtLmlubmVySFRNTDsKCQkJfQoKCQkJLy8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTAoJCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmCgkJCQkhd3JhcE1hcFsgKCBydGFnTmFtZS5leGVjKCB2YWx1ZSApIHx8IFsgIiIsICIiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHsKCgkJCQl2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApOwoKCQkJCXRyeSB7CgkJCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCQkJCQllbGVtID0gdGhpc1sgaSBdIHx8IHt9OwoKCQkJCQkJLy8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzCgkJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQkJCWpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApOwoJCQkJCQkJZWxlbS5pbm5lckhUTUwgPSB2YWx1ZTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJZWxlbSA9IDA7CgoJCQkJLy8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kCgkJCQl9IGNhdGNoICggZSApIHt9CgkJCX0KCgkJCWlmICggZWxlbSApIHsKCQkJCXRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7CgkJCX0KCQl9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApOwoJfSwKCglyZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7CgkJdmFyIGlnbm9yZWQgPSBbXTsKCgkJLy8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50CgkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwoKCQkJaWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHsKCQkJCWpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7CgkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQlwYXJlbnQucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7CgkJCQl9CgkJCX0KCgkJLy8gRm9yY2UgY2FsbGJhY2sgaW52b2NhdGlvbgoJCX0sIGlnbm9yZWQgKTsKCX0KfSApOwoKalF1ZXJ5LmVhY2goIHsKCWFwcGVuZFRvOiAiYXBwZW5kIiwKCXByZXBlbmRUbzogInByZXBlbmQiLAoJaW5zZXJ0QmVmb3JlOiAiYmVmb3JlIiwKCWluc2VydEFmdGVyOiAiYWZ0ZXIiLAoJcmVwbGFjZUFsbDogInJlcGxhY2VXaXRoIgp9LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7CglqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQl2YXIgZWxlbXMsCgkJCXJldCA9IFtdLAoJCQlpbnNlcnQgPSBqUXVlcnkoIHNlbGVjdG9yICksCgkJCWxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSwKCQkJaSA9IDA7CgoJCWZvciAoIDsgaSA8PSBsYXN0OyBpKysgKSB7CgkJCWVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7CgkJCWpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTsKCgkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seQoJCQkvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0CgkJCXB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTsKCQl9CgoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7Cgl9Owp9ICk7CnZhciBybWFyZ2luID0gKCAvXm1hcmdpbi8gKTsKCnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIgKTsKCnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHsKCgkJLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5LCBGaXJlZm94IDw9MzAgKCMxNTA5OCwgIzE0MTUwKQoJCS8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwcwoJCS8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCAiZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSIKCQl2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKCgkJaWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7CgkJCXZpZXcgPSB3aW5kb3c7CgkJfQoKCQlyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7Cgl9OwoKCgooIGZ1bmN0aW9uKCkgewoKCS8vIEV4ZWN1dGluZyBib3RoIHBpeGVsUG9zaXRpb24gJiBib3hTaXppbmdSZWxpYWJsZSB0ZXN0cyByZXF1aXJlIG9ubHkgb25lIGxheW91dAoJLy8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi4KCWZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkgewoKCQkvLyBUaGlzIGlzIGEgc2luZ2xldG9uLCB3ZSBuZWVkIHRvIGV4ZWN1dGUgaXQgb25seSBvbmNlCgkJaWYgKCAhZGl2ICkgewoJCQlyZXR1cm47CgkJfQoKCQlkaXYuc3R5bGUuY3NzVGV4dCA9CgkJCSJib3gtc2l6aW5nOmJvcmRlci1ib3g7IiArCgkJCSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrOyIgKwoJCQkibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDsiICsKCQkJInRvcDoxJTt3aWR0aDo1MCUiOwoJCWRpdi5pbm5lckhUTUwgPSAiIjsKCQlkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApOwoKCQl2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2ICk7CgkJcGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gIjElIjsKCgkJLy8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgRmlyZWZveCA8PTMgLSA0NAoJCXJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGRpdlN0eWxlLm1hcmdpbkxlZnQgPT09ICIycHgiOwoJCWJveFNpemluZ1JlbGlhYmxlVmFsID0gZGl2U3R5bGUud2lkdGggPT09ICI0cHgiOwoKCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5CgkJLy8gU29tZSBzdHlsZXMgY29tZSBiYWNrIHdpdGggcGVyY2VudGFnZSB2YWx1ZXMsIGV2ZW4gdGhvdWdoIHRoZXkgc2hvdWxkbid0CgkJZGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gIjUwJSI7CgkJcGl4ZWxNYXJnaW5SaWdodFZhbCA9IGRpdlN0eWxlLm1hcmdpblJpZ2h0ID09PSAiNHB4IjsKCgkJZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTsKCgkJLy8gTnVsbGlmeSB0aGUgZGl2IHNvIGl0IHdvdWxkbid0IGJlIHN0b3JlZCBpbiB0aGUgbWVtb3J5IGFuZAoJCS8vIGl0IHdpbGwgYWxzbyBiZSBhIHNpZ24gdGhhdCBjaGVja3MgYWxyZWFkeSBwZXJmb3JtZWQKCQlkaXYgPSBudWxsOwoJfQoKCXZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCwgcGl4ZWxNYXJnaW5SaWdodFZhbCwgcmVsaWFibGVNYXJnaW5MZWZ0VmFsLAoJCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICksCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCgkvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50cwoJaWYgKCAhZGl2LnN0eWxlICkgewoJCXJldHVybjsKCX0KCgkvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5CgkvLyBTdHlsZSBvZiBjbG9uZWQgZWxlbWVudCBhZmZlY3RzIHNvdXJjZSBlbGVtZW50IGNsb25lZCAoIzg5MDgpCglkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiY29udGVudC1ib3giOwoJZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gIiI7CglzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gImNvbnRlbnQtYm94IjsKCgljb250YWluZXIuc3R5bGUuY3NzVGV4dCA9ICJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4OyIgKwoJCSJwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiOwoJY29udGFpbmVyLmFwcGVuZENoaWxkKCBkaXYgKTsKCglqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7CgkJcGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7CgkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCXJldHVybiBwaXhlbFBvc2l0aW9uVmFsOwoJCX0sCgkJYm94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkgewoJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQlyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7CgkJfSwKCQlwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJcmV0dXJuIHBpeGVsTWFyZ2luUmlnaHRWYWw7CgkJfSwKCQlyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkgewoJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsOwoJCX0KCX0gKTsKfSApKCk7CgoKZnVuY3Rpb24gY3VyQ1NTKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCXZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsCgkJc3R5bGUgPSBlbGVtLnN0eWxlOwoKCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgoJLy8gU3VwcG9ydDogSUUgPD05IG9ubHkKCS8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpCglpZiAoIGNvbXB1dGVkICkgewoJCXJldCA9IGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoIG5hbWUgKSB8fCBjb21wdXRlZFsgbmFtZSBdOwoKCQlpZiAoIHJldCA9PT0gIiIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7CgkJCXJldCA9IGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSApOwoJCX0KCgkJLy8gQSB0cmlidXRlIHRvIHRoZSAiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkcyIKCQkvLyBBbmRyb2lkIEJyb3dzZXIgcmV0dXJucyBwZXJjZW50YWdlIGZvciBzb21lIHZhbHVlcywKCQkvLyBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzLgoJCS8vIFRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzoKCQkvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3Jlc29sdmVkLXZhbHVlcwoJCWlmICggIXN1cHBvcnQucGl4ZWxNYXJnaW5SaWdodCgpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHsKCgkJCS8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXMKCQkJd2lkdGggPSBzdHlsZS53aWR0aDsKCQkJbWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDsKCQkJbWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDsKCgkJCS8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXQKCQkJc3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0OwoJCQlyZXQgPSBjb21wdXRlZC53aWR0aDsKCgkJCS8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXMKCQkJc3R5bGUud2lkdGggPSB3aWR0aDsKCQkJc3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDsKCQkJc3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDsKCQl9Cgl9CgoJcmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID8KCgkJLy8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seQoJCS8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuCgkJcmV0ICsgIiIgOgoJCXJldDsKfQoKCmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHsKCgkvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLgoJcmV0dXJuIHsKCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGNvbmRpdGlvbkZuKCkgKSB7CgoJCQkJLy8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlCgkJCQkvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuCgkJCQlkZWxldGUgdGhpcy5nZXQ7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLgoJCQlyZXR1cm4gKCB0aGlzLmdldCA9IGhvb2tGbiApLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9Cgl9Owp9CgoKdmFyCgoJLy8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZQoJLy8gZXhjZXB0ICJ0YWJsZSIsICJ0YWJsZS1jZWxsIiwgb3IgInRhYmxlLWNhcHRpb24iCgkvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXkKCXJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLywKCWNzc1Nob3cgPSB7IHBvc2l0aW9uOiAiYWJzb2x1dGUiLCB2aXNpYmlsaXR5OiAiaGlkZGVuIiwgZGlzcGxheTogImJsb2NrIiB9LAoJY3NzTm9ybWFsVHJhbnNmb3JtID0gewoJCWxldHRlclNwYWNpbmc6ICIwIiwKCQlmb250V2VpZ2h0OiAiNDAwIgoJfSwKCgljc3NQcmVmaXhlcyA9IFsgIldlYmtpdCIsICJNb3oiLCAibXMiIF0sCgllbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKS5zdHlsZTsKCi8vIFJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHkKZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIG5hbWUgKSB7CgoJLy8gU2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWQKCWlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkgewoJCXJldHVybiBuYW1lOwoJfQoKCS8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXMKCXZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksCgkJaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDsKCgl3aGlsZSAoIGktLSApIHsKCQluYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7CgkJaWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7CgkJCXJldHVybiBuYW1lOwoJCX0KCX0KfQoKZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHsKCgkvLyBBbnkgcmVsYXRpdmUgKCsvLSkgdmFsdWVzIGhhdmUgYWxyZWFkeSBiZWVuCgkvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnQKCXZhciBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApOwoJcmV0dXJuIG1hdGNoZXMgPwoKCQkvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCAic3VidHJhY3QiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3MKCQlNYXRoLm1heCggMCwgbWF0Y2hlc1sgMiBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMyBdIHx8ICJweCIgKSA6CgkJdmFsdWU7Cn0KCmZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHsKCXZhciBpLAoJCXZhbCA9IDA7CgoJLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uCglpZiAoIGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gImJvcmRlciIgOiAiY29udGVudCIgKSApIHsKCQlpID0gNDsKCgkvLyBPdGhlcndpc2UgaW5pdGlhbGl6ZSBmb3IgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBwcm9wZXJ0aWVzCgl9IGVsc2UgewoJCWkgPSBuYW1lID09PSAid2lkdGgiID8gMSA6IDA7Cgl9CgoJZm9yICggOyBpIDwgNDsgaSArPSAyICkgewoKCQkvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0CgkJaWYgKCBleHRyYSA9PT0gIm1hcmdpbiIgKSB7CgkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCQl9CgoJCWlmICggaXNCb3JkZXJCb3ggKSB7CgoJCQkvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnQKCQkJaWYgKCBleHRyYSA9PT0gImNvbnRlbnQiICkgewoJCQkJdmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sICJwYWRkaW5nIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCQkJfQoKCQkJLy8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXIKCQkJaWYgKCBleHRyYSAhPT0gIm1hcmdpbiIgKSB7CgkJCQl2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgImJvcmRlciIgKyBjc3NFeHBhbmRbIGkgXSArICJXaWR0aCIsIHRydWUsIHN0eWxlcyApOwoJCQl9CgkJfSBlbHNlIHsKCgkJCS8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nCgkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCAicGFkZGluZyIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7CgoJCQkvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyCgkJCWlmICggZXh0cmEgIT09ICJwYWRkaW5nIiApIHsKCQkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCAiYm9yZGVyIiArIGNzc0V4cGFuZFsgaSBdICsgIldpZHRoIiwgdHJ1ZSwgc3R5bGVzICk7CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIHZhbDsKfQoKZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7CgoJLy8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWUKCXZhciB2YWwsCgkJdmFsdWVJc0JvcmRlckJveCA9IHRydWUsCgkJc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksCgkJaXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCI7CgoJLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5CgkvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlCgkvLyBpbiBJRSB0aHJvd3MgYW4gZXJyb3IuCglpZiAoIGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7CgkJdmFsID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVsgbmFtZSBdOwoJfQoKCS8vIFNvbWUgbm9uLWh0bWwgZWxlbWVudHMgcmV0dXJuIHVuZGVmaW5lZCBmb3Igb2Zmc2V0V2lkdGgsIHNvIGNoZWNrIGZvciBudWxsL3VuZGVmaW5lZAoJLy8gc3ZnIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjQ5Mjg1CgkvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2NjgKCWlmICggdmFsIDw9IDAgfHwgdmFsID09IG51bGwgKSB7CgoJCS8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeQoJCXZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7CgkJaWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkgewoJCQl2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07CgkJfQoKCQkvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLgoJCWlmICggcm51bW5vbnB4LnRlc3QoIHZhbCApICkgewoJCQlyZXR1cm4gdmFsOwoJCX0KCgkJLy8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXMKCQkvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlCgkJdmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmCgkJCSggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7CgoJCS8vIE5vcm1hbGl6ZSAiIiwgYXV0bywgYW5kIHByZXBhcmUgZm9yIGV4dHJhCgkJdmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDsKCX0KCgkvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlcwoJcmV0dXJuICggdmFsICsKCQlhdWdtZW50V2lkdGhPckhlaWdodCgKCQkJZWxlbSwKCQkJbmFtZSwKCQkJZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/ICJib3JkZXIiIDogImNvbnRlbnQiICksCgkJCXZhbHVlSXNCb3JkZXJCb3gsCgkJCXN0eWxlcwoJCSkKCSkgKyAicHgiOwp9CgpqUXVlcnkuZXh0ZW5kKCB7CgoJLy8gQWRkIGluIHN0eWxlIHByb3BlcnR5IGhvb2tzIGZvciBvdmVycmlkaW5nIHRoZSBkZWZhdWx0CgkvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHkKCWNzc0hvb2tzOiB7CgkJb3BhY2l0eTogewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJCS8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5CgkJCQkJdmFyIHJldCA9IGN1ckNTUyggZWxlbSwgIm9wYWNpdHkiICk7CgkJCQkJcmV0dXJuIHJldCA9PT0gIiIgPyAiMSIgOiByZXQ7CgkJCQl9CgkJCX0KCQl9Cgl9LAoKCS8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkICJweCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllcwoJY3NzTnVtYmVyOiB7CgkJImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IjogdHJ1ZSwKCQkiY29sdW1uQ291bnQiOiB0cnVlLAoJCSJmaWxsT3BhY2l0eSI6IHRydWUsCgkJImZsZXhHcm93IjogdHJ1ZSwKCQkiZmxleFNocmluayI6IHRydWUsCgkJImZvbnRXZWlnaHQiOiB0cnVlLAoJCSJsaW5lSGVpZ2h0IjogdHJ1ZSwKCQkib3BhY2l0eSI6IHRydWUsCgkJIm9yZGVyIjogdHJ1ZSwKCQkib3JwaGFucyI6IHRydWUsCgkJIndpZG93cyI6IHRydWUsCgkJInpJbmRleCI6IHRydWUsCgkJInpvb20iOiB0cnVlCgl9LAoKCS8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmUKCS8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWUKCWNzc1Byb3BzOiB7CgkJImZsb2F0IjogImNzc0Zsb2F0IgoJfSwKCgkvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZQoJc3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7CgoJCS8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2RlcwoJCWlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUKCQl2YXIgcmV0LCB0eXBlLCBob29rcywKCQkJb3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksCgkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJbmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fAoJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCS8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uCgkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07CgoJCS8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZQoJCWlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJdHlwZSA9IHR5cGVvZiB2YWx1ZTsKCgkJCS8vIENvbnZlcnQgIis9IiBvciAiLT0iIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KQoJCQlpZiAoIHR5cGUgPT09ICJzdHJpbmciICYmICggcmV0ID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiYgcmV0WyAxIF0gKSB7CgkJCQl2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7CgoJCQkJLy8gRml4ZXMgYnVnICM5MjM3CgkJCQl0eXBlID0gIm51bWJlciI7CgkJCX0KCgkJCS8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpCgkJCWlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKQoJCQlpZiAoIHR5cGUgPT09ICJudW1iZXIiICkgewoJCQkJdmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/ICIiIDogInB4IiApOwoJCQl9CgoJCQkvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzCgkJCWlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSAiIiAmJiBuYW1lLmluZGV4T2YoICJiYWNrZ3JvdW5kIiApID09PSAwICkgewoJCQkJc3R5bGVbIG5hbWUgXSA9ICJpbmhlcml0IjsKCQkJfQoKCQkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlCgkJCWlmICggIWhvb2tzIHx8ICEoICJzZXQiIGluIGhvb2tzICkgfHwKCQkJCSggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHsKCgkJCQlzdHlsZVsgbmFtZSBdID0gdmFsdWU7CgkJCX0KCgkJfSBlbHNlIHsKCgkJCS8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZQoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmCgkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkgewoKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCS8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0CgkJCXJldHVybiBzdHlsZVsgbmFtZSBdOwoJCX0KCX0sCgoJY3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHsKCQl2YXIgdmFsLCBudW0sIGhvb2tzLAoJCQlvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTsKCgkJLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lCgkJbmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fAoJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCS8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWUKCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTsKCgkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmUKCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICkgewoJCQl2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7CgkJfQoKCQkvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdAoJCWlmICggdmFsID09PSB1bmRlZmluZWQgKSB7CgkJCXZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7CgkJfQoKCQkvLyBDb252ZXJ0ICJub3JtYWwiIHRvIGNvbXB1dGVkIHZhbHVlCgkJaWYgKCB2YWwgPT09ICJub3JtYWwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkgewoJCQl2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTsKCQl9CgoJCS8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpYwoJCWlmICggZXh0cmEgPT09ICIiIHx8IGV4dHJhICkgewoJCQludW0gPSBwYXJzZUZsb2F0KCB2YWwgKTsKCQkJcmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsOwoJCX0KCQlyZXR1cm4gdmFsOwoJfQp9ICk7CgpqUXVlcnkuZWFjaCggWyAiaGVpZ2h0IiwgIndpZHRoIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCWpRdWVyeS5jc3NIb29rc1sgbmFtZSBdID0gewoJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHsKCQkJaWYgKCBjb21wdXRlZCApIHsKCgkJCQkvLyBDZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW0KCQkJCS8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0CgkJCQlyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApICkgJiYKCgkJCQkJLy8gU3VwcG9ydDogU2FmYXJpIDgrCgkJCQkJLy8gVGFibGUgY29sdW1ucyBpbiBTYWZhcmkgaGF2ZSBub24temVybyBvZmZzZXRXaWR0aCAmIHplcm8KCQkJCQkvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB1bmxlc3MgZGlzcGxheSBpcyBjaGFuZ2VkLgoJCQkJCS8vIFN1cHBvcnQ6IElFIDw9MTEgb25seQoJCQkJCS8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGUKCQkJCQkvLyBpbiBJRSB0aHJvd3MgYW4gZXJyb3IuCgkJCQkJKCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCB8fCAhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCApID8KCQkJCQkJc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJCQkJfSApIDoKCQkJCQkJZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJfQoJCX0sCgoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHsKCQkJdmFyIG1hdGNoZXMsCgkJCQlzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKSwKCQkJCXN1YnRyYWN0ID0gZXh0cmEgJiYgYXVnbWVudFdpZHRoT3JIZWlnaHQoCgkJCQkJZWxlbSwKCQkJCQluYW1lLAoJCQkJCWV4dHJhLAoJCQkJCWpRdWVyeS5jc3MoIGVsZW0sICJib3hTaXppbmciLCBmYWxzZSwgc3R5bGVzICkgPT09ICJib3JkZXItYm94IiwKCQkJCQlzdHlsZXMKCQkJCSk7CgoJCQkvLyBDb252ZXJ0IHRvIHBpeGVscyBpZiB2YWx1ZSBhZGp1c3RtZW50IGlzIG5lZWRlZAoJCQlpZiAoIHN1YnRyYWN0ICYmICggbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmCgkJCQkoIG1hdGNoZXNbIDMgXSB8fCAicHgiICkgIT09ICJweCIgKSB7CgoJCQkJZWxlbS5zdHlsZVsgbmFtZSBdID0gdmFsdWU7CgkJCQl2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTsKCQkJfQoKCQkJcmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKTsKCQl9Cgl9Owp9ICk7CgpqUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsCglmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7CgkJaWYgKCBjb21wdXRlZCApIHsKCQkJcmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCAibWFyZ2luTGVmdCIgKSApIHx8CgkJCQllbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLQoJCQkJCXN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDsKCQkJCQl9ICkKCQkJCSkgKyAicHgiOwoJCX0KCX0KKTsKCi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXMKalF1ZXJ5LmVhY2goIHsKCW1hcmdpbjogIiIsCglwYWRkaW5nOiAiIiwKCWJvcmRlcjogIldpZHRoIgp9LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7CglqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0gewoJCWV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkgewoJCQl2YXIgaSA9IDAsCgkJCQlleHBhbmRlZCA9IHt9LAoKCQkJCS8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZwoJCQkJcGFydHMgPSB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciID8gdmFsdWUuc3BsaXQoICIgIiApIDogWyB2YWx1ZSBdOwoKCQkJZm9yICggOyBpIDwgNDsgaSsrICkgewoJCQkJZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPQoJCQkJCXBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTsKCQkJfQoKCQkJcmV0dXJuIGV4cGFuZGVkOwoJCX0KCX07CgoJaWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHsKCQlqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyOwoJfQp9ICk7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7Cgljc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7CgkJCXZhciBzdHlsZXMsIGxlbiwKCQkJCW1hcCA9IHt9LAoJCQkJaSA9IDA7CgoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7CgkJCQlzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTsKCQkJCWxlbiA9IG5hbWUubGVuZ3RoOwoKCQkJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQkJCW1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTsKCQkJCX0KCgkJCQlyZXR1cm4gbWFwOwoJCQl9CgoJCQlyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/CgkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOgoJCQkJalF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApOwoJCX0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApOwoJfQp9ICk7CgoKZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkgewoJcmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTsKfQpqUXVlcnkuVHdlZW4gPSBUd2VlbjsKClR3ZWVuLnByb3RvdHlwZSA9IHsKCWNvbnN0cnVjdG9yOiBUd2VlbiwKCWluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHsKCQl0aGlzLmVsZW0gPSBlbGVtOwoJCXRoaXMucHJvcCA9IHByb3A7CgkJdGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgalF1ZXJ5LmVhc2luZy5fZGVmYXVsdDsKCQl0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoJCXRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7CgkJdGhpcy5lbmQgPSBlbmQ7CgkJdGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/ICIiIDogInB4IiApOwoJfSwKCWN1cjogZnVuY3Rpb24oKSB7CgkJdmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTsKCgkJcmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/CgkJCWhvb2tzLmdldCggdGhpcyApIDoKCQkJVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApOwoJfSwKCXJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7CgkJdmFyIGVhc2VkLAoJCQlob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07CgoJCWlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkgewoJCQl0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXSgKCQkJCXBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbgoJCQkpOwoJCX0gZWxzZSB7CgkJCXRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50OwoJCX0KCQl0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7CgoJCWlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7CgkJCXRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTsKCQl9CgoJCWlmICggaG9va3MgJiYgaG9va3Muc2V0ICkgewoJCQlob29rcy5zZXQoIHRoaXMgKTsKCQl9IGVsc2UgewoJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7CgkJfQoJCXJldHVybiB0aGlzOwoJfQp9OwoKVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlOwoKVHdlZW4ucHJvcEhvb2tzID0gewoJX2RlZmF1bHQ6IHsKCQlnZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHsKCQkJdmFyIHJlc3VsdDsKCgkJCS8vIFVzZSBhIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IGRpcmVjdGx5IHdoZW4gaXQgaXMgbm90IGEgRE9NIGVsZW1lbnQsCgkJCS8vIG9yIHdoZW4gdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc3R5bGUgcHJvcGVydHkgdGhhdCBleGlzdHMuCgkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fAoJCQkJdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7CgkJCQlyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdOwoJCQl9CgoJCQkvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHkKCQkJLy8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy4KCQkJLy8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzICIxMHB4IiBhcmUgcGFyc2VkIHRvIEZsb2F0OwoJCQkvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzICJyb3RhdGUoMXJhZCkiIGFyZSByZXR1cm5lZCBhcy1pcy4KCQkJcmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgIiIgKTsKCgkJCS8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgImF1dG8iIGFyZSBjb252ZXJ0ZWQgdG8gMC4KCQkJcmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSAiYXV0byIgPyAwIDogcmVzdWx0OwoJCX0sCgkJc2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgoJCQkvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC4KCQkJLy8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLgoJCQkvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLgoJCQlpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7CgkJCQlqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApOwoJCQl9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmCgkJCQkoIHR3ZWVuLmVsZW0uc3R5bGVbIGpRdWVyeS5jc3NQcm9wc1sgdHdlZW4ucHJvcCBdIF0gIT0gbnVsbCB8fAoJCQkJCWpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7CgkJCQlqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTsKCQkJfSBlbHNlIHsKCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQkJfQoJCX0KCX0KfTsKCi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5Ci8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2RlcwpUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7CglzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHsKCQlpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkgewoJCQl0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7CgkJfQoJfQp9OwoKalF1ZXJ5LmVhc2luZyA9IHsKCWxpbmVhcjogZnVuY3Rpb24oIHAgKSB7CgkJcmV0dXJuIHA7Cgl9LAoJc3dpbmc6IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7Cgl9LAoJX2RlZmF1bHQ6ICJzd2luZyIKfTsKCmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0OwoKLy8gQmFjayBjb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnQKalF1ZXJ5LmZ4LnN0ZXAgPSB7fTsKCgoKCnZhcgoJZnhOb3csIHRpbWVySWQsCglyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywKCXJydW4gPSAvcXVldWVIb29rcyQvOwoKZnVuY3Rpb24gcmFmKCkgewoJaWYgKCB0aW1lcklkICkgewoJCXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJhZiApOwoJCWpRdWVyeS5meC50aWNrKCk7Cgl9Cn0KCi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHkKZnVuY3Rpb24gY3JlYXRlRnhOb3coKSB7Cgl3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJZnhOb3cgPSB1bmRlZmluZWQ7Cgl9ICk7CglyZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApOwp9CgovLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvbgpmdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkgewoJdmFyIHdoaWNoLAoJCWkgPSAwLAoJCWF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTsKCgkvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsCgkvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodAoJaW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7Cglmb3IgKCA7IGkgPCA0OyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7CgkJd2hpY2ggPSBjc3NFeHBhbmRbIGkgXTsKCQlhdHRyc1sgIm1hcmdpbiIgKyB3aGljaCBdID0gYXR0cnNbICJwYWRkaW5nIiArIHdoaWNoIF0gPSB0eXBlOwoJfQoKCWlmICggaW5jbHVkZVdpZHRoICkgewoJCWF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7Cgl9CgoJcmV0dXJuIGF0dHJzOwp9CgpmdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHsKCXZhciB0d2VlbiwKCQljb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyAiKiIgXSApLAoJCWluZGV4ID0gMCwKCQlsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDsKCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJaWYgKCAoIHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkgKSApIHsKCgkJCS8vIFdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5CgkJCXJldHVybiB0d2VlbjsKCQl9Cgl9Cn0KCmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkgewoJdmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIGhvb2tzLCBvbGRmaXJlLCBwcm9wVHdlZW4sIHJlc3RvcmVEaXNwbGF5LCBkaXNwbGF5LAoJCWlzQm94ID0gIndpZHRoIiBpbiBwcm9wcyB8fCAiaGVpZ2h0IiBpbiBwcm9wcywKCQlhbmltID0gdGhpcywKCQlvcmlnID0ge30sCgkJc3R5bGUgPSBlbGVtLnN0eWxlLAoJCWhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICksCgkJZGF0YVNob3cgPSBkYXRhUHJpdi5nZXQoIGVsZW0sICJmeHNob3ciICk7CgoJLy8gUXVldWUtc2tpcHBpbmcgYW5pbWF0aW9ucyBoaWphY2sgdGhlIGZ4IGhvb2tzCglpZiAoICFvcHRzLnF1ZXVlICkgewoJCWhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCAiZngiICk7CgkJaWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkgewoJCQlob29rcy51bnF1ZXVlZCA9IDA7CgkJCW9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlOwoJCQlob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoICFob29rcy51bnF1ZXVlZCApIHsKCQkJCQlvbGRmaXJlKCk7CgkJCQl9CgkJCX07CgkJfQoJCWhvb2tzLnVucXVldWVkKys7CgoJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCS8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzCgkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCQkJCWhvb2tzLnVucXVldWVkLS07CgkJCQlpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sICJmeCIgKS5sZW5ndGggKSB7CgkJCQkJaG9va3MuZW1wdHkuZmlyZSgpOwoJCQkJfQoJCQl9ICk7CgkJfSApOwoJfQoKCS8vIERldGVjdCBzaG93L2hpZGUgYW5pbWF0aW9ucwoJZm9yICggcHJvcCBpbiBwcm9wcyApIHsKCQl2YWx1ZSA9IHByb3BzWyBwcm9wIF07CgkJaWYgKCByZnh0eXBlcy50ZXN0KCB2YWx1ZSApICkgewoJCQlkZWxldGUgcHJvcHNbIHByb3AgXTsKCQkJdG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSAidG9nZ2xlIjsKCQkJaWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyAiaGlkZSIgOiAic2hvdyIgKSApIHsKCgkJCQkvLyBQcmV0ZW5kIHRvIGJlIGhpZGRlbiBpZiB0aGlzIGlzIGEgInNob3ciIGFuZAoJCQkJLy8gdGhlcmUgaXMgc3RpbGwgZGF0YSBmcm9tIGEgc3RvcHBlZCBzaG93L2hpZGUKCQkJCWlmICggdmFsdWUgPT09ICJzaG93IiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJaGlkZGVuID0gdHJ1ZTsKCgkJCQkvLyBJZ25vcmUgYWxsIG90aGVyIG5vLW9wIHNob3cvaGlkZSBkYXRhCgkJCQl9IGVsc2UgewoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQl9CgkJCW9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7CgkJfQoJfQoKCS8vIEJhaWwgb3V0IGlmIHRoaXMgaXMgYSBuby1vcCBsaWtlIC5oaWRlKCkuaGlkZSgpCglwcm9wVHdlZW4gPSAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3BzICk7CglpZiAoICFwcm9wVHdlZW4gJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHsKCQlyZXR1cm47Cgl9CgoJLy8gUmVzdHJpY3QgIm92ZXJmbG93IiBhbmQgImRpc3BsYXkiIHN0eWxlcyBkdXJpbmcgYm94IGFuaW1hdGlvbnMKCWlmICggaXNCb3ggJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCgkJLy8gU3VwcG9ydDogSUUgPD05IC0gMTEsIEVkZ2UgMTIgLSAxMwoJCS8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUUgZG9lcyBub3QgaW5mZXIgdGhlIHNob3J0aGFuZAoJCS8vIGZyb20gaWRlbnRpY2FsbHktdmFsdWVkIG92ZXJmbG93WCBhbmQgb3ZlcmZsb3dZCgkJb3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07CgoJCS8vIElkZW50aWZ5IGEgZGlzcGxheSB0eXBlLCBwcmVmZXJyaW5nIG9sZCBzaG93L2hpZGUgZGF0YSBvdmVyIHRoZSBDU1MgY2FzY2FkZQoJCXJlc3RvcmVEaXNwbGF5ID0gZGF0YVNob3cgJiYgZGF0YVNob3cuZGlzcGxheTsKCQlpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7CgkJCXJlc3RvcmVEaXNwbGF5ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCAiZGlzcGxheSIgKTsKCQl9CgkJZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApOwoJCWlmICggZGlzcGxheSA9PT0gIm5vbmUiICkgewoJCQlpZiAoIHJlc3RvcmVEaXNwbGF5ICkgewoJCQkJZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5OwoJCQl9IGVsc2UgewoKCQkJCS8vIEdldCBub25lbXB0eSB2YWx1ZShzKSBieSB0ZW1wb3JhcmlseSBmb3JjaW5nIHZpc2liaWxpdHkKCQkJCXNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApOwoJCQkJcmVzdG9yZURpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgcmVzdG9yZURpc3BsYXk7CgkJCQlkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICk7CgkJCQlzaG93SGlkZSggWyBlbGVtIF0gKTsKCQkJfQoJCX0KCgkJLy8gQW5pbWF0ZSBpbmxpbmUgZWxlbWVudHMgYXMgaW5saW5lLWJsb2NrCgkJaWYgKCBkaXNwbGF5ID09PSAiaW5saW5lIiB8fCBkaXNwbGF5ID09PSAiaW5saW5lLWJsb2NrIiAmJiByZXN0b3JlRGlzcGxheSAhPSBudWxsICkgewoJCQlpZiAoIGpRdWVyeS5jc3MoIGVsZW0sICJmbG9hdCIgKSA9PT0gIm5vbmUiICkgewoKCQkJCS8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWUgYXQgdGhlIGVuZCBvZiBwdXJlIHNob3cvaGlkZSBhbmltYXRpb25zCgkJCQlpZiAoICFwcm9wVHdlZW4gKSB7CgkJCQkJYW5pbS5kb25lKCBmdW5jdGlvbigpIHsKCQkJCQkJc3R5bGUuZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5OwoJCQkJCX0gKTsKCQkJCQlpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7CgkJCQkJCWRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5OwoJCQkJCQlyZXN0b3JlRGlzcGxheSA9IGRpc3BsYXkgPT09ICJub25lIiA/ICIiIDogZGlzcGxheTsKCQkJCQl9CgkJCQl9CgkJCQlzdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7CgkJCX0KCQl9Cgl9CgoJaWYgKCBvcHRzLm92ZXJmbG93ICkgewoJCXN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CgkJYW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkgewoJCQlzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTsKCQkJc3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdOwoJCQlzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07CgkJfSApOwoJfQoKCS8vIEltcGxlbWVudCBzaG93L2hpZGUgYW5pbWF0aW9ucwoJcHJvcFR3ZWVuID0gZmFsc2U7Cglmb3IgKCBwcm9wIGluIG9yaWcgKSB7CgoJCS8vIEdlbmVyYWwgc2hvdy9oaWRlIHNldHVwIGZvciB0aGlzIGVsZW1lbnQgYW5pbWF0aW9uCgkJaWYgKCAhcHJvcFR3ZWVuICkgewoJCQlpZiAoIGRhdGFTaG93ICkgewoJCQkJaWYgKCAiaGlkZGVuIiBpbiBkYXRhU2hvdyApIHsKCQkJCQloaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgImZ4c2hvdyIsIHsgZGlzcGxheTogcmVzdG9yZURpc3BsYXkgfSApOwoJCQl9CgoJCQkvLyBTdG9yZSBoaWRkZW4vdmlzaWJsZSBmb3IgdG9nZ2xlIHNvIGAuc3RvcCgpLnRvZ2dsZSgpYCAicmV2ZXJzZXMiCgkJCWlmICggdG9nZ2xlICkgewoJCQkJZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjsKCQkJfQoKCQkJLy8gU2hvdyBlbGVtZW50cyBiZWZvcmUgYW5pbWF0aW5nIHRoZW0KCQkJaWYgKCBoaWRkZW4gKSB7CgkJCQlzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTsKCQkJfQoKCQkJLyogZXNsaW50LWRpc2FibGUgbm8tbG9vcC1mdW5jICovCgoJCQlhbmltLmRvbmUoIGZ1bmN0aW9uKCkgewoKCQkJLyogZXNsaW50LWVuYWJsZSBuby1sb29wLWZ1bmMgKi8KCgkJCQkvLyBUaGUgZmluYWwgc3RlcCBvZiBhICJoaWRlIiBhbmltYXRpb24gaXMgYWN0dWFsbHkgaGlkaW5nIHRoZSBlbGVtZW50CgkJCQlpZiAoICFoaWRkZW4gKSB7CgkJCQkJc2hvd0hpZGUoIFsgZWxlbSBdICk7CgkJCQl9CgkJCQlkYXRhUHJpdi5yZW1vdmUoIGVsZW0sICJmeHNob3ciICk7CgkJCQlmb3IgKCBwcm9wIGluIG9yaWcgKSB7CgkJCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTsKCQkJCX0KCQkJfSApOwoJCX0KCgkJLy8gUGVyLXByb3BlcnR5IHNldHVwCgkJcHJvcFR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7CgkJaWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7CgkJCWRhdGFTaG93WyBwcm9wIF0gPSBwcm9wVHdlZW4uc3RhcnQ7CgkJCWlmICggaGlkZGVuICkgewoJCQkJcHJvcFR3ZWVuLmVuZCA9IHByb3BUd2Vlbi5zdGFydDsKCQkJCXByb3BUd2Vlbi5zdGFydCA9IDA7CgkJCX0KCQl9Cgl9Cn0KCmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkgewoJdmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rczsKCgkvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3MKCWZvciAoIGluZGV4IGluIHByb3BzICkgewoJCW5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApOwoJCWVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTsKCQl2YWx1ZSA9IHByb3BzWyBpbmRleCBdOwoJCWlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7CgkJCWVhc2luZyA9IHZhbHVlWyAxIF07CgkJCXZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdOwoJCX0KCgkJaWYgKCBpbmRleCAhPT0gbmFtZSApIHsKCQkJcHJvcHNbIG5hbWUgXSA9IHZhbHVlOwoJCQlkZWxldGUgcHJvcHNbIGluZGV4IF07CgkJfQoKCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdOwoJCWlmICggaG9va3MgJiYgImV4cGFuZCIgaW4gaG9va3MgKSB7CgkJCXZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApOwoJCQlkZWxldGUgcHJvcHNbIG5hbWUgXTsKCgkJCS8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy4KCQkJLy8gUmV1c2luZyAnaW5kZXgnIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCAibmFtZSIKCQkJZm9yICggaW5kZXggaW4gdmFsdWUgKSB7CgkJCQlpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7CgkJCQkJcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTsKCQkJCQlzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJc3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nOwoJCX0KCX0KfQoKZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkgewoJdmFyIHJlc3VsdCwKCQlzdG9wcGVkLAoJCWluZGV4ID0gMCwKCQlsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsCgkJZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkgewoKCQkJLy8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yCgkJCWRlbGV0ZSB0aWNrLmVsZW07CgkJfSApLAoJCXRpY2sgPSBmdW5jdGlvbigpIHsKCQkJaWYgKCBzdG9wcGVkICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCXZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksCgkJCQlyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksCgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMgb25seQoJCQkJLy8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KQoJCQkJdGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLAoJCQkJcGVyY2VudCA9IDEgLSB0ZW1wLAoJCQkJaW5kZXggPSAwLAoJCQkJbGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7CgoJCQlmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTsKCQkJfQoKCQkJZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7CgoJCQlpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHsKCQkJCXJldHVybiByZW1haW5pbmc7CgkJCX0gZWxzZSB7CgkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSwKCQlhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKCB7CgkJCWVsZW06IGVsZW0sCgkJCXByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLAoJCQlvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7CgkJCQlzcGVjaWFsRWFzaW5nOiB7fSwKCQkJCWVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdAoJCQl9LCBvcHRpb25zICksCgkJCW9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcywKCQkJb3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLAoJCQlzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksCgkJCWR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLAoJCQl0d2VlbnM6IFtdLAoJCQljcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHsKCQkJCXZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCwKCQkJCQkJYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApOwoJCQkJYW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApOwoJCQkJcmV0dXJuIHR3ZWVuOwoJCQl9LAoJCQlzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHsKCQkJCXZhciBpbmRleCA9IDAsCgoJCQkJCS8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVucwoJCQkJCS8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydAoJCQkJCWxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7CgkJCQlpZiAoIHN0b3BwZWQgKSB7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQlzdG9wcGVkID0gdHJ1ZTsKCQkJCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTsKCQkJCX0KCgkJCQkvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdAoJCQkJaWYgKCBnb3RvRW5kICkgewoJCQkJCWRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTsKCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7CgkJCQl9CgkJCQlyZXR1cm4gdGhpczsKCQkJfQoJCX0gKSwKCQlwcm9wcyA9IGFuaW1hdGlvbi5wcm9wczsKCglwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApOwoKCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJcmVzdWx0ID0gQW5pbWF0aW9uLnByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTsKCQlpZiAoIHJlc3VsdCApIHsKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHsKCQkJCWpRdWVyeS5fcXVldWVIb29rcyggYW5pbWF0aW9uLmVsZW0sIGFuaW1hdGlvbi5vcHRzLnF1ZXVlICkuc3RvcCA9CgkJCQkJalF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7CgkJCX0KCQkJcmV0dXJuIHJlc3VsdDsKCQl9Cgl9CgoJalF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTsKCglpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkgewoJCWFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApOwoJfQoKCWpRdWVyeS5meC50aW1lcigKCQlqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7CgkJCWVsZW06IGVsZW0sCgkJCWFuaW06IGFuaW1hdGlvbiwKCQkJcXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlCgkJfSApCgkpOwoKCS8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zCglyZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApCgkJLmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlICkKCQkuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApCgkJLmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7Cn0KCmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHsKCgl0d2VlbmVyczogewoJCSIqIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJCXZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICk7CgkJCWFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApOwoJCQlyZXR1cm4gdHdlZW47CgkJfSBdCgl9LAoKCXR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7CgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHsKCQkJY2FsbGJhY2sgPSBwcm9wczsKCQkJcHJvcHMgPSBbICIqIiBdOwoJCX0gZWxzZSB7CgkJCXByb3BzID0gcHJvcHMubWF0Y2goIHJub3RodG1sd2hpdGUgKTsKCQl9CgoJCXZhciBwcm9wLAoJCQlpbmRleCA9IDAsCgkJCWxlbmd0aCA9IHByb3BzLmxlbmd0aDsKCgkJZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJcHJvcCA9IHByb3BzWyBpbmRleCBdOwoJCQlBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdOwoJCQlBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApOwoJCX0KCX0sCgoJcHJlZmlsdGVyczogWyBkZWZhdWx0UHJlZmlsdGVyIF0sCgoJcHJlZmlsdGVyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHByZXBlbmQgKSB7CgkJaWYgKCBwcmVwZW5kICkgewoJCQlBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApOwoJCX0gZWxzZSB7CgkJCUFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7CgkJfQoJfQp9ICk7CgpqUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7Cgl2YXIgb3B0ID0gc3BlZWQgJiYgdHlwZW9mIHNwZWVkID09PSAib2JqZWN0IiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDogewoJCWNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8CgkJCWpRdWVyeS5pc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLAoJCWR1cmF0aW9uOiBzcGVlZCwKCQllYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmcKCX07CgoJLy8gR28gdG8gdGhlIGVuZCBzdGF0ZSBpZiBmeCBhcmUgb2ZmIG9yIGlmIGRvY3VtZW50IGlzIGhpZGRlbgoJaWYgKCBqUXVlcnkuZngub2ZmIHx8IGRvY3VtZW50LmhpZGRlbiApIHsKCQlvcHQuZHVyYXRpb24gPSAwOwoKCX0gZWxzZSB7CgkJaWYgKCB0eXBlb2Ygb3B0LmR1cmF0aW9uICE9PSAibnVtYmVyIiApIHsKCQkJaWYgKCBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyApIHsKCQkJCW9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdOwoKCQkJfSBlbHNlIHsKCQkJCW9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7CgkJCX0KCQl9Cgl9CgoJLy8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gImZ4IgoJaWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7CgkJb3B0LnF1ZXVlID0gImZ4IjsKCX0KCgkvLyBRdWV1ZWluZwoJb3B0Lm9sZCA9IG9wdC5jb21wbGV0ZTsKCglvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHsKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7CgkJCW9wdC5vbGQuY2FsbCggdGhpcyApOwoJCX0KCgkJaWYgKCBvcHQucXVldWUgKSB7CgkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTsKCQl9Cgl9OwoKCXJldHVybiBvcHQ7Cn07CgpqUXVlcnkuZm4uZXh0ZW5kKCB7CglmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7CgoJCS8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMAoJCXJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW5XaXRoaW5UcmVlICkuY3NzKCAib3BhY2l0eSIsIDAgKS5zaG93KCkKCgkJCS8vIEFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZAoJCQkuZW5kKCkuYW5pbWF0ZSggeyBvcGFjaXR5OiB0byB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApOwoJfSwKCWFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQl2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLAoJCQlvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksCgkJCWRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7CgoJCQkJLy8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3QKCQkJCXZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTsKCgkJCQkvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHkKCQkJCWlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCAiZmluaXNoIiApICkgewoJCQkJCWFuaW0uc3RvcCggdHJ1ZSApOwoJCQkJfQoJCQl9OwoJCQlkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjsKCgkJcmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgPwoJCQl0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOgoJCQl0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7Cgl9LAoJc3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7CgkJdmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHsKCQkJdmFyIHN0b3AgPSBob29rcy5zdG9wOwoJCQlkZWxldGUgaG9va3Muc3RvcDsKCQkJc3RvcCggZ290b0VuZCApOwoJCX07CgoJCWlmICggdHlwZW9mIHR5cGUgIT09ICJzdHJpbmciICkgewoJCQlnb3RvRW5kID0gY2xlYXJRdWV1ZTsKCQkJY2xlYXJRdWV1ZSA9IHR5cGU7CgkJCXR5cGUgPSB1bmRlZmluZWQ7CgkJfQoJCWlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHsKCQkJdGhpcy5xdWV1ZSggdHlwZSB8fCAiZngiLCBbXSApOwoJCX0KCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCXZhciBkZXF1ZXVlID0gdHJ1ZSwKCQkJCWluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyAicXVldWVIb29rcyIsCgkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApOwoKCQkJaWYgKCBpbmRleCApIHsKCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7CgkJCQkJc3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlmb3IgKCBpbmRleCBpbiBkYXRhICkgewoJCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkgewoJCQkJCQlzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7CgkJCQlpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmCgkJCQkJKCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7CgoJCQkJCXRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIGdvdG9FbmQgKTsKCQkJCQlkZXF1ZXVlID0gZmFsc2U7CgkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCX0KCQkJfQoKCQkJLy8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC4KCQkJLy8gVGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaAoJCQkvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuCgkJCWlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHsKCQkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJCX0KCQl9ICk7Cgl9LAoJZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHsKCQlpZiAoIHR5cGUgIT09IGZhbHNlICkgewoJCQl0eXBlID0gdHlwZSB8fCAiZngiOwoJCX0KCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJdmFyIGluZGV4LAoJCQkJZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApLAoJCQkJcXVldWUgPSBkYXRhWyB0eXBlICsgInF1ZXVlIiBdLAoJCQkJaG9va3MgPSBkYXRhWyB0eXBlICsgInF1ZXVlSG9va3MiIF0sCgkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJbGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwOwoKCQkJLy8gRW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YQoJCQlkYXRhLmZpbmlzaCA9IHRydWU7CgoJCQkvLyBFbXB0eSB0aGUgcXVldWUgZmlyc3QKCQkJalF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApOwoKCQkJaWYgKCBob29rcyAmJiBob29rcy5zdG9wICkgewoJCQkJaG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7CgkJCX0KCgkJCS8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtCgkJCWZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7CgkJCQlpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHsKCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCX0KCQkJfQoKCQkJLy8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW0KCQkJZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJCWlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkgewoJCQkJCXF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7CgkJCQl9CgkJCX0KCgkJCS8vIFR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnCgkJCWRlbGV0ZSBkYXRhLmZpbmlzaDsKCQl9ICk7Cgl9Cn0gKTsKCmpRdWVyeS5lYWNoKCBbICJ0b2dnbGUiLCAic2hvdyIsICJoaWRlIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCXZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdOwoJalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSAiYm9vbGVhbiIgPwoJCQljc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOgoJCQl0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7Cgl9Owp9ICk7CgovLyBHZW5lcmF0ZSBzaG9ydGN1dHMgZm9yIGN1c3RvbSBhbmltYXRpb25zCmpRdWVyeS5lYWNoKCB7CglzbGlkZURvd246IGdlbkZ4KCAic2hvdyIgKSwKCXNsaWRlVXA6IGdlbkZ4KCAiaGlkZSIgKSwKCXNsaWRlVG9nZ2xlOiBnZW5GeCggInRvZ2dsZSIgKSwKCWZhZGVJbjogeyBvcGFjaXR5OiAic2hvdyIgfSwKCWZhZGVPdXQ6IHsgb3BhY2l0eTogImhpZGUiIH0sCglmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6ICJ0b2dnbGUiIH0KfSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkgewoJalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7Cgl9Owp9ICk7CgpqUXVlcnkudGltZXJzID0gW107CmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7Cgl2YXIgdGltZXIsCgkJaSA9IDAsCgkJdGltZXJzID0galF1ZXJ5LnRpbWVyczsKCglmeE5vdyA9IGpRdWVyeS5ub3coKTsKCglmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7CgkJdGltZXIgPSB0aW1lcnNbIGkgXTsKCgkJLy8gQ2hlY2tzIHRoZSB0aW1lciBoYXMgbm90IGFscmVhZHkgYmVlbiByZW1vdmVkCgkJaWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7CgkJCXRpbWVycy5zcGxpY2UoIGktLSwgMSApOwoJCX0KCX0KCglpZiAoICF0aW1lcnMubGVuZ3RoICkgewoJCWpRdWVyeS5meC5zdG9wKCk7Cgl9CglmeE5vdyA9IHVuZGVmaW5lZDsKfTsKCmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHsKCWpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTsKCWlmICggdGltZXIoKSApIHsKCQlqUXVlcnkuZnguc3RhcnQoKTsKCX0gZWxzZSB7CgkJalF1ZXJ5LnRpbWVycy5wb3AoKTsKCX0KfTsKCmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzOwpqUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHsKCWlmICggIXRpbWVySWQgKSB7CgkJdGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPwoJCQl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCByYWYgKSA6CgkJCXdpbmRvdy5zZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApOwoJfQp9OwoKalF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHsKCWlmICggd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lICkgewoJCXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSggdGltZXJJZCApOwoJfSBlbHNlIHsKCQl3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApOwoJfQoKCXRpbWVySWQgPSBudWxsOwp9OwoKalF1ZXJ5LmZ4LnNwZWVkcyA9IHsKCXNsb3c6IDYwMCwKCWZhc3Q6IDIwMCwKCgkvLyBEZWZhdWx0IHNwZWVkCglfZGVmYXVsdDogNDAwCn07CgoKLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLgovLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5LwpqUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHsKCXRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7Cgl0eXBlID0gdHlwZSB8fCAiZngiOwoKCXJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7CgkJdmFyIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCggbmV4dCwgdGltZSApOwoJCWhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJd2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApOwoJCX07Cgl9ICk7Cn07CgoKKCBmdW5jdGlvbigpIHsKCXZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJpbnB1dCIgKSwKCQlzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2VsZWN0IiApLAoJCW9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggIm9wdGlvbiIgKSApOwoKCWlucHV0LnR5cGUgPSAiY2hlY2tib3giOwoKCS8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjMgb25seQoJLy8gRGVmYXVsdCB2YWx1ZSBmb3IgYSBjaGVja2JveCBzaG91bGQgYmUgIm9uIgoJc3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09ICIiOwoKCS8vIFN1cHBvcnQ6IElFIDw9MTEgb25seQoJLy8gTXVzdCBhY2Nlc3Mgc2VsZWN0ZWRJbmRleCB0byBtYWtlIGRlZmF1bHQgb3B0aW9ucyBzZWxlY3QKCXN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7CgoJLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5CgkvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpbwoJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CglpbnB1dC52YWx1ZSA9ICJ0IjsKCWlucHV0LnR5cGUgPSAicmFkaW8iOwoJc3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09ICJ0IjsKfSApKCk7CgoKdmFyIGJvb2xIb29rLAoJYXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7CglhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJcmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApOwoJfSwKCglyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHsKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTsKCQl9ICk7Cgl9Cn0gKTsKCmpRdWVyeS5leHRlbmQoIHsKCWF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHsKCQl2YXIgcmV0LCBob29rcywKCQkJblR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQkvLyBEb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzCgkJaWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKCQlpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gInVuZGVmaW5lZCIgKSB7CgkJCXJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTsKCQl9CgoJCS8vIEF0dHJpYnV0ZSBob29rcyBhcmUgZGV0ZXJtaW5lZCBieSB0aGUgbG93ZXJjYXNlIHZlcnNpb24KCQkvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkCgkJaWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgkJCWhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHwKCQkJCSggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IHVuZGVmaW5lZCApOwoJCX0KCgkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQlpZiAoIHZhbHVlID09PSBudWxsICkgewoJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKCBob29rcyAmJiAic2V0IiBpbiBob29rcyAmJgoJCQkJKCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoKCQkJZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgIiIgKTsKCQkJcmV0dXJuIHZhbHVlOwoJCX0KCgkJaWYgKCBob29rcyAmJiAiZ2V0IiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7CgkJCXJldHVybiByZXQ7CgkJfQoKCQlyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7CgoJCS8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkCgkJcmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0OwoJfSwKCglhdHRySG9va3M6IHsKCQl0eXBlOiB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJaWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSAicmFkaW8iICYmCgkJCQkJalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaW5wdXQiICkgKSB7CgkJCQkJdmFyIHZhbCA9IGVsZW0udmFsdWU7CgkJCQkJZWxlbS5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgdmFsdWUgKTsKCQkJCQlpZiAoIHZhbCApIHsKCQkJCQkJZWxlbS52YWx1ZSA9IHZhbDsKCQkJCQl9CgkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJfSwKCglyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJdmFyIG5hbWUsCgkJCWkgPSAwLAoKCQkJLy8gQXR0cmlidXRlIG5hbWVzIGNhbiBjb250YWluIG5vbi1IVE1MIHdoaXRlc3BhY2UgY2hhcmFjdGVycwoJCQkvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTIKCQkJYXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKTsKCgkJaWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJd2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7CgkJCQllbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApOwoJCQl9CgkJfQoJfQp9ICk7CgovLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzCmJvb2xIb29rID0gewoJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgkJaWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7CgoJCQkvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlCgkJCWpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7CgkJfSBlbHNlIHsKCQkJZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTsKCQl9CgkJcmV0dXJuIG5hbWU7Cgl9Cn07CgpqUXVlcnkuZWFjaCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goIC9cdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCXZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjsKCglhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJdmFyIHJldCwgaGFuZGxlLAoJCQlsb3dlcmNhc2VOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoKCQlpZiAoICFpc1hNTCApIHsKCgkJCS8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXIKCQkJaGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdOwoJCQlhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSByZXQ7CgkJCXJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID8KCQkJCWxvd2VyY2FzZU5hbWUgOgoJCQkJbnVsbDsKCQkJYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gaGFuZGxlOwoJCX0KCQlyZXR1cm4gcmV0OwoJfTsKfSApOwoKCgoKdmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLAoJcmNsaWNrYWJsZSA9IC9eKD86YXxhcmVhKSQvaTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCXByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7Cgl9LAoKCXJlbW92ZVByb3A6IGZ1bmN0aW9uKCBuYW1lICkgewoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07CgkJfSApOwoJfQp9ICk7CgpqUXVlcnkuZXh0ZW5kKCB7Cglwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7CgkJdmFyIHJldCwgaG9va3MsCgkJCW5UeXBlID0gZWxlbS5ub2RlVHlwZTsKCgkJLy8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2RlcwoJCWlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkgewoKCQkJLy8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rcwoJCQluYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lOwoJCQlob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTsKCQl9CgoJCWlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJaWYgKCBob29rcyAmJiAic2V0IiBpbiBob29rcyAmJgoJCQkJKCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoKCQkJcmV0dXJuICggZWxlbVsgbmFtZSBdID0gdmFsdWUgKTsKCQl9CgoJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkgewoJCQlyZXR1cm4gcmV0OwoJCX0KCgkJcmV0dXJuIGVsZW1bIG5hbWUgXTsKCX0sCgoJcHJvcEhvb2tzOiB7CgkJdGFiSW5kZXg6IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCgkJCQkvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5CgkJCQkvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGUKCQkJCS8vIGNvcnJlY3QgdmFsdWUgd2hlbiBpdCBoYXNuJ3QgYmVlbiBleHBsaWNpdGx5IHNldAoJCQkJLy8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTQxMTE2MjMzMzQ3L2h0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvCgkJCQkvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKQoJCQkJdmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInRhYmluZGV4IiApOwoKCQkJCWlmICggdGFiaW5kZXggKSB7CgkJCQkJcmV0dXJuIHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKTsKCQkJCX0KCgkJCQlpZiAoCgkJCQkJcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwKCQkJCQlyY2xpY2thYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJgoJCQkJCWVsZW0uaHJlZgoJCQkJKSB7CgkJCQkJcmV0dXJuIDA7CgkJCQl9CgoJCQkJcmV0dXJuIC0xOwoJCQl9CgkJfQoJfSwKCglwcm9wRml4OiB7CgkJImZvciI6ICJodG1sRm9yIiwKCQkiY2xhc3MiOiAiY2xhc3NOYW1lIgoJfQp9ICk7CgovLyBTdXBwb3J0OiBJRSA8PTExIG9ubHkKLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5Ci8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWQKLy8gb24gdGhlIG9wdGlvbgovLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZAovLyB3aGVuIGluIGFuIG9wdGdyb3VwCi8vIGVzbGludCBydWxlICJuby11bnVzZWQtZXhwcmVzc2lvbnMiIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvZGUKLy8gc2luY2UgaXQgY29uc2lkZXJzIHN1Y2ggYWNjZXNzaW9ucyBub29wCmlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7CglqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0gewoJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkvKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiAib2ZmIiAqLwoKCQkJdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsKCQkJaWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7CgkJCQlwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQl9CgkJCXJldHVybiBudWxsOwoJCX0sCgkJc2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCgkJCS8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6ICJvZmYiICovCgoJCQl2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlOwoJCQlpZiAoIHBhcmVudCApIHsKCQkJCXBhcmVudC5zZWxlY3RlZEluZGV4OwoKCQkJCWlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7CgkJCQkJcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCX0KCQkJfQoJCX0KCX07Cn0KCmpRdWVyeS5lYWNoKCBbCgkidGFiSW5kZXgiLAoJInJlYWRPbmx5IiwKCSJtYXhMZW5ndGgiLAoJImNlbGxTcGFjaW5nIiwKCSJjZWxsUGFkZGluZyIsCgkicm93U3BhbiIsCgkiY29sU3BhbiIsCgkidXNlTWFwIiwKCSJmcmFtZUJvcmRlciIsCgkiY29udGVudEVkaXRhYmxlIgpdLCBmdW5jdGlvbigpIHsKCWpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7Cn0gKTsKCgoKCgkvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZSBhY2NvcmRpbmcgdG8gSFRNTCBzcGVjCgkvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmZyYXN0cnVjdHVyZS5odG1sI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlCglmdW5jdGlvbiBzdHJpcEFuZENvbGxhcHNlKCB2YWx1ZSApIHsKCQl2YXIgdG9rZW5zID0gdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTsKCQlyZXR1cm4gdG9rZW5zLmpvaW4oICIgIiApOwoJfQoKCmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkgewoJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlICYmIGVsZW0uZ2V0QXR0cmlidXRlKCAiY2xhc3MiICkgfHwgIiI7Cn0KCmpRdWVyeS5mbi5leHRlbmQoIHsKCWFkZENsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQlpID0gMDsKCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7CgkJCX0gKTsKCQl9CgoJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiB2YWx1ZSApIHsKCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107CgoJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQljdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7CgkJCQljdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggIiAiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArICIgIiApOwoKCQkJCWlmICggY3VyICkgewoJCQkJCWogPSAwOwoJCQkJCXdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7CgkJCQkJCWlmICggY3VyLmluZGV4T2YoICIgIiArIGNsYXp6ICsgIiAiICkgPCAwICkgewoJCQkJCQkJY3VyICs9IGNsYXp6ICsgIiAiOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLgoJCQkJCWZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTsKCQkJCQlpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkgewoJCQkJCQllbGVtLnNldEF0dHJpYnV0ZSggImNsYXNzIiwgZmluYWxWYWx1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCXJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQlpID0gMDsKCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7CgkJCX0gKTsKCQl9CgoJCWlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCXJldHVybiB0aGlzLmF0dHIoICJjbGFzcyIsICIiICk7CgkJfQoKCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgdmFsdWUgKSB7CgkJCWNsYXNzZXMgPSB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdOwoKCQkJd2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkgewoJCQkJY3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApOwoKCQkJCS8vIFRoaXMgZXhwcmVzc2lvbiBpcyBoZXJlIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgYWRkQ2xhc3MpCgkJCQljdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggIiAiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArICIgIiApOwoKCQkJCWlmICggY3VyICkgewoJCQkJCWogPSAwOwoJCQkJCXdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7CgoJCQkJCQkvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzCgkJCQkJCXdoaWxlICggY3VyLmluZGV4T2YoICIgIiArIGNsYXp6ICsgIiAiICkgPiAtMSApIHsKCQkJCQkJCWN1ciA9IGN1ci5yZXBsYWNlKCAiICIgKyBjbGF6eiArICIgIiwgIiAiICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuCgkJCQkJZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApOwoJCQkJCWlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7CgkJCQkJCWVsZW0uc2V0QXR0cmlidXRlKCAiY2xhc3MiLCBmaW5hbFZhbHVlICk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7CgkJdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CgoJCWlmICggdHlwZW9mIHN0YXRlVmFsID09PSAiYm9vbGVhbiIgJiYgdHlwZSA9PT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApOwoJCX0KCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcygKCQkJCQl2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLAoJCQkJCXN0YXRlVmFsCgkJCQkpOwoJCQl9ICk7CgkJfQoKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJdmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lczsKCgkJCWlmICggdHlwZSA9PT0gInN0cmluZyIgKSB7CgoJCQkJLy8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXMKCQkJCWkgPSAwOwoJCQkJc2VsZiA9IGpRdWVyeSggdGhpcyApOwoJCQkJY2xhc3NOYW1lcyA9IHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107CgoJCQkJd2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7CgoJCQkJCS8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdAoJCQkJCWlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7CgkJCQkJCXNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lCgkJCX0gZWxzZSBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gImJvb2xlYW4iICkgewoJCQkJY2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTsKCQkJCWlmICggY2xhc3NOYW1lICkgewoKCQkJCQkvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0CgkJCQkJZGF0YVByaXYuc2V0KCB0aGlzLCAiX19jbGFzc05hbWVfXyIsIGNsYXNzTmFtZSApOwoJCQkJfQoKCQkJCS8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsCgkJCQkvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLgoJCQkJLy8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSwKCQkJCS8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC4KCQkJCWlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7CgkJCQkJdGhpcy5zZXRBdHRyaWJ1dGUoICJjbGFzcyIsCgkJCQkJCWNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPwoJCQkJCQkiIiA6CgkJCQkJCWRhdGFQcml2LmdldCggdGhpcywgIl9fY2xhc3NOYW1lX18iICkgfHwgIiIKCQkJCQkpOwoJCQkJfQoJCQl9CgkJfSApOwoJfSwKCgloYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXZhciBjbGFzc05hbWUsIGVsZW0sCgkJCWkgPSAwOwoKCQljbGFzc05hbWUgPSAiICIgKyBzZWxlY3RvciArICIgIjsKCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJKCAiICIgKyBzdHJpcEFuZENvbGxhcHNlKCBnZXRDbGFzcyggZWxlbSApICkgKyAiICIgKS5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xICkgewoJCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0gKTsKCgoKCnZhciBycmV0dXJuID0gL1xyL2c7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7Cgl2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl2YXIgaG9va3MsIHJldCwgaXNGdW5jdGlvbiwKCQkJZWxlbSA9IHRoaXNbIDAgXTsKCgkJaWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJaWYgKCBlbGVtICkgewoJCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8CgkJCQkJalF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTsKCgkJCQlpZiAoIGhvb2tzICYmCgkJCQkJImdldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgInZhbHVlIiApICkgIT09IHVuZGVmaW5lZAoJCQkJKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQlyZXQgPSBlbGVtLnZhbHVlOwoKCQkJCS8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXMKCQkJCWlmICggdHlwZW9mIHJldCA9PT0gInN0cmluZyIgKSB7CgkJCQkJcmV0dXJuIHJldC5yZXBsYWNlKCBycmV0dXJuLCAiIiApOwoJCQkJfQoKCQkJCS8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlcgoJCQkJcmV0dXJuIHJldCA9PSBudWxsID8gIiIgOiByZXQ7CgkJCX0KCgkJCXJldHVybjsKCQl9CgoJCWlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTsKCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCXZhciB2YWw7CgoJCQlpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggaXNGdW5jdGlvbiApIHsKCQkJCXZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7CgkJCX0gZWxzZSB7CgkJCQl2YWwgPSB2YWx1ZTsKCQkJfQoKCQkJLy8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgIiI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmcKCQkJaWYgKCB2YWwgPT0gbnVsbCApIHsKCQkJCXZhbCA9ICIiOwoKCQkJfSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gIm51bWJlciIgKSB7CgkJCQl2YWwgKz0gIiI7CgoJCQl9IGVsc2UgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsICkgKSB7CgkJCQl2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCQlyZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICIiIDogdmFsdWUgKyAiIjsKCQkJCX0gKTsKCQkJfQoKCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZwoJCQlpZiAoICFob29rcyB8fCAhKCAic2V0IiBpbiBob29rcyApIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCAidmFsdWUiICkgPT09IHVuZGVmaW5lZCApIHsKCQkJCXRoaXMudmFsdWUgPSB2YWw7CgkJCX0KCQl9ICk7Cgl9Cn0gKTsKCmpRdWVyeS5leHRlbmQoIHsKCXZhbEhvb2tzOiB7CgkJb3B0aW9uOiB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkJdmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sICJ2YWx1ZSIgKTsKCQkJCXJldHVybiB2YWwgIT0gbnVsbCA/CgkJCQkJdmFsIDoKCgkJCQkJLy8gU3VwcG9ydDogSUUgPD0xMCAtIDExIG9ubHkKCQkJCQkvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpCgkJCQkJLy8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UKCQkJCQkvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2Utd2hpdGVzcGFjZQoJCQkJCXN0cmlwQW5kQ29sbGFwc2UoIGpRdWVyeS50ZXh0KCBlbGVtICkgKTsKCQkJfQoJCX0sCgkJc2VsZWN0OiB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgdmFsdWUsIG9wdGlvbiwgaSwKCQkJCQlvcHRpb25zID0gZWxlbS5vcHRpb25zLAoJCQkJCWluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LAoJCQkJCW9uZSA9IGVsZW0udHlwZSA9PT0gInNlbGVjdC1vbmUiLAoJCQkJCXZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSwKCQkJCQltYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aDsKCgkJCQlpZiAoIGluZGV4IDwgMCApIHsKCQkJCQlpID0gbWF4OwoKCQkJCX0gZWxzZSB7CgkJCQkJaSA9IG9uZSA/IGluZGV4IDogMDsKCQkJCX0KCgkJCQkvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zCgkJCQlmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHsKCQkJCQlvcHRpb24gPSBvcHRpb25zWyBpIF07CgoJCQkJCS8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5CgkJCQkJLy8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpCgkJCQkJaWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmCgoJCQkJCQkJLy8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cAoJCQkJCQkJIW9wdGlvbi5kaXNhYmxlZCAmJgoJCQkJCQkJKCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwKCQkJCQkJCQkhalF1ZXJ5Lm5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgIm9wdGdyb3VwIiApICkgKSB7CgoJCQkJCQkvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uCgkJCQkJCXZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTsKCgkJCQkJCS8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzCgkJCQkJCWlmICggb25lICkgewoJCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCQl9CgoJCQkJCQkvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheQoJCQkJCQl2YWx1ZXMucHVzaCggdmFsdWUgKTsKCQkJCQl9CgkJCQl9CgoJCQkJcmV0dXJuIHZhbHVlczsKCQkJfSwKCgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJdmFyIG9wdGlvblNldCwgb3B0aW9uLAoJCQkJCW9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsCgkJCQkJdmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSwKCQkJCQlpID0gb3B0aW9ucy5sZW5ndGg7CgoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJb3B0aW9uID0gb3B0aW9uc1sgaSBdOwoKCQkJCQkvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqLwoKCQkJCQlpZiAoIG9wdGlvbi5zZWxlY3RlZCA9CgkJCQkJCWpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTEKCQkJCQkpIHsKCQkJCQkJb3B0aW9uU2V0ID0gdHJ1ZTsKCQkJCQl9CgoJCQkJCS8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi8KCQkJCX0KCgkJCQkvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldAoJCQkJaWYgKCAhb3B0aW9uU2V0ICkgewoJCQkJCWVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xOwoJCQkJfQoJCQkJcmV0dXJuIHZhbHVlczsKCQkJfQoJCX0KCX0KfSApOwoKLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXIKalF1ZXJ5LmVhY2goIFsgInJhZGlvIiwgImNoZWNrYm94IiBdLCBmdW5jdGlvbigpIHsKCWpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0gewoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkgewoJCQkJcmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTsKCQkJfQoJCX0KCX07CglpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7CgkJalF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSBudWxsID8gIm9uIiA6IGVsZW0udmFsdWU7CgkJfTsKCX0KfSApOwoKCgoKLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvbgoKCnZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLzsKCmpRdWVyeS5leHRlbmQoIGpRdWVyeS5ldmVudCwgewoKCXRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkgewoKCQl2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLAoJCQlldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSwKCQkJdHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgInR5cGUiICkgPyBldmVudC50eXBlIDogZXZlbnQsCgkJCW5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsICJuYW1lc3BhY2UiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoICIuIiApIDogW107CgoJCWN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50OwoKCQkvLyBEb24ndCBkbyBldmVudHMgb24gdGV4dCBhbmQgY29tbWVudCBub2RlcwoJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3cKCQlpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggdHlwZS5pbmRleE9mKCAiLiIgKSA+IC0xICkgewoKCQkJLy8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKQoJCQluYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggIi4iICk7CgkJCXR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7CgkJCW5hbWVzcGFjZXMuc29ydCgpOwoJCX0KCQlvbnR5cGUgPSB0eXBlLmluZGV4T2YoICI6IiApIDwgMCAmJiAib24iICsgdHlwZTsKCgkJLy8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nCgkJZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/CgkJCWV2ZW50IDoKCQkJbmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSAib2JqZWN0IiAmJiBldmVudCApOwoKCQkvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpCgkJZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7CgkJZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCAiLiIgKTsKCQlldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID8KCQkJbmV3IFJlZ0V4cCggIihefFxcLikiICsgbmFtZXNwYWNlcy5qb2luKCAiXFwuKD86LipcXC58KSIgKSArICIoXFwufCQpIiApIDoKCQkJbnVsbDsKCgkJLy8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkCgkJZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkOwoJCWlmICggIWV2ZW50LnRhcmdldCApIHsKCQkJZXZlbnQudGFyZ2V0ID0gZWxlbTsKCQl9CgoJCS8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3QKCQlkYXRhID0gZGF0YSA9PSBudWxsID8KCQkJWyBldmVudCBdIDoKCQkJalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7CgoJCS8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXMKCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpCgkJLy8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNCkKCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkgewoKCQkJYnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7CgkJCWlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7CgkJCQljdXIgPSBjdXIucGFyZW50Tm9kZTsKCQkJfQoJCQlmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgkJCQlldmVudFBhdGgucHVzaCggY3VyICk7CgkJCQl0bXAgPSBjdXI7CgkJCX0KCgkJCS8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKQoJCQlpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHsKCQkJCWV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTsKCQkJfQoJCX0KCgkJLy8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aAoJCWkgPSAwOwoJCXdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQlldmVudC50eXBlID0gaSA+IDEgPwoJCQkJYnViYmxlVHlwZSA6CgkJCQlzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7CgoJCQkvLyBqUXVlcnkgaGFuZGxlcgoJCQloYW5kbGUgPSAoIGRhdGFQcml2LmdldCggY3VyLCAiZXZlbnRzIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJgoJCQkJZGF0YVByaXYuZ2V0KCBjdXIsICJoYW5kbGUiICk7CgkJCWlmICggaGFuZGxlICkgewoJCQkJaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTsKCQkJfQoKCQkJLy8gTmF0aXZlIGhhbmRsZXIKCQkJaGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07CgkJCWlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBhY2NlcHREYXRhKCBjdXIgKSApIHsKCQkJCWV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7CgkJCQlpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7CgkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCX0KCQkJfQoJCX0KCQlldmVudC50eXBlID0gdHlwZTsKCgkJLy8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vdwoJCWlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7CgoJCQlpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHwKCQkJCXNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSApICYmCgkJCQlhY2NlcHREYXRhKCBlbGVtICkgKSB7CgoJCQkJLy8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBldmVudC4KCQkJCS8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MCkKCQkJCWlmICggb250eXBlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7CgoJCQkJCS8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2QKCQkJCQl0bXAgPSBlbGVtWyBvbnR5cGUgXTsKCgkJCQkJaWYgKCB0bXAgKSB7CgkJCQkJCWVsZW1bIG9udHlwZSBdID0gbnVsbDsKCQkJCQl9CgoJCQkJCS8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlCgkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7CgkJCQkJZWxlbVsgdHlwZSBdKCk7CgkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDsKCgkJCQkJaWYgKCB0bXAgKSB7CgkJCQkJCWVsZW1bIG9udHlwZSBdID0gdG1wOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIGV2ZW50LnJlc3VsdDsKCX0sCgoJLy8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lCgkvLyBVc2VkIG9ubHkgZm9yIGBmb2N1cyhpbiB8IG91dClgIGV2ZW50cwoJc2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHsKCQl2YXIgZSA9IGpRdWVyeS5leHRlbmQoCgkJCW5ldyBqUXVlcnkuRXZlbnQoKSwKCQkJZXZlbnQsCgkJCXsKCQkJCXR5cGU6IHR5cGUsCgkJCQlpc1NpbXVsYXRlZDogdHJ1ZQoJCQl9CgkJKTsKCgkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTsKCX0KCn0gKTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCgl0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTsKCQl9ICk7Cgl9LAoJdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkgewoJCXZhciBlbGVtID0gdGhpc1sgMCBdOwoJCWlmICggZWxlbSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7CgkJfQoJfQp9ICk7CgoKalF1ZXJ5LmVhY2goICggImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrICIgKwoJIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlICIgKwoJImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnUiICkuc3BsaXQoICIgIiApLAoJZnVuY3Rpb24oIGksIG5hbWUgKSB7CgoJLy8gSGFuZGxlIGV2ZW50IGJpbmRpbmcKCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkgewoJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/CgkJCXRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOgoJCQl0aGlzLnRyaWdnZXIoIG5hbWUgKTsKCX07Cn0gKTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCWhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHsKCQlyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTsKCX0KfSApOwoKCgoKc3VwcG9ydC5mb2N1c2luID0gIm9uZm9jdXNpbiIgaW4gd2luZG93OwoKCi8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00NAovLyBGaXJlZm94IGRvZXNuJ3QgaGF2ZSBmb2N1cyhpbiB8IG91dCkgZXZlbnRzCi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3Ci8vCi8vIFN1cHBvcnQ6IENocm9tZSA8PTQ4IC0gNDksIFNhZmFyaSA8PTkuMCAtIDkuMQovLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cywKLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyCi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3CmlmICggIXN1cHBvcnQuZm9jdXNpbiApIHsKCWpRdWVyeS5lYWNoKCB7IGZvY3VzOiAiZm9jdXNpbiIsIGJsdXI6ICJmb2N1c291dCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHsKCgkJLy8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXQKCQl2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSApOwoJCX07CgoJCWpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHsKCQkJc2V0dXA6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAoJCQkJCWF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApOwoKCQkJCWlmICggIWF0dGFjaGVzICkgewoJCQkJCWRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7CgkJCQl9CgkJCQlkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTsKCQkJfSwKCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAoJCQkJCWF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApIC0gMTsKCgkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQlkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApOwoJCQkJCWRhdGFQcml2LnJlbW92ZSggZG9jLCBmaXggKTsKCgkJCQl9IGVsc2UgewoJCQkJCWRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7CgkJCQl9CgkJCX0KCQl9OwoJfSApOwp9CnZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjsKCnZhciBub25jZSA9IGpRdWVyeS5ub3coKTsKCnZhciBycXVlcnkgPSAoIC9cPy8gKTsKCgoKLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZwpqUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHsKCXZhciB4bWw7CglpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAic3RyaW5nIiApIHsKCQlyZXR1cm4gbnVsbDsKCX0KCgkvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seQoJLy8gSUUgdGhyb3dzIG9uIHBhcnNlRnJvbVN0cmluZyB3aXRoIGludmFsaWQgaW5wdXQuCgl0cnkgewoJCXhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgInRleHQveG1sIiApOwoJfSBjYXRjaCAoIGUgKSB7CgkJeG1sID0gdW5kZWZpbmVkOwoJfQoKCWlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJwYXJzZXJlcnJvciIgKS5sZW5ndGggKSB7CgkJalF1ZXJ5LmVycm9yKCAiSW52YWxpZCBYTUw6ICIgKyBkYXRhICk7Cgl9CglyZXR1cm4geG1sOwp9OwoKCnZhcgoJcmJyYWNrZXQgPSAvXFtcXSQvLAoJckNSTEYgPSAvXHI/XG4vZywKCXJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSwKCXJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTsKCmZ1bmN0aW9uIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIG9iaiwgdHJhZGl0aW9uYWwsIGFkZCApIHsKCXZhciBuYW1lOwoKCWlmICggalF1ZXJ5LmlzQXJyYXkoIG9iaiApICkgewoKCQkvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS4KCQlqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHsKCQkJaWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHsKCgkJCQkvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuCgkJCQlhZGQoIHByZWZpeCwgdiApOwoKCQkJfSBlbHNlIHsKCgkJCQkvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC4KCQkJCWJ1aWxkUGFyYW1zKAoJCQkJCXByZWZpeCArICJbIiArICggdHlwZW9mIHYgPT09ICJvYmplY3QiICYmIHYgIT0gbnVsbCA/IGkgOiAiIiApICsgIl0iLAoJCQkJCXYsCgkJCQkJdHJhZGl0aW9uYWwsCgkJCQkJYWRkCgkJCQkpOwoJCQl9CgkJfSApOwoKCX0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJvYmplY3QiICkgewoKCQkvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uCgkJZm9yICggbmFtZSBpbiBvYmogKSB7CgkJCWJ1aWxkUGFyYW1zKCBwcmVmaXggKyAiWyIgKyBuYW1lICsgIl0iLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApOwoJCX0KCgl9IGVsc2UgewoKCQkvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uCgkJYWRkKCBwcmVmaXgsIG9iaiApOwoJfQp9CgovLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZgovLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmcKalF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkgewoJdmFyIHByZWZpeCwKCQlzID0gW10sCgkJYWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWVPckZ1bmN0aW9uICkgewoKCQkJLy8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCB1c2UgaXRzIHJldHVybiB2YWx1ZQoJCQl2YXIgdmFsdWUgPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWVPckZ1bmN0aW9uICkgPwoJCQkJdmFsdWVPckZ1bmN0aW9uKCkgOgoJCQkJdmFsdWVPckZ1bmN0aW9uOwoKCQkJc1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyAiPSIgKwoJCQkJZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSApOwoJCX07CgoJLy8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy4KCWlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7CgoJCS8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50cwoJCWpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHsKCQkJYWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTsKCQl9ICk7CgoJfSBlbHNlIHsKCgkJLy8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgIm9sZCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyCgkJLy8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuCgkJZm9yICggcHJlZml4IGluIGEgKSB7CgkJCWJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7CgkJfQoJfQoKCS8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb24KCXJldHVybiBzLmpvaW4oICImIiApOwp9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJc2VyaWFsaXplOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTsKCX0sCglzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCgkJCS8vIENhbiBhZGQgcHJvcEhvb2sgZm9yICJlbGVtZW50cyIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzCgkJCXZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCAiZWxlbWVudHMiICk7CgkJCXJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzOwoJCX0gKQoJCS5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQl2YXIgdHlwZSA9IHRoaXMudHlwZTsKCgkJCS8vIFVzZSAuaXMoICI6ZGlzYWJsZWQiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3MKCQkJcmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoICI6ZGlzYWJsZWQiICkgJiYKCQkJCXJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiYKCQkJCSggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTsKCQl9ICkKCQkubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHsKCQkJdmFyIHZhbCA9IGpRdWVyeSggdGhpcyApLnZhbCgpOwoKCQkJaWYgKCB2YWwgPT0gbnVsbCApIHsKCQkJCXJldHVybiBudWxsOwoJCQl9CgoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWwgKSApIHsKCQkJCXJldHVybiBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7CgkJCQkJcmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCAiXHJcbiIgKSB9OwoJCQkJfSApOwoJCQl9CgoJCQlyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsICJcclxuIiApIH07CgkJfSApLmdldCgpOwoJfQp9ICk7CgoKdmFyCglyMjAgPSAvJTIwL2csCglyaGFzaCA9IC8jLiokLywKCXJhbnRpQ2FjaGUgPSAvKFs/Jl0pXz1bXiZdKi8sCglyaGVhZGVycyA9IC9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKSQvbWcsCgoJLy8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uCglybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLAoJcm5vQ29udGVudCA9IC9eKD86R0VUfEhFQUQpJC8sCglycHJvdG9jb2wgPSAvXlwvXC8vLAoKCS8qIFByZWZpbHRlcnMKCSAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpCgkgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOgoJICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydAoJICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKQoJICogMykga2V5IGlzIHRoZSBkYXRhVHlwZQoJICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCAiKiIgY2FuIGJlIHVzZWQKCSAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gIioiIGlmIG5lZWRlZAoJICovCglwcmVmaWx0ZXJzID0ge30sCgoJLyogVHJhbnNwb3J0cyBiaW5kaW5ncwoJICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZQoJICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCAiKiIgY2FuIGJlIHVzZWQKCSAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvICIqIiBpZiBuZWVkZWQKCSAqLwoJdHJhbnNwb3J0cyA9IHt9LAoKCS8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvbgoJYWxsVHlwZXMgPSAiKi8iLmNvbmNhdCggIioiICksCgoJLy8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luCglvcmlnaW5BbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiYSIgKTsKCW9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjsKCi8vIEJhc2UgImNvbnN0cnVjdG9yIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0CmZ1bmN0aW9uIGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlICkgewoKCS8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gIioiCglyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHsKCgkJaWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSAic3RyaW5nIiApIHsKCQkJZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjsKCQkJZGF0YVR5cGVFeHByZXNzaW9uID0gIioiOwoJCX0KCgkJdmFyIGRhdGFUeXBlLAoJCQlpID0gMCwKCQkJZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTsKCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkgewoKCQkJLy8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvbgoJCQl3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7CgoJCQkJLy8gUHJlcGVuZCBpZiByZXF1ZXN0ZWQKCQkJCWlmICggZGF0YVR5cGVbIDAgXSA9PT0gIisiICkgewoJCQkJCWRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCAiKiI7CgkJCQkJKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7CgoJCQkJLy8gT3RoZXJ3aXNlIGFwcGVuZAoJCQkJfSBlbHNlIHsKCQkJCQkoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTsKCQkJCX0KCQkJfQoJCX0KCX07Cn0KCi8vIEJhc2UgaW5zcGVjdGlvbiBmdW5jdGlvbiBmb3IgcHJlZmlsdGVycyBhbmQgdHJhbnNwb3J0cwpmdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkgewoKCXZhciBpbnNwZWN0ZWQgPSB7fSwKCQlzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTsKCglmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHsKCQl2YXIgc2VsZWN0ZWQ7CgkJaW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTsKCQlqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkgewoJCQl2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApOwoJCQlpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSAic3RyaW5nIiAmJgoJCQkJIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkgewoKCQkJCW9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTsKCQkJCWluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTsKCQkJCXJldHVybiBmYWxzZTsKCQkJfSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHsKCQkJCXJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTsKCQkJfQoJCX0gKTsKCQlyZXR1cm4gc2VsZWN0ZWQ7Cgl9CgoJcmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyAiKiIgXSAmJiBpbnNwZWN0KCAiKiIgKTsKfQoKLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zCi8vIHRoYXQgdGFrZXMgImZsYXQiIG9wdGlvbnMgKG5vdCB0byBiZSBkZWVwIGV4dGVuZGVkKQovLyBGaXhlcyAjOTg4NwpmdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHsKCXZhciBrZXksIGRlZXAsCgkJZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9OwoKCWZvciAoIGtleSBpbiBzcmMgKSB7CgkJaWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7CgkJCSggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07CgkJfQoJfQoJaWYgKCBkZWVwICkgewoJCWpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApOwoJfQoKCXJldHVybiB0YXJnZXQ7Cn0KCi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDoKICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSkKICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlCiAqLwpmdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkgewoKCXZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSwKCQljb250ZW50cyA9IHMuY29udGVudHMsCgkJZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7CgoJLy8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3MKCXdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09ICIqIiApIHsKCQlkYXRhVHlwZXMuc2hpZnQoKTsKCQlpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7CgkJCWN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggIkNvbnRlbnQtVHlwZSIgKTsKCQl9Cgl9CgoJLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlCglpZiAoIGN0ICkgewoJCWZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7CgkJCWlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7CgkJCQlkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApOwoJCQkJYnJlYWs7CgkJCX0KCQl9Cgl9CgoJLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlCglpZiAoIGRhdGFUeXBlc1sgMCBdIGluIHJlc3BvbnNlcyApIHsKCQlmaW5hbERhdGFUeXBlID0gZGF0YVR5cGVzWyAwIF07Cgl9IGVsc2UgewoKCQkvLyBUcnkgY29udmVydGlibGUgZGF0YVR5cGVzCgkJZm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7CgkJCWlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArICIgIiArIGRhdGFUeXBlc1sgMCBdIF0gKSB7CgkJCQlmaW5hbERhdGFUeXBlID0gdHlwZTsKCQkJCWJyZWFrOwoJCQl9CgkJCWlmICggIWZpcnN0RGF0YVR5cGUgKSB7CgkJCQlmaXJzdERhdGFUeXBlID0gdHlwZTsKCQkJfQoJCX0KCgkJLy8gT3IganVzdCB1c2UgZmlyc3Qgb25lCgkJZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTsKCX0KCgkvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlCgkvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZAoJLy8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZQoJaWYgKCBmaW5hbERhdGFUeXBlICkgewoJCWlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7CgkJCWRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7CgkJfQoJCXJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTsKCX0KfQoKLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZQogKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2UKICovCmZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHsKCXZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LAoJCWNvbnZlcnRlcnMgPSB7fSwKCgkJLy8gV29yayB3aXRoIGEgY29weSBvZiBkYXRhVHlwZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vZGlmeSBpdCBmb3IgY29udmVyc2lvbgoJCWRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7CgoJLy8gQ3JlYXRlIGNvbnZlcnRlcnMgbWFwIHdpdGggbG93ZXJjYXNlZCBrZXlzCglpZiAoIGRhdGFUeXBlc1sgMSBdICkgewoJCWZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkgewoJCQljb252ZXJ0ZXJzWyBjb252LnRvTG93ZXJDYXNlKCkgXSA9IHMuY29udmVydGVyc1sgY29udiBdOwoJCX0KCX0KCgljdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7CgoJLy8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGUKCXdoaWxlICggY3VycmVudCApIHsKCgkJaWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7CgkJCWpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlOwoJCX0KCgkJLy8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWQKCQlpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7CgkJCXJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApOwoJCX0KCgkJcHJldiA9IGN1cnJlbnQ7CgkJY3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpOwoKCQlpZiAoIGN1cnJlbnQgKSB7CgoJCQkvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvCgkJCWlmICggY3VycmVudCA9PT0gIioiICkgewoKCQkJCWN1cnJlbnQgPSBwcmV2OwoKCQkJLy8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudAoJCQl9IGVsc2UgaWYgKCBwcmV2ICE9PSAiKiIgJiYgcHJldiAhPT0gY3VycmVudCApIHsKCgkJCQkvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlcgoJCQkJY29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyAiICIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgIiogIiArIGN1cnJlbnQgXTsKCgkJCQkvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpcgoJCQkJaWYgKCAhY29udiApIHsKCQkJCQlmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkgewoKCQkJCQkJLy8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50CgkJCQkJCXRtcCA9IGNvbnYyLnNwbGl0KCAiICIgKTsKCQkJCQkJaWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHsKCgkJCQkJCQkvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXQKCQkJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgdG1wWyAwIF0gXSB8fAoJCQkJCQkJCWNvbnZlcnRlcnNbICIqICIgKyB0bXBbIDAgXSBdOwoJCQkJCQkJaWYgKCBjb252ICkgewoKCQkJCQkJCQkvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzCgkJCQkJCQkJaWYgKCBjb252ID09PSB0cnVlICkgewoJCQkJCQkJCQljb252ID0gY29udmVydGVyc1sgY29udjIgXTsKCgkJCQkJCQkJLy8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZQoJCQkJCQkJCX0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7CgkJCQkJCQkJCWN1cnJlbnQgPSB0bXBbIDAgXTsKCQkJCQkJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7CgkJCQkJCQkJfQoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKQoJCQkJaWYgKCBjb252ICE9PSB0cnVlICkgewoKCQkJCQkvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtCgkJCQkJaWYgKCBjb252ICYmIHMudGhyb3dzICkgewoJCQkJCQlyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdHJ5IHsKCQkJCQkJCXJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTsKCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCXN0YXRlOiAicGFyc2VyZXJyb3IiLAoJCQkJCQkJCWVycm9yOiBjb252ID8gZSA6ICJObyBjb252ZXJzaW9uIGZyb20gIiArIHByZXYgKyAiIHRvICIgKyBjdXJyZW50CgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoKCXJldHVybiB7IHN0YXRlOiAic3VjY2VzcyIsIGRhdGE6IHJlc3BvbnNlIH07Cn0KCmpRdWVyeS5leHRlbmQoIHsKCgkvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXMKCWFjdGl2ZTogMCwKCgkvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0CglsYXN0TW9kaWZpZWQ6IHt9LAoJZXRhZzoge30sCgoJYWpheFNldHRpbmdzOiB7CgkJdXJsOiBsb2NhdGlvbi5ocmVmLAoJCXR5cGU6ICJHRVQiLAoJCWlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGxvY2F0aW9uLnByb3RvY29sICksCgkJZ2xvYmFsOiB0cnVlLAoJCXByb2Nlc3NEYXRhOiB0cnVlLAoJCWFzeW5jOiB0cnVlLAoJCWNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKCgkJLyoKCQl0aW1lb3V0OiAwLAoJCWRhdGE6IG51bGwsCgkJZGF0YVR5cGU6IG51bGwsCgkJdXNlcm5hbWU6IG51bGwsCgkJcGFzc3dvcmQ6IG51bGwsCgkJY2FjaGU6IG51bGwsCgkJdGhyb3dzOiBmYWxzZSwKCQl0cmFkaXRpb25hbDogZmFsc2UsCgkJaGVhZGVyczoge30sCgkJKi8KCgkJYWNjZXB0czogewoJCQkiKiI6IGFsbFR5cGVzLAoJCQl0ZXh0OiAidGV4dC9wbGFpbiIsCgkJCWh0bWw6ICJ0ZXh0L2h0bWwiLAoJCQl4bWw6ICJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIiwKCQkJanNvbjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCIKCQl9LAoKCQljb250ZW50czogewoJCQl4bWw6IC9cYnhtbFxiLywKCQkJaHRtbDogL1xiaHRtbC8sCgkJCWpzb246IC9cYmpzb25cYi8KCQl9LAoKCQlyZXNwb25zZUZpZWxkczogewoJCQl4bWw6ICJyZXNwb25zZVhNTCIsCgkJCXRleHQ6ICJyZXNwb25zZVRleHQiLAoJCQlqc29uOiAicmVzcG9uc2VKU09OIgoJCX0sCgoJCS8vIERhdGEgY29udmVydGVycwoJCS8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCAiKiIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlCgkJY29udmVydGVyczogewoKCQkJLy8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0CgkJCSIqIHRleHQiOiBTdHJpbmcsCgoJCQkvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbikKCQkJInRleHQgaHRtbCI6IHRydWUsCgoJCQkvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uCgkJCSJ0ZXh0IGpzb24iOiBKU09OLnBhcnNlLAoKCQkJLy8gUGFyc2UgdGV4dCBhcyB4bWwKCQkJInRleHQgeG1sIjogalF1ZXJ5LnBhcnNlWE1MCgkJfSwKCgkJLy8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDoKCQkvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmCgkJLy8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmUKCQkvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZCkKCQlmbGF0T3B0aW9uczogewoJCQl1cmw6IHRydWUsCgkJCWNvbnRleHQ6IHRydWUKCQl9Cgl9LAoKCS8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0CgkvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuCgkvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLgoJYWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHsKCQlyZXR1cm4gc2V0dGluZ3MgPwoKCQkJLy8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3QKCQkJYWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOgoKCQkJLy8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5ncwoJCQlhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTsKCX0sCgoJYWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksCglhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSwKCgkvLyBNYWluIG1ldGhvZAoJYWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHsKCgkJLy8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmUKCQlpZiAoIHR5cGVvZiB1cmwgPT09ICJvYmplY3QiICkgewoJCQlvcHRpb25zID0gdXJsOwoJCQl1cmwgPSB1bmRlZmluZWQ7CgkJfQoKCQkvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdAoJCW9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKCQl2YXIgdHJhbnNwb3J0LAoKCQkJLy8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbQoJCQljYWNoZVVSTCwKCgkJCS8vIFJlc3BvbnNlIGhlYWRlcnMKCQkJcmVzcG9uc2VIZWFkZXJzU3RyaW5nLAoJCQlyZXNwb25zZUhlYWRlcnMsCgoJCQkvLyB0aW1lb3V0IGhhbmRsZQoJCQl0aW1lb3V0VGltZXIsCgoJCQkvLyBVcmwgY2xlYW51cCB2YXIKCQkJdXJsQW5jaG9yLAoKCQkJLy8gUmVxdWVzdCBzdGF0ZSAoYmVjb21lcyBmYWxzZSB1cG9uIHNlbmQgYW5kIHRydWUgdXBvbiBjb21wbGV0aW9uKQoJCQljb21wbGV0ZWQsCgoJCQkvLyBUbyBrbm93IGlmIGdsb2JhbCBldmVudHMgYXJlIHRvIGJlIGRpc3BhdGNoZWQKCQkJZmlyZUdsb2JhbHMsCgoJCQkvLyBMb29wIHZhcmlhYmxlCgkJCWksCgoJCQkvLyB1bmNhY2hlZCBwYXJ0IG9mIHRoZSB1cmwKCQkJdW5jYWNoZWQsCgoJCQkvLyBDcmVhdGUgdGhlIGZpbmFsIG9wdGlvbnMgb2JqZWN0CgkJCXMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLAoKCQkJLy8gQ2FsbGJhY2tzIGNvbnRleHQKCQkJY2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsCgoJCQkvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uCgkJCWdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJgoJCQkJKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID8KCQkJCQlqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDoKCQkJCQlqUXVlcnkuZXZlbnQsCgoJCQkvLyBEZWZlcnJlZHMKCQkJZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJY29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKSwKCgkJCS8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzCgkJCXN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sCgoJCQkvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKQoJCQlyZXF1ZXN0SGVhZGVycyA9IHt9LAoJCQlyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sCgoJCQkvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2UKCQkJc3RyQWJvcnQgPSAiY2FuY2VsZWQiLAoKCQkJLy8gRmFrZSB4aHIKCQkJanFYSFIgPSB7CgkJCQlyZWFkeVN0YXRlOiAwLAoKCQkJCS8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWQKCQkJCWdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkgewoJCQkJCXZhciBtYXRjaDsKCQkJCQlpZiAoIGNvbXBsZXRlZCApIHsKCQkJCQkJaWYgKCAhcmVzcG9uc2VIZWFkZXJzICkgewoJCQkJCQkJcmVzcG9uc2VIZWFkZXJzID0ge307CgkJCQkJCQl3aGlsZSAoICggbWF0Y2ggPSByaGVhZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSApICkgewoJCQkJCQkJCXJlc3BvbnNlSGVhZGVyc1sgbWF0Y2hbIDEgXS50b0xvd2VyQ2FzZSgpIF0gPSBtYXRjaFsgMiBdOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCW1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdOwoJCQkJCX0KCQkJCQlyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDsKCQkJCX0sCgoJCQkJLy8gUmF3IHN0cmluZwoJCQkJZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gY29tcGxldGVkID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDsKCQkJCX0sCgoJCQkJLy8gQ2FjaGVzIHRoZSBoZWFkZXIKCQkJCXNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQkJCQlpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkgewoJCQkJCQluYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gPQoJCQkJCQkJcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHwgbmFtZTsKCQkJCQkJcmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gT3ZlcnJpZGVzIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBoZWFkZXIKCQkJCW92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQkJCWlmICggY29tcGxldGVkID09IG51bGwgKSB7CgkJCQkJCXMubWltZVR5cGUgPSB0eXBlOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCXN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7CgkJCQkJdmFyIGNvZGU7CgkJCQkJaWYgKCBtYXAgKSB7CgkJCQkJCWlmICggY29tcGxldGVkICkgewoKCQkJCQkJCS8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrcwoJCQkJCQkJanFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7CgkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJLy8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFja3MgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXMKCQkJCQkJCWZvciAoIGNvZGUgaW4gbWFwICkgewoJCQkJCQkJCXN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBDYW5jZWwgdGhlIHJlcXVlc3QKCQkJCWFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHsKCQkJCQl2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDsKCQkJCQlpZiAoIHRyYW5zcG9ydCApIHsKCQkJCQkJdHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTsKCQkJCQl9CgkJCQkJZG9uZSggMCwgZmluYWxUZXh0ICk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCX07CgoJCS8vIEF0dGFjaCBkZWZlcnJlZHMKCQlkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApOwoKCQkvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkIChwcmVmaWx0ZXJzIG1pZ2h0IGV4cGVjdCBpdCkKCQkvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKQoJCS8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZQoJCXMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBsb2NhdGlvbi5ocmVmICkgKyAiIiApCgkJCS5yZXBsYWNlKCBycHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiApOwoKCQkvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDQKCQlzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlOwoKCQkvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0CgkJcy5kYXRhVHlwZXMgPSAoIHMuZGF0YVR5cGUgfHwgIioiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFsgIiIgXTsKCgkJLy8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHRoZSBvcmlnaW4gZG9lc24ndCBtYXRjaCB0aGUgY3VycmVudCBvcmlnaW4uCgkJaWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7CgkJCXVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJhIiApOwoKCQkJLy8gU3VwcG9ydDogSUUgPD04IC0gMTEsIEVkZ2UgMTIgLSAxMwoJCQkvLyBJRSB0aHJvd3MgZXhjZXB0aW9uIG9uIGFjY2Vzc2luZyB0aGUgaHJlZiBwcm9wZXJ0eSBpZiB1cmwgaXMgbWFsZm9ybWVkLAoJCQkvLyBlLmcuIGh0dHA6Ly9leGFtcGxlLmNvbTo4MHgvCgkJCXRyeSB7CgkJCQl1cmxBbmNob3IuaHJlZiA9IHMudXJsOwoKCQkJCS8vIFN1cHBvcnQ6IElFIDw9OCAtIDExIG9ubHkKCQkJCS8vIEFuY2hvcidzIGhvc3QgcHJvcGVydHkgaXNuJ3QgY29ycmVjdGx5IHNldCB3aGVuIHMudXJsIGlzIHJlbGF0aXZlCgkJCQl1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmOwoJCQkJcy5jcm9zc0RvbWFpbiA9IG9yaWdpbkFuY2hvci5wcm90b2NvbCArICIvLyIgKyBvcmlnaW5BbmNob3IuaG9zdCAhPT0KCQkJCQl1cmxBbmNob3IucHJvdG9jb2wgKyAiLy8iICsgdXJsQW5jaG9yLmhvc3Q7CgkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCS8vIElmIHRoZXJlIGlzIGFuIGVycm9yIHBhcnNpbmcgdGhlIFVSTCwgYXNzdW1lIGl0IGlzIGNyb3NzRG9tYWluLAoJCQkJLy8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZAoJCQkJcy5jcm9zc0RvbWFpbiA9IHRydWU7CgkJCX0KCQl9CgoJCS8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZwoJCWlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7CgkJfQoKCQkvLyBBcHBseSBwcmVmaWx0ZXJzCgkJaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7CgoJCS8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlCgkJaWYgKCBjb21wbGV0ZWQgKSB7CgkJCXJldHVybiBqcVhIUjsKCQl9CgoJCS8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvCgkJLy8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOCkKCQlmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDsKCgkJLy8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0cwoJCWlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkgewoJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggImFqYXhTdGFydCIgKTsKCQl9CgoJCS8vIFVwcGVyY2FzZSB0aGUgdHlwZQoJCXMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpOwoKCQkvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudAoJCXMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApOwoKCQkvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2UKCQkvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb24KCQkvLyBSZW1vdmUgaGFzaCB0byBzaW1wbGlmeSB1cmwgbWFuaXB1bGF0aW9uCgkJY2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgIiIgKTsKCgkJLy8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnQKCQlpZiAoICFzLmhhc0NvbnRlbnQgKSB7CgoJCQkvLyBSZW1lbWJlciB0aGUgaGFzaCBzbyB3ZSBjYW4gcHV0IGl0IGJhY2sKCQkJdW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7CgoJCQkvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsCgkJCWlmICggcy5kYXRhICkgewoJCQkJY2FjaGVVUkwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/ICImIiA6ICI/IiApICsgcy5kYXRhOwoKCQkJCS8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnkKCQkJCWRlbGV0ZSBzLmRhdGE7CgkJCX0KCgkJCS8vIEFkZCBvciB1cGRhdGUgYW50aS1jYWNoZSBwYXJhbSBpZiBuZWVkZWQKCQkJaWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHsKCQkJCWNhY2hlVVJMID0gY2FjaGVVUkwucmVwbGFjZSggcmFudGlDYWNoZSwgIiQxIiApOwoJCQkJdW5jYWNoZWQgPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gIiYiIDogIj8iICkgKyAiXz0iICsgKCBub25jZSsrICkgKyB1bmNhY2hlZDsKCQkJfQoKCQkJLy8gUHV0IGhhc2ggYW5kIGFudGktY2FjaGUgb24gdGhlIFVSTCB0aGF0IHdpbGwgYmUgcmVxdWVzdGVkIChnaC0xNzMyKQoJCQlzLnVybCA9IGNhY2hlVVJMICsgdW5jYWNoZWQ7CgoJCS8vIENoYW5nZSAnJTIwJyB0byAnKycgaWYgdGhpcyBpcyBlbmNvZGVkIGZvcm0gYm9keSBjb250ZW50IChnaC0yNjU4KQoJCX0gZWxzZSBpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmCgkJCSggcy5jb250ZW50VHlwZSB8fCAiIiApLmluZGV4T2YoICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiICkgPT09IDAgKSB7CgkJCXMuZGF0YSA9IHMuZGF0YS5yZXBsYWNlKCByMjAsICIrIiApOwoJCX0KCgkJLy8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS4KCQlpZiAoIHMuaWZNb2RpZmllZCApIHsKCQkJaWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkgewoJCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggIklmLU1vZGlmaWVkLVNpbmNlIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApOwoJCQl9CgkJCWlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7CgkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiSWYtTm9uZS1NYXRjaCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7CgkJCX0KCQl9CgoJCS8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudAoJCWlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkgewoJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiQ29udGVudC1UeXBlIiwgcy5jb250ZW50VHlwZSApOwoJCX0KCgkJLy8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZQoJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoCgkJCSJBY2NlcHQiLAoJCQlzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdID8KCQkJCXMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICsKCQkJCQkoIHMuZGF0YVR5cGVzWyAwIF0gIT09ICIqIiA/ICIsICIgKyBhbGxUeXBlcyArICI7IHE9MC4wMSIgOiAiIiApIDoKCQkJCXMuYWNjZXB0c1sgIioiIF0KCQkpOwoKCQkvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb24KCQlmb3IgKCBpIGluIHMuaGVhZGVycyApIHsKCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTsKCQl9CgoJCS8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnQKCQlpZiAoIHMuYmVmb3JlU2VuZCAmJgoJCQkoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IGNvbXBsZXRlZCApICkgewoKCQkJLy8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuCgkJCXJldHVybiBqcVhIUi5hYm9ydCgpOwoJCX0KCgkJLy8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uCgkJc3RyQWJvcnQgPSAiYWJvcnQiOwoKCQkvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHMKCQljb21wbGV0ZURlZmVycmVkLmFkZCggcy5jb21wbGV0ZSApOwoJCWpxWEhSLmRvbmUoIHMuc3VjY2VzcyApOwoJCWpxWEhSLmZhaWwoIHMuZXJyb3IgKTsKCgkJLy8gR2V0IHRyYW5zcG9ydAoJCXRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApOwoKCQkvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnQKCQlpZiAoICF0cmFuc3BvcnQgKSB7CgkJCWRvbmUoIC0xLCAiTm8gVHJhbnNwb3J0IiApOwoJCX0gZWxzZSB7CgkJCWpxWEhSLnJlYWR5U3RhdGUgPSAxOwoKCQkJLy8gU2VuZCBnbG9iYWwgZXZlbnQKCQkJaWYgKCBmaXJlR2xvYmFscyApIHsKCQkJCWdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCAiYWpheFNlbmQiLCBbIGpxWEhSLCBzIF0gKTsKCQkJfQoKCQkJLy8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmUKCQkJaWYgKCBjb21wbGV0ZWQgKSB7CgkJCQlyZXR1cm4ganFYSFI7CgkJCX0KCgkJCS8vIFRpbWVvdXQKCQkJaWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7CgkJCQl0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCQkJanFYSFIuYWJvcnQoICJ0aW1lb3V0IiApOwoJCQkJfSwgcy50aW1lb3V0ICk7CgkJCX0KCgkJCXRyeSB7CgkJCQljb21wbGV0ZWQgPSBmYWxzZTsKCQkJCXRyYW5zcG9ydC5zZW5kKCByZXF1ZXN0SGVhZGVycywgZG9uZSApOwoJCQl9IGNhdGNoICggZSApIHsKCgkJCQkvLyBSZXRocm93IHBvc3QtY29tcGxldGlvbiBleGNlcHRpb25zCgkJCQlpZiAoIGNvbXBsZXRlZCApIHsKCQkJCQl0aHJvdyBlOwoJCQkJfQoKCQkJCS8vIFByb3BhZ2F0ZSBvdGhlcnMgYXMgcmVzdWx0cwoJCQkJZG9uZSggLTEsIGUgKTsKCQkJfQoJCX0KCgkJLy8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lCgkJZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7CgkJCXZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsCgkJCQlzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDsKCgkJCS8vIElnbm9yZSByZXBlYXQgaW52b2NhdGlvbnMKCQkJaWYgKCBjb21wbGV0ZWQgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWNvbXBsZXRlZCA9IHRydWU7CgoJCQkvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0cwoJCQlpZiAoIHRpbWVvdXRUaW1lciApIHsKCQkJCXdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApOwoJCQl9CgoJCQkvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvbgoJCQkvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKQoJCQl0cmFuc3BvcnQgPSB1bmRlZmluZWQ7CgoJCQkvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzCgkJCXJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgIiI7CgoJCQkvLyBTZXQgcmVhZHlTdGF0ZQoJCQlqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwOwoKCQkJLy8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWwKCQkJaXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7CgoJCQkvLyBHZXQgcmVzcG9uc2UgZGF0YQoJCQlpZiAoIHJlc3BvbnNlcyApIHsKCQkJCXJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApOwoJCQl9CgoJCQkvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpCgkJCXJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7CgoJCQkvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZwoJCQlpZiAoIGlzU3VjY2VzcyApIHsKCgkJCQkvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLgoJCQkJaWYgKCBzLmlmTW9kaWZpZWQgKSB7CgkJCQkJbW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggIkxhc3QtTW9kaWZpZWQiICk7CgkJCQkJaWYgKCBtb2RpZmllZCApIHsKCQkJCQkJalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkOwoJCQkJCX0KCQkJCQltb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCAiZXRhZyIgKTsKCQkJCQlpZiAoIG1vZGlmaWVkICkgewoJCQkJCQlqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBpZiBubyBjb250ZW50CgkJCQlpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gIkhFQUQiICkgewoJCQkJCXN0YXR1c1RleHQgPSAibm9jb250ZW50IjsKCgkJCQkvLyBpZiBub3QgbW9kaWZpZWQKCQkJCX0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkgewoJCQkJCXN0YXR1c1RleHQgPSAibm90bW9kaWZpZWQiOwoKCQkJCS8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdAoJCQkJfSBlbHNlIHsKCQkJCQlzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7CgkJCQkJc3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7CgkJCQkJZXJyb3IgPSByZXNwb25zZS5lcnJvcjsKCQkJCQlpc1N1Y2Nlc3MgPSAhZXJyb3I7CgkJCQl9CgkJCX0gZWxzZSB7CgoJCQkJLy8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0cwoJCQkJZXJyb3IgPSBzdGF0dXNUZXh0OwoJCQkJaWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7CgkJCQkJc3RhdHVzVGV4dCA9ICJlcnJvciI7CgkJCQkJaWYgKCBzdGF0dXMgPCAwICkgewoJCQkJCQlzdGF0dXMgPSAwOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3QKCQkJanFYSFIuc3RhdHVzID0gc3RhdHVzOwoJCQlqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArICIiOwoKCQkJLy8gU3VjY2Vzcy9FcnJvcgoJCQlpZiAoIGlzU3VjY2VzcyApIHsKCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApOwoJCQl9IGVsc2UgewoJCQkJZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7CgkJCX0KCgkJCS8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzCgkJCWpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTsKCQkJc3RhdHVzQ29kZSA9IHVuZGVmaW5lZDsKCgkJCWlmICggZmlyZUdsb2JhbHMgKSB7CgkJCQlnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gImFqYXhTdWNjZXNzIiA6ICJhamF4RXJyb3IiLAoJCQkJCVsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7CgkJCX0KCgkJCS8vIENvbXBsZXRlCgkJCWNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7CgoJCQlpZiAoIGZpcmVHbG9iYWxzICkgewoJCQkJZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoICJhamF4Q29tcGxldGUiLCBbIGpxWEhSLCBzIF0gKTsKCgkJCQkvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXIKCQkJCWlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7CgkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoICJhamF4U3RvcCIgKTsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIGpxWEhSOwoJfSwKCglnZXRKU09OOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjayApIHsKCQlyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgImpzb24iICk7Cgl9LAoKCWdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgInNjcmlwdCIgKTsKCX0KfSApOwoKalF1ZXJ5LmVhY2goIFsgImdldCIsICJwb3N0IiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkgewoJalF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkgewoKCQkvLyBTaGlmdCBhcmd1bWVudHMgaWYgZGF0YSBhcmd1bWVudCB3YXMgb21pdHRlZAoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGRhdGEgKSApIHsKCQkJdHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7CgkJCWNhbGxiYWNrID0gZGF0YTsKCQkJZGF0YSA9IHVuZGVmaW5lZDsKCQl9CgoJCS8vIFRoZSB1cmwgY2FuIGJlIGFuIG9wdGlvbnMgb2JqZWN0ICh3aGljaCB0aGVuIG11c3QgaGF2ZSAudXJsKQoJCXJldHVybiBqUXVlcnkuYWpheCggalF1ZXJ5LmV4dGVuZCggewoJCQl1cmw6IHVybCwKCQkJdHlwZTogbWV0aG9kLAoJCQlkYXRhVHlwZTogdHlwZSwKCQkJZGF0YTogZGF0YSwKCQkJc3VjY2VzczogY2FsbGJhY2sKCQl9LCBqUXVlcnkuaXNQbGFpbk9iamVjdCggdXJsICkgJiYgdXJsICkgKTsKCX07Cn0gKTsKCgpqUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkgewoJcmV0dXJuIGpRdWVyeS5hamF4KCB7CgkJdXJsOiB1cmwsCgoJCS8vIE1ha2UgdGhpcyBleHBsaWNpdCwgc2luY2UgdXNlciBjYW4gb3ZlcnJpZGUgdGhpcyB0aHJvdWdoIGFqYXhTZXR1cCAoIzExMjY0KQoJCXR5cGU6ICJHRVQiLAoJCWRhdGFUeXBlOiAic2NyaXB0IiwKCQljYWNoZTogdHJ1ZSwKCQlhc3luYzogZmFsc2UsCgkJZ2xvYmFsOiBmYWxzZSwKCQkidGhyb3dzIjogdHJ1ZQoJfSApOwp9OwoKCmpRdWVyeS5mbi5leHRlbmQoIHsKCXdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkgewoJCXZhciB3cmFwOwoKCQlpZiAoIHRoaXNbIDAgXSApIHsKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkgewoJCQkJaHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7CgkJCX0KCgkJCS8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kCgkJCXdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApOwoKCQkJaWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHsKCQkJCXdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWyAwIF0gKTsKCQkJfQoKCQkJd3JhcC5tYXAoIGZ1bmN0aW9uKCkgewoJCQkJdmFyIGVsZW0gPSB0aGlzOwoKCQkJCXdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHsKCQkJCQllbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDsKCQkJCX0KCgkJCQlyZXR1cm4gZWxlbTsKCQkJfSApLmFwcGVuZCggdGhpcyApOwoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCXdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7CgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCWpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTsKCQkJfSApOwoJCX0KCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCXZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksCgkJCQljb250ZW50cyA9IHNlbGYuY29udGVudHMoKTsKCgkJCWlmICggY29udGVudHMubGVuZ3RoICkgewoJCQkJY29udGVudHMud3JhcEFsbCggaHRtbCApOwoKCQkJfSBlbHNlIHsKCQkJCXNlbGYuYXBwZW5kKCBodG1sICk7CgkJCX0KCQl9ICk7Cgl9LAoKCXdyYXA6IGZ1bmN0aW9uKCBodG1sICkgewoJCXZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTsKCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCWpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwoIHRoaXMsIGkgKSA6IGh0bWwgKTsKCQl9ICk7Cgl9LAoKCXVud3JhcDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXRoaXMucGFyZW50KCBzZWxlY3RvciApLm5vdCggImJvZHkiICkuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTsKCQl9ICk7CgkJcmV0dXJuIHRoaXM7Cgl9Cn0gKTsKCgpqUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkgewoJcmV0dXJuICFqUXVlcnkuZXhwci5wc2V1ZG9zLnZpc2libGUoIGVsZW0gKTsKfTsKalF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7CglyZXR1cm4gISEoIGVsZW0ub2Zmc2V0V2lkdGggfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApOwp9OwoKCgoKalF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHsKCXRyeSB7CgkJcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTsKCX0gY2F0Y2ggKCBlICkge30KfTsKCnZhciB4aHJTdWNjZXNzU3RhdHVzID0gewoKCQkvLyBGaWxlIHByb3RvY29sIGFsd2F5cyB5aWVsZHMgc3RhdHVzIGNvZGUgMCwgYXNzdW1lIDIwMAoJCTA6IDIwMCwKCgkJLy8gU3VwcG9ydDogSUUgPD05IG9ubHkKCQkvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDQKCQkxMjIzOiAyMDQKCX0sCgl4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpOwoKc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCAid2l0aENyZWRlbnRpYWxzIiBpbiB4aHJTdXBwb3J0ZWQgKTsKc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7CgpqUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7Cgl2YXIgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2s7CgoJLy8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdAoJaWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkgewoJCXJldHVybiB7CgkJCXNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHsKCQkJCXZhciBpLAoJCQkJCXhociA9IG9wdGlvbnMueGhyKCk7CgoJCQkJeGhyLm9wZW4oCgkJCQkJb3B0aW9ucy50eXBlLAoJCQkJCW9wdGlvbnMudXJsLAoJCQkJCW9wdGlvbnMuYXN5bmMsCgkJCQkJb3B0aW9ucy51c2VybmFtZSwKCQkJCQlvcHRpb25zLnBhc3N3b3JkCgkJCQkpOwoKCQkJCS8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWQKCQkJCWlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7CgkJCQkJZm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHsKCQkJCQkJeGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkCgkJCQlpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7CgkJCQkJeGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTsKCQkJCX0KCgkJCQkvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlcgoJCQkJLy8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZQoJCQkJLy8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS4KCQkJCS8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKQoJCQkJLy8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuCgkJCQlpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyAiWC1SZXF1ZXN0ZWQtV2l0aCIgXSApIHsKCQkJCQloZWFkZXJzWyAiWC1SZXF1ZXN0ZWQtV2l0aCIgXSA9ICJYTUxIdHRwUmVxdWVzdCI7CgkJCQl9CgoJCQkJLy8gU2V0IGhlYWRlcnMKCQkJCWZvciAoIGkgaW4gaGVhZGVycyApIHsKCQkJCQl4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7CgkJCQl9CgoJCQkJLy8gQ2FsbGJhY2sKCQkJCWNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7CgkJCQkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCQkJCQlpZiAoIGNhbGxiYWNrICkgewoJCQkJCQkJY2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrID0geGhyLm9ubG9hZCA9CgkJCQkJCQkJeGhyLm9uZXJyb3IgPSB4aHIub25hYm9ydCA9IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOwoKCQkJCQkJCWlmICggdHlwZSA9PT0gImFib3J0IiApIHsKCQkJCQkJCQl4aHIuYWJvcnQoKTsKCQkJCQkJCX0gZWxzZSBpZiAoIHR5cGUgPT09ICJlcnJvciIgKSB7CgoJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5CgkJCQkJCQkJLy8gT24gYSBtYW51YWwgbmF0aXZlIGFib3J0LCBJRTkgdGhyb3dzCgkJCQkJCQkJLy8gZXJyb3JzIG9uIGFueSBwcm9wZXJ0eSBhY2Nlc3MgdGhhdCBpcyBub3QgcmVhZHlTdGF0ZQoJCQkJCQkJCWlmICggdHlwZW9mIHhoci5zdGF0dXMgIT09ICJudW1iZXIiICkgewoJCQkJCQkJCQljb21wbGV0ZSggMCwgImVycm9yIiApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWNvbXBsZXRlKAoKCQkJCQkJCQkJCS8vIEZpbGU6IHByb3RvY29sIGFsd2F5cyB5aWVsZHMgc3RhdHVzIDA7IHNlZSAjODYwNSwgIzE0MjA3CgkJCQkJCQkJCQl4aHIuc3RhdHVzLAoJCQkJCQkJCQkJeGhyLnN0YXR1c1RleHQKCQkJCQkJCQkJKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWNvbXBsZXRlKAoJCQkJCQkJCQl4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cywKCQkJCQkJCQkJeGhyLnN0YXR1c1RleHQsCgoJCQkJCQkJCQkvLyBTdXBwb3J0OiBJRSA8PTkgb25seQoJCQkJCQkJCQkvLyBJRTkgaGFzIG5vIFhIUjIgYnV0IHRocm93cyBvbiBiaW5hcnkgKHRyYWMtMTE0MjYpCgkJCQkJCQkJCS8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpCgkJCQkJCQkJCSggeGhyLnJlc3BvbnNlVHlwZSB8fCAidGV4dCIgKSAhPT0gInRleHQiICB8fAoJCQkJCQkJCQl0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gInN0cmluZyIgPwoJCQkJCQkJCQkJeyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDoKCQkJCQkJCQkJCXsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LAoJCQkJCQkJCQl4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkKCQkJCQkJCQkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfTsKCQkJCX07CgoJCQkJLy8gTGlzdGVuIHRvIGV2ZW50cwoJCQkJeGhyLm9ubG9hZCA9IGNhbGxiYWNrKCk7CgkJCQllcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSBjYWxsYmFjayggImVycm9yIiApOwoKCQkJCS8vIFN1cHBvcnQ6IElFIDkgb25seQoJCQkJLy8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnQKCQkJCS8vIHRvIGhhbmRsZSB1bmNhdWdodCBhYm9ydHMKCQkJCWlmICggeGhyLm9uYWJvcnQgIT09IHVuZGVmaW5lZCApIHsKCQkJCQl4aHIub25hYm9ydCA9IGVycm9yQ2FsbGJhY2s7CgkJCQl9IGVsc2UgewoJCQkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCgkJCQkJCS8vIENoZWNrIHJlYWR5U3RhdGUgYmVmb3JlIHRpbWVvdXQgYXMgaXQgY2hhbmdlcwoJCQkJCQlpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkgewoKCQkJCQkJCS8vIEFsbG93IG9uZXJyb3IgdG8gYmUgY2FsbGVkIGZpcnN0LAoJCQkJCQkJLy8gYnV0IHRoYXQgd2lsbCBub3QgaGFuZGxlIGEgbmF0aXZlIGFib3J0CgkJCQkJCQkvLyBBbHNvLCBzYXZlIGVycm9yQ2FsbGJhY2sgdG8gYSB2YXJpYWJsZQoJCQkJCQkJLy8gYXMgeGhyLm9uZXJyb3IgY2Fubm90IGJlIGFjY2Vzc2VkCgkJCQkJCQl3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCQkJCQkJaWYgKCBjYWxsYmFjayApIHsKCQkJCQkJCQkJZXJyb3JDYWxsYmFjaygpOwoJCQkJCQkJCX0KCQkJCQkJCX0gKTsKCQkJCQkJfQoJCQkJCX07CgkJCQl9CgoJCQkJLy8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFjawoJCQkJY2FsbGJhY2sgPSBjYWxsYmFjayggImFib3J0IiApOwoKCQkJCXRyeSB7CgoJCQkJCS8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbikKCQkJCQl4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7CgkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJLy8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXQKCQkJCQlpZiAoIGNhbGxiYWNrICkgewoJCQkJCQl0aHJvdyBlOwoJCQkJCX0KCQkJCX0KCQkJfSwKCgkJCWFib3J0OiBmdW5jdGlvbigpIHsKCQkJCWlmICggY2FsbGJhY2sgKSB7CgkJCQkJY2FsbGJhY2soKTsKCQkJCX0KCQkJfQoJCX07Cgl9Cn0gKTsKCgoKCi8vIFByZXZlbnQgYXV0by1leGVjdXRpb24gb2Ygc2NyaXB0cyB3aGVuIG5vIGV4cGxpY2l0IGRhdGFUeXBlIHdhcyBwcm92aWRlZCAoU2VlIGdoLTI0MzIpCmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHsKCWlmICggcy5jcm9zc0RvbWFpbiApIHsKCQlzLmNvbnRlbnRzLnNjcmlwdCA9IGZhbHNlOwoJfQp9ICk7CgovLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZQpqUXVlcnkuYWpheFNldHVwKCB7CglhY2NlcHRzOiB7CgkJc2NyaXB0OiAidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCAiICsKCQkJImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCIKCX0sCgljb250ZW50czogewoJCXNjcmlwdDogL1xiKD86amF2YXxlY21hKXNjcmlwdFxiLwoJfSwKCWNvbnZlcnRlcnM6IHsKCQkidGV4dCBzY3JpcHQiOiBmdW5jdGlvbiggdGV4dCApIHsKCQkJalF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTsKCQkJcmV0dXJuIHRleHQ7CgkJfQoJfQp9ICk7CgovLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluCmpRdWVyeS5hamF4UHJlZmlsdGVyKCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CglpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHsKCQlzLmNhY2hlID0gZmFsc2U7Cgl9CglpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgkJcy50eXBlID0gIkdFVCI7Cgl9Cn0gKTsKCi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydApqUXVlcnkuYWpheFRyYW5zcG9ydCggInNjcmlwdCIsIGZ1bmN0aW9uKCBzICkgewoKCS8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHMKCWlmICggcy5jcm9zc0RvbWFpbiApIHsKCQl2YXIgc2NyaXB0LCBjYWxsYmFjazsKCQlyZXR1cm4gewoJCQlzZW5kOiBmdW5jdGlvbiggXywgY29tcGxldGUgKSB7CgkJCQlzY3JpcHQgPSBqUXVlcnkoICI8c2NyaXB0PiIgKS5wcm9wKCB7CgkJCQkJY2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LAoJCQkJCXNyYzogcy51cmwKCQkJCX0gKS5vbigKCQkJCQkibG9hZCBlcnJvciIsCgkJCQkJY2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkgewoJCQkJCQlzY3JpcHQucmVtb3ZlKCk7CgkJCQkJCWNhbGxiYWNrID0gbnVsbDsKCQkJCQkJaWYgKCBldnQgKSB7CgkJCQkJCQljb21wbGV0ZSggZXZ0LnR5cGUgPT09ICJlcnJvciIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQkpOwoKCQkJCS8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeQoJCQkJZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTsKCQkJfSwKCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBjYWxsYmFjayApIHsKCQkJCQljYWxsYmFjaygpOwoJCQkJfQoJCQl9CgkJfTsKCX0KfSApOwoKCgoKdmFyIG9sZENhbGxiYWNrcyA9IFtdLAoJcmpzb25wID0gLyg9KVw/KD89JnwkKXxcP1w/LzsKCi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3MKalF1ZXJ5LmFqYXhTZXR1cCggewoJanNvbnA6ICJjYWxsYmFjayIsCglqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHsKCQl2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArICJfIiArICggbm9uY2UrKyApICk7CgkJdGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7CgkJcmV0dXJuIGNhbGxiYWNrOwoJfQp9ICk7CgovLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHMKalF1ZXJ5LmFqYXhQcmVmaWx0ZXIoICJqc29uIGpzb25wIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkgewoKCXZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lciwKCQlqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgPwoJCQkidXJsIiA6CgkJCXR5cGVvZiBzLmRhdGEgPT09ICJzdHJpbmciICYmCgkJCQkoIHMuY29udGVudFR5cGUgfHwgIiIgKQoJCQkJCS5pbmRleE9mKCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiApID09PSAwICYmCgkJCQlyanNvbnAudGVzdCggcy5kYXRhICkgJiYgImRhdGEiCgkJKTsKCgkvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgImpzb25wIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldAoJaWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSAianNvbnAiICkgewoKCQkvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0CgkJY2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0galF1ZXJ5LmlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID8KCQkJcy5qc29ucENhbGxiYWNrKCkgOgoJCQlzLmpzb25wQ2FsbGJhY2s7CgoJCS8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGEKCQlpZiAoIGpzb25Qcm9wICkgewoJCQlzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsICIkMSIgKyBjYWxsYmFja05hbWUgKTsKCQl9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHsKCQkJcy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/ICImIiA6ICI/IiApICsgcy5qc29ucCArICI9IiArIGNhbGxiYWNrTmFtZTsKCQl9CgoJCS8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb24KCQlzLmNvbnZlcnRlcnNbICJzY3JpcHQganNvbiIgXSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHsKCQkJCWpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgIiB3YXMgbm90IGNhbGxlZCIgKTsKCQkJfQoJCQlyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTsKCQl9OwoKCQkvLyBGb3JjZSBqc29uIGRhdGFUeXBlCgkJcy5kYXRhVHlwZXNbIDAgXSA9ICJqc29uIjsKCgkJLy8gSW5zdGFsbCBjYWxsYmFjawoJCW92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTsKCQl3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7CgkJCXJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzOwoJCX07CgoJCS8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKQoJCWpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7CgoJCQkvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXQKCQkJaWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkgewoJCQkJalF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTsKCgkJCS8vIE90aGVyd2lzZSByZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlCgkJCX0gZWxzZSB7CgkJCQl3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47CgkJCX0KCgkJCS8vIFNhdmUgYmFjayBhcyBmcmVlCgkJCWlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7CgoJCQkJLy8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kCgkJCQlzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7CgoJCQkJLy8gU2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZQoJCQkJb2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApOwoJCQl9CgoJCQkvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2UKCQkJaWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHsKCQkJCW92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7CgkJCX0KCgkJCXJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7CgkJfSApOwoKCQkvLyBEZWxlZ2F0ZSB0byBzY3JpcHQKCQlyZXR1cm4gInNjcmlwdCI7Cgl9Cn0gKTsKCgoKCi8vIFN1cHBvcnQ6IFNhZmFyaSA4IG9ubHkKLy8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudAovLyBjb2xsYXBzZSBzaWJsaW5nIGZvcm1zOiB0aGUgc2Vjb25kIG9uZSBiZWNvbWVzIGEgY2hpbGQgb2YgdGhlIGZpcnN0IG9uZS4KLy8gQmVjYXVzZSBvZiB0aGF0LCB0aGlzIHNlY3VyaXR5IG1lYXN1cmUgaGFzIHRvIGJlIGRpc2FibGVkIGluIFNhZmFyaSA4LgovLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3CnN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ID0gKCBmdW5jdGlvbigpIHsKCXZhciBib2R5ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCAiIiApLmJvZHk7Cglib2R5LmlubmVySFRNTCA9ICI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiI7CglyZXR1cm4gYm9keS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMjsKfSApKCk7CgoKLy8gQXJndW1lbnQgImRhdGEiIHNob3VsZCBiZSBzdHJpbmcgb2YgaHRtbAovLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsCi8vIGRlZmF1bHRzIHRvIGRvY3VtZW50Ci8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmcKalF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHsKCWlmICggdHlwZW9mIGRhdGEgIT09ICJzdHJpbmciICkgewoJCXJldHVybiBbXTsKCX0KCWlmICggdHlwZW9mIGNvbnRleHQgPT09ICJib29sZWFuIiApIHsKCQlrZWVwU2NyaXB0cyA9IGNvbnRleHQ7CgkJY29udGV4dCA9IGZhbHNlOwoJfQoKCXZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7CgoJaWYgKCAhY29udGV4dCApIHsKCgkJLy8gU3RvcCBzY3JpcHRzIG9yIGlubGluZSBldmVudCBoYW5kbGVycyBmcm9tIGJlaW5nIGV4ZWN1dGVkIGltbWVkaWF0ZWx5CgkJLy8gYnkgdXNpbmcgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24KCQlpZiAoIHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ICkgewoJCQljb250ZXh0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCAiIiApOwoKCQkJLy8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50CgkJCS8vIHNvIGFueSBwYXJzZWQgZWxlbWVudHMgd2l0aCBVUkxzCgkJCS8vIGFyZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQncyBVUkwgKGdoLTI5NjUpCgkJCWJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoICJiYXNlIiApOwoJCQliYXNlLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmOwoJCQljb250ZXh0LmhlYWQuYXBwZW5kQ2hpbGQoIGJhc2UgKTsKCQl9IGVsc2UgewoJCQljb250ZXh0ID0gZG9jdW1lbnQ7CgkJfQoJfQoKCXBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApOwoJc2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTsKCgkvLyBTaW5nbGUgdGFnCglpZiAoIHBhcnNlZCApIHsKCQlyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsgMSBdICkgXTsKCX0KCglwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApOwoKCWlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHsKCQlqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTsKCX0KCglyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTsKfTsKCgovKioKICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZQogKi8KalF1ZXJ5LmZuLmxvYWQgPSBmdW5jdGlvbiggdXJsLCBwYXJhbXMsIGNhbGxiYWNrICkgewoJdmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSwKCQlzZWxmID0gdGhpcywKCQlvZmYgPSB1cmwuaW5kZXhPZiggIiAiICk7CgoJaWYgKCBvZmYgPiAtMSApIHsKCQlzZWxlY3RvciA9IHN0cmlwQW5kQ29sbGFwc2UoIHVybC5zbGljZSggb2ZmICkgKTsKCQl1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApOwoJfQoKCS8vIElmIGl0J3MgYSBmdW5jdGlvbgoJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7CgoJCS8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrCgkJY2FsbGJhY2sgPSBwYXJhbXM7CgkJcGFyYW1zID0gdW5kZWZpbmVkOwoKCS8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmcKCX0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSAib2JqZWN0IiApIHsKCQl0eXBlID0gIlBPU1QiOwoJfQoKCS8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0CglpZiAoIHNlbGYubGVuZ3RoID4gMCApIHsKCQlqUXVlcnkuYWpheCggewoJCQl1cmw6IHVybCwKCgkJCS8vIElmICJ0eXBlIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gIkdFVCIgbWV0aG9kIHdpbGwgYmUgdXNlZC4KCQkJLy8gTWFrZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGV4cGxpY2l0IHNpbmNlCgkJCS8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZAoJCQl0eXBlOiB0eXBlIHx8ICJHRVQiLAoJCQlkYXRhVHlwZTogImh0bWwiLAoJCQlkYXRhOiBwYXJhbXMKCQl9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHsKCgkJCS8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFjawoJCQlyZXNwb25zZSA9IGFyZ3VtZW50czsKCgkJCXNlbGYuaHRtbCggc2VsZWN0b3IgPwoKCQkJCS8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdgoJCQkJLy8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzCgkJCQlqUXVlcnkoICI8ZGl2PiIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6CgoJCQkJLy8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHQKCQkJCXJlc3BvbnNlVGV4dCApOwoKCQkvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzICJkYXRhIiwgInN0YXR1cyIsICJqcVhIUiIKCQkvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuCgkJLy8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyAianFYSFIiLCAic3RhdHVzIiwgImVycm9yIgoJCX0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkgewoJCQlzZWxmLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJY2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTsKCQkJfSApOwoJCX0gKTsKCX0KCglyZXR1cm4gdGhpczsKfTsKCgoKCi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzCmpRdWVyeS5lYWNoKCBbCgkiYWpheFN0YXJ0IiwKCSJhamF4U3RvcCIsCgkiYWpheENvbXBsZXRlIiwKCSJhamF4RXJyb3IiLAoJImFqYXhTdWNjZXNzIiwKCSJhamF4U2VuZCIKXSwgZnVuY3Rpb24oIGksIHR5cGUgKSB7CglqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHsKCQlyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTsKCX07Cn0gKTsKCgoKCmpRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHsKCXJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkgewoJCXJldHVybiBlbGVtID09PSBmbi5lbGVtOwoJfSApLmxlbmd0aDsKfTsKCgoKCi8qKgogKiBHZXRzIGEgd2luZG93IGZyb20gYW4gZWxlbWVudAogKi8KZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkgewoJcmV0dXJuIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldzsKfQoKalF1ZXJ5Lm9mZnNldCA9IHsKCXNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7CgkJdmFyIGN1clBvc2l0aW9uLCBjdXJMZWZ0LCBjdXJDU1NUb3AsIGN1clRvcCwgY3VyT2Zmc2V0LCBjdXJDU1NMZWZ0LCBjYWxjdWxhdGVQb3NpdGlvbiwKCQkJcG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCAicG9zaXRpb24iICksCgkJCWN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSwKCQkJcHJvcHMgPSB7fTsKCgkJLy8gU2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbQoJCWlmICggcG9zaXRpb24gPT09ICJzdGF0aWMiICkgewoJCQllbGVtLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKCQl9CgoJCWN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7CgkJY3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgInRvcCIgKTsKCQljdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgImxlZnQiICk7CgkJY2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgJiYKCQkJKCBjdXJDU1NUb3AgKyBjdXJDU1NMZWZ0ICkuaW5kZXhPZiggImF1dG8iICkgPiAtMTsKCgkJLy8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXIKCQkvLyB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWQKCQlpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkgewoJCQljdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTsKCQkJY3VyVG9wID0gY3VyUG9zaXRpb24udG9wOwoJCQljdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDsKCgkJfSBlbHNlIHsKCQkJY3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDsKCQkJY3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwOwoJCX0KCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkgewoKCQkJLy8gVXNlIGpRdWVyeS5leHRlbmQgaGVyZSB0byBhbGxvdyBtb2RpZmljYXRpb24gb2YgY29vcmRpbmF0ZXMgYXJndW1lbnQgKGdoLTE4NDgpCgkJCW9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApOwoJCX0KCgkJaWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkgewoJCQlwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wOwoJCX0KCQlpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkgewoJCQlwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDsKCQl9CgoJCWlmICggInVzaW5nIiBpbiBvcHRpb25zICkgewoJCQlvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7CgoJCX0gZWxzZSB7CgkJCWN1ckVsZW0uY3NzKCBwcm9wcyApOwoJCX0KCX0KfTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCW9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgoJCS8vIFByZXNlcnZlIGNoYWluaW5nIGZvciBzZXR0ZXIKCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCXJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgPwoJCQkJdGhpcyA6CgkJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCWpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7CgkJCQl9ICk7CgkJfQoKCQl2YXIgZG9jRWxlbSwgd2luLCByZWN0LCBkb2MsCgkJCWVsZW0gPSB0aGlzWyAwIF07CgoJCWlmICggIWVsZW0gKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIFN1cHBvcnQ6IElFIDw9MTEgb25seQoJCS8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEKCQkvLyBkaXNjb25uZWN0ZWQgbm9kZSBpbiBJRSB0aHJvd3MgYW4gZXJyb3IKCQlpZiAoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICkgewoJCQlyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCQl9CgoJCXJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKCQkvLyBNYWtlIHN1cmUgZWxlbWVudCBpcyBub3QgaGlkZGVuIChkaXNwbGF5OiBub25lKQoJCWlmICggcmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCApIHsKCQkJZG9jID0gZWxlbS5vd25lckRvY3VtZW50OwoJCQl3aW4gPSBnZXRXaW5kb3coIGRvYyApOwoJCQlkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCgkJCXJldHVybiB7CgkJCQl0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsCgkJCQlsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnQKCQkJfTsKCQl9CgoJCS8vIFJldHVybiB6ZXJvcyBmb3IgZGlzY29ubmVjdGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGdoLTIzMTApCgkJcmV0dXJuIHJlY3Q7Cgl9LAoKCXBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQlpZiAoICF0aGlzWyAwIF0gKSB7CgkJCXJldHVybjsKCQl9CgoJCXZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwKCQkJZWxlbSA9IHRoaXNbIDAgXSwKCQkJcGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCgkJLy8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSwKCQkvLyBiZWNhdXNlIGl0IGlzIGl0cyBvbmx5IG9mZnNldCBwYXJlbnQKCQlpZiAoIGpRdWVyeS5jc3MoIGVsZW0sICJwb3NpdGlvbiIgKSA9PT0gImZpeGVkIiApIHsKCgkJCS8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZAoJCQlvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKCQl9IGVsc2UgewoKCQkJLy8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnQKCQkJb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTsKCgkJCS8vIEdldCBjb3JyZWN0IG9mZnNldHMKCQkJb2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTsKCQkJaWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnRbIDAgXSwgImh0bWwiICkgKSB7CgkJCQlwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7CgkJCX0KCgkJCS8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVycwoJCQlwYXJlbnRPZmZzZXQgPSB7CgkJCQl0b3A6IHBhcmVudE9mZnNldC50b3AgKyBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgImJvcmRlclRvcFdpZHRoIiwgdHJ1ZSApLAoJCQkJbGVmdDogcGFyZW50T2Zmc2V0LmxlZnQgKyBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgImJvcmRlckxlZnRXaWR0aCIsIHRydWUgKQoJCQl9OwoJCX0KCgkJLy8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2lucwoJCXJldHVybiB7CgkJCXRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCAibWFyZ2luVG9wIiwgdHJ1ZSApLAoJCQlsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgIm1hcmdpbkxlZnQiLCB0cnVlICkKCQl9OwoJfSwKCgkvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczoKCS8vIDEpIEZvciB0aGUgZWxlbWVudCBpbnNpZGUgdGhlIGlmcmFtZSB3aXRob3V0IG9mZnNldFBhcmVudCwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4KCS8vICAgIGRvY3VtZW50RWxlbWVudCBvZiB0aGUgcGFyZW50IHdpbmRvdwoJLy8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudAoJLy8gMykgRm9yIGJvZHkgb3IgaHRtbCBlbGVtZW50LCBpLmUuIGluIGNhc2Ugb2YgdGhlIGh0bWwgbm9kZSAtIGl0IHdpbGwgcmV0dXJuIGl0c2VsZgoJLy8KCS8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlcwoJLy8gYW5kIG1pZ2h0IGJlIGNvbnNpZGVyZWQgYXMgbW9yZSBwcmVmZXJhYmxlIHJlc3VsdHMuCgkvLwoJLy8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmUKCW9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCQkJdmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50OwoKCQkJd2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCAicG9zaXRpb24iICkgPT09ICJzdGF0aWMiICkgewoJCQkJb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDsKCQkJfQoKCQkJcmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudEVsZW1lbnQ7CgkJfSApOwoJfQp9ICk7CgovLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHMKalF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogInBhZ2VYT2Zmc2V0Iiwgc2Nyb2xsVG9wOiAicGFnZVlPZmZzZXQiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7Cgl2YXIgdG9wID0gInBhZ2VZT2Zmc2V0IiA9PT0gcHJvcDsKCglqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHsKCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7CgkJCXZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTsKCgkJCWlmICggdmFsID09PSB1bmRlZmluZWQgKSB7CgkJCQlyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTsKCQkJfQoKCQkJaWYgKCB3aW4gKSB7CgkJCQl3aW4uc2Nyb2xsVG8oCgkJCQkJIXRvcCA/IHZhbCA6IHdpbi5wYWdlWE9mZnNldCwKCQkJCQl0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXQKCQkJCSk7CgoJCQl9IGVsc2UgewoJCQkJZWxlbVsgbWV0aG9kIF0gPSB2YWw7CgkJCX0KCQl9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCApOwoJfTsKfSApOwoKLy8gU3VwcG9ydDogU2FmYXJpIDw9NyAtIDkuMSwgQ2hyb21lIDw9MzcgLSA0OQovLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvbgovLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODQKLy8gQmxpbmsgYnVnOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01ODkzNDcKLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDsKLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmUKalF1ZXJ5LmVhY2goIFsgInRvcCIsICJsZWZ0IiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHsKCWpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sCgkJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQlpZiAoIGNvbXB1dGVkICkgewoJCQkJY29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTsKCgkJCQkvLyBJZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXQKCQkJCXJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/CgkJCQkJalF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgInB4IiA6CgkJCQkJY29tcHV0ZWQ7CgkJCX0KCQl9CgkpOwp9ICk7CgoKLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzCmpRdWVyeS5lYWNoKCB7IEhlaWdodDogImhlaWdodCIsIFdpZHRoOiAid2lkdGgiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkgewoJalF1ZXJ5LmVhY2goIHsgcGFkZGluZzogImlubmVyIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsICIiOiAib3V0ZXIiICsgbmFtZSB9LAoJCWZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkgewoKCQkvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGgKCQlqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHsKCQkJdmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gImJvb2xlYW4iICksCgkJCQlleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/ICJtYXJnaW4iIDogImJvcmRlciIgKTsKCgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHsKCQkJCXZhciBkb2M7CgoJCQkJaWYgKCBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHsKCgkJCQkJLy8gJCggd2luZG93ICkub3V0ZXJXaWR0aC9IZWlnaHQgcmV0dXJuIHcvaCBpbmNsdWRpbmcgc2Nyb2xsYmFycyAoZ2gtMTcyOSkKCQkJCQlyZXR1cm4gZnVuY05hbWUuaW5kZXhPZiggIm91dGVyIiApID09PSAwID8KCQkJCQkJZWxlbVsgImlubmVyIiArIG5hbWUgXSA6CgkJCQkJCWVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyAiY2xpZW50IiArIG5hbWUgXTsKCQkJCX0KCgkJCQkvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7CgoJCQkJCS8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSwKCQkJCQkvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3QKCQkJCQlyZXR1cm4gTWF0aC5tYXgoCgkJCQkJCWVsZW0uYm9keVsgInNjcm9sbCIgKyBuYW1lIF0sIGRvY1sgInNjcm9sbCIgKyBuYW1lIF0sCgkJCQkJCWVsZW0uYm9keVsgIm9mZnNldCIgKyBuYW1lIF0sIGRvY1sgIm9mZnNldCIgKyBuYW1lIF0sCgkJCQkJCWRvY1sgImNsaWVudCIgKyBuYW1lIF0KCQkJCQkpOwoJCQkJfQoKCQkJCXJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8KCgkJCQkJLy8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdAoJCQkJCWpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOgoKCQkJCQkvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50CgkJCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTsKCQkJfSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUgKTsKCQl9OwoJfSApOwp9ICk7CgoKalF1ZXJ5LmZuLmV4dGVuZCggewoKCWJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApOwoJfSwKCXVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHsKCQlyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApOwoJfSwKCglkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTsKCX0sCgl1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHsKCgkJLy8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKQoJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8KCQkJdGhpcy5vZmYoIHNlbGVjdG9yLCAiKioiICkgOgoJCQl0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8ICIqKiIsIGZuICk7Cgl9Cn0gKTsKCmpRdWVyeS5wYXJzZUpTT04gPSBKU09OLnBhcnNlOwoKCgoKLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyCi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXQKLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0Ci8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmUKLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlCi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50cwovLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuCgovLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZAovLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuCi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub24KCmlmICggdHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kICkgewoJZGVmaW5lKCAianF1ZXJ5IiwgW10sIGZ1bmN0aW9uKCkgewoJCXJldHVybiBqUXVlcnk7Cgl9ICk7Cn0KCgoKCnZhcgoKCS8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZQoJX2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksCgoJLy8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGUKCV8kID0gd2luZG93LiQ7CgpqUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkgewoJaWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkgewoJCXdpbmRvdy4kID0gXyQ7Cgl9CgoJaWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHsKCQl3aW5kb3cualF1ZXJ5ID0gX2pRdWVyeTsKCX0KCglyZXR1cm4galF1ZXJ5Owp9OwoKLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTUQKLy8gKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KQovLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpCmlmICggIW5vR2xvYmFsICkgewoJd2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5Owp9CgoKCgoKcmV0dXJuIGpRdWVyeTsKfSApOwo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="28" hostname="learning2.pflb.ru:56902" path="/js/core/dust.js" url="http://learning2.pflb.ru:56902/js/core/dust.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52233" connectionId="2084" origin="HTML" encodingType="ANSI" ordinal="6" startDateTime="2020-02-23T18:01:14.454+04:00" startTime="4705" endTime="5012" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb3JlL2R1c3QuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi9sb2dpbg0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>162626</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTYyNjI2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDE2MjYyNg0KRGF0ZTogU3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohIGR1c3Rqcy1saW5rZWRpbiAtIHYyLjcuMgogKiBodHRwOi8vZHVzdGpzLmNvbS8KICogQ29weXJpZ2h0IChjKSAyMDE1IEFsZWtzYW5kZXIgV2lsbGlhbXM7IFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAqLwooZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgJiYgZGVmaW5lLmFtZC5kdXN0ID09PSB0cnVlKSB7CiAgICAgICAgZGVmaW5lKCdkdXN0LmNvcmUnLCBbXSwgZmFjdG9yeSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgfSBlbHNlIHsKICAgICAgICByb290LmR1c3QgPSBmYWN0b3J5KCk7CiAgICB9Cn0odGhpcywgZnVuY3Rpb24oKSB7CiAgICB2YXIgZHVzdCA9IHsKICAgICAgICAgICAgInZlcnNpb24iOiAiMi43LjIiCiAgICAgICAgfSwKICAgICAgICBOT05FID0gJ05PTkUnLCBFUlJPUiA9ICdFUlJPUicsIFdBUk4gPSAnV0FSTicsIElORk8gPSAnSU5GTycsIERFQlVHID0gJ0RFQlVHJywKICAgICAgICBFTVBUWV9GVU5DID0gZnVuY3Rpb24oKSB7fTsKCiAgICBkdXN0LmNvbmZpZyA9IHsKICAgICAgICB3aGl0ZXNwYWNlOiBmYWxzZSwKICAgICAgICBhbWQ6IGZhbHNlLAogICAgICAgIGNqczogZmFsc2UsCiAgICAgICAgY2FjaGU6IHRydWUKICAgIH07CgogICAgLy8gRGlyZWN0aXZlIGFsaWFzZXMgdG8gbWluaWZ5IGNvZGUKICAgIGR1c3QuX2FsaWFzZXMgPSB7CiAgICAgICAgIndyaXRlIjogInciLAogICAgICAgICJlbmQiOiAiZSIsCiAgICAgICAgIm1hcCI6ICJtIiwKICAgICAgICAicmVuZGVyIjogInIiLAogICAgICAgICJyZWZlcmVuY2UiOiAiZiIsCiAgICAgICAgInNlY3Rpb24iOiAicyIsCiAgICAgICAgImV4aXN0cyI6ICJ4IiwKICAgICAgICAibm90ZXhpc3RzIjogIm54IiwKICAgICAgICAiYmxvY2siOiAiYiIsCiAgICAgICAgInBhcnRpYWwiOiAicCIsCiAgICAgICAgImhlbHBlciI6ICJoIgogICAgfTsKCiAgICAoZnVuY3Rpb24gaW5pdExvZ2dpbmcoKSB7CiAgICAgICAgLypnbG9iYWwgcHJvY2VzcywgY29uc29sZSovCiAgICAgICAgdmFyIGxvZ2dpbmdMZXZlbHMgPSB7IERFQlVHOiAwLCBJTkZPOiAxLCBXQVJOOiAyLCBFUlJPUjogMywgTk9ORTogNCB9LAogICAgICAgICAgICBjb25zb2xlTG9nLAogICAgICAgICAgICBsb2c7CgogICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5sb2cpIHsKICAgICAgICAgICAgY29uc29sZUxvZyA9IGNvbnNvbGUubG9nOwogICAgICAgICAgICBpZih0eXBlb2YgY29uc29sZUxvZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgbG9nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZUxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGVMb2coQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykuam9pbignICcpKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsb2cgPSBFTVBUWV9GVU5DOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogRmlsdGVycyBtZXNzYWdlcyBiYXNlZCBvbiBgZHVzdC5kZWJ1Z0xldmVsYC4KICAgICAgICAgKiBUaGlzIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2lsbCBwcmludCB0byB0aGUgY29uc29sZSBpZiBpdCBleGlzdHMuCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd8RXJyb3J9IG1lc3NhZ2UgdGhlIG1lc3NhZ2UgdG8gcHJpbnQvdGhyb3cKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgc2V2ZXJpdHkgb2YgdGhlIG1lc3NhZ2UoRVJST1IsIFdBUk4sIElORk8sIG9yIERFQlVHKQogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKi8KICAgICAgICBkdXN0LmxvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgSU5GTzsKICAgICAgICAgICAgaWYgKGxvZ2dpbmdMZXZlbHNbdHlwZV0gPj0gbG9nZ2luZ0xldmVsc1tkdXN0LmRlYnVnTGV2ZWxdKSB7CiAgICAgICAgICAgICAgICBsb2coJ1tEVVNUOicgKyB0eXBlICsgJ10nLCBtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGR1c3QuZGVidWdMZXZlbCA9IE5PTkU7CiAgICAgICAgaWYodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIC9cYmR1c3RcYi8udGVzdChwcm9jZXNzLmVudi5ERUJVRykpIHsKICAgICAgICAgICAgZHVzdC5kZWJ1Z0xldmVsID0gREVCVUc7CiAgICAgICAgfQoKICAgIH0oKSk7CgogICAgZHVzdC5oZWxwZXJzID0ge307CgogICAgZHVzdC5jYWNoZSA9IHt9OwoKICAgIGR1c3QucmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lLCB0bXBsKSB7CiAgICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdG1wbC50ZW1wbGF0ZU5hbWUgPSBuYW1lOwogICAgICAgIGlmIChkdXN0LmNvbmZpZy5jYWNoZSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgZHVzdC5jYWNoZVtuYW1lXSA9IHRtcGw7CiAgICAgICAgfQogICAgfTsKCiAgICBkdXN0LnJlbmRlciA9IGZ1bmN0aW9uKG5hbWVPclRlbXBsYXRlLCBjb250ZXh0LCBjYWxsYmFjaykgewogICAgICAgIHZhciBjaHVuayA9IG5ldyBTdHViKGNhbGxiYWNrKS5oZWFkOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxvYWQobmFtZU9yVGVtcGxhdGUsIGNodW5rLCBjb250ZXh0KS5lbmQoKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgY2h1bmsuc2V0RXJyb3IoZXJyKTsKICAgICAgICB9CiAgICB9OwoKICAgIGR1c3Quc3RyZWFtID0gZnVuY3Rpb24obmFtZU9yVGVtcGxhdGUsIGNvbnRleHQpIHsKICAgICAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmVhbSgpLAogICAgICAgICAgICBjaHVuayA9IHN0cmVhbS5oZWFkOwogICAgICAgIGR1c3QubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb2FkKG5hbWVPclRlbXBsYXRlLCBjaHVuaywgY29udGV4dCkuZW5kKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgY2h1bmsuc2V0RXJyb3IoZXJyKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBzdHJlYW07CiAgICB9OwoKICAgIC8qKgogICAgICogRXh0cmFjdHMgYSB0ZW1wbGF0ZSBmdW5jdGlvbiAoYm9keV8wKSBmcm9tIHdoYXRldmVyIGlzIHBhc3NlZC4KICAgICAqIEBwYXJhbSBuYW1lT3JUZW1wbGF0ZSB7Kn0gQ291bGQgYmU6CiAgICAgKiAgIC0gdGhlIG5hbWUgb2YgYSB0ZW1wbGF0ZSB0byBsb2FkIGZyb20gY2FjaGUKICAgICAqICAgLSBhIENvbW1vbkpTLWNvbXBpbGVkIHRlbXBsYXRlIChhIGZ1bmN0aW9uIHdpdGggYSBgdGVtcGxhdGVgIHByb3BlcnR5KQogICAgICogICAtIGEgdGVtcGxhdGUgZnVuY3Rpb24KICAgICAqIEBwYXJhbSBsb2FkRnJvbUNhY2hlIHtCb29sZWFufSBpZiBmYWxzZSwgZG9uJ3QgbG9vayBpbiB0aGUgY2FjaGUKICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBhIHRlbXBsYXRlIGZ1bmN0aW9uLCBpZiBmb3VuZAogICAgICovCiAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZShuYW1lT3JUZW1wbGF0ZSwgbG9hZEZyb21DYWNoZS8qPXRydWUqLykgewogICAgICAgIGlmKCFuYW1lT3JUZW1wbGF0ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmKHR5cGVvZiBuYW1lT3JUZW1wbGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiBuYW1lT3JUZW1wbGF0ZS50ZW1wbGF0ZSkgewogICAgICAgICAgICAvLyBTdWdhciBhd2F5IENvbW1vbkpTIG1vZHVsZSB0ZW1wbGF0ZXMKICAgICAgICAgICAgcmV0dXJuIG5hbWVPclRlbXBsYXRlLnRlbXBsYXRlOwogICAgICAgIH0KICAgICAgICBpZihkdXN0LmlzVGVtcGxhdGVGbihuYW1lT3JUZW1wbGF0ZSkpIHsKICAgICAgICAgICAgLy8gVGVtcGxhdGUgZnVuY3Rpb25zIHBhc3NlZCBkaXJlY3RseQogICAgICAgICAgICByZXR1cm4gbmFtZU9yVGVtcGxhdGU7CiAgICAgICAgfQogICAgICAgIGlmKGxvYWRGcm9tQ2FjaGUgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIC8vIFRyeSBsb2FkaW5nIGEgdGVtcGxhdGUgd2l0aCB0aGlzIG5hbWUgZnJvbSBjYWNoZQogICAgICAgICAgICByZXR1cm4gZHVzdC5jYWNoZVtuYW1lT3JUZW1wbGF0ZV07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWQobmFtZU9yVGVtcGxhdGUsIGNodW5rLCBjb250ZXh0KSB7CiAgICAgICAgaWYoIW5hbWVPclRlbXBsYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBjaHVuay5zZXRFcnJvcihuZXcgRXJyb3IoJ05vIHRlbXBsYXRlIG9yIHRlbXBsYXRlIG5hbWUgcHJvdmlkZWQgdG8gcmVuZGVyJykpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRlbXBsYXRlID0gZ2V0VGVtcGxhdGUobmFtZU9yVGVtcGxhdGUsIGR1c3QuY29uZmlnLmNhY2hlKTsKCiAgICAgICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZShjaHVuaywgQ29udGV4dC53cmFwKGNvbnRleHQsIHRlbXBsYXRlLnRlbXBsYXRlTmFtZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChkdXN0Lm9uTG9hZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rLm1hcChmdW5jdGlvbihjaHVuaykgewogICAgICAgICAgICAgICAgICAgIC8vIEFsaWFzIGp1c3Qgc28gaXQncyBlYXNpZXIgdG8gcmVhZCB0aGF0IHRoaXMgd291bGQgYWx3YXlzIGJlIGEgbmFtZQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbmFtZU9yVGVtcGxhdGU7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhyZWUgcG9zc2libGUgc2NlbmFyaW9zIGZvciBhIHN1Y2Nlc3NmdWwgY2FsbGJhY2s6CiAgICAgICAgICAgICAgICAgICAgLy8gICAtIGByZXF1aXJlKG5hbWVPclRlbXBsYXRlKShkdXN0KTsgY2IoKWAKICAgICAgICAgICAgICAgICAgICAvLyAgIC0gYHNyYyA9IHJlYWRGaWxlKCdzcmMuZHVzdCcpOyBjYihudWxsLCBzcmMpYAogICAgICAgICAgICAgICAgICAgIC8vICAgLSBgY29tcGlsZWRUZW1wbGF0ZSA9IHJlcXVpcmUobmFtZU9yVGVtcGxhdGUpKGR1c3QpOyBjYihudWxsLCBjb21waWxlZFRlbXBsYXRlKWAKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkb25lKGVyciwgc3JjT3JUZW1wbGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuay5zZXRFcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZWZlciBhIHRlbXBsYXRlIHRoYXQgaXMgcGFzc2VkIHZpYSBjYWxsYmFjayBvdmVyIHRoZSBjYWNoZWQgdmVyc2lvbi4KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSBnZXRUZW1wbGF0ZShzcmNPclRlbXBsYXRlLCBmYWxzZSkgfHwgZ2V0VGVtcGxhdGUobmFtZSwgZHVzdC5jb25maWcuY2FjaGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlbXBsYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGEgdGVtcGxhdGUgc3RyaW5nLCBjb21waWxlIGl0IGFuZCByZWdpc3RlciB1bmRlciBgbmFtZWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGR1c3QuY29tcGlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gZHVzdC5sb2FkU291cmNlKGR1c3QuY29tcGlsZShzcmNPclRlbXBsYXRlLCBuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuay5zZXRFcnJvcihuZXcgRXJyb3IoJ0R1c3QgY29tcGlsZXIgbm90IGF2YWlsYWJsZScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZShjaHVuaywgQ29udGV4dC53cmFwKGNvbnRleHQsIHRlbXBsYXRlLnRlbXBsYXRlTmFtZSkpLmVuZCgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYoZHVzdC5vbkxvYWQubGVuZ3RoID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGR1c3Qub25Mb2FkKG5hbWUsIGNvbnRleHQub3B0aW9ucywgZG9uZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZHVzdC5vbkxvYWQobmFtZSwgZG9uZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNodW5rLnNldEVycm9yKG5ldyBFcnJvcignVGVtcGxhdGUgTm90IEZvdW5kOiAnICsgbmFtZU9yVGVtcGxhdGUpKTsKICAgICAgICB9CiAgICB9CgogICAgZHVzdC5sb2FkU291cmNlID0gZnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgLypqc2hpbnQgZXZpbDp0cnVlKi8KICAgICAgICByZXR1cm4gZXZhbChzb3VyY2UpOwogICAgfTsKCiAgICBpZiAoQXJyYXkuaXNBcnJheSkgewogICAgICAgIGR1c3QuaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CiAgICB9IGVsc2UgewogICAgICAgIGR1c3QuaXNBcnJheSA9IGZ1bmN0aW9uKGFycikgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICAgICAgfTsKICAgIH0KCiAgICBkdXN0Lm5leHRUaWNrID0gKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTsKICAgICAgICB9OwogICAgfSkoKTsKCiAgICAvKioKICAgICAqIER1c3QgaGFzIGl0cyBvd24gcnVsZXMgZm9yIHdoYXQgaXMgImVtcHR5Ii0tIHdoaWNoIGlzIG5vdCB0aGUgc2FtZSBhcyBmYWxzeS4KICAgICAqIEVtcHR5IGFycmF5cywgbnVsbCwgYW5kIHVuZGVmaW5lZCBhcmUgZW1wdHkKICAgICAqLwogICAgZHVzdC5pc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoZHVzdC5pc0FycmF5KHZhbHVlKSAmJiAhdmFsdWUubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gIXZhbHVlOwogICAgfTsKCiAgICBkdXN0LmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihvYmopIHsKICAgICAgICB2YXIga2V5OwogICAgICAgIGlmIChvYmogPT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAob2JqLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBmb3IgKGtleSBpbiBvYmopIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CgogICAgZHVzdC5pc1RlbXBsYXRlRm4gPSBmdW5jdGlvbihlbGVtKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbGVtID09PSAnZnVuY3Rpb24nICYmCiAgICAgICAgICAgIGVsZW0uX19kdXN0Qm9keTsKICAgIH07CgogICAgLyoqCiAgICAgKiBEZWNpZGUgc29tZXdoYXQtbmFpdmVseSBpZiBzb21ldGhpbmcgaXMgYSBUaGVuYWJsZS4KICAgICAqIEBwYXJhbSBlbGVtIHsqfSBvYmplY3QgdG8gaW5zcGVjdAogICAgICogQHJldHVybiB7Qm9vbGVhbn0gaXMgYGVsZW1gIGEgVGhlbmFibGU/CiAgICAgKi8KICAgIGR1c3QuaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICByZXR1cm4gZWxlbSAmJgogICAgICAgICAgICB0eXBlb2YgZWxlbSA9PT0gJ29iamVjdCcgJiYKICAgICAgICAgICAgdHlwZW9mIGVsZW0udGhlbiA9PT0gJ2Z1bmN0aW9uJzsKICAgIH07CgogICAgLyoqCiAgICAgKiBEZWNpZGUgdmVyeSBuYWl2ZWx5IGlmIHNvbWV0aGluZyBpcyBhIFN0cmVhbS4KICAgICAqIEBwYXJhbSBlbGVtIHsqfSBvYmplY3QgdG8gaW5zcGVjdAogICAgICogQHJldHVybiB7Qm9vbGVhbn0gaXMgYGVsZW1gIGEgU3RyZWFtPwogICAgICovCiAgICBkdXN0LmlzU3RyZWFtYWJsZSA9IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICByZXR1cm4gZWxlbSAmJgogICAgICAgICAgICB0eXBlb2YgZWxlbS5vbiA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICAgICAgICB0eXBlb2YgZWxlbS5waXBlID09PSAnZnVuY3Rpb24nOwogICAgfTsKCiAgICAvLyBhcHBseSB0aGUgZmlsdGVyIGNoYWluIGFuZCByZXR1cm4gdGhlIG91dHB1dCBzdHJpbmcKICAgIGR1c3QuZmlsdGVyID0gZnVuY3Rpb24oc3RyaW5nLCBhdXRvLCBmaWx0ZXJzLCBjb250ZXh0KSB7CiAgICAgICAgdmFyIGksIGxlbiwgbmFtZSwgZmlsdGVyOwogICAgICAgIGlmIChmaWx0ZXJzKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIG5hbWUgPSBmaWx0ZXJzW2ldOwogICAgICAgICAgICAgICAgaWYgKCFuYW1lLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmlsdGVyID0gZHVzdC5maWx0ZXJzW25hbWVdOwogICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdzJykgewogICAgICAgICAgICAgICAgICAgIGF1dG8gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nID0gZmlsdGVyKHN0cmluZywgY29udGV4dCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGR1c3QubG9nKCdJbnZhbGlkIGZpbHRlciBgJyArIG5hbWUgKyAnYCcsIFdBUk4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIGJ5IGRlZmF1bHQgYWx3YXlzIGFwcGx5IHRoZSBoIGZpbHRlciwgdW5sZXNzIGFza2VkIHRvIHVuZXNjYXBlIHdpdGggfHMKICAgICAgICBpZiAoYXV0bykgewogICAgICAgICAgICBzdHJpbmcgPSBkdXN0LmZpbHRlcnNbYXV0b10oc3RyaW5nLCBjb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cmluZzsKICAgIH07CgogICAgZHVzdC5maWx0ZXJzID0gewogICAgICAgIGg6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBkdXN0LmVzY2FwZUh0bWwodmFsdWUpOyB9LAogICAgICAgIGo6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBkdXN0LmVzY2FwZUpzKHZhbHVlKTsgfSwKICAgICAgICB1OiBlbmNvZGVVUkksCiAgICAgICAgdWM6IGVuY29kZVVSSUNvbXBvbmVudCwKICAgICAgICBqczogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGR1c3QuZXNjYXBlSlNPTih2YWx1ZSk7IH0sCiAgICAgICAganA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghSlNPTikge2R1c3QubG9nKCdKU09OIGlzIHVuZGVmaW5lZDsgY291bGQgbm90IHBhcnNlIGAnICsgdmFsdWUgKyAnYCcsIFdBUk4pOwogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBDb250ZXh0KHN0YWNrLCBnbG9iYWwsIG9wdGlvbnMsIGJsb2NrcywgdGVtcGxhdGVOYW1lKSB7CiAgICAgICAgaWYoc3RhY2sgIT09IHVuZGVmaW5lZCAmJiAhKHN0YWNrIGluc3RhbmNlb2YgU3RhY2spKSB7CiAgICAgICAgICAgIHN0YWNrID0gbmV3IFN0YWNrKHN0YWNrKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrOwogICAgICAgIHRoaXMuZ2xvYmFsID0gZ2xvYmFsOwogICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7CiAgICAgICAgdGhpcy50ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZU5hbWU7CiAgICB9CgogICAgZHVzdC5tYWtlQmFzZSA9IGR1c3QuY29udGV4dCA9IGZ1bmN0aW9uKGdsb2JhbCwgb3B0aW9ucykgewogICAgICAgIHJldHVybiBuZXcgQ29udGV4dCh1bmRlZmluZWQsIGdsb2JhbCwgb3B0aW9ucyk7CiAgICB9OwoKICAgIC8qKgogICAgICogRmFjdG9yeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYSBjbG9zdXJlIHNjb3BlIGFyb3VuZCBhIFRoZW5hYmxlLWNhbGxiYWNrLgogICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBhIFRoZW5hYmxlIHRoYXQgd2lsbCByZXN1bWUgYQogICAgICogQ29udGV4dCBsb29rdXAgb25jZSB0aGUgVGhlbmFibGUgcmVzb2x2ZXMgd2l0aCBuZXcgZGF0YSwgYWRkaW5nIHRoYXQgbmV3CiAgICAgKiBkYXRhIHRvIHRoZSBsb29rdXAgc3RhY2suCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFdpdGhSZXNvbHZlZERhdGEoY3R4LCBjdXIsIGRvd24pIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICByZXR1cm4gY3R4LnB1c2goZGF0YSkuX2dldChjdXIsIGRvd24pOwogICAgICAgIH07CiAgICB9CgogICAgQ29udGV4dC53cmFwID0gZnVuY3Rpb24oY29udGV4dCwgbmFtZSkgewogICAgICAgIGlmIChjb250ZXh0IGluc3RhbmNlb2YgQ29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gY29udGV4dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBDb250ZXh0KGNvbnRleHQsIHt9LCB7fSwgbnVsbCwgbmFtZSk7CiAgICB9OwoKICAgIC8qKgogICAgICogUHVibGljIEFQSSBmb3IgZ2V0dGluZyBhIHZhbHVlIGZyb20gdGhlIGNvbnRleHQuCiAgICAgKiBAbWV0aG9kIGdldAogICAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IHBhdGggVGhlIHBhdGggdG8gdGhlIHZhbHVlLiBTdXBwb3J0ZWQgZm9ybWF0cyBhcmU6CiAgICAgKiAna2V5JwogICAgICogJ3BhdGgudG8ua2V5JwogICAgICogJy5wYXRoLnRvLmtleScKICAgICAqIFsncGF0aCcsICd0bycsICdrZXknXQogICAgICogWydrZXknXQogICAgICogQHBhcmFtIHtib29sZWFufSBbY3VyPWZhbHNlXSBCb29sZWFuIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHNlYXJjaCBzaG91bGQgYmUgbGltaXRlZCB0byB0aGUKICAgICAqIGN1cnJlbnQgY29udGV4dCAodHJ1ZSksIG9yIGlmIGdldCBzaG91bGQgc2VhcmNoIGluIHBhcmVudCBjb250ZXh0cyBhcyB3ZWxsIChmYWxzZSkuCiAgICAgKiBAcHVibGljCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG9iamVjdH0KICAgICAqLwogICAgQ29udGV4dC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24ocGF0aCwgY3VyKSB7CiAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBpZiAocGF0aFswXSA9PT0gJy4nKSB7CiAgICAgICAgICAgICAgICBjdXIgPSB0cnVlOwogICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBhdGggPSBwYXRoLnNwbGl0KCcuJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLl9nZXQoY3VyLCBwYXRoKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBHZXQgYSB2YWx1ZSBmcm9tIHRoZSBjb250ZXh0CiAgICAgKiBAbWV0aG9kIF9nZXQKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY3VyIEdldCBvbmx5IGZyb20gdGhlIGN1cnJlbnQgY29udGV4dAogICAgICogQHBhcmFtIHthcnJheX0gZG93biBBbiBhcnJheSBvZiBlYWNoIHN0ZXAgaW4gdGhlIHBhdGgKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcmV0dXJuIHtzdHJpbmcgfCBvYmplY3R9CiAgICAgKi8KICAgIENvbnRleHQucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbihjdXIsIGRvd24pIHsKICAgICAgICB2YXIgY3R4ID0gdGhpcy5zdGFjayB8fCB7fSwKICAgICAgICAgICAgaSA9IDEsCiAgICAgICAgICAgIHZhbHVlLCBmaXJzdCwgbGVuLCBjdHhUaGlzLCBmbjsKCiAgICAgICAgZmlyc3QgPSBkb3duWzBdOwogICAgICAgIGxlbiA9IGRvd24ubGVuZ3RoOwoKICAgICAgICBpZiAoY3VyICYmIGxlbiA9PT0gMCkgewogICAgICAgICAgICBjdHhUaGlzID0gY3R4OwogICAgICAgICAgICBjdHggPSBjdHguaGVhZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWN1cikgewogICAgICAgICAgICAgICAgLy8gU2VhcmNoIHVwIHRoZSBzdGFjayBmb3IgdGhlIGZpcnN0IHZhbHVlCiAgICAgICAgICAgICAgICB3aGlsZSAoY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5pc09iamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHhUaGlzID0gY3R4LmhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY3R4LmhlYWRbZmlyc3RdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY3R4ID0gY3R4LnRhaWw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVHJ5IGxvb2tpbmcgaW4gdGhlIGdsb2JhbCBjb250ZXh0IGlmIHdlIGhhdmVuJ3QgZm91bmQgYW55dGhpbmcgeWV0CiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGN0eCA9IHZhbHVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLmdsb2JhbCAmJiB0aGlzLmdsb2JhbFtmaXJzdF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3R4KSB7CiAgICAgICAgICAgICAgICAvLyBpZiBzY29wZSBpcyBsaW1pdGVkIGJ5IGEgbGVhZGluZyBkb3QsIGRvbid0IHNlYXJjaCB1cCB0aGUgdHJlZQogICAgICAgICAgICAgICAgaWYoY3R4LmhlYWQpIHsKICAgICAgICAgICAgICAgICAgICBjdHggPSBjdHguaGVhZFtmaXJzdF07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnRleHQncyBoZWFkIGlzIGVtcHR5LCB2YWx1ZSB3ZSBhcmUgc2VhcmNoaW5nIGZvciBpcyBub3QgZGVmaW5lZAogICAgICAgICAgICAgICAgICAgIGN0eCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUgKGN0eCAmJiBpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICBpZiAoZHVzdC5pc1RoZW5hYmxlKGN0eCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBCYWlsIGVhcmx5IGJ5IHJldHVybmluZyBhIFRoZW5hYmxlIGZvciB0aGUgcmVtYWluZGVyIG9mIHRoZSBzZWFyY2ggdHJlZQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgudGhlbihnZXRXaXRoUmVzb2x2ZWREYXRhKHRoaXMsIGN1ciwgZG93bi5zbGljZShpKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY3R4VGhpcyA9IGN0eDsKICAgICAgICAgICAgICAgIGN0eCA9IGN0eFtkb3duW2ldXTsKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBjdHggPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgZm4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5hcHBseShjdHhUaGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgZHVzdC5sb2coZXJyLCBFUlJPUik7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBmbi5fX2R1c3RCb2R5ID0gISFjdHguX19kdXN0Qm9keTsKICAgICAgICAgICAgcmV0dXJuIGZuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChjdHggPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgZHVzdC5sb2coJ0Nhbm5vdCBmaW5kIHJlZmVyZW5jZSBgeycgKyBkb3duLmpvaW4oJy4nKSArICd9YCBpbiB0ZW1wbGF0ZSBgJyArIHRoaXMuZ2V0VGVtcGxhdGVOYW1lKCkgKyAnYCcsIElORk8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjdHg7CiAgICAgICAgfQogICAgfTsKCiAgICBDb250ZXh0LnByb3RvdHlwZS5nZXRQYXRoID0gZnVuY3Rpb24oY3VyLCBkb3duKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2dldChjdXIsIGRvd24pOwogICAgfTsKCiAgICBDb250ZXh0LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oaGVhZCwgaWR4LCBsZW4pIHsKICAgICAgICBpZihoZWFkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZHVzdC5sb2coIk5vdCBwdXNoaW5nIGFuIHVuZGVmaW5lZCB2YXJpYWJsZSBvbnRvIHRoZSBjb250ZXh0IiwgSU5GTyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5yZWJhc2UobmV3IFN0YWNrKGhlYWQsIHRoaXMuc3RhY2ssIGlkeCwgbGVuKSk7CiAgICB9OwoKICAgIENvbnRleHQucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBoZWFkID0gdGhpcy5jdXJyZW50KCk7CiAgICAgICAgdGhpcy5zdGFjayA9IHRoaXMuc3RhY2sgJiYgdGhpcy5zdGFjay50YWlsOwogICAgICAgIHJldHVybiBoZWFkOwogICAgfTsKCiAgICBDb250ZXh0LnByb3RvdHlwZS5yZWJhc2UgPSBmdW5jdGlvbihoZWFkKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb250ZXh0KGhlYWQsIHRoaXMuZ2xvYmFsLCB0aGlzLm9wdGlvbnMsIHRoaXMuYmxvY2tzLCB0aGlzLmdldFRlbXBsYXRlTmFtZSgpKTsKICAgIH07CgogICAgQ29udGV4dC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMucmViYXNlKCk7CiAgICAgICAgY29udGV4dC5zdGFjayA9IHRoaXMuc3RhY2s7CiAgICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICB9OwoKICAgIENvbnRleHQucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdGFjayAmJiB0aGlzLnN0YWNrLmhlYWQ7CiAgICB9OwoKICAgIENvbnRleHQucHJvdG90eXBlLmdldEJsb2NrID0gZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgdmFyIGJsb2NrcywgbGVuLCBmbjsKCiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAga2V5ID0ga2V5KG5ldyBDaHVuaygpLCB0aGlzKS5kYXRhLmpvaW4oJycpOwogICAgICAgIH0KCiAgICAgICAgYmxvY2tzID0gdGhpcy5ibG9ja3M7CgogICAgICAgIGlmICghYmxvY2tzKSB7CiAgICAgICAgICAgIGR1c3QubG9nKCdObyBibG9ja3MgZm9yIGNvbnRleHQgYCcgKyBrZXkgKyAnYCBpbiB0ZW1wbGF0ZSBgJyArIHRoaXMuZ2V0VGVtcGxhdGVOYW1lKCkgKyAnYCcsIERFQlVHKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgbGVuID0gYmxvY2tzLmxlbmd0aDsKICAgICAgICB3aGlsZSAobGVuLS0pIHsKICAgICAgICAgICAgZm4gPSBibG9ja3NbbGVuXVtrZXldOwogICAgICAgICAgICBpZiAoZm4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBmbjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZHVzdC5sb2coJ01hbGZvcm1lZCB0ZW1wbGF0ZSBgJyArIHRoaXMuZ2V0VGVtcGxhdGVOYW1lKCkgKyAnYCB3YXMgbWlzc2luZyBvbmUgb3IgbW9yZSBibG9ja3MuJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKCiAgICBDb250ZXh0LnByb3RvdHlwZS5zaGlmdEJsb2NrcyA9IGZ1bmN0aW9uKGxvY2FscykgewogICAgICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywKICAgICAgICAgICAgbmV3QmxvY2tzOwoKICAgICAgICBpZiAobG9jYWxzKSB7CiAgICAgICAgICAgIGlmICghYmxvY2tzKSB7CiAgICAgICAgICAgICAgICBuZXdCbG9ja3MgPSBbbG9jYWxzXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld0Jsb2NrcyA9IGJsb2Nrcy5jb25jYXQoW2xvY2Fsc10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29udGV4dCh0aGlzLnN0YWNrLCB0aGlzLmdsb2JhbCwgdGhpcy5vcHRpb25zLCBuZXdCbG9ja3MsIHRoaXMuZ2V0VGVtcGxhdGVOYW1lKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQ29udGV4dC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKGJvZHkpIHsKICAgICAgICB2YXIgY2h1bms7CgogICAgICAgIGlmKHR5cGVvZiBib2R5ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHJldHVybiBib2R5OwogICAgICAgIH0KICAgICAgICBjaHVuayA9IG5ldyBDaHVuaygpLnJlbmRlcihib2R5LCB0aGlzKTsKICAgICAgICBpZihjaHVuayBpbnN0YW5jZW9mIENodW5rKSB7CiAgICAgICAgICAgIHJldHVybiBjaHVuay5kYXRhLmpvaW4oJycpOyAvLyBpZTcgcGVyZgogICAgICAgIH0KICAgICAgICByZXR1cm4gY2h1bms7CiAgICB9OwoKICAgIENvbnRleHQucHJvdG90eXBlLmdldFRlbXBsYXRlTmFtZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlTmFtZTsKICAgIH07CgogICAgZnVuY3Rpb24gU3RhY2soaGVhZCwgdGFpbCwgaWR4LCBsZW4pIHsKICAgICAgICB0aGlzLnRhaWwgPSB0YWlsOwogICAgICAgIHRoaXMuaXNPYmplY3QgPSBoZWFkICYmIHR5cGVvZiBoZWFkID09PSAnb2JqZWN0JzsKICAgICAgICB0aGlzLmhlYWQgPSBoZWFkOwogICAgICAgIHRoaXMuaW5kZXggPSBpZHg7CiAgICAgICAgdGhpcy5vZiA9IGxlbjsKICAgIH0KCiAgICBmdW5jdGlvbiBTdHViKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy5oZWFkID0gbmV3IENodW5rKHRoaXMpOwogICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgICB0aGlzLm91dCA9ICcnOwogICAgfQoKICAgIFN0dWIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGNodW5rID0gdGhpcy5oZWFkOwoKICAgICAgICB3aGlsZSAoY2h1bmspIHsKICAgICAgICAgICAgaWYgKGNodW5rLmZsdXNoYWJsZSkgewogICAgICAgICAgICAgICAgdGhpcy5vdXQgKz0gY2h1bmsuZGF0YS5qb2luKCcnKTsgLy9pZTcgcGVyZgogICAgICAgICAgICB9IGVsc2UgaWYgKGNodW5rLmVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGNodW5rLmVycm9yKTsKICAgICAgICAgICAgICAgIGR1c3QubG9nKCdSZW5kZXJpbmcgZmFpbGVkIHdpdGggZXJyb3IgYCcgKyBjaHVuay5lcnJvciArICdgJywgRVJST1IpOwogICAgICAgICAgICAgICAgdGhpcy5mbHVzaCA9IEVNUFRZX0ZVTkM7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5uZXh0OwogICAgICAgICAgICB0aGlzLmhlYWQgPSBjaHVuazsKICAgICAgICB9CiAgICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCB0aGlzLm91dCk7CiAgICB9OwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhbiBpbnRlcmZhY2Ugc29ydCBvZiBsaWtlIGEgU3RyZWFtczIgUmVhZGFibGVTdHJlYW0uCiAgICAgKi8KICAgIGZ1bmN0aW9uIFN0cmVhbSgpIHsKICAgICAgICB0aGlzLmhlYWQgPSBuZXcgQ2h1bmsodGhpcyk7CiAgICB9CgogICAgU3RyZWFtLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBjaHVuayA9IHRoaXMuaGVhZDsKCiAgICAgICAgd2hpbGUoY2h1bmspIHsKICAgICAgICAgICAgaWYgKGNodW5rLmZsdXNoYWJsZSkgewogICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkYXRhJywgY2h1bmsuZGF0YS5qb2luKCcnKSk7IC8vaWU3IHBlcmYKICAgICAgICAgICAgfSBlbHNlIGlmIChjaHVuay5lcnJvcikgewogICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGNodW5rLmVycm9yKTsKICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZW5kJyk7CiAgICAgICAgICAgICAgICBkdXN0LmxvZygnU3RyZWFtaW5nIGZhaWxlZCB3aXRoIGVycm9yIGAnICsgY2h1bmsuZXJyb3IgKyAnYCcsIEVSUk9SKTsKICAgICAgICAgICAgICAgIHRoaXMuZmx1c2ggPSBFTVBUWV9GVU5DOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNodW5rID0gY2h1bmsubmV4dDsKICAgICAgICAgICAgdGhpcy5oZWFkID0gY2h1bms7CiAgICAgICAgfQogICAgICAgIHRoaXMuZW1pdCgnZW5kJyk7CiAgICB9OwoKICAgIC8qKgogICAgICogRXhlY3V0ZXMgbGlzdGVuZXJzIGZvciBgdHlwZWAgYnkgcGFzc2luZyBkYXRhLiBOb3RlIHRoYXQgdGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBhCiAgICAgKiBOb2RlIHN0cmVhbSwgd2hpY2ggY2FuIHBhc3MgYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBhcmd1bWVudHMKICAgICAqIEByZXR1cm4gYHRydWVgIGlmIGV2ZW50IGhhZCBsaXN0ZW5lcnMsIGBmYWxzZWAgb3RoZXJ3aXNlCiAgICAgKi8KICAgIFN0cmVhbS5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHsKICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHMgfHwge30sCiAgICAgICAgICAgIGhhbmRsZXJzID0gZXZlbnRzW3R5cGVdIHx8IFtdLAogICAgICAgICAgICBpLCBsOwoKICAgICAgICBpZiAoIWhhbmRsZXJzLmxlbmd0aCkgewogICAgICAgICAgICBkdXN0LmxvZygnU3RyZWFtIGJyb2FkY2FzdGluZywgYnV0IG5vIGxpc3RlbmVycyBmb3IgYCcgKyB0eXBlICsgJ2AnLCBERUJVRyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGhhbmRsZXJzID0gaGFuZGxlcnMuc2xpY2UoMCk7CiAgICAgICAgZm9yIChpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBoYW5kbGVyc1tpXShkYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwoKICAgIFN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBjYWxsYmFjaykgewogICAgICAgIHZhciBldmVudHMgPSB0aGlzLmV2ZW50cyA9IHRoaXMuZXZlbnRzIHx8IHt9LAogICAgICAgICAgICBoYW5kbGVycyA9IGV2ZW50c1t0eXBlXSA9IGV2ZW50c1t0eXBlXSB8fCBbXTsKCiAgICAgICAgaWYodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGR1c3QubG9nKCdObyBjYWxsYmFjayBmdW5jdGlvbiBwcm92aWRlZCBmb3IgYCcgKyB0eXBlICsgJ2AgZXZlbnQgbGlzdGVuZXInLCBXQVJOKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoYW5kbGVycy5wdXNoKGNhbGxiYWNrKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8qKgogICAgICogUGlwZXMgdG8gYSBXcml0YWJsZVN0cmVhbS4gTm90ZSB0aGF0IGJhY2twcmVzc3VyZSBpc24ndCBpbXBsZW1lbnRlZCwKICAgICAqIHNvIHdlIGp1c3Qgd3JpdGUgYXMgZmFzdCBhcyB3ZSBjYW4uCiAgICAgKiBAcGFyYW0gc3RyZWFtIHtXcml0YWJsZVN0cmVhbX0KICAgICAqIEByZXR1cm4gc2VsZgogICAgICovCiAgICBTdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICBpZih0eXBlb2Ygc3RyZWFtLndyaXRlICE9PSAnZnVuY3Rpb24nIHx8CiAgICAgICAgICAgIHR5cGVvZiBzdHJlYW0uZW5kICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGR1c3QubG9nKCdJbmNvbXBhdGlibGUgc3RyZWFtIHBhc3NlZCB0byBgcGlwZWAnLCBXQVJOKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGVzdEVuZGVkID0gZmFsc2U7CgogICAgICAgIGlmKHR5cGVvZiBzdHJlYW0uZW1pdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBzdHJlYW0uZW1pdCgncGlwZScsIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgaWYodHlwZW9mIHN0cmVhbS5vbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBzdHJlYW0ub24oJ2Vycm9yJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBkZXN0RW5kZWQgPSB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgIC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgIGlmKGRlc3RFbmRlZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLndyaXRlKGRhdGEsICd1dGY4Jyk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBkdXN0LmxvZyhlcnIsIEVSUk9SKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmKGRlc3RFbmRlZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmVuZCgpOwogICAgICAgICAgICAgICAgICAgIGRlc3RFbmRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBkdXN0LmxvZyhlcnIsIEVSUk9SKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIENodW5rKHJvb3QsIG5leHQsIHRhcHMpIHsKICAgICAgICB0aGlzLnJvb3QgPSByb290OwogICAgICAgIHRoaXMubmV4dCA9IG5leHQ7CiAgICAgICAgdGhpcy5kYXRhID0gW107IC8vaWU3IHBlcmYKICAgICAgICB0aGlzLmZsdXNoYWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMudGFwcyA9IHRhcHM7CiAgICB9CgogICAgQ2h1bmsucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciB0YXBzID0gdGhpcy50YXBzOwoKICAgICAgICBpZiAodGFwcykgewogICAgICAgICAgICBkYXRhID0gdGFwcy5nbyhkYXRhKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kYXRhLnB1c2goZGF0YSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy53cml0ZShkYXRhKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5mbHVzaGFibGUgPSB0cnVlOwogICAgICAgIHRoaXMucm9vdC5mbHVzaCgpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBDaHVuay5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICB2YXIgY3Vyc29yID0gbmV3IENodW5rKHRoaXMucm9vdCwgdGhpcy5uZXh0LCB0aGlzLnRhcHMpLAogICAgICAgICAgICBicmFuY2ggPSBuZXcgQ2h1bmsodGhpcy5yb290LCBjdXJzb3IsIHRoaXMudGFwcyk7CgogICAgICAgIHRoaXMubmV4dCA9IGJyYW5jaDsKICAgICAgICB0aGlzLmZsdXNoYWJsZSA9IHRydWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2FsbGJhY2soYnJhbmNoKTsKICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgICBkdXN0LmxvZyhlcnIsIEVSUk9SKTsKICAgICAgICAgICAgYnJhbmNoLnNldEVycm9yKGVycik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjdXJzb3I7CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS50YXAgPSBmdW5jdGlvbih0YXApIHsKICAgICAgICB2YXIgdGFwcyA9IHRoaXMudGFwczsKCiAgICAgICAgaWYgKHRhcHMpIHsKICAgICAgICAgICAgdGhpcy50YXBzID0gdGFwcy5wdXNoKHRhcCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy50YXBzID0gbmV3IFRhcCh0YXApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQ2h1bmsucHJvdG90eXBlLnVudGFwID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy50YXBzID0gdGhpcy50YXBzLnRhaWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihib2R5LCBjb250ZXh0KSB7CiAgICAgICAgcmV0dXJuIGJvZHkodGhpcywgY29udGV4dCk7CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS5yZWZlcmVuY2UgPSBmdW5jdGlvbihlbGVtLCBjb250ZXh0LCBhdXRvLCBmaWx0ZXJzKSB7CiAgICAgICAgaWYgKHR5cGVvZiBlbGVtID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGVsZW0gPSBlbGVtLmFwcGx5KGNvbnRleHQuY3VycmVudCgpLCBbdGhpcywgY29udGV4dCwgbnVsbCwge2F1dG86IGF1dG8sIGZpbHRlcnM6IGZpbHRlcnN9XSk7CiAgICAgICAgICAgIGlmIChlbGVtIGluc3RhbmNlb2YgQ2h1bmspIHsKICAgICAgICAgICAgICAgIHJldHVybiBlbGVtOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlKGVsZW0sIGNvbnRleHQsIGF1dG8sIGZpbHRlcnMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChkdXN0LmlzVGhlbmFibGUoZWxlbSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXdhaXQoZWxlbSwgY29udGV4dCwgbnVsbCwgYXV0bywgZmlsdGVycyk7CiAgICAgICAgfSBlbHNlIGlmIChkdXN0LmlzU3RyZWFtYWJsZShlbGVtKSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW0oZWxlbSwgY29udGV4dCwgbnVsbCwgYXV0bywgZmlsdGVycyk7CiAgICAgICAgfSBlbHNlIGlmICghZHVzdC5pc0VtcHR5KGVsZW0pKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlKGR1c3QuZmlsdGVyKGVsZW0sIGF1dG8sIGZpbHRlcnMsIGNvbnRleHQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS5zZWN0aW9uID0gZnVuY3Rpb24oZWxlbSwgY29udGV4dCwgYm9kaWVzLCBwYXJhbXMpIHsKICAgICAgICB2YXIgYm9keSA9IGJvZGllcy5ibG9jaywKICAgICAgICAgICAgc2tpcCA9IGJvZGllc1snZWxzZSddLAogICAgICAgICAgICBjaHVuayA9IHRoaXMsCiAgICAgICAgICAgIGksIGxlbiwgaGVhZDsKCiAgICAgICAgaWYgKHR5cGVvZiBlbGVtID09PSAnZnVuY3Rpb24nICYmICFkdXN0LmlzVGVtcGxhdGVGbihlbGVtKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZWxlbSA9IGVsZW0uYXBwbHkoY29udGV4dC5jdXJyZW50KCksIFt0aGlzLCBjb250ZXh0LCBib2RpZXMsIHBhcmFtc10pOwogICAgICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgICAgICAgZHVzdC5sb2coZXJyLCBFUlJPUik7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRFcnJvcihlcnIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEZ1bmN0aW9ucyB0aGF0IHJldHVybiBjaHVua3MgYXJlIGFzc3VtZWQgdG8gaGF2ZSBoYW5kbGVkIHRoZSBjaHVuayBtYW51YWxseS4KICAgICAgICAgICAgLy8gTWFrZSB0aGF0IGNodW5rIHRoZSBjdXJyZW50IG9uZSBhbmQgZ28gdG8gdGhlIG5leHQgbWV0aG9kIGluIHRoZSBjaGFpbi4KICAgICAgICAgICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBDaHVuaykgewogICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChkdXN0LmlzRW1wdHlPYmplY3QoYm9kaWVzKSkgewogICAgICAgICAgICAvLyBObyBib2RpZXMgdG8gcmVuZGVyLCBhbmQgd2UndmUgYWxyZWFkeSBpbnZva2VkIGFueSBmdW5jdGlvbiB0aGF0IHdhcyBhdmFpbGFibGUgaW4KICAgICAgICAgICAgLy8gaG9wZXMgb2YgcmV0dXJuaW5nIGEgQ2h1bmsuCiAgICAgICAgICAgIHJldHVybiBjaHVuazsKICAgICAgICB9CgogICAgICAgIGlmICghZHVzdC5pc0VtcHR5T2JqZWN0KHBhcmFtcykpIHsKICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucHVzaChwYXJhbXMpOwogICAgICAgIH0KCiAgICAgICAgLyoKICAgICAgICAgRHVzdCdzIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gZW51bWVyYXRlIG92ZXIgdGhlIGFycmF5IGVsZW0sIHBhc3NpbmcgZWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHRvIHRoZSBibG9jay4KICAgICAgICAgV2hlbiBlbGVtIHJlc29sdmVzIHRvIGEgdmFsdWUgb3Igb2JqZWN0IGluc3RlYWQgb2YgYW4gYXJyYXksIER1c3Qgc2V0cyB0aGUgY3VycmVudCBjb250ZXh0IHRvIHRoZSB2YWx1ZQogICAgICAgICBhbmQgcmVuZGVycyB0aGUgYmxvY2sgb25lIHRpbWUuCiAgICAgICAgICovCiAgICAgICAgaWYgKGR1c3QuaXNBcnJheShlbGVtKSkgewogICAgICAgICAgICBpZiAoYm9keSkgewogICAgICAgICAgICAgICAgbGVuID0gZWxlbS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobGVuID4gMCkgewogICAgICAgICAgICAgICAgICAgIGhlYWQgPSBjb250ZXh0LnN0YWNrICYmIGNvbnRleHQuc3RhY2suaGVhZCB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBoZWFkLiRsZW4gPSBsZW47CiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQuJGlkeCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gYm9keShjaHVuaywgY29udGV4dC5wdXNoKGVsZW1baV0sIGksIGxlbikpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBoZWFkLiRpZHggPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgaGVhZC4kbGVuID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuazsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBza2lwKHRoaXMsIGNvbnRleHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkdXN0LmlzVGhlbmFibGUoZWxlbSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXdhaXQoZWxlbSwgY29udGV4dCwgYm9kaWVzKTsKICAgICAgICB9IGVsc2UgaWYgKGR1c3QuaXNTdHJlYW1hYmxlKGVsZW0pKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmVhbShlbGVtLCBjb250ZXh0LCBib2RpZXMpOwogICAgICAgIH0gZWxzZSBpZiAoZWxlbSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAvLyB0cnVlIGlzIHRydXRoeSBidXQgZG9lcyBub3QgY2hhbmdlIGNvbnRleHQKICAgICAgICAgICAgaWYgKGJvZHkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBib2R5KHRoaXMsIGNvbnRleHQpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChlbGVtIHx8IGVsZW0gPT09IDApIHsKICAgICAgICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGV2YWx1YXRlcyB0byB0cnVlIGFyZSB0cnV0aHkgKCBlLmcuIE5vbi1lbXB0eSBzdHJpbmdzIGFuZCBFbXB0eSBvYmplY3RzIGFyZSB0cnV0aHkuICkKICAgICAgICAgICAgLy8gemVybyBpcyB0cnV0aHkKICAgICAgICAgICAgLy8gZm9yIGFub255bW91cyBmdW5jdGlvbnMgdGhhdCBkaWQgbm90IHJldHVybnMgYSBjaHVuaywgdHJ1dGhpbmVzcyBpcyBldmFsdWF0ZWQgYmFzZWQgb24gdGhlIHJldHVybiB2YWx1ZQogICAgICAgICAgICBpZiAoYm9keSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGJvZHkodGhpcywgY29udGV4dC5wdXNoKGVsZW0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBub25leGlzdGVudCwgc2NhbGFyIGZhbHNlIHZhbHVlLCBzY2FsYXIgZW1wdHkgc3RyaW5nLCBudWxsLAogICAgICAgICAgICAvLyB1bmRlZmluZWQgYXJlIGFsbCBmYWxzeQogICAgICAgIH0gZWxzZSBpZiAoc2tpcCkgewogICAgICAgICAgICByZXR1cm4gc2tpcCh0aGlzLCBjb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgZHVzdC5sb2coJ1NlY3Rpb24gd2l0aG91dCBjb3JyZXNwb25kaW5nIGtleSBpbiB0ZW1wbGF0ZSBgJyArIGNvbnRleHQuZ2V0VGVtcGxhdGVOYW1lKCkgKyAnYCcsIERFQlVHKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQ2h1bmsucHJvdG90eXBlLmV4aXN0cyA9IGZ1bmN0aW9uKGVsZW0sIGNvbnRleHQsIGJvZGllcykgewogICAgICAgIHZhciBib2R5ID0gYm9kaWVzLmJsb2NrLAogICAgICAgICAgICBza2lwID0gYm9kaWVzWydlbHNlJ107CgogICAgICAgIGlmICghZHVzdC5pc0VtcHR5KGVsZW0pKSB7CiAgICAgICAgICAgIGlmIChib2R5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYm9keSh0aGlzLCBjb250ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkdXN0LmxvZygnTm8gYmxvY2sgZm9yIGV4aXN0cyBjaGVjayBpbiB0ZW1wbGF0ZSBgJyArIGNvbnRleHQuZ2V0VGVtcGxhdGVOYW1lKCkgKyAnYCcsIERFQlVHKTsKICAgICAgICB9IGVsc2UgaWYgKHNraXApIHsKICAgICAgICAgICAgcmV0dXJuIHNraXAodGhpcywgY29udGV4dCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBDaHVuay5wcm90b3R5cGUubm90ZXhpc3RzID0gZnVuY3Rpb24oZWxlbSwgY29udGV4dCwgYm9kaWVzKSB7CiAgICAgICAgdmFyIGJvZHkgPSBib2RpZXMuYmxvY2ssCiAgICAgICAgICAgIHNraXAgPSBib2RpZXNbJ2Vsc2UnXTsKCiAgICAgICAgaWYgKGR1c3QuaXNFbXB0eShlbGVtKSkgewogICAgICAgICAgICBpZiAoYm9keSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGJvZHkodGhpcywgY29udGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHVzdC5sb2coJ05vIGJsb2NrIGZvciBub3QtZXhpc3RzIGNoZWNrIGluIHRlbXBsYXRlIGAnICsgY29udGV4dC5nZXRUZW1wbGF0ZU5hbWUoKSArICdgJywgREVCVUcpOwogICAgICAgIH0gZWxzZSBpZiAoc2tpcCkgewogICAgICAgICAgICByZXR1cm4gc2tpcCh0aGlzLCBjb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIENodW5rLnByb3RvdHlwZS5ibG9jayA9IGZ1bmN0aW9uKGVsZW0sIGNvbnRleHQsIGJvZGllcykgewogICAgICAgIHZhciBib2R5ID0gZWxlbSB8fCBib2RpZXMuYmxvY2s7CgogICAgICAgIGlmIChib2R5KSB7CiAgICAgICAgICAgIHJldHVybiBib2R5KHRoaXMsIGNvbnRleHQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQ2h1bmsucHJvdG90eXBlLnBhcnRpYWwgPSBmdW5jdGlvbihlbGVtLCBjb250ZXh0LCBwYXJ0aWFsQ29udGV4dCwgcGFyYW1zKSB7CiAgICAgICAgdmFyIGhlYWQ7CgogICAgICAgIGlmKHBhcmFtcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vIENvbXBhdGliaWxpdHkgZm9yIDwgMi43LjAgd2hlcmUgYHBhcnRpYWxDb250ZXh0YCBkaWQgbm90IGV4aXN0CiAgICAgICAgICAgIHBhcmFtcyA9IHBhcnRpYWxDb250ZXh0OwogICAgICAgICAgICBwYXJ0aWFsQ29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWR1c3QuaXNFbXB0eU9iamVjdChwYXJhbXMpKSB7CiAgICAgICAgICAgIHBhcnRpYWxDb250ZXh0ID0gcGFydGlhbENvbnRleHQuY2xvbmUoKTsKICAgICAgICAgICAgaGVhZCA9IHBhcnRpYWxDb250ZXh0LnBvcCgpOwogICAgICAgICAgICBwYXJ0aWFsQ29udGV4dCA9IHBhcnRpYWxDb250ZXh0LnB1c2gocGFyYW1zKQogICAgICAgICAgICAgICAgLnB1c2goaGVhZCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZHVzdC5pc1RlbXBsYXRlRm4oZWxlbSkpIHsKICAgICAgICAgICAgLy8gVGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBldmFsdWF0aW5nIGBlbGVtYCBpcyBhIHBhcnRpYWwgbmFtZQogICAgICAgICAgICAvLyBMb2FkIHRoZSBwYXJ0aWFsIGFmdGVyIGdldHRpbmcgaXRzIG5hbWUgYW5kIGVuZCB0aGUgYXN5bmMgY2h1bmsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FwdHVyZShlbGVtLCBjb250ZXh0LCBmdW5jdGlvbihuYW1lLCBjaHVuaykgewogICAgICAgICAgICAgICAgcGFydGlhbENvbnRleHQudGVtcGxhdGVOYW1lID0gbmFtZTsKICAgICAgICAgICAgICAgIGxvYWQobmFtZSwgY2h1bmssIHBhcnRpYWxDb250ZXh0KS5lbmQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFydGlhbENvbnRleHQudGVtcGxhdGVOYW1lID0gZWxlbTsKICAgICAgICAgICAgcmV0dXJuIGxvYWQoZWxlbSwgdGhpcywgcGFydGlhbENvbnRleHQpOwogICAgICAgIH0KICAgIH07CgogICAgQ2h1bmsucHJvdG90eXBlLmhlbHBlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQsIGJvZGllcywgcGFyYW1zLCBhdXRvKSB7CiAgICAgICAgdmFyIGNodW5rID0gdGhpcywKICAgICAgICAgICAgZmlsdGVycyA9IHBhcmFtcy5maWx0ZXJzLAogICAgICAgICAgICByZXQ7CgogICAgICAgIC8vIFByZS0yLjcuMSBjb21wYXQ6IGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpdCdzIGFuIG9sZCB0ZW1wbGF0ZS4gQXV0b21hdGljYWxseSBlc2NhcGUKICAgICAgICBpZiAoYXV0byA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGF1dG8gPSAnaCc7CiAgICAgICAgfQoKICAgICAgICAvLyBoYW5kbGUgaW52YWxpZCBoZWxwZXJzLCBzaW1pbGFyIHRvIGludmFsaWQgZmlsdGVycwogICAgICAgIGlmKGR1c3QuaGVscGVyc1tuYW1lXSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0ID0gZHVzdC5oZWxwZXJzW25hbWVdKGNodW5rLCBjb250ZXh0LCBib2RpZXMsIHBhcmFtcyk7CiAgICAgICAgICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgQ2h1bmspIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYodHlwZW9mIGZpbHRlcnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVycyA9IGZpbHRlcnMuc3BsaXQoJ3wnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZHVzdC5pc0VtcHR5T2JqZWN0KGJvZGllcykpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsuc2VjdGlvbihyZXQsIGNvbnRleHQsIGJvZGllcywgcGFyYW1zKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIEhlbHBlcnMgYWN0IHNsaWdodGx5IGRpZmZlcmVudGx5IGZyb20gZnVuY3Rpb25zIGluIGNvbnRleHQgaW4gdGhhdCB0aGV5IHdpbGwgYWN0IGFzCiAgICAgICAgICAgICAgICAvLyBhIHJlZmVyZW5jZSBpZiB0aGV5IGFyZSBzZWxmLWNsb3NpbmcgKGR1ZSB0byBncmFtbWFyIGxpbWl0YXRpb25zKQogICAgICAgICAgICAgICAgLy8gSW4gdGhlIENodW5rLmF3YWl0IGZ1bmN0aW9uIHdlIGNoZWNrIHRvIG1ha2Ugc3VyZSBib2RpZXMgaXMgbnVsbCBiZWZvcmUgYWN0aW5nIGFzIGEgcmVmZXJlbmNlCiAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsucmVmZXJlbmNlKHJldCwgY29udGV4dCwgYXV0bywgZmlsdGVycyk7CiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICBkdXN0LmxvZygnRXJyb3IgaW4gaGVscGVyIGAnICsgbmFtZSArICdgOiAnICsgZXJyLm1lc3NhZ2UsIEVSUk9SKTsKICAgICAgICAgICAgICAgIHJldHVybiBjaHVuay5zZXRFcnJvcihlcnIpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZHVzdC5sb2coJ0hlbHBlciBgJyArIG5hbWUgKyAnYCBkb2VzIG5vdCBleGlzdCcsIFdBUk4pOwogICAgICAgICAgICByZXR1cm4gY2h1bms7CiAgICAgICAgfQogICAgfTsKCiAgICAvKioKICAgICAqIFJlc2VydmUgYSBjaHVuayB0byBiZSBldmFsdWF0ZWQgb25jZSBhIHRoZW5hYmxlIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkCiAgICAgKiBAcGFyYW0gdGhlbmFibGUge1RoZW5hYmxlfSB0aGUgdGFyZ2V0IHRoZW5hYmxlIHRvIGF3YWl0CiAgICAgKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dH0gY29udGV4dCB0byB1c2UgdG8gcmVuZGVyIHRoZSBkZWZlcnJlZCBjaHVuawogICAgICogQHBhcmFtIGJvZGllcyB7T2JqZWN0fSBtdXN0IGNvbnRhaW4gYSAiYm9keSIsIG1heSBjb250YWluIGFuICJlcnJvciIKICAgICAqIEBwYXJhbSBhdXRvIHtTdHJpbmd9IGF1dG9tYXRpY2FsbHkgYXBwbHkgdGhpcyBmaWx0ZXIgaWYgdGhlIFRoZW5hYmxlIGlzIGEgcmVmZXJlbmNlCiAgICAgKiBAcGFyYW0gZmlsdGVycyB7QXJyYXl9IGFwcGx5IHRoZXNlIGZpbHRlcnMgaWYgdGhlIFRoZW5hYmxlIGlzIGEgcmVmZXJlbmNlCiAgICAgKiBAcmV0dXJuIHtDaHVua30KICAgICAqLwogICAgQ2h1bmsucHJvdG90eXBlLmF3YWl0ID0gZnVuY3Rpb24odGhlbmFibGUsIGNvbnRleHQsIGJvZGllcywgYXV0bywgZmlsdGVycykgewogICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbihjaHVuaykgewogICAgICAgICAgICB0aGVuYWJsZS50aGVuKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgIGlmIChib2RpZXMpIHsKICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnNlY3Rpb24oZGF0YSwgY29udGV4dCwgYm9kaWVzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsbHkgYSByZWZlcmVuY2UuIFNlbGYtY2xvc2luZyBzZWN0aW9ucyBkb24ndCByZW5kZXIKICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnJlZmVyZW5jZShkYXRhLCBjb250ZXh0LCBhdXRvLCBmaWx0ZXJzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNodW5rLmVuZCgpOwogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgICAgIHZhciBlcnJvckJvZHkgPSBib2RpZXMgJiYgYm9kaWVzLmVycm9yOwogICAgICAgICAgICAgICAgaWYoZXJyb3JCb2R5KSB7CiAgICAgICAgICAgICAgICAgICAgY2h1bmsucmVuZGVyKGVycm9yQm9keSwgY29udGV4dC5wdXNoKGVycikpLmVuZCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkdXN0LmxvZygnVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIGluIGAnICsgY29udGV4dC5nZXRUZW1wbGF0ZU5hbWUoKSArICdgJywgSU5GTyk7CiAgICAgICAgICAgICAgICAgICAgY2h1bmsuZW5kKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfTsKCiAgICAvKioKICAgICAqIFJlc2VydmUgYSBjaHVuayB0byBiZSBldmFsdWF0ZWQgd2l0aCB0aGUgY29udGVudHMgb2YgYSBzdHJlYW1hYmxlLgogICAgICogQ3VycmVudGx5IGFuIGVycm9yIGV2ZW50IHdpbGwgYm9tYiBvdXQgdGhlIHN0cmVhbS4gT25jZSBhbiBlcnJvcgogICAgICogaXMgcmVjZWl2ZWQsIHdlIHB1c2ggaXQgdG8gYW4gezplcnJvcn0gYmxvY2sgaWYgb25lIGV4aXN0cywgYW5kIGxvZyBvdGhlcndpc2UsCiAgICAgKiB0aGVuIHN0b3AgbGlzdGVuaW5nIHRvIHRoZSBzdHJlYW0uCiAgICAgKiBAcGFyYW0gc3RyZWFtYWJsZSB7U3RyZWFtYWJsZX0gdGhlIHRhcmdldCBzdHJlYW1hYmxlIHRoYXQgd2lsbCBlbWl0IGV2ZW50cwogICAgICogQHBhcmFtIGNvbnRleHQge0NvbnRleHR9IGNvbnRleHQgdG8gdXNlIHRvIHJlbmRlciBlYWNoIHRodW5rCiAgICAgKiBAcGFyYW0gYm9kaWVzIHtPYmplY3R9IG11c3QgY29udGFpbiBhICJib2R5IiwgbWF5IGNvbnRhaW4gYW4gImVycm9yIgogICAgICogQHJldHVybiB7Q2h1bmt9CiAgICAgKi8KICAgIENodW5rLnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0sIGNvbnRleHQsIGJvZGllcywgYXV0bywgZmlsdGVycykgewogICAgICAgIHZhciBib2R5ID0gYm9kaWVzICYmIGJvZGllcy5ibG9jaywKICAgICAgICAgICAgZXJyb3JCb2R5ID0gYm9kaWVzICYmIGJvZGllcy5lcnJvcjsKICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oY2h1bmspIHsKICAgICAgICAgICAgdmFyIGVuZGVkID0gZmFsc2U7CiAgICAgICAgICAgIHN0cmVhbQogICAgICAgICAgICAgICAgLm9uKCdkYXRhJywgZnVuY3Rpb24gZGF0YSh0aHVuaykgewogICAgICAgICAgICAgICAgICAgIGlmKGVuZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoYm9keSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JrIGEgbmV3IGNodW5rIG91dCBvZiB0aGUgYmxvY2tzdHJlYW0gc28gdGhhdCB3ZSBjYW4gZmx1c2ggaXQgaW5kZXBlbmRlbnRseQogICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLm1hcChmdW5jdGlvbihjaHVuaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsucmVuZGVyKGJvZHksIGNvbnRleHQucHVzaCh0aHVuaykpLmVuZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIWJvZGllcykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGFjdHVhbGx5IGEgcmVmZXJlbmNlLCBkb24ndCBmb3JrLCBqdXN0IHdyaXRlIGludG8gdGhlIG1hc3RlciBhc3luYyBjaHVuawogICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnJlZmVyZW5jZSh0aHVuaywgY29udGV4dCwgYXV0bywgZmlsdGVycyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5vbignZXJyb3InLCBmdW5jdGlvbiBlcnJvcihlcnIpIHsKICAgICAgICAgICAgICAgICAgICBpZihlbmRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGVycm9yQm9keSkgewogICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5yZW5kZXIoZXJyb3JCb2R5LCBjb250ZXh0LnB1c2goZXJyKSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZHVzdC5sb2coJ1VuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gYCcgKyBjb250ZXh0LmdldFRlbXBsYXRlTmFtZSgpICsgJ2AnLCBJTkZPKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoIWVuZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuZW5kKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5vbignZW5kJywgZnVuY3Rpb24gZW5kKCkgewogICAgICAgICAgICAgICAgICAgIGlmKCFlbmRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmVuZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfTsKCiAgICBDaHVuay5wcm90b3R5cGUuY2FwdHVyZSA9IGZ1bmN0aW9uKGJvZHksIGNvbnRleHQsIGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGNodW5rKSB7CiAgICAgICAgICAgIHZhciBzdHViID0gbmV3IFN0dWIoZnVuY3Rpb24oZXJyLCBvdXQpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjaHVuay5zZXRFcnJvcihlcnIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhvdXQsIGNodW5rKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGJvZHkoc3R1Yi5oZWFkLCBjb250ZXh0KS5lbmQoKTsKICAgICAgICB9KTsKICAgIH07CgogICAgQ2h1bmsucHJvdG90eXBlLnNldEVycm9yID0gZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IGVycjsKICAgICAgICB0aGlzLnJvb3QuZmx1c2goKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gQ2h1bmsgYWxpYXNlcwogICAgZm9yKHZhciBmIGluIENodW5rLnByb3RvdHlwZSkgewogICAgICAgIGlmKGR1c3QuX2FsaWFzZXNbZl0pIHsKICAgICAgICAgICAgQ2h1bmsucHJvdG90eXBlW2R1c3QuX2FsaWFzZXNbZl1dID0gQ2h1bmsucHJvdG90eXBlW2ZdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBUYXAoaGVhZCwgdGFpbCkgewogICAgICAgIHRoaXMuaGVhZCA9IGhlYWQ7CiAgICAgICAgdGhpcy50YWlsID0gdGFpbDsKICAgIH0KCiAgICBUYXAucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbih0YXApIHsKICAgICAgICByZXR1cm4gbmV3IFRhcCh0YXAsIHRoaXMpOwogICAgfTsKCiAgICBUYXAucHJvdG90eXBlLmdvID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICB2YXIgdGFwID0gdGhpczsKCiAgICAgICAgd2hpbGUodGFwKSB7CiAgICAgICAgICAgIHZhbHVlID0gdGFwLmhlYWQodmFsdWUpOwogICAgICAgICAgICB0YXAgPSB0YXAudGFpbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgfTsKCiAgICB2YXIgSENIQVJTID0gL1smPD4iJ10vLAogICAgICAgIEFNUCAgICA9IC8mL2csCiAgICAgICAgTFQgICAgID0gLzwvZywKICAgICAgICBHVCAgICAgPSAvPi9nLAogICAgICAgIFFVT1QgICA9IC9cIi9nLAogICAgICAgIFNRVU9UICA9IC9cJy9nOwoKICAgIGR1c3QuZXNjYXBlSHRtbCA9IGZ1bmN0aW9uKHMpIHsKICAgICAgICBpZiAodHlwZW9mIHMgPT09ICJzdHJpbmciIHx8IChzICYmIHR5cGVvZiBzLnRvU3RyaW5nID09PSAiZnVuY3Rpb24iKSkgewogICAgICAgICAgICBpZiAodHlwZW9mIHMgIT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICBzID0gcy50b1N0cmluZygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghSENIQVJTLnRlc3QocykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzLnJlcGxhY2UoQU1QLCcmYW1wOycpLnJlcGxhY2UoTFQsJyZsdDsnKS5yZXBsYWNlKEdULCcmZ3Q7JykucmVwbGFjZShRVU9ULCcmcXVvdDsnKS5yZXBsYWNlKFNRVU9ULCAnJiMzOTsnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHM7CiAgICB9OwoKICAgIHZhciBCUyA9IC9cXC9nLAogICAgICAgIEZTID0gL1wvL2csCiAgICAgICAgQ1IgPSAvXHIvZywKICAgICAgICBMUyA9IC9cdTIwMjgvZywKICAgICAgICBQUyA9IC9cdTIwMjkvZywKICAgICAgICBOTCA9IC9cbi9nLAogICAgICAgIExGID0gL1xmL2csCiAgICAgICAgU1EgPSAvJy9nLAogICAgICAgIERRID0gLyIvZywKICAgICAgICBUQiA9IC9cdC9nOwoKICAgIGR1c3QuZXNjYXBlSnMgPSBmdW5jdGlvbihzKSB7CiAgICAgICAgaWYgKHR5cGVvZiBzID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm4gcwogICAgICAgICAgICAgICAgLnJlcGxhY2UoQlMsICdcXFxcJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKEZTLCAnXFwvJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKERRLCAnXFwiJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKFNRLCAnXFxcJycpCiAgICAgICAgICAgICAgICAucmVwbGFjZShDUiwgJ1xccicpCiAgICAgICAgICAgICAgICAucmVwbGFjZShMUywgJ1xcdTIwMjgnKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoUFMsICdcXHUyMDI5JykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKE5MLCAnXFxuJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKExGLCAnXFxmJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKFRCLCAnXFx0Jyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzOwogICAgfTsKCiAgICBkdXN0LmVzY2FwZUpTT04gPSBmdW5jdGlvbihvKSB7CiAgICAgICAgaWYgKCFKU09OKSB7CiAgICAgICAgICAgIGR1c3QubG9nKCdKU09OIGlzIHVuZGVmaW5lZDsgY291bGQgbm90IGVzY2FwZSBgJyArIG8gKyAnYCcsIFdBUk4pOwogICAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKExTLCAnXFx1MjAyOCcpCiAgICAgICAgICAgICAgICAucmVwbGFjZShQUywgJ1xcdTIwMjknKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoTFQsICdcXHUwMDNjJyk7CiAgICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gZHVzdDsKCn0pKTsKCihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7CiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQuZHVzdCA9PT0gdHJ1ZSkgewogICAgICAgIGRlZmluZSgiZHVzdC5wYXJzZSIsIFsiZHVzdC5jb3JlIl0sIGZ1bmN0aW9uKGR1c3QpIHsKICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoZHVzdCkucGFyc2U7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgICAgIC8vIGluIE5vZGUsIHJlcXVpcmUgdGhpcyBmaWxlIGlmIHdlIHdhbnQgdG8gdXNlIHRoZSBwYXJzZXIgYXMgYSBzdGFuZGFsb25lIG1vZHVsZQogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL2R1c3QnKSk7CiAgICAgICAgLy8gQHNlZSBzZXJ2ZXIgZmlsZSBmb3IgcGFyc2VyIG1ldGhvZHMgZXhwb3NlZCBpbiBub2RlCiAgICB9IGVsc2UgewogICAgICAgIC8vIGluIHRoZSBicm93c2VyLCBzdG9yZSB0aGUgZmFjdG9yeSBvdXRwdXQgaWYgd2Ugd2FudCB0byB1c2UgdGhlIHBhcnNlciBkaXJlY3RseQogICAgICAgIGZhY3Rvcnkocm9vdC5kdXN0KTsKICAgIH0KfSh0aGlzLCBmdW5jdGlvbihkdXN0KSB7CiAgICB2YXIgcGFyc2VyID0gKGZ1bmN0aW9uKCkgewogICAgICAgIC8qCiAgICAgICAgICogR2VuZXJhdGVkIGJ5IFBFRy5qcyAwLjguMC4KICAgICAgICAgKgogICAgICAgICAqIGh0dHA6Ly9wZWdqcy5tYWpkYS5jei8KICAgICAgICAgKi8KCiAgICAgICAgZnVuY3Rpb24gcGVnJHN1YmNsYXNzKGNoaWxkLCBwYXJlbnQpIHsKICAgICAgICAgICAgZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9CiAgICAgICAgICAgIGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsKICAgICAgICAgICAgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFN5bnRheEVycm9yKG1lc3NhZ2UsIGV4cGVjdGVkLCBmb3VuZCwgb2Zmc2V0LCBsaW5lLCBjb2x1bW4pIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlICA9IG1lc3NhZ2U7CiAgICAgICAgICAgIHRoaXMuZXhwZWN0ZWQgPSBleHBlY3RlZDsKICAgICAgICAgICAgdGhpcy5mb3VuZCAgICA9IGZvdW5kOwogICAgICAgICAgICB0aGlzLm9mZnNldCAgID0gb2Zmc2V0OwogICAgICAgICAgICB0aGlzLmxpbmUgICAgID0gbGluZTsKICAgICAgICAgICAgdGhpcy5jb2x1bW4gICA9IGNvbHVtbjsKCiAgICAgICAgICAgIHRoaXMubmFtZSAgICAgPSAiU3ludGF4RXJyb3IiOwogICAgICAgIH0KCiAgICAgICAgcGVnJHN1YmNsYXNzKFN5bnRheEVycm9yLCBFcnJvcik7CgogICAgICAgIGZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7CiAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB7fSwKCiAgICAgICAgICAgICAgICBwZWckRkFJTEVEID0ge30sCgogICAgICAgICAgICAgICAgcGVnJHN0YXJ0UnVsZUZ1bmN0aW9ucyA9IHsgc3RhcnQ6IHBlZyRwYXJzZXN0YXJ0IH0sCiAgICAgICAgICAgICAgICBwZWckc3RhcnRSdWxlRnVuY3Rpb24gID0gcGVnJHBhcnNlc3RhcnQsCgogICAgICAgICAgICAgICAgcGVnJGMwID0gW10sCiAgICAgICAgICAgICAgICBwZWckYzEgPSBmdW5jdGlvbihwKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBbImJvZHkiXS5jb25jYXQocCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhQb3NpdGlvbihib2R5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwZWckYzIgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAic2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMyA9IHBlZyRGQUlMRUQsCiAgICAgICAgICAgICAgICBwZWckYzQgPSBudWxsLAogICAgICAgICAgICAgICAgcGVnJGM1ID0gZnVuY3Rpb24odCwgYiwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGlmKCAoIW4pIHx8ICh0WzFdLnRleHQgIT09IG4udGV4dCkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJFeHBlY3RlZCBlbmQgdGFnIGZvciAiK3RbMV0udGV4dCsiIGJ1dCBpdCB3YXMgbm90IGZvdW5kLiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwZWckYzYgPSB2b2lkIDAsCiAgICAgICAgICAgICAgICBwZWckYzcgPSBmdW5jdGlvbih0LCBiLCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wdXNoKFsicGFyYW0iLCBbImxpdGVyYWwiLCAiYmxvY2siXSwgYl0pOwogICAgICAgICAgICAgICAgICAgIHQucHVzaChlLCBbImZpbHRlcnMiXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhQb3NpdGlvbih0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBlZyRjOCA9ICIvIiwKICAgICAgICAgICAgICAgIHBlZyRjOSA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIi8iLCBkZXNjcmlwdGlvbjogIlwiL1wiIiB9LAogICAgICAgICAgICAgICAgcGVnJGMxMCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0LnB1c2goWyJib2RpZXMiXSwgWyJmaWx0ZXJzIl0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoUG9zaXRpb24odCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwZWckYzExID0gL15bIz9cXjwrQCVdLywKICAgICAgICAgICAgICAgIHBlZyRjMTIgPSB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyM/XFxePCtAJV0iLCBkZXNjcmlwdGlvbjogIlsjP1xcXjwrQCVdIiB9LAogICAgICAgICAgICAgICAgcGVnJGMxMyA9IGZ1bmN0aW9uKHQsIG4sIGMsIHApIHsgcmV0dXJuIFt0LCBuLCBjLCBwXSB9LAogICAgICAgICAgICAgICAgcGVnJGMxNCA9IHsgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246ICJlbmQgdGFnIiB9LAogICAgICAgICAgICAgICAgcGVnJGMxNSA9IGZ1bmN0aW9uKG4pIHsgcmV0dXJuIG4gfSwKICAgICAgICAgICAgICAgIHBlZyRjMTYgPSAiOiIsCiAgICAgICAgICAgICAgICBwZWckYzE3ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiOiIsIGRlc2NyaXB0aW9uOiAiXCI6XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzE4ID0gZnVuY3Rpb24obikge3JldHVybiBufSwKICAgICAgICAgICAgICAgIHBlZyRjMTkgPSBmdW5jdGlvbihuKSB7IHJldHVybiBuID8gWyJjb250ZXh0Iiwgbl0gOiBbImNvbnRleHQiXSB9LAogICAgICAgICAgICAgICAgcGVnJGMyMCA9IHsgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246ICJwYXJhbXMiIH0sCiAgICAgICAgICAgICAgICBwZWckYzIxID0gIj0iLAogICAgICAgICAgICAgICAgcGVnJGMyMiA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIj0iLCBkZXNjcmlwdGlvbjogIlwiPVwiIiB9LAogICAgICAgICAgICAgICAgcGVnJGMyMyA9IGZ1bmN0aW9uKGssIHYpIHtyZXR1cm4gWyJwYXJhbSIsIFsibGl0ZXJhbCIsIGtdLCB2XX0sCiAgICAgICAgICAgICAgICBwZWckYzI0ID0gZnVuY3Rpb24ocCkgeyByZXR1cm4gWyJwYXJhbXMiXS5jb25jYXQocCkgfSwKICAgICAgICAgICAgICAgIHBlZyRjMjUgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAiYm9kaWVzIiB9LAogICAgICAgICAgICAgICAgcGVnJGMyNiA9IGZ1bmN0aW9uKHApIHsgcmV0dXJuIFsiYm9kaWVzIl0uY29uY2F0KHApIH0sCiAgICAgICAgICAgICAgICBwZWckYzI3ID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogInJlZmVyZW5jZSIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMjggPSBmdW5jdGlvbihuLCBmKSB7IHJldHVybiB3aXRoUG9zaXRpb24oWyJyZWZlcmVuY2UiLCBuLCBmXSkgfSwKICAgICAgICAgICAgICAgIHBlZyRjMjkgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAicGFydGlhbCIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMzAgPSAiPiIsCiAgICAgICAgICAgICAgICBwZWckYzMxID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiPiIsIGRlc2NyaXB0aW9uOiAiXCI+XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzMyID0gIisiLAogICAgICAgICAgICAgICAgcGVnJGMzMyA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIisiLCBkZXNjcmlwdGlvbjogIlwiK1wiIiB9LAogICAgICAgICAgICAgICAgcGVnJGMzNCA9IGZ1bmN0aW9uKGspIHtyZXR1cm4gWyJsaXRlcmFsIiwga119LAogICAgICAgICAgICAgICAgcGVnJGMzNSA9IGZ1bmN0aW9uKHMsIG4sIGMsIHApIHsKICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gKHMgPT09ICI+IikgPyAicGFydGlhbCIgOiBzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoUG9zaXRpb24oW2tleSwgbiwgYywgcF0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGVnJGMzNiA9IHsgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246ICJmaWx0ZXJzIiB9LAogICAgICAgICAgICAgICAgcGVnJGMzNyA9ICJ8IiwKICAgICAgICAgICAgICAgIHBlZyRjMzggPSB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ8IiwgZGVzY3JpcHRpb246ICJcInxcIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMzkgPSBmdW5jdGlvbihmKSB7IHJldHVybiBbImZpbHRlcnMiXS5jb25jYXQoZikgfSwKICAgICAgICAgICAgICAgIHBlZyRjNDAgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAic3BlY2lhbCIgfSwKICAgICAgICAgICAgICAgIHBlZyRjNDEgPSAifiIsCiAgICAgICAgICAgICAgICBwZWckYzQyID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAifiIsIGRlc2NyaXB0aW9uOiAiXCJ+XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzQzID0gZnVuY3Rpb24oaykgeyByZXR1cm4gd2l0aFBvc2l0aW9uKFsic3BlY2lhbCIsIGtdKSB9LAogICAgICAgICAgICAgICAgcGVnJGM0NCA9IHsgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246ICJpZGVudGlmaWVyIiB9LAogICAgICAgICAgICAgICAgcGVnJGM0NSA9IGZ1bmN0aW9uKHApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0gWyJwYXRoIl0uY29uY2F0KHApOwogICAgICAgICAgICAgICAgICAgIGFyci50ZXh0ID0gcFsxXS5qb2luKCcuJykucmVwbGFjZSgvLGxpbmUsXGQrLGNvbCxcZCsvZywnJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwZWckYzQ2ID0gZnVuY3Rpb24oaykgewogICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbImtleSIsIGtdOwogICAgICAgICAgICAgICAgICAgIGFyci50ZXh0ID0gazsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBlZyRjNDcgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAibnVtYmVyIiB9LAogICAgICAgICAgICAgICAgcGVnJGM0OCA9IGZ1bmN0aW9uKG4pIHsgcmV0dXJuIFsnbGl0ZXJhbCcsIG5dOyB9LAogICAgICAgICAgICAgICAgcGVnJGM0OSA9IHsgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246ICJmbG9hdCIgfSwKICAgICAgICAgICAgICAgIHBlZyRjNTAgPSAiLiIsCiAgICAgICAgICAgICAgICBwZWckYzUxID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiLiIsIGRlc2NyaXB0aW9uOiAiXCIuXCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzUyID0gZnVuY3Rpb24obCwgcikgeyByZXR1cm4gcGFyc2VGbG9hdChsICsgIi4iICsgcik7IH0sCiAgICAgICAgICAgICAgICBwZWckYzUzID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogInVuc2lnbmVkX2ludGVnZXIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzU0ID0gL15bMC05XS8sCiAgICAgICAgICAgICAgICBwZWckYzU1ID0geyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlswLTldIiwgZGVzY3JpcHRpb246ICJbMC05XSIgfSwKICAgICAgICAgICAgICAgIHBlZyRjNTYgPSBmdW5jdGlvbihkaWdpdHMpIHsgcmV0dXJuIG1ha2VJbnRlZ2VyKGRpZ2l0cyk7IH0sCiAgICAgICAgICAgICAgICBwZWckYzU3ID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogInNpZ25lZF9pbnRlZ2VyIiB9LAogICAgICAgICAgICAgICAgcGVnJGM1OCA9ICItIiwKICAgICAgICAgICAgICAgIHBlZyRjNTkgPSB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICItIiwgZGVzY3JpcHRpb246ICJcIi1cIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjNjAgPSBmdW5jdGlvbihzaWduLCBuKSB7IHJldHVybiBuICogLTE7IH0sCiAgICAgICAgICAgICAgICBwZWckYzYxID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogImludGVnZXIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzYyID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogInBhdGgiIH0sCiAgICAgICAgICAgICAgICBwZWckYzYzID0gZnVuY3Rpb24oaywgZCkgewogICAgICAgICAgICAgICAgICAgIGQgPSBkWzBdOwogICAgICAgICAgICAgICAgICAgIGlmIChrICYmIGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZC51bnNoaWZ0KGspOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aFBvc2l0aW9uKFtmYWxzZSwgZF0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoUG9zaXRpb24oW3RydWUsIGRdKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBlZyRjNjQgPSBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aFBvc2l0aW9uKFt0cnVlLCBkWzBdXSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhQb3NpdGlvbihbdHJ1ZSwgW11dKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBlZyRjNjUgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAia2V5IiB9LAogICAgICAgICAgICAgICAgcGVnJGM2NiA9IC9eW2EtekEtWl8kXS8sCiAgICAgICAgICAgICAgICBwZWckYzY3ID0geyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlthLXpBLVpfJF0iLCBkZXNjcmlwdGlvbjogIlthLXpBLVpfJF0iIH0sCiAgICAgICAgICAgICAgICBwZWckYzY4ID0gL15bMC05YS16QS1aXyRcLV0vLAogICAgICAgICAgICAgICAgcGVnJGM2OSA9IHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbMC05YS16QS1aXyRcXC1dIiwgZGVzY3JpcHRpb246ICJbMC05YS16QS1aXyRcXC1dIiB9LAogICAgICAgICAgICAgICAgcGVnJGM3MCA9IGZ1bmN0aW9uKGgsIHQpIHsgcmV0dXJuIGggKyB0LmpvaW4oJycpIH0sCiAgICAgICAgICAgICAgICBwZWckYzcxID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogImFycmF5IiB9LAogICAgICAgICAgICAgICAgcGVnJGM3MiA9IGZ1bmN0aW9uKG4pIHtyZXR1cm4gbi5qb2luKCcnKX0sCiAgICAgICAgICAgICAgICBwZWckYzczID0gZnVuY3Rpb24oYSkge3JldHVybiBhOyB9LAogICAgICAgICAgICAgICAgcGVnJGM3NCA9IGZ1bmN0aW9uKGksIG5rKSB7IGlmKG5rKSB7IG5rLnVuc2hpZnQoaSk7IH0gZWxzZSB7bmsgPSBbaV0gfSByZXR1cm4gbms7IH0sCiAgICAgICAgICAgICAgICBwZWckYzc1ID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogImFycmF5X3BhcnQiIH0sCiAgICAgICAgICAgICAgICBwZWckYzc2ID0gZnVuY3Rpb24oaykge3JldHVybiBrfSwKICAgICAgICAgICAgICAgIHBlZyRjNzcgPSBmdW5jdGlvbihkLCBhKSB7IGlmIChhKSB7IHJldHVybiBkLmNvbmNhdChhKTsgfSBlbHNlIHsgcmV0dXJuIGQ7IH0gfSwKICAgICAgICAgICAgICAgIHBlZyRjNzggPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAiaW5saW5lIiB9LAogICAgICAgICAgICAgICAgcGVnJGM3OSA9ICJcIiIsCiAgICAgICAgICAgICAgICBwZWckYzgwID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXCIiLCBkZXNjcmlwdGlvbjogIlwiXFxcIlwiIiB9LAogICAgICAgICAgICAgICAgcGVnJGM4MSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2l0aFBvc2l0aW9uKFsibGl0ZXJhbCIsICIiXSkgfSwKICAgICAgICAgICAgICAgIHBlZyRjODIgPSBmdW5jdGlvbihsKSB7IHJldHVybiB3aXRoUG9zaXRpb24oWyJsaXRlcmFsIiwgbF0pIH0sCiAgICAgICAgICAgICAgICBwZWckYzgzID0gZnVuY3Rpb24ocCkgeyByZXR1cm4gd2l0aFBvc2l0aW9uKFsiYm9keSJdLmNvbmNhdChwKSkgfSwKICAgICAgICAgICAgICAgIHBlZyRjODQgPSBmdW5jdGlvbihsKSB7IHJldHVybiBbImJ1ZmZlciIsIGxdIH0sCiAgICAgICAgICAgICAgICBwZWckYzg1ID0geyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogImJ1ZmZlciIgfSwKICAgICAgICAgICAgICAgIHBlZyRjODYgPSBmdW5jdGlvbihlLCB3KSB7IHJldHVybiB3aXRoUG9zaXRpb24oWyJmb3JtYXQiLCBlLCB3LmpvaW4oJycpXSkgfSwKICAgICAgICAgICAgICAgIHBlZyRjODcgPSB7IHR5cGU6ICJhbnkiLCBkZXNjcmlwdGlvbjogImFueSBjaGFyYWN0ZXIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzg4ID0gZnVuY3Rpb24oYykge3JldHVybiBjfSwKICAgICAgICAgICAgICAgIHBlZyRjODkgPSBmdW5jdGlvbihiKSB7IHJldHVybiB3aXRoUG9zaXRpb24oWyJidWZmZXIiLCBiLmpvaW4oJycpXSkgfSwKICAgICAgICAgICAgICAgIHBlZyRjOTAgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAibGl0ZXJhbCIgfSwKICAgICAgICAgICAgICAgIHBlZyRjOTEgPSAvXlteIl0vLAogICAgICAgICAgICAgICAgcGVnJGM5MiA9IHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXlwiXSIsIGRlc2NyaXB0aW9uOiAiW15cIl0iIH0sCiAgICAgICAgICAgICAgICBwZWckYzkzID0gZnVuY3Rpb24oYikgeyByZXR1cm4gYi5qb2luKCcnKSB9LAogICAgICAgICAgICAgICAgcGVnJGM5NCA9ICJcXFwiIiwKICAgICAgICAgICAgICAgIHBlZyRjOTUgPSB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJcXFwiIiwgZGVzY3JpcHRpb246ICJcIlxcXFxcXFwiXCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzk2ID0gZnVuY3Rpb24oKSB7IHJldHVybiAnIicgfSwKICAgICAgICAgICAgICAgIHBlZyRjOTcgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAicmF3IiB9LAogICAgICAgICAgICAgICAgcGVnJGM5OCA9ICJ7YCIsCiAgICAgICAgICAgICAgICBwZWckYzk5ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAie2AiLCBkZXNjcmlwdGlvbjogIlwie2BcIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTAwID0gImB9IiwKICAgICAgICAgICAgICAgIHBlZyRjMTAxID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYH0iLCBkZXNjcmlwdGlvbjogIlwiYH1cIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTAyID0gZnVuY3Rpb24oY2hhcmFjdGVyKSB7cmV0dXJuIGNoYXJhY3Rlcn0sCiAgICAgICAgICAgICAgICBwZWckYzEwMyA9IGZ1bmN0aW9uKHJhd1RleHQpIHsgcmV0dXJuIHdpdGhQb3NpdGlvbihbInJhdyIsIHJhd1RleHQuam9pbignJyldKSB9LAogICAgICAgICAgICAgICAgcGVnJGMxMDQgPSB7IHR5cGU6ICJvdGhlciIsIGRlc2NyaXB0aW9uOiAiY29tbWVudCIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTA1ID0gInshIiwKICAgICAgICAgICAgICAgIHBlZyRjMTA2ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAieyEiLCBkZXNjcmlwdGlvbjogIlwieyFcIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTA3ID0gIiF9IiwKICAgICAgICAgICAgICAgIHBlZyRjMTA4ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiIX0iLCBkZXNjcmlwdGlvbjogIlwiIX1cIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTA5ID0gZnVuY3Rpb24oYykgeyByZXR1cm4gd2l0aFBvc2l0aW9uKFsiY29tbWVudCIsIGMuam9pbignJyldKSB9LAogICAgICAgICAgICAgICAgcGVnJGMxMTAgPSAvXlsjP1xePjwrJTpAXC9+JV0vLAogICAgICAgICAgICAgICAgcGVnJGMxMTEgPSB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyM/XFxePjwrJTpAXFwvfiVdIiwgZGVzY3JpcHRpb246ICJbIz9cXF4+PCslOkBcXC9+JV0iIH0sCiAgICAgICAgICAgICAgICBwZWckYzExMiA9ICJ7IiwKICAgICAgICAgICAgICAgIHBlZyRjMTEzID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAieyIsIGRlc2NyaXB0aW9uOiAiXCJ7XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzExNCA9ICJ9IiwKICAgICAgICAgICAgICAgIHBlZyRjMTE1ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAifSIsIGRlc2NyaXB0aW9uOiAiXCJ9XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzExNiA9ICJbIiwKICAgICAgICAgICAgICAgIHBlZyRjMTE3ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiWyIsIGRlc2NyaXB0aW9uOiAiXCJbXCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzExOCA9ICJdIiwKICAgICAgICAgICAgICAgIHBlZyRjMTE5ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXSIsIGRlc2NyaXB0aW9uOiAiXCJdXCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzEyMCA9ICJcbiIsCiAgICAgICAgICAgICAgICBwZWckYzEyMSA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlxuIiwgZGVzY3JpcHRpb246ICJcIlxcblwiIiB9LAogICAgICAgICAgICAgICAgcGVnJGMxMjIgPSAiXHJcbiIsCiAgICAgICAgICAgICAgICBwZWckYzEyMyA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlxyXG4iLCBkZXNjcmlwdGlvbjogIlwiXFxyXFxuXCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzEyNCA9ICJcciIsCiAgICAgICAgICAgICAgICBwZWckYzEyNSA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlxyIiwgZGVzY3JpcHRpb246ICJcIlxcclwiIiB9LAogICAgICAgICAgICAgICAgcGVnJGMxMjYgPSAiXHUyMDI4IiwKICAgICAgICAgICAgICAgIHBlZyRjMTI3ID0geyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXHUyMDI4IiwgZGVzY3JpcHRpb246ICJcIlxcdTIwMjhcIiIgfSwKICAgICAgICAgICAgICAgIHBlZyRjMTI4ID0gIlx1MjAyOSIsCiAgICAgICAgICAgICAgICBwZWckYzEyOSA9IHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlx1MjAyOSIsIGRlc2NyaXB0aW9uOiAiXCJcXHUyMDI5XCIiIH0sCiAgICAgICAgICAgICAgICBwZWckYzEzMCA9IC9eW1x0XHgwQlxmIFx4QTBcdUZFRkZdLywKICAgICAgICAgICAgICAgIHBlZyRjMTMxID0geyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXHRcXHgwQlxcZiBcXHhBMFxcdUZFRkZdIiwgZGVzY3JpcHRpb246ICJbXFx0XFx4MEJcXGYgXFx4QTBcXHVGRUZGXSIgfSwKCiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyAgICAgICAgICA9IDAsCiAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgICAgICA9IDAsCiAgICAgICAgICAgICAgICBwZWckY2FjaGVkUG9zICAgICAgICA9IDAsCiAgICAgICAgICAgICAgICBwZWckY2FjaGVkUG9zRGV0YWlscyA9IHsgbGluZTogMSwgY29sdW1uOiAxLCBzZWVuQ1I6IGZhbHNlIH0sCiAgICAgICAgICAgICAgICBwZWckbWF4RmFpbFBvcyAgICAgICA9IDAsCiAgICAgICAgICAgICAgICBwZWckbWF4RmFpbEV4cGVjdGVkICA9IFtdLAogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzICAgICAgPSAwLAoKICAgICAgICAgICAgICAgIHBlZyRyZXN1bHQ7CgogICAgICAgICAgICBpZiAoInN0YXJ0UnVsZSIgaW4gb3B0aW9ucykgewogICAgICAgICAgICAgICAgaWYgKCEob3B0aW9ucy5zdGFydFJ1bGUgaW4gcGVnJHN0YXJ0UnVsZUZ1bmN0aW9ucykpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbid0IHN0YXJ0IHBhcnNpbmcgZnJvbSBydWxlIFwiIiArIG9wdGlvbnMuc3RhcnRSdWxlICsgIlwiLiIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBlZyRzdGFydFJ1bGVGdW5jdGlvbiA9IHBlZyRzdGFydFJ1bGVGdW5jdGlvbnNbb3B0aW9ucy5zdGFydFJ1bGVdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB0ZXh0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnN1YnN0cmluZyhwZWckcmVwb3J0ZWRQb3MsIHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gb2Zmc2V0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBlZyRyZXBvcnRlZFBvczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbGluZSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwZWckY29tcHV0ZVBvc0RldGFpbHMocGVnJHJlcG9ydGVkUG9zKS5saW5lOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjb2x1bW4oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBlZyRyZXBvcnRlZFBvcykuY29sdW1uOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBleHBlY3RlZChkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgdGhyb3cgcGVnJGJ1aWxkRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICAgW3sgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH1dLAogICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkgewogICAgICAgICAgICAgICAgdGhyb3cgcGVnJGJ1aWxkRXhjZXB0aW9uKG1lc3NhZ2UsIG51bGwsIHBlZyRyZXBvcnRlZFBvcyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRjb21wdXRlUG9zRGV0YWlscyhwb3MpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkdmFuY2UoZGV0YWlscywgc3RhcnRQb3MsIGVuZFBvcykgewogICAgICAgICAgICAgICAgICAgIHZhciBwLCBjaDsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChwID0gc3RhcnRQb3M7IHAgPCBlbmRQb3M7IHArKykgewogICAgICAgICAgICAgICAgICAgICAgICBjaCA9IGlucHV0LmNoYXJBdChwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAiXG4iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRldGFpbHMuc2VlbkNSKSB7IGRldGFpbHMubGluZSsrOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLmNvbHVtbiA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLnNlZW5DUiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiXHIiIHx8IGNoID09PSAiXHUyMDI4IiB8fCBjaCA9PT0gIlx1MjAyOSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMubGluZSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5jb2x1bW4gPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5zZWVuQ1IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5jb2x1bW4rKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMuc2VlbkNSID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHBlZyRjYWNoZWRQb3MgIT09IHBvcykgewogICAgICAgICAgICAgICAgICAgIGlmIChwZWckY2FjaGVkUG9zID4gcG9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjYWNoZWRQb3MgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBwZWckY2FjaGVkUG9zRGV0YWlscyA9IHsgbGluZTogMSwgY29sdW1uOiAxLCBzZWVuQ1I6IGZhbHNlIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocGVnJGNhY2hlZFBvc0RldGFpbHMsIHBlZyRjYWNoZWRQb3MsIHBvcyk7CiAgICAgICAgICAgICAgICAgICAgcGVnJGNhY2hlZFBvcyA9IHBvczsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcGVnJGNhY2hlZFBvc0RldGFpbHM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRmYWlsKGV4cGVjdGVkKSB7CiAgICAgICAgICAgICAgICBpZiAocGVnJGN1cnJQb3MgPCBwZWckbWF4RmFpbFBvcykgeyByZXR1cm47IH0KCiAgICAgICAgICAgICAgICBpZiAocGVnJGN1cnJQb3MgPiBwZWckbWF4RmFpbFBvcykgewogICAgICAgICAgICAgICAgICAgIHBlZyRtYXhGYWlsUG9zID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgcGVnJG1heEZhaWxFeHBlY3RlZCA9IFtdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBlZyRtYXhGYWlsRXhwZWN0ZWQucHVzaChleHBlY3RlZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRidWlsZEV4Y2VwdGlvbihtZXNzYWdlLCBleHBlY3RlZCwgcG9zKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbGVhbnVwRXhwZWN0ZWQoZXhwZWN0ZWQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDE7CgogICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5kZXNjcmlwdGlvbiA8IGIuZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmRlc2NyaXB0aW9uID4gYi5kZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGV4cGVjdGVkLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwZWN0ZWRbaSAtIDFdID09PSBleHBlY3RlZFtpXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkTWVzc2FnZShleHBlY3RlZCwgZm91bmQpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdHJpbmdFc2NhcGUocykgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoZXgoY2gpIHsgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7IH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvZywgICAnXFxcXCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvIi9nLCAgICAnXFwiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ceDA4L2csICdcXGInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1x0L2csICAgJ1xcdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXG4vZywgICAnXFxuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cZi9nLCAgICdcXGYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xyL2csICAgJ1xccicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1x4MDAtXHgwN1x4MEJceDBFXHgwRl0vZywgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHgwJyArIGhleChjaCk7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1x4MTAtXHgxRlx4ODAtXHhGRl0vZywgICAgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHgnICArIGhleChjaCk7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1x1MDE4MC1cdTBGRkZdL2csICAgICAgICAgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHUwJyArIGhleChjaCk7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1x1MTA4MC1cdUZGRkZdL2csICAgICAgICAgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHUnICArIGhleChjaCk7IH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGVjdGVkRGVzY3MgPSBuZXcgQXJyYXkoZXhwZWN0ZWQubGVuZ3RoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWREZXNjLCBmb3VuZERlc2MsIGk7CgogICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZERlc2NzW2ldID0gZXhwZWN0ZWRbaV0uZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBleHBlY3RlZERlc2MgPSBleHBlY3RlZC5sZW5ndGggPiAxCiAgICAgICAgICAgICAgICAgICAgICAgID8gZXhwZWN0ZWREZXNjcy5zbGljZSgwLCAtMSkuam9pbigiLCAiKQogICAgICAgICAgICAgICAgICAgICsgIiBvciAiCiAgICAgICAgICAgICAgICAgICAgKyBleHBlY3RlZERlc2NzW2V4cGVjdGVkLmxlbmd0aCAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgIDogZXhwZWN0ZWREZXNjc1swXTsKCiAgICAgICAgICAgICAgICAgICAgZm91bmREZXNjID0gZm91bmQgPyAiXCIiICsgc3RyaW5nRXNjYXBlKGZvdW5kKSArICJcIiIgOiAiZW5kIG9mIGlucHV0IjsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJFeHBlY3RlZCAiICsgZXhwZWN0ZWREZXNjICsgIiBidXQgIiArIGZvdW5kRGVzYyArICIgZm91bmQuIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgcG9zRGV0YWlscyA9IHBlZyRjb21wdXRlUG9zRGV0YWlscyhwb3MpLAogICAgICAgICAgICAgICAgICAgIGZvdW5kICAgICAgPSBwb3MgPCBpbnB1dC5sZW5ndGggPyBpbnB1dC5jaGFyQXQocG9zKSA6IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYW51cEV4cGVjdGVkKGV4cGVjdGVkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN5bnRheEVycm9yKAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgIT09IG51bGwgPyBtZXNzYWdlIDogYnVpbGRNZXNzYWdlKGV4cGVjdGVkLCBmb3VuZCksCiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQsCiAgICAgICAgICAgICAgICAgICAgZm91bmQsCiAgICAgICAgICAgICAgICAgICAgcG9zLAogICAgICAgICAgICAgICAgICAgIHBvc0RldGFpbHMubGluZSwKICAgICAgICAgICAgICAgICAgICBwb3NEZXRhaWxzLmNvbHVtbgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlc3RhcnQoKSB7CiAgICAgICAgICAgICAgICB2YXIgczA7CgogICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2Vib2R5KCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2Vib2R5KCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczI7CgogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIHMxID0gW107CiAgICAgICAgICAgICAgICBzMiA9IHBlZyRwYXJzZXBhcnQoKTsKICAgICAgICAgICAgICAgIHdoaWxlIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxLnB1c2goczIpOwogICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlcGFydCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzEoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZXBhcnQoKSB7CiAgICAgICAgICAgICAgICB2YXIgczA7CgogICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2VyYXcoKTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlY29tbWVudCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRwYXJzZXNlY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRwYXJzZXBhcnRpYWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlc3BlY2lhbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRwYXJzZXJlZmVyZW5jZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlYnVmZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VzZWN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNzsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZXNlY190YWdfc3RhcnQoKTsKICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMyID0gW107CiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMi5wdXNoKHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VyZCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlYm9keSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2Vib2RpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VlbmRfdGFnKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckYzQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJGM1KHMxLCBzNCwgczUsIHM2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM3KHMxLCBzNCwgczUsIHM2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZXNlY190YWdfc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyLnB1c2goczMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA0NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjOSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMChzMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzIpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VzZWNfdGFnX3N0YXJ0KCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2OwoKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWxkKCk7CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJGMxMS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxMik7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMy5wdXNoKHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2Vjb250ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlcGFyYW1zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTMoczIsIHM0LCBzNSwgczYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZWVuZF90YWcoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNSwgczY7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBwZWckcGFyc2VsZCgpOwogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA0NykgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjODsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM5KTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzLnB1c2goczQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VpZGVudGlmaWVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczYgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUucHVzaChzNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNShzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzE0KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlY29udGV4dCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMzsKCiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNTgpIHsKICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMTY7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxNyk7IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMTsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzE4KHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBzMjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczE7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxOShzMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzMCA9IHMxOwoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlcGFyYW1zKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2OwoKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIHMxID0gW107CiAgICAgICAgICAgICAgICBzMiA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczMgPSBbXTsKICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMy5wdXNoKHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDYxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjMjE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzIyKTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VudW1iZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZWlubGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMyMyhzNCwgczYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZSAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMS5wdXNoKHMyKTsKICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgIHMzID0gW107CiAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzLnB1c2goczQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2V3cygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjMjE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMyMik7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlbnVtYmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczYgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlaW5saW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMjMoczQsIHM2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMjQoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMyMCk7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZWJvZGllcygpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1LCBzNiwgczc7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBbXTsKICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWxkKCk7CiAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDU4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGMxNjsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxNyk7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNla2V5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VyZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2Vib2R5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMjMoczUsIHM3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZSAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMS5wdXNoKHMyKTsKICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNlbGQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA1OCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzE2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxNyk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNla2V5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZXJkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJHBhcnNlYm9keSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzIzKHM1LCBzNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzI2KHMxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMjUpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VyZWZlcmVuY2UoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0OwoKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIHMxID0gcGVnJHBhcnNlbGQoKTsKICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWZpbHRlcnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZXJkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMjgoczIsIHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzI3KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlcGFydGlhbCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1LCBzNiwgczcsIHM4LCBzOTsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWxkKCk7CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDYyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzMDsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMzMSk7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMzMpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMy5wdXNoKHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckYzM0KHM1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gczU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWlubGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2Vjb250ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlcGFyYW1zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzOCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3LnB1c2goczgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczggPSBwZWckYzg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczggPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjOSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM4ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM5ID0gcGVnJHBhcnNlcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM5ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMzNShzMiwgczQsIHM1LCBzNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzI5KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlZmlsdGVycygpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQ7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBbXTsKICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyNCkgewogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMzNzsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzM4KTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VrZXkoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMxOChzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gczM7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEucHVzaChzMik7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyNCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzc7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMzgpOyB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzE4KHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzkoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMzNik7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZXNwZWNpYWwoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0OwoKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIHMxID0gcGVnJHBhcnNlbGQoKTsKICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMTI2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGM0MTsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM0Mik7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNla2V5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VyZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzQzKHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzQwKTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlaWRlbnRpZmllcigpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczE7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBwZWckcGFyc2VwYXRoKCk7CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNDUoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckcGFyc2VrZXkoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM0NihzMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNDQpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VudW1iZXIoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxOwoKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIHMxID0gcGVnJHBhcnNlZmxvYXQoKTsKICAgICAgICAgICAgICAgIGlmIChzMSA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJHBhcnNlaW50ZWdlcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzQ4KHMxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNDcpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VmbG9hdCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMzsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWludGVnZXIoKTsKICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzUwOwogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzUxKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2V1bnNpZ25lZF9pbnRlZ2VyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNTIoczEsIHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNDkpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2V1bnNpZ25lZF9pbnRlZ2VyKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczI7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChwZWckYzU0LnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICBzMiA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM1NSk7IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMS5wdXNoKHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRjNTQudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM1NSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNTYoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM1Myk7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZXNpZ25lZF9pbnRlZ2VyKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczI7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA0NSkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM1ODsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzU5KTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckcGFyc2V1bnNpZ25lZF9pbnRlZ2VyKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNjAoczEsIHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNTcpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VpbnRlZ2VyKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMTsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlc2lnbmVkX2ludGVnZXIoKTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNldW5zaWduZWRfaW50ZWdlcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzYxKTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlcGF0aCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMzsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMiA9IFtdOwogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNlYXJyYXlfcGFydCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzMyA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyLnB1c2goczMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VhcnJheV9wYXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNjMoczEsIHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzUwOwogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzUxKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VhcnJheV9wYXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VhcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIucHVzaChzMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWFycmF5X3BhcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNlYXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzY0KHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNjIpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VrZXkoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczM7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgaWYgKHBlZyRjNjYudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkgewogICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzY3KTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJGM2OC50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM2OSk7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyLnB1c2goczMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJGM2OC50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzY5KTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzcwKHMxLCBzMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzY1KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlYXJyYXkoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNTsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczIgPSBwZWckcGFyc2VsYigpOwogICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICBzNCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckYzU0LnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzU1KTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNC5wdXNoKHM1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckYzU0LnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM1NSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGM3MihzNCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHMzID0gczQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMzID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNlaWRlbnRpZmllcigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VyYigpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzczKHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMxOwogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczE7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRwYXJzZWFycmF5X3BhcnQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczIgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzc0KHMxLCBzMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzcxKTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlYXJyYXlfcGFydCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQ7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBbXTsKICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDQ2KSB7CiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzUwOwogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNTEpOyB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzc2KHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBzMzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczEucHVzaChzMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjNTEpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZWtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzc2KHM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlYXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczIgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzc3KHMxLCBzMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzc1KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlaW5saW5lKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzOwoKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNzk7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM4MCk7IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzc5OwogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzgwKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM4MSgpOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSAzNCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNzk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODApOyB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRwYXJzZWxpdGVyYWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDM0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzc5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODApOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjODIoczIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM3OTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODApOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VpbmxpbmVfcGFydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyLnB1c2goczMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZWlubGluZV9wYXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzc5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzgwKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM4MyhzMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzc4KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlaW5saW5lX3BhcnQoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxOwoKICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlc3BlY2lhbCgpOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2VyZWZlcmVuY2UoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckcGFyc2VsaXRlcmFsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjODQoczEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlYnVmZmVyKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNzsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWVvbCgpOwogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyLnB1c2goczMpOwogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzg2KHMxLCBzMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICBzMSA9IFtdOwogICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZXRhZygpOwogICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgIGlmIChzNCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZXJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlY29tbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczYgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2Vlb2woKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckYzY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gcGVnJGN1cnJQb3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM4OChzNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxLnB1c2goczIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNldGFnKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZXJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHM0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZWNvbW1lbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckYzY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHM1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZWVvbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiBwZWckY3VyclBvcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzg4KHM3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjODkoczEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzMCA9IHMxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzg1KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlbGl0ZXJhbCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQ7CgogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgczEgPSBbXTsKICAgICAgICAgICAgICAgIHMyID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZXRhZygpOwogICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICBpZiAoczQgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjNjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlZXNjKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHM0ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckYzkxLnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjOTIpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjODgoczQpOwogICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHMzOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzMiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMS5wdXNoKHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNldGFnKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2Vlc2MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckYzkxLnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzkyKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHMyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGM4OChzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjOTMoczEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM5MCk7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZWVzYygpIHsKICAgICAgICAgICAgICAgIHZhciBzMCwgczE7CgogICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzk0KSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzk0OwogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjOTUpOyB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjOTYoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHMwID0gczE7CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VyYXcoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNTsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGM5OCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM5ODsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSAyOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzk5KTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGMxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTAxKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICBpZiAoczUgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzY7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gcGVnJGN1cnJQb3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGMxMDIoczUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIucHVzaChzMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGMxMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGMxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzEwMSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjNjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiBwZWckY3VyclBvcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzg3KTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzEwMihzNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxMDEpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMDMoczIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGM5Nyk7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZWNvbW1lbnQoKSB7CiAgICAgICAgICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNTsKCiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGMxMDUpIHsKICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTA1OwogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTA2KTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgczIgPSBbXTsKICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTA3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGMxMDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTA4KTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgICAgICBpZiAoczUgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzY7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gcGVnJGN1cnJQb3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGM4OChzNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHM0OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICBzMi5wdXNoKHMzKTsKICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzEwNykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckYzEwNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTA4KTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczUgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IHBlZyRjdXJyUG9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjODgoczUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzEwNykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzEwNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTA4KTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTA5KHMyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwOwogICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTA0KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNldGFnKCkgewogICAgICAgICAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNywgczgsIHM5OwoKICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICBzMSA9IHBlZyRwYXJzZWxkKCk7CiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICBzMiA9IFtdOwogICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgczIucHVzaChzMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJHBhcnNld3MoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckYzExMC50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzExMSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczUgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNC5wdXNoKHM1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOCA9IHBlZyRwYXJzZXJkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM4ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczggPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM5ID0gcGVnJHBhcnNlZW9sKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczkgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzOCAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IHBlZyRjdXJyUG9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczkgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM5ID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjODcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczkgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IFtzNywgczgsIHM5XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHM3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczYgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1LnB1c2goczYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJHBhcnNlcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM4ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckYzY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOCA9IHBlZyRjdXJyUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzaWxlbnRGYWlscysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM5ID0gcGVnJHBhcnNlZW9sKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM5ID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJGM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM4ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczggIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IHBlZyRjdXJyUG9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczkgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzg3KTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzOSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBbczcsIHM4LCBzOV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHM3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHM2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzNyAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczYucHVzaChzNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZXdzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZXJkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IFtzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzN107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlcmVmZXJlbmNlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VsZCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMDsKCiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyMykgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMxMTI7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxMTMpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VyZCgpIHsKICAgICAgICAgICAgICAgIHZhciBzMDsKCiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyNSkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMxMTQ7CiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsgcGVnJGZhaWwocGVnJGMxMTUpOyB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2VsYigpIHsKICAgICAgICAgICAgICAgIHZhciBzMDsKCiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDkxKSB7CiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzExNjsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzExNyk7IH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gczA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBlZyRwYXJzZXJiKCkgewogICAgICAgICAgICAgICAgdmFyIHMwOwoKICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gOTMpIHsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMTE4OwogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTE5KTsgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBzMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGVnJHBhcnNlZW9sKCkgewogICAgICAgICAgICAgICAgdmFyIHMwOwoKICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMTApIHsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMTIwOwogICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTIxKTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGMxMjI7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTIzKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSAxMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzEyNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7IHBlZyRmYWlsKHBlZyRjMTI1KTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA4MjMyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckYzEyNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzEyNyk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gODIzMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjMTI4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzEyOSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwZWckcGFyc2V3cygpIHsKICAgICAgICAgICAgICAgIHZhciBzMDsKCiAgICAgICAgICAgICAgICBpZiAocGVnJGMxMzAudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkgewogICAgICAgICAgICAgICAgICAgIHMwID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTsKICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgeyBwZWckZmFpbChwZWckYzEzMSk7IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlZW9sKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHMwOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUludGVnZXIoYXJyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYXJyLmpvaW4oJycpLCAxMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gd2l0aFBvc2l0aW9uKGFycikgewogICAgICAgICAgICAgICAgcmV0dXJuIGFyci5jb25jYXQoW1snbGluZScsIGxpbmUoKV0sIFsnY29sJywgY29sdW1uKCldXSk7CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICBwZWckcmVzdWx0ID0gcGVnJHN0YXJ0UnVsZUZ1bmN0aW9uKCk7CgogICAgICAgICAgICBpZiAocGVnJHJlc3VsdCAhPT0gcGVnJEZBSUxFRCAmJiBwZWckY3VyclBvcyA9PT0gaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGVnJHJlc3VsdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChwZWckcmVzdWx0ICE9PSBwZWckRkFJTEVEICYmIHBlZyRjdXJyUG9zIDwgaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwoeyB0eXBlOiAiZW5kIiwgZGVzY3JpcHRpb246ICJlbmQgb2YgaW5wdXQiIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IHBlZyRidWlsZEV4Y2VwdGlvbihudWxsLCBwZWckbWF4RmFpbEV4cGVjdGVkLCBwZWckbWF4RmFpbFBvcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFN5bnRheEVycm9yOiBTeW50YXhFcnJvciwKICAgICAgICAgICAgcGFyc2U6ICAgICAgIHBhcnNlCiAgICAgICAgfTsKICAgIH0pKCk7CgogICAgLy8gZXhwb3NlIHBhcnNlciBtZXRob2RzCiAgICBkdXN0LnBhcnNlID0gcGFyc2VyLnBhcnNlOwoKICAgIHJldHVybiBwYXJzZXI7Cn0pKTsKCihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7CiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQuZHVzdCA9PT0gdHJ1ZSkgewogICAgICAgIGRlZmluZSgiZHVzdC5jb21waWxlIiwgWyJkdXN0LmNvcmUiLCAiZHVzdC5wYXJzZSJdLCBmdW5jdGlvbihkdXN0LCBwYXJzZSkgewogICAgICAgICAgICByZXR1cm4gZmFjdG9yeShwYXJzZSwgZHVzdCkuY29tcGlsZTsKICAgICAgICB9KTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAgICAgLy8gaW4gTm9kZSwgcmVxdWlyZSB0aGlzIGZpbGUgaWYgd2Ugd2FudCB0byB1c2UgdGhlIGNvbXBpbGVyIGFzIGEgc3RhbmRhbG9uZSBtb2R1bGUKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9wYXJzZXInKS5wYXJzZSwgcmVxdWlyZSgnLi9kdXN0JykpOwogICAgfSBlbHNlIHsKICAgICAgICAvLyBpbiB0aGUgYnJvd3Nlciwgc3RvcmUgdGhlIGZhY3Rvcnkgb3V0cHV0IGlmIHdlIHdhbnQgdG8gdXNlIHRoZSBjb21waWxlciBkaXJlY3RseQogICAgICAgIGZhY3Rvcnkocm9vdC5kdXN0LnBhcnNlLCByb290LmR1c3QpOwogICAgfQp9KHRoaXMsIGZ1bmN0aW9uKHBhcnNlLCBkdXN0KSB7CiAgICB2YXIgY29tcGlsZXIgPSB7fSwKICAgICAgICBpc0FycmF5ID0gZHVzdC5pc0FycmF5OwoKCiAgICBjb21waWxlci5jb21waWxlID0gZnVuY3Rpb24oc291cmNlLCBuYW1lKSB7CiAgICAgICAgLy8gdGhlIG5hbWUgcGFyYW1ldGVyIGlzIG9wdGlvbmFsLgogICAgICAgIC8vIHRoaXMgY2FuIGhhcHBlbiBmb3IgdGVtcGxhdGVzIHRoYXQgYXJlIHJlbmRlcmVkIGltbWVkaWF0ZWx5IChyZW5kZXJTb3VyY2Ugd2hpY2ggY2FsbHMgY29tcGlsZUZuKSBvcgogICAgICAgIC8vIGZvciB0ZW1wbGF0ZXMgdGhhdCBhcmUgY29tcGlsZWQgYXMgYSBjYWxsYWJsZSAoY29tcGlsZUZuKQogICAgICAgIC8vCiAgICAgICAgLy8gZm9yIHRoZSBjb21tb24gY2FzZSAodXNpbmcgY29tcGlsZSBhbmQgcmVuZGVyKSBhIG5hbWUgaXMgcmVxdWlyZWQgc28gdGhhdCB0ZW1wbGF0ZXMgd2lsbCBiZSBjYWNoZWQgYnkgbmFtZSBhbmQgcmVuZGVyZWQgbGF0ZXIsIGJ5IG5hbWUuCgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBhc3QgPSBmaWx0ZXJBU1QocGFyc2Uoc291cmNlKSk7CiAgICAgICAgICAgIHJldHVybiBjb21waWxlKGFzdCwgbmFtZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpCiAgICAgICAgewogICAgICAgICAgICBpZiAoIWVyci5saW5lIHx8ICFlcnIuY29sdW1uKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGVyci5tZXNzYWdlICsgJyBBdCBsaW5lIDogJyArIGVyci5saW5lICsgJywgY29sdW1uIDogJyArIGVyci5jb2x1bW4pOwogICAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gZmlsdGVyQVNUKGFzdCkgewogICAgICAgIHZhciBjb250ZXh0ID0ge307CiAgICAgICAgcmV0dXJuIGNvbXBpbGVyLmZpbHRlck5vZGUoY29udGV4dCwgYXN0KTsKICAgIH0KCiAgICBjb21waWxlci5maWx0ZXJOb2RlID0gZnVuY3Rpb24oY29udGV4dCwgbm9kZSkgewogICAgICAgIHJldHVybiBjb21waWxlci5vcHRpbWl6ZXJzW25vZGVbMF1dKGNvbnRleHQsIG5vZGUpOwogICAgfTsKCiAgICBjb21waWxlci5vcHRpbWl6ZXJzID0gewogICAgICAgIGJvZHk6ICAgICAgY29tcGFjdEJ1ZmZlcnMsCiAgICAgICAgYnVmZmVyOiAgICBub29wLAogICAgICAgIHNwZWNpYWw6ICAgY29udmVydFNwZWNpYWwsCiAgICAgICAgZm9ybWF0OiAgICBmb3JtYXQsCiAgICAgICAgcmVmZXJlbmNlOiB2aXNpdCwKICAgICAgICAnIyc6ICAgICAgIHZpc2l0LAogICAgICAgICc/JzogICAgICAgdmlzaXQsCiAgICAgICAgJ14nOiAgICAgICB2aXNpdCwKICAgICAgICAnPCc6ICAgICAgIHZpc2l0LAogICAgICAgICcrJzogICAgICAgdmlzaXQsCiAgICAgICAgJ0AnOiAgICAgICB2aXNpdCwKICAgICAgICAnJSc6ICAgICAgIHZpc2l0LAogICAgICAgIHBhcnRpYWw6ICAgdmlzaXQsCiAgICAgICAgY29udGV4dDogICB2aXNpdCwKICAgICAgICBwYXJhbXM6ICAgIHZpc2l0LAogICAgICAgIGJvZGllczogICAgdmlzaXQsCiAgICAgICAgcGFyYW06ICAgICB2aXNpdCwKICAgICAgICBmaWx0ZXJzOiAgIG5vb3AsCiAgICAgICAga2V5OiAgICAgICBub29wLAogICAgICAgIHBhdGg6ICAgICAgbm9vcCwKICAgICAgICBsaXRlcmFsOiAgIG5vb3AsCiAgICAgICAgcmF3OiAgICAgICBub29wLAogICAgICAgIGNvbW1lbnQ6ICAgbnVsbGlmeSwKICAgICAgICBsaW5lOiAgICAgIG51bGxpZnksCiAgICAgICAgY29sOiAgICAgICBudWxsaWZ5CiAgICB9OwoKICAgIGNvbXBpbGVyLnByYWdtYXMgPSB7CiAgICAgICAgZXNjOiBmdW5jdGlvbihjb21waWxlciwgY29udGV4dCwgYm9kaWVzKSB7CiAgICAgICAgICAgIHZhciBvbGQgPSBjb21waWxlci5hdXRvLAogICAgICAgICAgICAgICAgb3V0OwogICAgICAgICAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQgPSAnaCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29tcGlsZXIuYXV0byA9IChjb250ZXh0ID09PSAncycpID8gJycgOiBjb250ZXh0OwogICAgICAgICAgICBvdXQgPSBjb21waWxlUGFydHMoY29tcGlsZXIsIGJvZGllcy5ibG9jayk7CiAgICAgICAgICAgIGNvbXBpbGVyLmF1dG8gPSBvbGQ7CiAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiB2aXNpdChjb250ZXh0LCBub2RlKSB7CiAgICAgICAgdmFyIG91dCA9IFtub2RlWzBdXSwKICAgICAgICAgICAgaSwgbGVuLCByZXM7CiAgICAgICAgZm9yIChpPTEsIGxlbj1ub2RlLmxlbmd0aDsgaTxsZW47IGkrKykgewogICAgICAgICAgICByZXMgPSBjb21waWxlci5maWx0ZXJOb2RlKGNvbnRleHQsIG5vZGVbaV0pOwogICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICBvdXQucHVzaChyZXMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgLy8gQ29tcGFjdHMgY29uc2VjdXRpdmUgYnVmZmVyIG5vZGVzIGludG8gYSBzaW5nbGUgbm9kZQogICAgZnVuY3Rpb24gY29tcGFjdEJ1ZmZlcnMoY29udGV4dCwgbm9kZSkgewogICAgICAgIHZhciBvdXQgPSBbbm9kZVswXV0sCiAgICAgICAgICAgIG1lbW8sIGksIGxlbiwgcmVzOwogICAgICAgIGZvciAoaT0xLCBsZW49bm9kZS5sZW5ndGg7IGk8bGVuOyBpKyspIHsKICAgICAgICAgICAgcmVzID0gY29tcGlsZXIuZmlsdGVyTm9kZShjb250ZXh0LCBub2RlW2ldKTsKICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlc1swXSA9PT0gJ2J1ZmZlcicgfHwgcmVzWzBdID09PSAnZm9ybWF0JykgewogICAgICAgICAgICAgICAgICAgIGlmIChtZW1vKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9bMF0gPSAocmVzWzBdID09PSAnYnVmZmVyJykgPyAnYnVmZmVyJyA6IG1lbW9bMF07CiAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9bMV0gKz0gcmVzLnNsaWNlKDEsIC0yKS5qb2luKCcnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChyZXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWVtbyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gocmVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIHZhciBzcGVjaWFsQ2hhcnMgPSB7CiAgICAgICAgJ3MnOiAnICcsCiAgICAgICAgJ24nOiAnXG4nLAogICAgICAgICdyJzogJ1xyJywKICAgICAgICAnbGInOiAneycsCiAgICAgICAgJ3JiJzogJ30nCiAgICB9OwoKICAgIGZ1bmN0aW9uIGNvbnZlcnRTcGVjaWFsKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICByZXR1cm4gWydidWZmZXInLCBzcGVjaWFsQ2hhcnNbbm9kZVsxXV0sIG5vZGVbMl0sIG5vZGVbM11dOwogICAgfQoKICAgIGZ1bmN0aW9uIG5vb3AoY29udGV4dCwgbm9kZSkgewogICAgICAgIHJldHVybiBub2RlOwogICAgfQoKICAgIGZ1bmN0aW9uIG51bGxpZnkoKXt9CgogICAgZnVuY3Rpb24gZm9ybWF0KGNvbnRleHQsIG5vZGUpIHsKICAgICAgICBpZihkdXN0LmNvbmZpZy53aGl0ZXNwYWNlKSB7CiAgICAgICAgICAgIC8vIEZvcm1hdCBub2RlcyBhcmUgaW4gdGhlIGZvcm0gWydmb3JtYXQnLCBlb2wsIHdoaXRlc3BhY2UsIGxpbmUsIGNvbF0sCiAgICAgICAgICAgIC8vIHdoaWNoIGlzIHVubGlrZSBvdGhlciBub2RlcyBpbiB0aGF0IHRoZXJlIGFyZSB0d28gcGllY2VzIG9mIGNvbnRlbnQKICAgICAgICAgICAgLy8gSm9pbiBlb2wgYW5kIHdoaXRlc3BhY2UgdG9nZXRoZXIgdG8gbm9ybWFsaXplIHRoZSBub2RlIGZvcm1hdAogICAgICAgICAgICBub2RlLnNwbGljZSgxLCAyLCBub2RlLnNsaWNlKDEsIC0yKS5qb2luKCcnKSk7CiAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21waWxlKGFzdCwgbmFtZSkgewogICAgICAgIHZhciBjb250ZXh0ID0gewogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgIGJvZGllczogW10sCiAgICAgICAgICAgICAgICBibG9ja3M6IHt9LAogICAgICAgICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICAgICAgICBhdXRvOiAnaCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXNjYXBlZE5hbWUgPSBkdXN0LmVzY2FwZUpzKG5hbWUpLAogICAgICAgICAgICBBTUROYW1lID0gbmFtZT8gJyInICsgZXNjYXBlZE5hbWUgKyAnIiwnIDogJycsCiAgICAgICAgICAgIGNvbXBpbGVkID0gJ2Z1bmN0aW9uKGR1c3QpeycsCiAgICAgICAgICAgIGVudHJ5ID0gY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgYXN0KSwKICAgICAgICAgICAgaWlmZTsKCiAgICAgICAgaWYobmFtZSkgewogICAgICAgICAgICBjb21waWxlZCArPSAnZHVzdC5yZWdpc3RlcigiJyArIGVzY2FwZWROYW1lICsgJyIsJyArIGVudHJ5ICsgJyk7JzsKICAgICAgICB9CgogICAgICAgIGNvbXBpbGVkICs9IGNvbXBpbGVCbG9ja3MoY29udGV4dCkgKwogICAgICAgICAgICBjb21waWxlQm9kaWVzKGNvbnRleHQpICsKICAgICAgICAgICAgJ3JldHVybiAnICsgZW50cnkgKyAnfSc7CgogICAgICAgIGlpZmUgPSAnKCcgKyBjb21waWxlZCArICcoZHVzdCkpOyc7CgogICAgICAgIGlmKGR1c3QuY29uZmlnLmFtZCkgewogICAgICAgICAgICByZXR1cm4gJ2RlZmluZSgnICsgQU1ETmFtZSArICdbImR1c3QuY29yZSJdLCcgKyBjb21waWxlZCArICcpOyc7CiAgICAgICAgfSBlbHNlIGlmKGR1c3QuY29uZmlnLmNqcykgewogICAgICAgICAgICByZXR1cm4gJ21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGR1c3QpeycgKwogICAgICAgICAgICAgICAgJ3ZhciB0bXBsPScgKyBpaWZlICsKICAgICAgICAgICAgICAgICd2YXIgZj0nICsgbG9hZGVyRm9yKCkudG9TdHJpbmcoKSArICc7JyArCiAgICAgICAgICAgICAgICAnZi50ZW1wbGF0ZT10bXBsO3JldHVybiBmfSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGlpZmU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBpbGVCbG9ja3MoY29udGV4dCkgewogICAgICAgIHZhciBvdXQgPSBbXSwKICAgICAgICAgICAgYmxvY2tzID0gY29udGV4dC5ibG9ja3MsCiAgICAgICAgICAgIG5hbWU7CgogICAgICAgIGZvciAobmFtZSBpbiBibG9ja3MpIHsKICAgICAgICAgICAgb3V0LnB1c2goJyInICsgbmFtZSArICciOicgKyBibG9ja3NbbmFtZV0pOwogICAgICAgIH0KICAgICAgICBpZiAob3V0Lmxlbmd0aCkgewogICAgICAgICAgICBjb250ZXh0LmJsb2NrcyA9ICdjdHg9Y3R4LnNoaWZ0QmxvY2tzKGJsb2Nrcyk7JzsKICAgICAgICAgICAgcmV0dXJuICd2YXIgYmxvY2tzPXsnICsgb3V0LmpvaW4oJywnKSArICd9Oyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29udGV4dC5ibG9ja3MgPSAnJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbnRleHQuYmxvY2tzOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBpbGVCb2RpZXMoY29udGV4dCkgewogICAgICAgIHZhciBvdXQgPSBbXSwKICAgICAgICAgICAgYm9kaWVzID0gY29udGV4dC5ib2RpZXMsCiAgICAgICAgICAgIGJseCA9IGNvbnRleHQuYmxvY2tzLAogICAgICAgICAgICBpLCBsZW47CgogICAgICAgIGZvciAoaT0wLCBsZW49Ym9kaWVzLmxlbmd0aDsgaTxsZW47IGkrKykgewogICAgICAgICAgICBvdXRbaV0gPSAnZnVuY3Rpb24gYm9keV8nICsgaSArICcoY2hrLGN0eCl7JyArCiAgICAgICAgICAgICAgICBibHggKyAncmV0dXJuIGNoaycgKyBib2RpZXNbaV0gKyAnO31ib2R5XycgKyBpICsgJy5fX2R1c3RCb2R5PSEwOyc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQuam9pbignJyk7CiAgICB9CgogICAgZnVuY3Rpb24gY29tcGlsZVBhcnRzKGNvbnRleHQsIGJvZHkpIHsKICAgICAgICB2YXIgcGFydHMgPSAnJywKICAgICAgICAgICAgaSwgbGVuOwogICAgICAgIGZvciAoaT0xLCBsZW49Ym9keS5sZW5ndGg7IGk8bGVuOyBpKyspIHsKICAgICAgICAgICAgcGFydHMgKz0gY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgYm9keVtpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJ0czsKICAgIH0KCiAgICBjb21waWxlci5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICByZXR1cm4gY29tcGlsZXIubm9kZXNbbm9kZVswXV0oY29udGV4dCwgbm9kZSk7CiAgICB9OwoKICAgIGNvbXBpbGVyLm5vZGVzID0gewogICAgICAgIGJvZHk6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgdmFyIGlkID0gY29udGV4dC5pbmRleCsrLAogICAgICAgICAgICAgICAgbmFtZSA9ICdib2R5XycgKyBpZDsKICAgICAgICAgICAgY29udGV4dC5ib2RpZXNbaWRdID0gY29tcGlsZVBhcnRzKGNvbnRleHQsIG5vZGUpOwogICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICB9LAoKICAgICAgICBidWZmZXI6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgcmV0dXJuICcudygnICsgZXNjYXBlKG5vZGVbMV0pICsgJyknOwogICAgICAgIH0sCgogICAgICAgIGZvcm1hdDogZnVuY3Rpb24oY29udGV4dCwgbm9kZSkgewogICAgICAgICAgICByZXR1cm4gJy53KCcgKyBlc2NhcGUobm9kZVsxXSkgKyAnKSc7CiAgICAgICAgfSwKCiAgICAgICAgcmVmZXJlbmNlOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiAnLmYoJyArIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMV0pICsKICAgICAgICAgICAgICAgICcsY3R4LCcgKyBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzJdKSArICcpJzsKICAgICAgICB9LAoKICAgICAgICAnIyc6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVTZWN0aW9uKGNvbnRleHQsIG5vZGUsICdzZWN0aW9uJyk7CiAgICAgICAgfSwKCiAgICAgICAgJz8nOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiBjb21waWxlU2VjdGlvbihjb250ZXh0LCBub2RlLCAnZXhpc3RzJyk7CiAgICAgICAgfSwKCiAgICAgICAgJ14nOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiBjb21waWxlU2VjdGlvbihjb250ZXh0LCBub2RlLCAnbm90ZXhpc3RzJyk7CiAgICAgICAgfSwKCiAgICAgICAgJzwnOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHZhciBib2RpZXMgPSBub2RlWzRdOwogICAgICAgICAgICBmb3IgKHZhciBpPTEsIGxlbj1ib2RpZXMubGVuZ3RoOyBpPGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBib2RpZXNbaV0sCiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHBhcmFtWzFdWzFdOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdibG9jaycpIHsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmJsb2Nrc1tub2RlWzFdLnRleHRdID0gY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgcGFyYW1bMl0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKCiAgICAgICAgJysnOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2Yobm9kZVsxXS50ZXh0KSA9PT0gJ3VuZGVmaW5lZCcgICYmIHR5cGVvZihub2RlWzRdKSA9PT0gJ3VuZGVmaW5lZCcpewogICAgICAgICAgICAgICAgcmV0dXJuICcuYihjdHguZ2V0QmxvY2soJyArCiAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVsxXSkgKwogICAgICAgICAgICAgICAgICAgICcsY2hrLCBjdHgpLCcgKyBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzJdKSArICcsIHt9LCcgKwogICAgICAgICAgICAgICAgICAgIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbM10pICsKICAgICAgICAgICAgICAgICAgICAnKSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJy5iKGN0eC5nZXRCbG9jaygnICsKICAgICAgICAgICAgICAgICAgICBlc2NhcGUobm9kZVsxXS50ZXh0KSArCiAgICAgICAgICAgICAgICAgICAgJyksJyArIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMl0pICsgJywnICsKICAgICAgICAgICAgICAgICAgICBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzRdKSArICcsJyArCiAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVszXSkgKwogICAgICAgICAgICAgICAgICAgICcpJzsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgICdAJzogZnVuY3Rpb24oY29udGV4dCwgbm9kZSkgewogICAgICAgICAgICByZXR1cm4gJy5oKCcgKwogICAgICAgICAgICAgICAgZXNjYXBlKG5vZGVbMV0udGV4dCkgKwogICAgICAgICAgICAgICAgJywnICsgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVsyXSkgKyAnLCcgKwogICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVs0XSkgKyAnLCcgKwogICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVszXSkgKyAnLCcgKwogICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVs1XSkgKwogICAgICAgICAgICAgICAgJyknOwogICAgICAgIH0sCgogICAgICAgICclJzogZnVuY3Rpb24oY29udGV4dCwgbm9kZSkgewogICAgICAgICAgICAvLyBUT0RPOiBNb3ZlIHRoZXNlIGhhY2tzIGludG8gcHJhZ21hIHByZWNvbXBpbGVyCiAgICAgICAgICAgIHZhciBuYW1lID0gbm9kZVsxXVsxXSwKICAgICAgICAgICAgICAgIHJhd0JvZGllcywKICAgICAgICAgICAgICAgIGJvZGllcywKICAgICAgICAgICAgICAgIHJhd1BhcmFtcywKICAgICAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgICAgIGN0eCwgYiwgcCwgaSwgbGVuOwogICAgICAgICAgICBpZiAoIWNvbXBpbGVyLnByYWdtYXNbbmFtZV0pIHsKICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmF3Qm9kaWVzID0gbm9kZVs0XTsKICAgICAgICAgICAgYm9kaWVzID0ge307CiAgICAgICAgICAgIGZvciAoaT0xLCBsZW49cmF3Qm9kaWVzLmxlbmd0aDsgaTxsZW47IGkrKykgewogICAgICAgICAgICAgICAgYiA9IHJhd0JvZGllc1tpXTsKICAgICAgICAgICAgICAgIGJvZGllc1tiWzFdWzFdXSA9IGJbMl07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJhd1BhcmFtcyA9IG5vZGVbM107CiAgICAgICAgICAgIHBhcmFtcyA9IHt9OwogICAgICAgICAgICBmb3IgKGk9MSwgbGVuPXJhd1BhcmFtcy5sZW5ndGg7IGk8bGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHAgPSByYXdQYXJhbXNbaV07CiAgICAgICAgICAgICAgICBwYXJhbXNbcFsxXVsxXV0gPSBwWzJdWzFdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjdHggPSBub2RlWzJdWzFdID8gbm9kZVsyXVsxXS50ZXh0IDogbnVsbDsKCiAgICAgICAgICAgIHJldHVybiBjb21waWxlci5wcmFnbWFzW25hbWVdKGNvbnRleHQsIGN0eCwgYm9kaWVzLCBwYXJhbXMpOwogICAgICAgIH0sCgogICAgICAgIHBhcnRpYWw6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgcmV0dXJuICcucCgnICsKICAgICAgICAgICAgICAgIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMV0pICsKICAgICAgICAgICAgICAgICcsY3R4LCcgKyBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzJdKSArCiAgICAgICAgICAgICAgICAnLCcgKyBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzNdKSArICcpJzsKICAgICAgICB9LAoKICAgICAgICBjb250ZXh0OiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIGlmIChub2RlWzFdKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2N0eC5yZWJhc2UoJyArIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMV0pICsgJyknOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnY3R4JzsKICAgICAgICB9LAoKICAgICAgICBwYXJhbXM6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgdmFyIG91dCA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpPTEsIGxlbj1ub2RlLmxlbmd0aDsgaTxsZW47IGkrKykgewogICAgICAgICAgICAgICAgb3V0LnB1c2goY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVtpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3snICsgb3V0LmpvaW4oJywnKSArICd9JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJ3t9JzsKICAgICAgICB9LAoKICAgICAgICBib2RpZXM6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgdmFyIG91dCA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpPTEsIGxlbj1ub2RlLmxlbmd0aDsgaTxsZW47IGkrKykgewogICAgICAgICAgICAgICAgb3V0LnB1c2goY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVtpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAneycgKyBvdXQuam9pbignLCcpICsgJ30nOwogICAgICAgIH0sCgogICAgICAgIHBhcmFtOiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzFdKSArICc6JyArIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMl0pOwogICAgICAgIH0sCgogICAgICAgIGZpbHRlcnM6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaT0xLCBsZW49bm9kZS5sZW5ndGg7IGk8bGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBub2RlW2ldOwogICAgICAgICAgICAgICAgbGlzdC5wdXNoKCciJyArIGZpbHRlciArICciJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICciJyArIGNvbnRleHQuYXV0byArICciJyArCiAgICAgICAgICAgICAgICAobGlzdC5sZW5ndGggPyAnLFsnICsgbGlzdC5qb2luKCcsJykgKyAnXScgOiAnJyk7CiAgICAgICAgfSwKCiAgICAgICAga2V5OiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiAnY3R4LmdldChbIicgKyBub2RlWzFdICsgJyJdLCBmYWxzZSknOwogICAgICAgIH0sCgogICAgICAgIHBhdGg6IGZ1bmN0aW9uKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBub2RlWzFdLAogICAgICAgICAgICAgICAga2V5cyA9IG5vZGVbMl0sCiAgICAgICAgICAgICAgICBsaXN0ID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpPTAsbGVuPWtleXMubGVuZ3RoOyBpPGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShrZXlzW2ldKSkgewogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBrZXlzW2ldKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCgnIicgKyBrZXlzW2ldICsgJyInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJ2N0eC5nZXRQYXRoKCcgKyBjdXJyZW50ICsgJywgWycgKyBsaXN0LmpvaW4oJywnKSArICddKSc7CiAgICAgICAgfSwKCiAgICAgICAgbGl0ZXJhbDogZnVuY3Rpb24oY29udGV4dCwgbm9kZSkgewogICAgICAgICAgICByZXR1cm4gZXNjYXBlKG5vZGVbMV0pOwogICAgICAgIH0sCiAgICAgICAgcmF3OiBmdW5jdGlvbihjb250ZXh0LCBub2RlKSB7CiAgICAgICAgICAgIHJldHVybiAiLncoIiArIGVzY2FwZShub2RlWzFdKSArICIpIjsKICAgICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGNvbXBpbGVTZWN0aW9uKGNvbnRleHQsIG5vZGUsIGNtZCkgewogICAgICAgIHJldHVybiAnLicgKyAoZHVzdC5fYWxpYXNlc1tjbWRdIHx8IGNtZCkgKyAnKCcgKwogICAgICAgICAgICBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzFdKSArCiAgICAgICAgICAgICcsJyArIGNvbXBpbGVyLmNvbXBpbGVOb2RlKGNvbnRleHQsIG5vZGVbMl0pICsgJywnICsKICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZU5vZGUoY29udGV4dCwgbm9kZVs0XSkgKyAnLCcgKwogICAgICAgICAgICBjb21waWxlci5jb21waWxlTm9kZShjb250ZXh0LCBub2RlWzNdKSArCiAgICAgICAgICAgICcpJzsKICAgIH0KCiAgICB2YXIgQlMgPSAvXFwvZywKICAgICAgICBEUSA9IC8iL2csCiAgICAgICAgTEYgPSAvXGYvZywKICAgICAgICBOTCA9IC9cbi9nLAogICAgICAgIENSID0gL1xyL2csCiAgICAgICAgVEIgPSAvXHQvZzsKICAgIGZ1bmN0aW9uIGVzY2FwZVRvSnNTYWZlU3RyaW5nKHN0cikgewogICAgICAgIHJldHVybiBzdHIucmVwbGFjZShCUywgJ1xcXFwnKQogICAgICAgICAgICAucmVwbGFjZShEUSwgJ1xcIicpCiAgICAgICAgICAgIC5yZXBsYWNlKExGLCAnXFxmJykKICAgICAgICAgICAgLnJlcGxhY2UoTkwsICdcXG4nKQogICAgICAgICAgICAucmVwbGFjZShDUiwgJ1xccicpCiAgICAgICAgICAgIC5yZXBsYWNlKFRCLCAnXFx0Jyk7CiAgICB9CgogICAgdmFyIGVzY2FwZSA9ICh0eXBlb2YgSlNPTiA9PT0gJ3VuZGVmaW5lZCcpID8KICAgICAgICBmdW5jdGlvbihzdHIpIHsgcmV0dXJuICciJyArIGVzY2FwZVRvSnNTYWZlU3RyaW5nKHN0cikgKyAnIic7fSA6CiAgICAgICAgSlNPTi5zdHJpbmdpZnk7CgogICAgZnVuY3Rpb24gcmVuZGVyU291cmNlKHNvdXJjZSwgY29udGV4dCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgdG1wbCA9IGR1c3QubG9hZFNvdXJjZShkdXN0LmNvbXBpbGUoc291cmNlKSk7CiAgICAgICAgcmV0dXJuIGxvYWRlckZvcih0bXBsKShjb250ZXh0LCBjYWxsYmFjayk7CiAgICB9CgogICAgZnVuY3Rpb24gY29tcGlsZUZuKHNvdXJjZSwgbmFtZSkgewogICAgICAgIHZhciB0bXBsID0gZHVzdC5sb2FkU291cmNlKGR1c3QuY29tcGlsZShzb3VyY2UsIG5hbWUpKTsKICAgICAgICByZXR1cm4gbG9hZGVyRm9yKHRtcGwpOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRlckZvcih0bXBsKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvYWQoY3R4LCBjYikgewogICAgICAgICAgICB2YXIgZm4gPSBjYiA/ICdyZW5kZXInIDogJ3N0cmVhbSc7CiAgICAgICAgICAgIHJldHVybiBkdXN0W2ZuXSh0bXBsLCBjdHgsIGNiKTsKICAgICAgICB9OwogICAgfQoKICAgIC8vIGV4cG9zZSBjb21waWxlciBtZXRob2RzCiAgICBkdXN0LmNvbXBpbGVyID0gY29tcGlsZXI7CiAgICBkdXN0LmNvbXBpbGUgPSBkdXN0LmNvbXBpbGVyLmNvbXBpbGU7CiAgICBkdXN0LnJlbmRlclNvdXJjZSA9IHJlbmRlclNvdXJjZTsKICAgIGR1c3QuY29tcGlsZUZuID0gY29tcGlsZUZuOwoKICAgIC8vIERFUFJFQ0FURUQgbGVnYWN5IG5hbWVzLiBSZW1vdmVkIGluIDIuOC4wCiAgICBkdXN0LmZpbHRlck5vZGUgPSBjb21waWxlci5maWx0ZXJOb2RlOwogICAgZHVzdC5vcHRpbWl6ZXJzID0gY29tcGlsZXIub3B0aW1pemVyczsKICAgIGR1c3QucHJhZ21hcyA9IGNvbXBpbGVyLnByYWdtYXM7CiAgICBkdXN0LmNvbXBpbGVOb2RlID0gY29tcGlsZXIuY29tcGlsZU5vZGU7CiAgICBkdXN0Lm5vZGVzID0gY29tcGlsZXIubm9kZXM7CgogICAgcmV0dXJuIGNvbXBpbGVyOwoKfSkpOwoKaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCAmJiBkZWZpbmUuYW1kLmR1c3QgPT09IHRydWUpIHsKICAgIGRlZmluZShbInJlcXVpcmUiLCAiZHVzdC5jb3JlIiwgImR1c3QuY29tcGlsZSJdLCBmdW5jdGlvbihyZXF1aXJlLCBkdXN0KSB7CiAgICAgICAgZHVzdC5vbkxvYWQgPSBmdW5jdGlvbihuYW1lLCBjYikgewogICAgICAgICAgICByZXF1aXJlKFtuYW1lXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjYigpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBkdXN0OwogICAgfSk7Cn0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="29" hostname="learning2.pflb.ru:56902" path="/js/core/jquery.cookie.js" url="http://learning2.pflb.ru:56902/js/core/jquery.cookie.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52234" connectionId="2108" origin="HTML" encodingType="ANSI" ordinal="7" startDateTime="2020-02-23T18:01:14.508+04:00" startTime="4759" endTime="4799" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb3JlL2pxdWVyeS5jb29raWUuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi9sb2dpbg0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3121</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzEyMQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDMxMjENCkRhdGU6IFN1biwgMjMgRmViIDIwMjAgMTQ6MDE6NDEgR01UDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIGpRdWVyeSBDb29raWUgUGx1Z2luIHYxLjQuMQogKiBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZQogKgogKiBDb3B5cmlnaHQgMjAxMyBLbGF1cyBIYXJ0bAogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICovCihmdW5jdGlvbiAoZmFjdG9yeSkgewoJaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewoJCS8vIEFNRAoJCWRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTsKCX0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CgkJLy8gQ29tbW9uSlMKCQlmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsKCX0gZWxzZSB7CgkJLy8gQnJvd3NlciBnbG9iYWxzCgkJZmFjdG9yeShqUXVlcnkpOwoJfQp9KGZ1bmN0aW9uICgkKSB7CgoJdmFyIHBsdXNlcyA9IC9cKy9nOwoKCWZ1bmN0aW9uIGVuY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZW5jb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIGRlY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZGVjb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbHVlKSB7CgkJcmV0dXJuIGVuY29kZShjb25maWcuanNvbiA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IFN0cmluZyh2YWx1ZSkpOwoJfQoKCWZ1bmN0aW9uIHBhcnNlQ29va2llVmFsdWUocykgewoJCWlmIChzLmluZGV4T2YoJyInKSA9PT0gMCkgewoJCQkvLyBUaGlzIGlzIGEgcXVvdGVkIGNvb2tpZSBhcyBhY2NvcmRpbmcgdG8gUkZDMjA2OCwgdW5lc2NhcGUuLi4KCQkJcyA9IHMuc2xpY2UoMSwgLTEpLnJlcGxhY2UoL1xcIi9nLCAnIicpLnJlcGxhY2UoL1xcXFwvZywgJ1xcJyk7CgkJfQoKCQl0cnkgewoJCQkvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLgoJCQkvLyBJZiB3ZSBjYW4ndCBkZWNvZGUgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLgoJCQkvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuCgkJCXMgPSBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsdXNlcywgJyAnKSk7CgkJCXJldHVybiBjb25maWcuanNvbiA/IEpTT04ucGFyc2UocykgOiBzOwoJCX0gY2F0Y2goZSkge30KCX0KCglmdW5jdGlvbiByZWFkKHMsIGNvbnZlcnRlcikgewoJCXZhciB2YWx1ZSA9IGNvbmZpZy5yYXcgPyBzIDogcGFyc2VDb29raWVWYWx1ZShzKTsKCQlyZXR1cm4gJC5pc0Z1bmN0aW9uKGNvbnZlcnRlcikgPyBjb252ZXJ0ZXIodmFsdWUpIDogdmFsdWU7Cgl9CgoJdmFyIGNvbmZpZyA9ICQuY29va2llID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHsKCgkJLy8gV3JpdGUKCgkJaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgISQuaXNGdW5jdGlvbih2YWx1ZSkpIHsKCQkJb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb25maWcuZGVmYXVsdHMsIG9wdGlvbnMpOwoKCQkJaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT09ICdudW1iZXInKSB7CgkJCQl2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcywgdCA9IG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCk7CgkJCQl0LnNldFRpbWUoK3QgKyBkYXlzICogODY0ZSs1KTsKCQkJfQoKCQkJcmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBbCgkJCQllbmNvZGUoa2V5KSwgJz0nLCBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSksCgkJCQlvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRQoJCQkJb3B0aW9ucy5wYXRoICAgID8gJzsgcGF0aD0nICsgb3B0aW9ucy5wYXRoIDogJycsCgkJCQlvcHRpb25zLmRvbWFpbiAgPyAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluIDogJycsCgkJCQlvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJycKCQkJXS5qb2luKCcnKSk7CgkJfQoKCQkvLyBSZWFkCgoJCXZhciByZXN1bHQgPSBrZXkgPyB1bmRlZmluZWQgOiB7fTsKCgkJLy8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheQoJCS8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlbgoJCS8vIGNhbGxpbmcgJC5jb29raWUoKS4KCQl2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdOwoKCQlmb3IgKHZhciBpID0gMCwgbCA9IGNvb2tpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJCXZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTsKCQkJdmFyIG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7CgkJCXZhciBjb29raWUgPSBwYXJ0cy5qb2luKCc9Jyk7CgoJCQlpZiAoa2V5ICYmIGtleSA9PT0gbmFtZSkgewoJCQkJLy8gSWYgc2Vjb25kIGFyZ3VtZW50ICh2YWx1ZSkgaXMgYSBmdW5jdGlvbiBpdCdzIGEgY29udmVydGVyLi4uCgkJCQlyZXN1bHQgPSByZWFkKGNvb2tpZSwgdmFsdWUpOwoJCQkJYnJlYWs7CgkJCX0KCgkJCS8vIFByZXZlbnQgc3RvcmluZyBhIGNvb2tpZSB0aGF0IHdlIGNvdWxkbid0IGRlY29kZS4KCQkJaWYgKCFrZXkgJiYgKGNvb2tpZSA9IHJlYWQoY29va2llKSkgIT09IHVuZGVmaW5lZCkgewoJCQkJcmVzdWx0W25hbWVdID0gY29va2llOwoJCQl9CgkJfQoKCQlyZXR1cm4gcmVzdWx0OwoJfTsKCgljb25maWcuZGVmYXVsdHMgPSB7fTsKCgkkLnJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHsKCQlpZiAoJC5jb29raWUoa2V5KSA9PT0gdW5kZWZpbmVkKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIE11c3Qgbm90IGFsdGVyIG9wdGlvbnMsIHRodXMgZXh0ZW5kaW5nIGEgZnJlc2ggb2JqZWN0Li4uCgkJJC5jb29raWUoa2V5LCAnJywgJC5leHRlbmQoe30sIG9wdGlvbnMsIHsgZXhwaXJlczogLTEgfSkpOwoJCXJldHVybiAhJC5jb29raWUoa2V5KTsKCX07Cgp9KSk7Cg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="30" hostname="learning2.pflb.ru:56902" path="/js/core/materialize.js" url="http://learning2.pflb.ru:56902/js/core/materialize.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52237" connectionId="2228" origin="HTML" encodingType="ANSI" ordinal="8" startDateTime="2020-02-23T18:01:14.534+04:00" startTime="4784" endTime="5277" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb3JlL21hdGVyaWFsaXplLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbGVhcm5pbmcyLnBmbGIucnU6NTY5MDIvbG9naW4NClVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDENClgtUmVxdWVzdGVkLVdpdGg6IFhNTEh0dHBSZXF1ZXN0DQpkbnQ6IDENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjM5NDUuMTMwIFNhZmFyaS81MzcuMzYgT1BSLzY2LjAuMzUxNS4xMDMNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOSxydS1SVTtxPTAuOCxydTtxPTAuNw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IGxlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyDQpDb29raWU6IHNlc3Npb25FeHBpcmVkPWZhbHNlOyBQRkxCLnByZS5sb2dpbi5saW5rPW51bGw7IGZpbHRlclNldHRpbmc9JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdEDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>346444</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzQ2NDQ0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDM0NjQ0NA0KRGF0ZTogU3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIE1hdGVyaWFsaXplIHYwLjk5LjAgKGh0dHA6Ly9tYXRlcmlhbGl6ZWNzcy5jb20pCiAqIENvcHlyaWdodCAyMDE0LTIwMTcgTWF0ZXJpYWxpemUKICogTUlUIExpY2Vuc2UgKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Eb2dmYWxvL21hdGVyaWFsaXplL21hc3Rlci9MSUNFTlNFKQogKi8KLy8gQ2hlY2sgZm9yIGpRdWVyeS4KaWYgKHR5cGVvZihqUXVlcnkpID09PSAndW5kZWZpbmVkJykgewogIHZhciBqUXVlcnk7CiAgLy8gQ2hlY2sgaWYgcmVxdWlyZSBpcyBhIGRlZmluZWQgZnVuY3Rpb24uCiAgaWYgKHR5cGVvZihyZXF1aXJlKSA9PT0gJ2Z1bmN0aW9uJykgewogICAgalF1ZXJ5ID0gJCA9IHJlcXVpcmUoJ2pxdWVyeScpOwogIC8vIEVsc2UgdXNlIHRoZSBkb2xsYXIgc2lnbiBhbGlhcy4KICB9IGVsc2UgewogICAgalF1ZXJ5ID0gJDsKICB9Cn0KOy8qCiAqIGpRdWVyeSBFYXNpbmcgdjEuNC4wIC0gaHR0cDovL2dzZ2QuY28udWsvc2FuZGJveC9qcXVlcnkvZWFzaW5nLwogKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuCiAqIENvcHlyaWdodCDCqSAyMDA4IEdlb3JnZSBNY0dpbmxleSBTbWl0aAogKiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBodHRwczovL3Jhdy5naXRodWIuY29tL2dkc21pdGgvanF1ZXJ5LWVhc2luZy9tYXN0ZXIvTElDRU5TRQoqLwoKKGZ1bmN0aW9uIChmYWN0b3J5KSB7CglpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CgkJZGVmaW5lKFsnanF1ZXJ5J10sIGZ1bmN0aW9uICgkKSB7CgkJCXJldHVybiBmYWN0b3J5KCQpOwoJCX0pOwoJfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJvYmplY3QiKSB7CgkJZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpOwoJfSBlbHNlIHsKCQlmYWN0b3J5KGpRdWVyeSk7Cgl9Cn0pKGZ1bmN0aW9uKCQpewoKLy8gUHJlc2VydmUgdGhlIG9yaWdpbmFsIGpRdWVyeSAic3dpbmciIGVhc2luZyBhcyAianN3aW5nIgokLmVhc2luZ1snanN3aW5nJ10gPSAkLmVhc2luZ1snc3dpbmcnXTsKCnZhciBwb3cgPSBNYXRoLnBvdywKCXNxcnQgPSBNYXRoLnNxcnQsCglzaW4gPSBNYXRoLnNpbiwKCWNvcyA9IE1hdGguY29zLAoJUEkgPSBNYXRoLlBJLAoJYzEgPSAxLjcwMTU4LAoJYzIgPSBjMSAqIDEuNTI1LAoJYzMgPSBjMSArIDEsCgljNCA9ICggMiAqIFBJICkgLyAzLAoJYzUgPSAoIDIgKiBQSSApIC8gNC41OwoKLy8geCBpcyB0aGUgZnJhY3Rpb24gb2YgYW5pbWF0aW9uIHByb2dyZXNzLCBpbiB0aGUgcmFuZ2UgMC4uMQpmdW5jdGlvbiBib3VuY2VPdXQoeCkgewoJdmFyIG4xID0gNy41NjI1LAoJCWQxID0gMi43NTsKCWlmICggeCA8IDEvZDEgKSB7CgkJcmV0dXJuIG4xKngqeDsKCX0gZWxzZSBpZiAoIHggPCAyL2QxICkgewoJCXJldHVybiBuMSooeC09KDEuNS9kMSkpKnggKyAuNzU7Cgl9IGVsc2UgaWYgKCB4IDwgMi41L2QxICkgewoJCXJldHVybiBuMSooeC09KDIuMjUvZDEpKSp4ICsgLjkzNzU7Cgl9IGVsc2UgewoJCXJldHVybiBuMSooeC09KDIuNjI1L2QxKSkqeCArIC45ODQzNzU7Cgl9Cn0KCiQuZXh0ZW5kKCAkLmVhc2luZywKewoJZGVmOiAnZWFzZU91dFF1YWQnLAoJc3dpbmc6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuICQuZWFzaW5nWyQuZWFzaW5nLmRlZl0oeCk7Cgl9LAoJZWFzZUluUXVhZDogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCAqIHg7Cgl9LAoJZWFzZU91dFF1YWQ6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSAoIDEgLSB4ICkgKiAoIDEgLSB4ICk7Cgl9LAoJZWFzZUluT3V0UXVhZDogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCA8IDAuNSA/CgkJCTIgKiB4ICogeCA6CgkJCTEgLSBwb3coIC0yICogeCArIDIsIDIgKSAvIDI7Cgl9LAoJZWFzZUluQ3ViaWM6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHggKiB4ICogeDsKCX0sCgllYXNlT3V0Q3ViaWM6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSBwb3coIDEgLSB4LCAzICk7Cgl9LAoJZWFzZUluT3V0Q3ViaWM6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHggPCAwLjUgPwoJCQk0ICogeCAqIHggKiB4IDoKCQkJMSAtIHBvdyggLTIgKiB4ICsgMiwgMyApIC8gMjsKCX0sCgllYXNlSW5RdWFydDogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCAqIHggKiB4ICogeDsKCX0sCgllYXNlT3V0UXVhcnQ6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSBwb3coIDEgLSB4LCA0ICk7Cgl9LAoJZWFzZUluT3V0UXVhcnQ6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHggPCAwLjUgPwoJCQk4ICogeCAqIHggKiB4ICogeCA6CgkJCTEgLSBwb3coIC0yICogeCArIDIsIDQgKSAvIDI7Cgl9LAoJZWFzZUluUXVpbnQ6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHggKiB4ICogeCAqIHggKiB4OwoJfSwKCWVhc2VPdXRRdWludDogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4gMSAtIHBvdyggMSAtIHgsIDUgKTsKCX0sCgllYXNlSW5PdXRRdWludDogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCA8IDAuNSA/CgkJCTE2ICogeCAqIHggKiB4ICogeCAqIHggOgoJCQkxIC0gcG93KCAtMiAqIHggKyAyLCA1ICkgLyAyOwoJfSwKCWVhc2VJblNpbmU6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSBjb3MoIHggKiBQSS8yICk7Cgl9LAoJZWFzZU91dFNpbmU6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHNpbiggeCAqIFBJLzIgKTsKCX0sCgllYXNlSW5PdXRTaW5lOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiAtKCBjb3MoIFBJICogeCApIC0gMSApIC8gMjsKCX0sCgllYXNlSW5FeHBvOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiB4ID09PSAwID8gMCA6IHBvdyggMiwgMTAgKiB4IC0gMTAgKTsKCX0sCgllYXNlT3V0RXhwbzogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCA9PT0gMSA/IDEgOiAxIC0gcG93KCAyLCAtMTAgKiB4ICk7Cgl9LAoJZWFzZUluT3V0RXhwbzogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCA9PT0gMCA/IDAgOiB4ID09PSAxID8gMSA6IHggPCAwLjUgPwoJCQlwb3coIDIsIDIwICogeCAtIDEwICkgLyAyIDoKCQkJKCAyIC0gcG93KCAyLCAtMjAgKiB4ICsgMTAgKSApIC8gMjsKCX0sCgllYXNlSW5DaXJjOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiAxIC0gc3FydCggMSAtIHBvdyggeCwgMiApICk7Cgl9LAoJZWFzZU91dENpcmM6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHNxcnQoIDEgLSBwb3coIHggLSAxLCAyICkgKTsKCX0sCgllYXNlSW5PdXRDaXJjOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiB4IDwgMC41ID8KCQkJKCAxIC0gc3FydCggMSAtIHBvdyggMiAqIHgsIDIgKSApICkgLyAyIDoKCQkJKCBzcXJ0KCAxIC0gcG93KCAtMiAqIHggKyAyLCAyICkgKSArIDEgKSAvIDI7Cgl9LAoJZWFzZUluRWxhc3RpYzogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4geCA9PT0gMCA/IDAgOiB4ID09PSAxID8gMSA6CgkJCS1wb3coIDIsIDEwICogeCAtIDEwICkgKiBzaW4oICggeCAqIDEwIC0gMTAuNzUgKSAqIGM0ICk7Cgl9LAoJZWFzZU91dEVsYXN0aWM6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIHggPT09IDAgPyAwIDogeCA9PT0gMSA/IDEgOgoJCQlwb3coIDIsIC0xMCAqIHggKSAqIHNpbiggKCB4ICogMTAgLSAwLjc1ICkgKiBjNCApICsgMTsKCX0sCgllYXNlSW5PdXRFbGFzdGljOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiB4ID09PSAwID8gMCA6IHggPT09IDEgPyAxIDogeCA8IDAuNSA/CgkJCS0oIHBvdyggMiwgMjAgKiB4IC0gMTAgKSAqIHNpbiggKCAyMCAqIHggLSAxMS4xMjUgKSAqIGM1ICkpIC8gMiA6CgkJCXBvdyggMiwgLTIwICogeCArIDEwICkgKiBzaW4oICggMjAgKiB4IC0gMTEuMTI1ICkgKiBjNSApIC8gMiArIDE7Cgl9LAoJZWFzZUluQmFjazogZnVuY3Rpb24gKHgpIHsKCQlyZXR1cm4gYzMgKiB4ICogeCAqIHggLSBjMSAqIHggKiB4OwoJfSwKCWVhc2VPdXRCYWNrOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiAxICsgYzMgKiBwb3coIHggLSAxLCAzICkgKyBjMSAqIHBvdyggeCAtIDEsIDIgKTsKCX0sCgllYXNlSW5PdXRCYWNrOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiB4IDwgMC41ID8KCQkJKCBwb3coIDIgKiB4LCAyICkgKiAoICggYzIgKyAxICkgKiAyICogeCAtIGMyICkgKSAvIDIgOgoJCQkoIHBvdyggMiAqIHggLSAyLCAyICkgKiggKCBjMiArIDEgKSAqICggeCAqIDIgLSAyICkgKyBjMiApICsgMiApIC8gMjsKCX0sCgllYXNlSW5Cb3VuY2U6IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSBib3VuY2VPdXQoIDEgLSB4ICk7Cgl9LAoJZWFzZU91dEJvdW5jZTogYm91bmNlT3V0LAoJZWFzZUluT3V0Qm91bmNlOiBmdW5jdGlvbiAoeCkgewoJCXJldHVybiB4IDwgMC41ID8KCQkJKCAxIC0gYm91bmNlT3V0KCAxIC0gMiAqIHggKSApIC8gMiA6CgkJCSggMSArIGJvdW5jZU91dCggMiAqIHggLSAxICkgKSAvIDI7Cgl9Cn0pOwoKfSk7Oy8vIEN1c3RvbSBFYXNpbmcKalF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmVhc2luZywKewogIGVhc2VJbk91dE1hdGVyaWFsOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkgewogICAgaWYgKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQgKyBiOwogICAgcmV0dXJuIGMvNCooKHQtPTIpKnQqdCArIDIpICsgYjsKICB9Cn0pOzsvKiEgVmVsb2NpdHlKUy5vcmcgKDEuMi4zKS4gKEMpIDIwMTQgSnVsaWFuIFNoYXBpcm8uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlICovCi8qISBWZWxvY2l0eUpTLm9yZyBqUXVlcnkgU2hpbSAoMS4wLjEpLiAoQykgMjAxNCBUaGUgalF1ZXJ5IEZvdW5kYXRpb24uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLiAqLwovKiEgTm90ZSB0aGF0IHRoaXMgaGFzIGJlZW4gbW9kaWZpZWQgYnkgTWF0ZXJpYWxpemUgdG8gY29uZmlybSB0aGF0IFZlbG9jaXR5IGlzIG5vdCBhbHJlYWR5IGJlaW5nIGltcG9ydGVkLiAqLwpqUXVlcnkuVmVsb2NpdHk/Y29uc29sZS5sb2coIlZlbG9jaXR5IGlzIGFscmVhZHkgbG9hZGVkLiBZb3UgbWF5IGJlIG5lZWRsZXNzbHkgaW1wb3J0aW5nIFZlbG9jaXR5IGFnYWluOyBub3RlIHRoYXQgTWF0ZXJpYWxpemUgaW5jbHVkZXMgVmVsb2NpdHkuIik6KCFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PWUubGVuZ3RoLGE9ci50eXBlKGUpO3JldHVybiJmdW5jdGlvbiI9PT1hfHxyLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOiJhcnJheSI9PT1hfHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlfWlmKCFlLmpRdWVyeSl7dmFyIHI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHIuZm4uaW5pdChlLHQpfTtyLmlzV2luZG93PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT1lLndpbmRvd30sci50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9uW2kuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxyLmlzQXJyYXk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuImFycmF5Ij09PXIudHlwZShlKX0sci5pc1BsYWluT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCFlfHwib2JqZWN0IiE9PXIudHlwZShlKXx8ZS5ub2RlVHlwZXx8ci5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIW8uY2FsbChlLCJjb25zdHJ1Y3RvciIpJiYhby5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuITF9Y2F0Y2goYSl7cmV0dXJuITF9Zm9yKHQgaW4gZSk7cmV0dXJuIHZvaWQgMD09PXR8fG8uY2FsbChlLHQpfSxyLmVhY2g9ZnVuY3Rpb24oZSxyLGEpe3ZhciBuLG89MCxpPWUubGVuZ3RoLHM9dChlKTtpZihhKXtpZihzKWZvcig7aT5vJiYobj1yLmFwcGx5KGVbb10sYSksbiE9PSExKTtvKyspO2Vsc2UgZm9yKG8gaW4gZSlpZihuPXIuYXBwbHkoZVtvXSxhKSxuPT09ITEpYnJlYWt9ZWxzZSBpZihzKWZvcig7aT5vJiYobj1yLmNhbGwoZVtvXSxvLGVbb10pLG4hPT0hMSk7bysrKTtlbHNlIGZvcihvIGluIGUpaWYobj1yLmNhbGwoZVtvXSxvLGVbb10pLG49PT0hMSlicmVhaztyZXR1cm4gZX0sci5kYXRhPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT1uKXt2YXIgbz1lW3IuZXhwYW5kb10saT1vJiZhW29dO2lmKHZvaWQgMD09PXQpcmV0dXJuIGk7aWYoaSYmdCBpbiBpKXJldHVybiBpW3RdfWVsc2UgaWYodm9pZCAwIT09dCl7dmFyIG89ZVtyLmV4cGFuZG9dfHwoZVtyLmV4cGFuZG9dPSsrci51dWlkKTtyZXR1cm4gYVtvXT1hW29dfHx7fSxhW29dW3RdPW4sbn19LHIucmVtb3ZlRGF0YT1mdW5jdGlvbihlLHQpe3ZhciBuPWVbci5leHBhbmRvXSxvPW4mJmFbbl07byYmci5lYWNoKHQsZnVuY3Rpb24oZSx0KXtkZWxldGUgb1t0XX0pfSxyLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBlLHQsYSxuLG8saSxzPWFyZ3VtZW50c1swXXx8e30sbD0xLHU9YXJndW1lbnRzLmxlbmd0aCxjPSExO2ZvcigiYm9vbGVhbiI9PXR5cGVvZiBzJiYoYz1zLHM9YXJndW1lbnRzW2xdfHx7fSxsKyspLCJvYmplY3QiIT10eXBlb2YgcyYmImZ1bmN0aW9uIiE9PXIudHlwZShzKSYmKHM9e30pLGw9PT11JiYocz10aGlzLGwtLSk7dT5sO2wrKylpZihudWxsIT0obz1hcmd1bWVudHNbbF0pKWZvcihuIGluIG8pZT1zW25dLGE9b1tuXSxzIT09YSYmKGMmJmEmJihyLmlzUGxhaW5PYmplY3QoYSl8fCh0PXIuaXNBcnJheShhKSkpPyh0Pyh0PSExLGk9ZSYmci5pc0FycmF5KGUpP2U6W10pOmk9ZSYmci5pc1BsYWluT2JqZWN0KGUpP2U6e30sc1tuXT1yLmV4dGVuZChjLGksYSkpOnZvaWQgMCE9PWEmJihzW25dPWEpKTtyZXR1cm4gc30sci5xdWV1ZT1mdW5jdGlvbihlLGEsbil7ZnVuY3Rpb24gbyhlLHIpe3ZhciBhPXJ8fFtdO3JldHVybiBudWxsIT1lJiYodChPYmplY3QoZSkpPyFmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0rdC5sZW5ndGgsYT0wLG49ZS5sZW5ndGg7cj5hOyllW24rK109dFthKytdO2lmKHIhPT1yKWZvcig7dm9pZCAwIT09dFthXTspZVtuKytdPXRbYSsrXTtyZXR1cm4gZS5sZW5ndGg9bixlfShhLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6W10ucHVzaC5jYWxsKGEsZSkpLGF9aWYoZSl7YT0oYXx8ImZ4IikrInF1ZXVlIjt2YXIgaT1yLmRhdGEoZSxhKTtyZXR1cm4gbj8oIWl8fHIuaXNBcnJheShuKT9pPXIuZGF0YShlLGEsbyhuKSk6aS5wdXNoKG4pLGkpOml8fFtdfX0sci5kZXF1ZXVlPWZ1bmN0aW9uKGUsdCl7ci5lYWNoKGUubm9kZVR5cGU/W2VdOmUsZnVuY3Rpb24oZSxhKXt0PXR8fCJmeCI7dmFyIG49ci5xdWV1ZShhLHQpLG89bi5zaGlmdCgpOyJpbnByb2dyZXNzIj09PW8mJihvPW4uc2hpZnQoKSksbyYmKCJmeCI9PT10JiZuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxvLmNhbGwoYSxmdW5jdGlvbigpe3IuZGVxdWV1ZShhLHQpfSkpfSl9LHIuZm49ci5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oZSl7aWYoZS5ub2RlVHlwZSlyZXR1cm4gdGhpc1swXT1lLHRoaXM7dGhyb3cgbmV3IEVycm9yKCJOb3QgYSBET00gbm9kZS4iKX0sb2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTp7dG9wOjAsbGVmdDowfTtyZXR1cm57dG9wOnQudG9wKyhlLnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5zY3JvbGxUb3B8fDApLShkb2N1bWVudC5jbGllbnRUb3B8fDApLGxlZnQ6dC5sZWZ0KyhlLnBhZ2VYT2Zmc2V0fHxkb2N1bWVudC5zY3JvbGxMZWZ0fHwwKS0oZG9jdW1lbnQuY2xpZW50TGVmdHx8MCl9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fGRvY3VtZW50O2UmJiJodG1sIj09PSFlLm5vZGVUeXBlLnRvTG93ZXJDYXNlJiYic3RhdGljIj09PWUuc3R5bGUucG9zaXRpb247KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGRvY3VtZW50fXZhciB0PXRoaXNbMF0sZT1lLmFwcGx5KHQpLGE9dGhpcy5vZmZzZXQoKSxuPS9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGUubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OnIoZSkub2Zmc2V0KCk7cmV0dXJuIGEudG9wLT1wYXJzZUZsb2F0KHQuc3R5bGUubWFyZ2luVG9wKXx8MCxhLmxlZnQtPXBhcnNlRmxvYXQodC5zdHlsZS5tYXJnaW5MZWZ0KXx8MCxlLnN0eWxlJiYobi50b3ArPXBhcnNlRmxvYXQoZS5zdHlsZS5ib3JkZXJUb3BXaWR0aCl8fDAsbi5sZWZ0Kz1wYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKXx8MCkse3RvcDphLnRvcC1uLnRvcCxsZWZ0OmEubGVmdC1uLmxlZnR9fX07dmFyIGE9e307ci5leHBhbmRvPSJ2ZWxvY2l0eSIrKG5ldyBEYXRlKS5nZXRUaW1lKCksci51dWlkPTA7Zm9yKHZhciBuPXt9LG89bi5oYXNPd25Qcm9wZXJ0eSxpPW4udG9TdHJpbmcscz0iQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxsPTA7bDxzLmxlbmd0aDtsKyspblsiW29iamVjdCAiK3NbbF0rIl0iXT1zW2xdLnRvTG93ZXJDYXNlKCk7ci5mbi5pbml0LnByb3RvdHlwZT1yLmZuLGUuVmVsb2NpdHk9e1V0aWxpdGllczpyfX19KHdpbmRvdyksZnVuY3Rpb24oZSl7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOmUoKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0LHIsYSl7ZnVuY3Rpb24gbihlKXtmb3IodmFyIHQ9LTEscj1lP2UubGVuZ3RoOjAsYT1bXTsrK3Q8cjspe3ZhciBuPWVbdF07biYmYS5wdXNoKG4pfXJldHVybiBhfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG0uaXNXcmFwcGVkKGUpP2U9W10uc2xpY2UuY2FsbChlKTptLmlzTm9kZShlKSYmKGU9W2VdKSxlfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9Zi5kYXRhKGUsInZlbG9jaXR5Iik7cmV0dXJuIG51bGw9PT10P2E6dH1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZCh0KmUpKigxL2UpfX1mdW5jdGlvbiBsKGUscixhLG4pe2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gMS0zKnQrMyplfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gMyp0LTYqZX1mdW5jdGlvbiBzKGUpe3JldHVybiAzKmV9ZnVuY3Rpb24gbChlLHQscil7cmV0dXJuKChvKHQscikqZStpKHQscikpKmUrcyh0KSkqZX1mdW5jdGlvbiB1KGUsdCxyKXtyZXR1cm4gMypvKHQscikqZSplKzIqaSh0LHIpKmUrcyh0KX1mdW5jdGlvbiBjKHQscil7Zm9yKHZhciBuPTA7bT5uOysrbil7dmFyIG89dShyLGUsYSk7aWYoMD09PW8pcmV0dXJuIHI7dmFyIGk9bChyLGUsYSktdDtyLT1pL299cmV0dXJuIHJ9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgdD0wO2I+dDsrK3Qpd1t0XT1sKHQqeCxlLGEpfWZ1bmN0aW9uIGYodCxyLG4pe3ZhciBvLGkscz0wO2RvIGk9cisobi1yKS8yLG89bChpLGUsYSktdCxvPjA/bj1pOnI9aTt3aGlsZShNYXRoLmFicyhvKT5oJiYrK3M8dik7cmV0dXJuIGl9ZnVuY3Rpb24gZCh0KXtmb3IodmFyIHI9MCxuPTEsbz1iLTE7biE9byYmd1tuXTw9dDsrK24pcis9eDstLW47dmFyIGk9KHQtd1tuXSkvKHdbbisxXS13W25dKSxzPXIraSp4LGw9dShzLGUsYSk7cmV0dXJuIGw+PXk/Yyh0LHMpOjA9PWw/czpmKHQscixyK3gpfWZ1bmN0aW9uIGcoKXtWPSEwLChlIT1yfHxhIT1uKSYmcCgpfXZhciBtPTQseT0uMDAxLGg9MWUtNyx2PTEwLGI9MTEseD0xLyhiLTEpLFM9IkZsb2F0MzJBcnJheSJpbiB0O2lmKDQhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgUD0wOzQ+UDsrK1ApaWYoIm51bWJlciIhPXR5cGVvZiBhcmd1bWVudHNbUF18fGlzTmFOKGFyZ3VtZW50c1tQXSl8fCFpc0Zpbml0ZShhcmd1bWVudHNbUF0pKXJldHVybiExO2U9TWF0aC5taW4oZSwxKSxhPU1hdGgubWluKGEsMSksZT1NYXRoLm1heChlLDApLGE9TWF0aC5tYXgoYSwwKTt2YXIgdz1TP25ldyBGbG9hdDMyQXJyYXkoYik6bmV3IEFycmF5KGIpLFY9ITEsQz1mdW5jdGlvbih0KXtyZXR1cm4gVnx8ZygpLGU9PT1yJiZhPT09bj90OjA9PT10PzA6MT09PXQ/MTpsKGQodCkscixuKX07Qy5nZXRDb250cm9sUG9pbnRzPWZ1bmN0aW9uKCl7cmV0dXJuW3t4OmUseTpyfSx7eDphLHk6bn1dfTt2YXIgVD0iZ2VuZXJhdGVCZXppZXIoIitbZSxyLGEsbl0rIikiO3JldHVybiBDLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIFR9LEN9ZnVuY3Rpb24gdShlLHQpe3ZhciByPWU7cmV0dXJuIG0uaXNTdHJpbmcoZSk/Yi5FYXNpbmdzW2VdfHwocj0hMSk6cj1tLmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aD9zLmFwcGx5KG51bGwsZSk6bS5pc0FycmF5KGUpJiYyPT09ZS5sZW5ndGg/eC5hcHBseShudWxsLGUuY29uY2F0KFt0XSkpOm0uaXNBcnJheShlKSYmND09PWUubGVuZ3RoP2wuYXBwbHkobnVsbCxlKTohMSxyPT09ITEmJihyPWIuRWFzaW5nc1tiLmRlZmF1bHRzLmVhc2luZ10/Yi5kZWZhdWx0cy5lYXNpbmc6dikscn1mdW5jdGlvbiBjKGUpe2lmKGUpe3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLHI9Yi5TdGF0ZS5jYWxscy5sZW5ndGg7cj4xZTQmJihiLlN0YXRlLmNhbGxzPW4oYi5TdGF0ZS5jYWxscykpO2Zvcih2YXIgbz0wO3I+bztvKyspaWYoYi5TdGF0ZS5jYWxsc1tvXSl7dmFyIHM9Yi5TdGF0ZS5jYWxsc1tvXSxsPXNbMF0sdT1zWzJdLGQ9c1szXSxnPSEhZCx5PW51bGw7ZHx8KGQ9Yi5TdGF0ZS5jYWxsc1tvXVszXT10LTE2KTtmb3IodmFyIGg9TWF0aC5taW4oKHQtZCkvdS5kdXJhdGlvbiwxKSx2PTAseD1sLmxlbmd0aDt4PnY7disrKXt2YXIgUD1sW3ZdLFY9UC5lbGVtZW50O2lmKGkoVikpe3ZhciBDPSExO2lmKHUuZGlzcGxheSE9PWEmJm51bGwhPT11LmRpc3BsYXkmJiJub25lIiE9PXUuZGlzcGxheSl7aWYoImZsZXgiPT09dS5kaXNwbGF5KXt2YXIgVD1bIi13ZWJraXQtYm94IiwiLW1vei1ib3giLCItbXMtZmxleGJveCIsIi13ZWJraXQtZmxleCJdO2YuZWFjaChULGZ1bmN0aW9uKGUsdCl7Uy5zZXRQcm9wZXJ0eVZhbHVlKFYsImRpc3BsYXkiLHQpfSl9Uy5zZXRQcm9wZXJ0eVZhbHVlKFYsImRpc3BsYXkiLHUuZGlzcGxheSl9dS52aXNpYmlsaXR5IT09YSYmImhpZGRlbiIhPT11LnZpc2liaWxpdHkmJlMuc2V0UHJvcGVydHlWYWx1ZShWLCJ2aXNpYmlsaXR5Iix1LnZpc2liaWxpdHkpO2Zvcih2YXIgayBpbiBQKWlmKCJlbGVtZW50IiE9PWspe3ZhciBBLEY9UFtrXSxqPW0uaXNTdHJpbmcoRi5lYXNpbmcpP2IuRWFzaW5nc1tGLmVhc2luZ106Ri5lYXNpbmc7aWYoMT09PWgpQT1GLmVuZFZhbHVlO2Vsc2V7dmFyIEU9Ri5lbmRWYWx1ZS1GLnN0YXJ0VmFsdWU7aWYoQT1GLnN0YXJ0VmFsdWUrRSpqKGgsdSxFKSwhZyYmQT09PUYuY3VycmVudFZhbHVlKWNvbnRpbnVlfWlmKEYuY3VycmVudFZhbHVlPUEsInR3ZWVuIj09PWspeT1BO2Vsc2V7aWYoUy5Ib29rcy5yZWdpc3RlcmVkW2tdKXt2YXIgSD1TLkhvb2tzLmdldFJvb3QoayksTj1pKFYpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbSF07TiYmKEYucm9vdFByb3BlcnR5VmFsdWU9Til9dmFyIEw9Uy5zZXRQcm9wZXJ0eVZhbHVlKFYsayxGLmN1cnJlbnRWYWx1ZSsoMD09PXBhcnNlRmxvYXQoQSk/IiI6Ri51bml0VHlwZSksRi5yb290UHJvcGVydHlWYWx1ZSxGLnNjcm9sbERhdGEpO1MuSG9va3MucmVnaXN0ZXJlZFtrXSYmKGkoVikucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtIXT1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbSF0/Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0hdKCJleHRyYWN0IixudWxsLExbMV0pOkxbMV0pLCJ0cmFuc2Zvcm0iPT09TFswXSYmKEM9ITApfX11Lm1vYmlsZUhBJiZpKFYpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkPT09YSYmKGkoVikudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q9IigwcHgsIDBweCwgMHB4KSIsQz0hMCksQyYmUy5mbHVzaFRyYW5zZm9ybUNhY2hlKFYpfX11LmRpc3BsYXkhPT1hJiYibm9uZSIhPT11LmRpc3BsYXkmJihiLlN0YXRlLmNhbGxzW29dWzJdLmRpc3BsYXk9ITEpLHUudmlzaWJpbGl0eSE9PWEmJiJoaWRkZW4iIT09dS52aXNpYmlsaXR5JiYoYi5TdGF0ZS5jYWxsc1tvXVsyXS52aXNpYmlsaXR5PSExKSx1LnByb2dyZXNzJiZ1LnByb2dyZXNzLmNhbGwoc1sxXSxzWzFdLGgsTWF0aC5tYXgoMCxkK3UuZHVyYXRpb24tdCksZCx5KSwxPT09aCYmcChvKX19Yi5TdGF0ZS5pc1RpY2tpbmcmJncoYyl9ZnVuY3Rpb24gcChlLHQpe2lmKCFiLlN0YXRlLmNhbGxzW2VdKXJldHVybiExO2Zvcih2YXIgcj1iLlN0YXRlLmNhbGxzW2VdWzBdLG49Yi5TdGF0ZS5jYWxsc1tlXVsxXSxvPWIuU3RhdGUuY2FsbHNbZV1bMl0scz1iLlN0YXRlLmNhbGxzW2VdWzRdLGw9ITEsdT0wLGM9ci5sZW5ndGg7Yz51O3UrKyl7dmFyIHA9clt1XS5lbGVtZW50O2lmKHR8fG8ubG9vcHx8KCJub25lIj09PW8uZGlzcGxheSYmUy5zZXRQcm9wZXJ0eVZhbHVlKHAsImRpc3BsYXkiLG8uZGlzcGxheSksImhpZGRlbiI9PT1vLnZpc2liaWxpdHkmJlMuc2V0UHJvcGVydHlWYWx1ZShwLCJ2aXNpYmlsaXR5IixvLnZpc2liaWxpdHkpKSxvLmxvb3AhPT0hMCYmKGYucXVldWUocClbMV09PT1hfHwhL1wudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZy9pLnRlc3QoZi5xdWV1ZShwKVsxXSkpJiZpKHApKXtpKHApLmlzQW5pbWF0aW5nPSExLGkocCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZT17fTt2YXIgZD0hMTtmLmVhY2goUy5MaXN0cy50cmFuc2Zvcm1zM0QsZnVuY3Rpb24oZSx0KXt2YXIgcj0vXnNjYWxlLy50ZXN0KHQpPzE6MCxuPWkocCkudHJhbnNmb3JtQ2FjaGVbdF07aShwKS50cmFuc2Zvcm1DYWNoZVt0XSE9PWEmJm5ldyBSZWdFeHAoIl5cXCgiK3IrIlteLl0iKS50ZXN0KG4pJiYoZD0hMCxkZWxldGUgaShwKS50cmFuc2Zvcm1DYWNoZVt0XSl9KSxvLm1vYmlsZUhBJiYoZD0hMCxkZWxldGUgaShwKS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCksZCYmUy5mbHVzaFRyYW5zZm9ybUNhY2hlKHApLFMuVmFsdWVzLnJlbW92ZUNsYXNzKHAsInZlbG9jaXR5LWFuaW1hdGluZyIpfWlmKCF0JiZvLmNvbXBsZXRlJiYhby5sb29wJiZ1PT09Yy0xKXRyeXtvLmNvbXBsZXRlLmNhbGwobixuKX1jYXRjaChnKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZ30sMSl9cyYmby5sb29wIT09ITAmJnMobiksaShwKSYmby5sb29wPT09ITAmJiF0JiYoZi5lYWNoKGkocCkudHdlZW5zQ29udGFpbmVyLGZ1bmN0aW9uKGUsdCl7L15yb3RhdGUvLnRlc3QoZSkmJjM2MD09PXBhcnNlRmxvYXQodC5lbmRWYWx1ZSkmJih0LmVuZFZhbHVlPTAsdC5zdGFydFZhbHVlPTM2MCksL15iYWNrZ3JvdW5kUG9zaXRpb24vLnRlc3QoZSkmJjEwMD09PXBhcnNlRmxvYXQodC5lbmRWYWx1ZSkmJiIlIj09PXQudW5pdFR5cGUmJih0LmVuZFZhbHVlPTAsdC5zdGFydFZhbHVlPTEwMCl9KSxiKHAsInJldmVyc2UiLHtsb29wOiEwLGRlbGF5Om8uZGVsYXl9KSksby5xdWV1ZSE9PSExJiZmLmRlcXVldWUocCxvLnF1ZXVlKX1iLlN0YXRlLmNhbGxzW2VdPSExO2Zvcih2YXIgbT0wLHk9Yi5TdGF0ZS5jYWxscy5sZW5ndGg7eT5tO20rKylpZihiLlN0YXRlLmNhbGxzW21dIT09ITEpe2w9ITA7YnJlYWt9bD09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITEsZGVsZXRlIGIuU3RhdGUuY2FsbHMsYi5TdGF0ZS5jYWxscz1bXSl9dmFyIGYsZD1mdW5jdGlvbigpe2lmKHIuZG9jdW1lbnRNb2RlKXJldHVybiByLmRvY3VtZW50TW9kZTtmb3IodmFyIGU9NztlPjQ7ZS0tKXt2YXIgdD1yLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKHQuaW5uZXJIVE1MPSI8IS0tW2lmIElFICIrZSsiXT48c3Bhbj48L3NwYW4+PCFbZW5kaWZdLS0+Iix0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIikubGVuZ3RoKXJldHVybiB0PW51bGwsZX1yZXR1cm4gYX0oKSxnPWZ1bmN0aW9uKCl7dmFyIGU9MDtyZXR1cm4gdC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbih0KXt2YXIgcixhPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiByPU1hdGgubWF4KDAsMTYtKGEtZSkpLGU9YStyLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KGErcil9LHIpfX0oKSxtPXtpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxpc05vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUubm9kZVR5cGV9LGlzTm9kZUxpc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiYvXlxbb2JqZWN0IChIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdHxPYmplY3QpXF0kLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkmJmUubGVuZ3RoIT09YSYmKDA9PT1lLmxlbmd0aHx8Im9iamVjdCI9PXR5cGVvZiBlWzBdJiZlWzBdLm5vZGVUeXBlPjApfSxpc1dyYXBwZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihlLmpxdWVyeXx8dC5aZXB0byYmdC5aZXB0by56ZXB0by5pc1ooZSkpfSxpc1NWRzpmdW5jdGlvbihlKXtyZXR1cm4gdC5TVkdFbGVtZW50JiZlIGluc3RhbmNlb2YgdC5TVkdFbGVtZW50fSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXJldHVybiExO3JldHVybiEwfX0seT0hMTtpZihlLmZuJiZlLmZuLmpxdWVyeT8oZj1lLHk9ITApOmY9dC5WZWxvY2l0eS5VdGlsaXRpZXMsOD49ZCYmIXkpdGhyb3cgbmV3IEVycm9yKCJWZWxvY2l0eTogSUU4IGFuZCBiZWxvdyByZXF1aXJlIGpRdWVyeSB0byBiZSBsb2FkZWQgYmVmb3JlIFZlbG9jaXR5LiIpO2lmKDc+PWQpcmV0dXJuIHZvaWQoalF1ZXJ5LmZuLnZlbG9jaXR5PWpRdWVyeS5mbi5hbmltYXRlKTt2YXIgaD00MDAsdj0ic3dpbmciLGI9e1N0YXRlOntpc01vYmlsZTovQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNBbmRyb2lkOi9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0dpbmdlcmJyZWFkOi9BbmRyb2lkIDJcLjNcLlszLTddL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0Nocm9tZTp0LmNocm9tZSxpc0ZpcmVmb3g6L0ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHByZWZpeEVsZW1lbnQ6ci5jcmVhdGVFbGVtZW50KCJkaXYiKSxwcmVmaXhNYXRjaGVzOnt9LHNjcm9sbEFuY2hvcjpudWxsLHNjcm9sbFByb3BlcnR5TGVmdDpudWxsLHNjcm9sbFByb3BlcnR5VG9wOm51bGwsaXNUaWNraW5nOiExLGNhbGxzOltdfSxDU1M6e30sVXRpbGl0aWVzOmYsUmVkaXJlY3RzOnt9LEVhc2luZ3M6e30sUHJvbWlzZTp0LlByb21pc2UsZGVmYXVsdHM6e3F1ZXVlOiIiLGR1cmF0aW9uOmgsZWFzaW5nOnYsYmVnaW46YSxjb21wbGV0ZTphLHByb2dyZXNzOmEsZGlzcGxheTphLHZpc2liaWxpdHk6YSxsb29wOiExLGRlbGF5OiExLG1vYmlsZUhBOiEwLF9jYWNoZVZhbHVlczohMH0saW5pdDpmdW5jdGlvbihlKXtmLmRhdGEoZSwidmVsb2NpdHkiLHtpc1NWRzptLmlzU1ZHKGUpLGlzQW5pbWF0aW5nOiExLGNvbXB1dGVkU3R5bGU6bnVsbCx0d2VlbnNDb250YWluZXI6bnVsbCxyb290UHJvcGVydHlWYWx1ZUNhY2hlOnt9LHRyYW5zZm9ybUNhY2hlOnt9fSl9LGhvb2s6bnVsbCxtb2NrOiExLHZlcnNpb246e21ham9yOjEsbWlub3I6MixwYXRjaDoyfSxkZWJ1ZzohMX07dC5wYWdlWU9mZnNldCE9PWE/KGIuU3RhdGUuc2Nyb2xsQW5jaG9yPXQsYi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQ9InBhZ2VYT2Zmc2V0IixiLlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wPSJwYWdlWU9mZnNldCIpOihiLlN0YXRlLnNjcm9sbEFuY2hvcj1yLmRvY3VtZW50RWxlbWVudHx8ci5ib2R5LnBhcmVudE5vZGV8fHIuYm9keSxiLlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdD0ic2Nyb2xsTGVmdCIsYi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcD0ic2Nyb2xsVG9wIik7dmFyIHg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybi1lLnRlbnNpb24qZS54LWUuZnJpY3Rpb24qZS52fWZ1bmN0aW9uIHQodCxyLGEpe3ZhciBuPXt4OnQueCthLmR4KnIsdjp0LnYrYS5kdipyLHRlbnNpb246dC50ZW5zaW9uLGZyaWN0aW9uOnQuZnJpY3Rpb259O3JldHVybntkeDpuLnYsZHY6ZShuKX19ZnVuY3Rpb24gcihyLGEpe3ZhciBuPXtkeDpyLnYsZHY6ZShyKX0sbz10KHIsLjUqYSxuKSxpPXQociwuNSphLG8pLHM9dChyLGEsaSksbD0xLzYqKG4uZHgrMiooby5keCtpLmR4KStzLmR4KSx1PTEvNioobi5kdisyKihvLmR2K2kuZHYpK3MuZHYpO3JldHVybiByLng9ci54K2wqYSxyLnY9ci52K3UqYSxyfXJldHVybiBmdW5jdGlvbiBhKGUsdCxuKXt2YXIgbyxpLHMsbD17eDotMSx2OjAsdGVuc2lvbjpudWxsLGZyaWN0aW9uOm51bGx9LHU9WzBdLGM9MCxwPTFlLTQsZj0uMDE2O2ZvcihlPXBhcnNlRmxvYXQoZSl8fDUwMCx0PXBhcnNlRmxvYXQodCl8fDIwLG49bnx8bnVsbCxsLnRlbnNpb249ZSxsLmZyaWN0aW9uPXQsbz1udWxsIT09bixvPyhjPWEoZSx0KSxpPWMvbipmKTppPWY7cz1yKHN8fGwsaSksdS5wdXNoKDErcy54KSxjKz0xNixNYXRoLmFicyhzLngpPnAmJk1hdGguYWJzKHMudik+cDspO3JldHVybiBvP2Z1bmN0aW9uKGUpe3JldHVybiB1W2UqKHUubGVuZ3RoLTEpfDBdfTpjfX0oKTtiLkVhc2luZ3M9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxzcHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIDEtTWF0aC5jb3MoNC41KmUqTWF0aC5QSSkqTWF0aC5leHAoNiotZSl9fSxmLmVhY2goW1siZWFzZSIsWy4yNSwuMSwuMjUsMV1dLFsiZWFzZS1pbiIsWy40MiwwLDEsMV1dLFsiZWFzZS1vdXQiLFswLDAsLjU4LDFdXSxbImVhc2UtaW4tb3V0IixbLjQyLDAsLjU4LDFdXSxbImVhc2VJblNpbmUiLFsuNDcsMCwuNzQ1LC43MTVdXSxbImVhc2VPdXRTaW5lIixbLjM5LC41NzUsLjU2NSwxXV0sWyJlYXNlSW5PdXRTaW5lIixbLjQ0NSwuMDUsLjU1LC45NV1dLFsiZWFzZUluUXVhZCIsWy41NSwuMDg1LC42OCwuNTNdXSxbImVhc2VPdXRRdWFkIixbLjI1LC40NiwuNDUsLjk0XV0sWyJlYXNlSW5PdXRRdWFkIixbLjQ1NSwuMDMsLjUxNSwuOTU1XV0sWyJlYXNlSW5DdWJpYyIsWy41NSwuMDU1LC42NzUsLjE5XV0sWyJlYXNlT3V0Q3ViaWMiLFsuMjE1LC42MSwuMzU1LDFdXSxbImVhc2VJbk91dEN1YmljIixbLjY0NSwuMDQ1LC4zNTUsMV1dLFsiZWFzZUluUXVhcnQiLFsuODk1LC4wMywuNjg1LC4yMl1dLFsiZWFzZU91dFF1YXJ0IixbLjE2NSwuODQsLjQ0LDFdXSxbImVhc2VJbk91dFF1YXJ0IixbLjc3LDAsLjE3NSwxXV0sWyJlYXNlSW5RdWludCIsWy43NTUsLjA1LC44NTUsLjA2XV0sWyJlYXNlT3V0UXVpbnQiLFsuMjMsMSwuMzIsMV1dLFsiZWFzZUluT3V0UXVpbnQiLFsuODYsMCwuMDcsMV1dLFsiZWFzZUluRXhwbyIsWy45NSwuMDUsLjc5NSwuMDM1XV0sWyJlYXNlT3V0RXhwbyIsWy4xOSwxLC4yMiwxXV0sWyJlYXNlSW5PdXRFeHBvIixbMSwwLDAsMV1dLFsiZWFzZUluQ2lyYyIsWy42LC4wNCwuOTgsLjMzNV1dLFsiZWFzZU91dENpcmMiLFsuMDc1LC44MiwuMTY1LDFdXSxbImVhc2VJbk91dENpcmMiLFsuNzg1LC4xMzUsLjE1LC44Nl1dXSxmdW5jdGlvbihlLHQpe2IuRWFzaW5nc1t0WzBdXT1sLmFwcGx5KG51bGwsdFsxXSl9KTt2YXIgUz1iLkNTUz17UmVnRXg6e2lzSGV4Oi9eIyhbQS1mXGRdezN9KXsxLDJ9JC9pLHZhbHVlVW53cmFwOi9eW0Etel0rXCgoLiopXCkkL2ksd3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZDovWzAtOS5dKyBbMC05Ll0rIFswLTkuXSsoIFswLTkuXSspPy8sdmFsdWVTcGxpdDovKFtBLXpdK1woLitcKSl8KChbQS16MC05Iy0uXSs/KSg/PVxzfCQpKS9naX0sTGlzdHM6e2NvbG9yczpbImZpbGwiLCJzdHJva2UiLCJzdG9wQ29sb3IiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsImJvcmRlckNvbG9yIiwiYm9yZGVyVG9wQ29sb3IiLCJib3JkZXJSaWdodENvbG9yIiwiYm9yZGVyQm90dG9tQ29sb3IiLCJib3JkZXJMZWZ0Q29sb3IiLCJvdXRsaW5lQ29sb3IiXSx0cmFuc2Zvcm1zQmFzZTpbInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGVZIiwic2NhbGUiLCJzY2FsZVgiLCJzY2FsZVkiLCJza2V3WCIsInNrZXdZIiwicm90YXRlWiJdLHRyYW5zZm9ybXMzRDpbInRyYW5zZm9ybVBlcnNwZWN0aXZlIiwidHJhbnNsYXRlWiIsInNjYWxlWiIsInJvdGF0ZVgiLCJyb3RhdGVZIl19LEhvb2tzOnt0ZW1wbGF0ZXM6e3RleHRTaGFkb3c6WyJDb2xvciBYIFkgQmx1ciIsImJsYWNrIDBweCAwcHggMHB4Il0sYm94U2hhZG93OlsiQ29sb3IgWCBZIEJsdXIgU3ByZWFkIiwiYmxhY2sgMHB4IDBweCAwcHggMHB4Il0sY2xpcDpbIlRvcCBSaWdodCBCb3R0b20gTGVmdCIsIjBweCAwcHggMHB4IDBweCJdLGJhY2tncm91bmRQb3NpdGlvbjpbIlggWSIsIjAlIDAlIl0sdHJhbnNmb3JtT3JpZ2luOlsiWCBZIFoiLCI1MCUgNTAlIDBweCJdLHBlcnNwZWN0aXZlT3JpZ2luOlsiWCBZIiwiNTAlIDUwJSJdfSxyZWdpc3RlcmVkOnt9LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxTLkxpc3RzLmNvbG9ycy5sZW5ndGg7ZSsrKXt2YXIgdD0iY29sb3IiPT09Uy5MaXN0cy5jb2xvcnNbZV0/IjAgMCAwIDEiOiIyNTUgMjU1IDI1NSAxIjtTLkhvb2tzLnRlbXBsYXRlc1tTLkxpc3RzLmNvbG9yc1tlXV09WyJSZWQgR3JlZW4gQmx1ZSBBbHBoYSIsdF19dmFyIHIsYSxuO2lmKGQpZm9yKHIgaW4gUy5Ib29rcy50ZW1wbGF0ZXMpe2E9Uy5Ib29rcy50ZW1wbGF0ZXNbcl0sbj1hWzBdLnNwbGl0KCIgIik7dmFyIG89YVsxXS5tYXRjaChTLlJlZ0V4LnZhbHVlU3BsaXQpOyJDb2xvciI9PT1uWzBdJiYobi5wdXNoKG4uc2hpZnQoKSksby5wdXNoKG8uc2hpZnQoKSksUy5Ib29rcy50ZW1wbGF0ZXNbcl09W24uam9pbigiICIpLG8uam9pbigiICIpXSl9Zm9yKHIgaW4gUy5Ib29rcy50ZW1wbGF0ZXMpe2E9Uy5Ib29rcy50ZW1wbGF0ZXNbcl0sbj1hWzBdLnNwbGl0KCIgIik7Zm9yKHZhciBlIGluIG4pe3ZhciBpPXIrbltlXSxzPWU7Uy5Ib29rcy5yZWdpc3RlcmVkW2ldPVtyLHNdfX19LGdldFJvb3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5Ib29rcy5yZWdpc3RlcmVkW2VdO3JldHVybiB0P3RbMF06ZX0sY2xlYW5Sb290UHJvcGVydHlWYWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBTLlJlZ0V4LnZhbHVlVW53cmFwLnRlc3QodCkmJih0PXQubWF0Y2goUy5SZWdFeC52YWx1ZVVud3JhcClbMV0pLFMuVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKHQpJiYodD1TLkhvb2tzLnRlbXBsYXRlc1tlXVsxXSksdH0sZXh0cmFjdFZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9Uy5Ib29rcy5yZWdpc3RlcmVkW2VdO2lmKHIpe3ZhciBhPXJbMF0sbj1yWzFdO3JldHVybiB0PVMuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShhLHQpLHQudG9TdHJpbmcoKS5tYXRjaChTLlJlZ0V4LnZhbHVlU3BsaXQpW25dfXJldHVybiB0fSxpbmplY3RWYWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGE9Uy5Ib29rcy5yZWdpc3RlcmVkW2VdO2lmKGEpe3ZhciBuLG8saT1hWzBdLHM9YVsxXTtyZXR1cm4gcj1TLkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUoaSxyKSxuPXIudG9TdHJpbmcoKS5tYXRjaChTLlJlZ0V4LnZhbHVlU3BsaXQpLG5bc109dCxvPW4uam9pbigiICIpfXJldHVybiByfX0sTm9ybWFsaXphdGlvbnM6e3JlZ2lzdGVyZWQ6e2NsaXA6ZnVuY3Rpb24oZSx0LHIpe3N3aXRjaChlKXtjYXNlIm5hbWUiOnJldHVybiJjbGlwIjtjYXNlImV4dHJhY3QiOnZhciBhO3JldHVybiBTLlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChyKT9hPXI6KGE9ci50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVVbndyYXApLGE9YT9hWzFdLnJlcGxhY2UoLywoXHMrKT8vZywiICIpOnIpLGE7Y2FzZSJpbmplY3QiOnJldHVybiJyZWN0KCIrcisiKSJ9fSxibHVyOmZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZSJuYW1lIjpyZXR1cm4gYi5TdGF0ZS5pc0ZpcmVmb3g/ImZpbHRlciI6Ii13ZWJraXQtZmlsdGVyIjtjYXNlImV4dHJhY3QiOnZhciBhPXBhcnNlRmxvYXQocik7aWYoIWEmJjAhPT1hKXt2YXIgbj1yLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcKChbMC05XStbQS16XSspXCkvaSk7YT1uP25bMV06MH1yZXR1cm4gYTtjYXNlImluamVjdCI6cmV0dXJuIHBhcnNlRmxvYXQocik/ImJsdXIoIityKyIpIjoibm9uZSJ9fSxvcGFjaXR5OmZ1bmN0aW9uKGUsdCxyKXtpZig4Pj1kKXN3aXRjaChlKXtjYXNlIm5hbWUiOnJldHVybiJmaWx0ZXIiO2Nhc2UiZXh0cmFjdCI6dmFyIGE9ci50b1N0cmluZygpLm1hdGNoKC9hbHBoYVwob3BhY2l0eT0oLiopXCkvaSk7cmV0dXJuIHI9YT9hWzFdLzEwMDoxO2Nhc2UiaW5qZWN0IjpyZXR1cm4gdC5zdHlsZS56b29tPTEscGFyc2VGbG9hdChyKT49MT8iIjoiYWxwaGEob3BhY2l0eT0iK3BhcnNlSW50KDEwMCpwYXJzZUZsb2F0KHIpLDEwKSsiKSJ9ZWxzZSBzd2l0Y2goZSl7Y2FzZSJuYW1lIjpyZXR1cm4ib3BhY2l0eSI7Y2FzZSJleHRyYWN0IjpyZXR1cm4gcjtjYXNlImluamVjdCI6cmV0dXJuIHJ9fX0scmVnaXN0ZXI6ZnVuY3Rpb24oKXs5Pj1kfHxiLlN0YXRlLmlzR2luZ2VyYnJlYWR8fChTLkxpc3RzLnRyYW5zZm9ybXNCYXNlPVMuTGlzdHMudHJhbnNmb3Jtc0Jhc2UuY29uY2F0KFMuTGlzdHMudHJhbnNmb3JtczNEKSk7Zm9yKHZhciBlPTA7ZTxTLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmxlbmd0aDtlKyspIWZ1bmN0aW9uKCl7dmFyIHQ9Uy5MaXN0cy50cmFuc2Zvcm1zQmFzZVtlXTtTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbdF09ZnVuY3Rpb24oZSxyLG4pe3N3aXRjaChlKXtjYXNlIm5hbWUiOnJldHVybiJ0cmFuc2Zvcm0iO2Nhc2UiZXh0cmFjdCI6cmV0dXJuIGkocik9PT1hfHxpKHIpLnRyYW5zZm9ybUNhY2hlW3RdPT09YT8vXnNjYWxlL2kudGVzdCh0KT8xOjA6aShyKS50cmFuc2Zvcm1DYWNoZVt0XS5yZXBsYWNlKC9bKCldL2csIiIpO2Nhc2UiaW5qZWN0Ijp2YXIgbz0hMTtzd2l0Y2godC5zdWJzdHIoMCx0Lmxlbmd0aC0xKSl7Y2FzZSJ0cmFuc2xhdGUiOm89IS8oJXxweHxlbXxyZW18dnd8dmh8XGQpJC9pLnRlc3Qobik7YnJlYWs7Y2FzZSJzY2FsIjpjYXNlInNjYWxlIjpiLlN0YXRlLmlzQW5kcm9pZCYmaShyKS50cmFuc2Zvcm1DYWNoZVt0XT09PWEmJjE+biYmKG49MSksbz0hLyhcZCkkL2kudGVzdChuKTticmVhaztjYXNlInNrZXciOm89IS8oZGVnfFxkKSQvaS50ZXN0KG4pO2JyZWFrO2Nhc2Uicm90YXRlIjpvPSEvKGRlZ3xcZCkkL2kudGVzdChuKX1yZXR1cm4gb3x8KGkocikudHJhbnNmb3JtQ2FjaGVbdF09IigiK24rIikiKSxpKHIpLnRyYW5zZm9ybUNhY2hlW3RdfX19KCk7Zm9yKHZhciBlPTA7ZTxTLkxpc3RzLmNvbG9ycy5sZW5ndGg7ZSsrKSFmdW5jdGlvbigpe3ZhciB0PVMuTGlzdHMuY29sb3JzW2VdO1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFt0XT1mdW5jdGlvbihlLHIsbil7c3dpdGNoKGUpe2Nhc2UibmFtZSI6cmV0dXJuIHQ7Y2FzZSJleHRyYWN0Ijp2YXIgbztpZihTLlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChuKSlvPW47ZWxzZXt2YXIgaSxzPXtibGFjazoicmdiKDAsIDAsIDApIixibHVlOiJyZ2IoMCwgMCwgMjU1KSIsZ3JheToicmdiKDEyOCwgMTI4LCAxMjgpIixncmVlbjoicmdiKDAsIDEyOCwgMCkiLHJlZDoicmdiKDI1NSwgMCwgMCkiLHdoaXRlOiJyZ2IoMjU1LCAyNTUsIDI1NSkifTsvXltBLXpdKyQvaS50ZXN0KG4pP2k9c1tuXSE9PWE/c1tuXTpzLmJsYWNrOlMuUmVnRXguaXNIZXgudGVzdChuKT9pPSJyZ2IoIitTLlZhbHVlcy5oZXhUb1JnYihuKS5qb2luKCIgIikrIikiOi9ecmdiYT9cKC9pLnRlc3Qobil8fChpPXMuYmxhY2spLG89KGl8fG4pLnRvU3RyaW5nKCkubWF0Y2goUy5SZWdFeC52YWx1ZVVud3JhcClbMV0ucmVwbGFjZSgvLChccyspPy9nLCIgIil9cmV0dXJuIDg+PWR8fDMhPT1vLnNwbGl0KCIgIikubGVuZ3RofHwobys9IiAxIiksbztjYXNlImluamVjdCI6cmV0dXJuIDg+PWQ/ND09PW4uc3BsaXQoIiAiKS5sZW5ndGgmJihuPW4uc3BsaXQoL1xzKy8pLnNsaWNlKDAsMykuam9pbigiICIpKTozPT09bi5zcGxpdCgiICIpLmxlbmd0aCYmKG4rPSIgMSIpLCg4Pj1kPyJyZ2IiOiJyZ2JhIikrIigiK24ucmVwbGFjZSgvXHMrL2csIiwiKS5yZXBsYWNlKC9cLihcZCkrKD89LCkvZywiIikrIikifX19KCl9fSxOYW1lczp7Y2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLy0oXHcpL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSl9LFNWR0F0dHJpYnV0ZTpmdW5jdGlvbihlKXt2YXIgdD0id2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyIjtyZXR1cm4oZHx8Yi5TdGF0ZS5pc0FuZHJvaWQmJiFiLlN0YXRlLmlzQ2hyb21lKSYmKHQrPSJ8dHJhbnNmb3JtIiksbmV3IFJlZ0V4cCgiXigiK3QrIikkIiwiaSIpLnRlc3QoZSl9LHByZWZpeENoZWNrOmZ1bmN0aW9uKGUpe2lmKGIuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSlyZXR1cm5bYi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdLCEwXTtmb3IodmFyIHQ9WyIiLCJXZWJraXQiLCJNb3oiLCJtcyIsIk8iXSxyPTAsYT10Lmxlbmd0aDthPnI7cisrKXt2YXIgbjtpZihuPTA9PT1yP2U6dFtyXStlLnJlcGxhY2UoL15cdy8sZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0pLG0uaXNTdHJpbmcoYi5TdGF0ZS5wcmVmaXhFbGVtZW50LnN0eWxlW25dKSlyZXR1cm4gYi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdPW4sW24sITBdfXJldHVybltlLCExXX19LFZhbHVlczp7aGV4VG9SZ2I6ZnVuY3Rpb24oZSl7dmFyIHQscj0vXiM/KFthLWZcZF0pKFthLWZcZF0pKFthLWZcZF0pJC9pLGE9L14jPyhbYS1mXGRdezJ9KShbYS1mXGRdezJ9KShbYS1mXGRdezJ9KSQvaTtyZXR1cm4gZT1lLnJlcGxhY2UocixmdW5jdGlvbihlLHQscixhKXtyZXR1cm4gdCt0K3IrcithK2F9KSx0PWEuZXhlYyhlKSx0P1twYXJzZUludCh0WzFdLDE2KSxwYXJzZUludCh0WzJdLDE2KSxwYXJzZUludCh0WzNdLDE2KV06WzAsMCwwXX0saXNDU1NOdWxsVmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PWV8fC9eKG5vbmV8YXV0b3x0cmFuc3BhcmVudHwocmdiYVwoMCwgPzAsID8wLCA/MFwpKSkkL2kudGVzdChlKX0sZ2V0VW5pdFR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuL14ocm90YXRlfHNrZXcpL2kudGVzdChlKT8iZGVnIjovKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGUpPyIiOiJweCJ9LGdldERpc3BsYXlUeXBlOmZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUudGFnTmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7cmV0dXJuL14oYnxiaWd8aXxzbWFsbHx0dHxhYmJyfGFjcm9ueW18Y2l0ZXxjb2RlfGRmbnxlbXxrYmR8c3Ryb25nfHNhbXB8dmFyfGF8YmRvfGJyfGltZ3xtYXB8b2JqZWN0fHF8c2NyaXB0fHNwYW58c3VifHN1cHxidXR0b258aW5wdXR8bGFiZWx8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KHQpPyJpbmxpbmUiOi9eKGxpKSQvaS50ZXN0KHQpPyJsaXN0LWl0ZW0iOi9eKHRyKSQvaS50ZXN0KHQpPyJ0YWJsZS1yb3ciOi9eKHRhYmxlKSQvaS50ZXN0KHQpPyJ0YWJsZSI6L14odGJvZHkpJC9pLnRlc3QodCk/InRhYmxlLXJvdy1ncm91cCI6ImJsb2NrIn0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSx0KXtlLmNsYXNzTGlzdD9lLmNsYXNzTGlzdC5hZGQodCk6ZS5jbGFzc05hbWUrPShlLmNsYXNzTmFtZS5sZW5ndGg/IiAiOiIiKSt0fSxyZW1vdmVDbGFzczpmdW5jdGlvbihlLHQpe2UuY2xhc3NMaXN0P2UuY2xhc3NMaXN0LnJlbW92ZSh0KTplLmNsYXNzTmFtZT1lLmNsYXNzTmFtZS50b1N0cmluZygpLnJlcGxhY2UobmV3IFJlZ0V4cCgiKF58XFxzKSIrdC5zcGxpdCgiICIpLmpvaW4oInwiKSsiKFxcc3wkKSIsImdpIiksIiAiKX19LGdldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxyLG4sbyl7ZnVuY3Rpb24gcyhlLHIpe2Z1bmN0aW9uIG4oKXt1JiZTLnNldFByb3BlcnR5VmFsdWUoZSwiZGlzcGxheSIsIm5vbmUiKX12YXIgbD0wO2lmKDg+PWQpbD1mLmNzcyhlLHIpO2Vsc2V7dmFyIHU9ITE7aWYoL14od2lkdGh8aGVpZ2h0KSQvLnRlc3QocikmJjA9PT1TLmdldFByb3BlcnR5VmFsdWUoZSwiZGlzcGxheSIpJiYodT0hMCxTLnNldFByb3BlcnR5VmFsdWUoZSwiZGlzcGxheSIsUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZSkpKSwhbyl7aWYoImhlaWdodCI9PT1yJiYiYm9yZGVyLWJveCIhPT1TLmdldFByb3BlcnR5VmFsdWUoZSwiYm94U2l6aW5nIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXt2YXIgYz1lLm9mZnNldEhlaWdodC0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUoZSwiYm9yZGVyVG9wV2lkdGgiKSl8fDApLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLCJib3JkZXJCb3R0b21XaWR0aCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsInBhZGRpbmdUb3AiKSl8fDApLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLCJwYWRkaW5nQm90dG9tIikpfHwwKTtyZXR1cm4gbigpLGN9aWYoIndpZHRoIj09PXImJiJib3JkZXItYm94IiE9PVMuZ2V0UHJvcGVydHlWYWx1ZShlLCJib3hTaXppbmciKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBwPWUub2Zmc2V0V2lkdGgtKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsImJvcmRlckxlZnRXaWR0aCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsImJvcmRlclJpZ2h0V2lkdGgiKSl8fDApLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLCJwYWRkaW5nTGVmdCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsInBhZGRpbmdSaWdodCIpKXx8MCk7cmV0dXJuIG4oKSxwfX12YXIgZztnPWkoZSk9PT1hP3QuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpOmkoZSkuY29tcHV0ZWRTdHlsZT9pKGUpLmNvbXB1dGVkU3R5bGU6aShlKS5jb21wdXRlZFN0eWxlPXQuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLCJib3JkZXJDb2xvciI9PT1yJiYocj0iYm9yZGVyVG9wQ29sb3IiKSxsPTk9PT1kJiYiZmlsdGVyIj09PXI/Zy5nZXRQcm9wZXJ0eVZhbHVlKHIpOmdbcl0sKCIiPT09bHx8bnVsbD09PWwpJiYobD1lLnN0eWxlW3JdKSxuKCl9aWYoImF1dG8iPT09bCYmL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvaS50ZXN0KHIpKXt2YXIgbT1zKGUsInBvc2l0aW9uIik7KCJmaXhlZCI9PT1tfHwiYWJzb2x1dGUiPT09bSYmL3RvcHxsZWZ0L2kudGVzdChyKSkmJihsPWYoZSkucG9zaXRpb24oKVtyXSsicHgiKX1yZXR1cm4gbH12YXIgbDtpZihTLkhvb2tzLnJlZ2lzdGVyZWRbcl0pe3ZhciB1PXIsYz1TLkhvb2tzLmdldFJvb3QodSk7bj09PWEmJihuPVMuZ2V0UHJvcGVydHlWYWx1ZShlLFMuTmFtZXMucHJlZml4Q2hlY2soYylbMF0pKSxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10mJihuPVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXSgiZXh0cmFjdCIsZSxuKSksbD1TLkhvb2tzLmV4dHJhY3RWYWx1ZSh1LG4pfWVsc2UgaWYoUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKXt2YXIgcCxnO3A9Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKCJuYW1lIixlKSwidHJhbnNmb3JtIiE9PXAmJihnPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHApWzBdKSxTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShnKSYmUy5Ib29rcy50ZW1wbGF0ZXNbcl0mJihnPVMuSG9va3MudGVtcGxhdGVzW3JdWzFdKSksbD1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oImV4dHJhY3QiLGUsZyl9aWYoIS9eW1xkLV0vLnRlc3QobCkpaWYoaShlKSYmaShlKS5pc1NWRyYmUy5OYW1lcy5TVkdBdHRyaWJ1dGUocikpaWYoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KHIpKXRyeXtsPWUuZ2V0QkJveCgpW3JdfWNhdGNoKG0pe2w9MH1lbHNlIGw9ZS5nZXRBdHRyaWJ1dGUocik7ZWxzZSBsPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHIpWzBdKTtyZXR1cm4gUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUobCkmJihsPTApLGIuZGVidWc+PTImJmNvbnNvbGUubG9nKCJHZXQgIityKyI6ICIrbCksbH0sc2V0UHJvcGVydHlWYWx1ZTpmdW5jdGlvbihlLHIsYSxuLG8pe3ZhciBzPXI7aWYoInNjcm9sbCI9PT1yKW8uY29udGFpbmVyP28uY29udGFpbmVyWyJzY3JvbGwiK28uZGlyZWN0aW9uXT1hOiJMZWZ0Ij09PW8uZGlyZWN0aW9uP3Quc2Nyb2xsVG8oYSxvLmFsdGVybmF0ZVZhbHVlKTp0LnNjcm9sbFRvKG8uYWx0ZXJuYXRlVmFsdWUsYSk7ZWxzZSBpZihTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0mJiJ0cmFuc2Zvcm0iPT09Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKCJuYW1lIixlKSlTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oImluamVjdCIsZSxhKSxzPSJ0cmFuc2Zvcm0iLGE9aShlKS50cmFuc2Zvcm1DYWNoZVtyXTtlbHNle2lmKFMuSG9va3MucmVnaXN0ZXJlZFtyXSl7dmFyIGw9cix1PVMuSG9va3MuZ2V0Um9vdChyKTtuPW58fFMuZ2V0UHJvcGVydHlWYWx1ZShlLHUpLGE9Uy5Ib29rcy5pbmplY3RWYWx1ZShsLGEsbikscj11fWlmKFMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXSYmKGE9Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKCJpbmplY3QiLGUsYSkscj1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oIm5hbWUiLGUpKSxzPVMuTmFtZXMucHJlZml4Q2hlY2socilbMF0sOD49ZCl0cnl7ZS5zdHlsZVtzXT1hfWNhdGNoKGMpe2IuZGVidWcmJmNvbnNvbGUubG9nKCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgWyIrYSsiXSBmb3IgWyIrcysiXSIpfWVsc2UgaShlKSYmaShlKS5pc1NWRyYmUy5OYW1lcy5TVkdBdHRyaWJ1dGUocik/ZS5zZXRBdHRyaWJ1dGUocixhKTplLnN0eWxlW3NdPWE7Yi5kZWJ1Zz49MiYmY29uc29sZS5sb2coIlNldCAiK3IrIiAoIitzKyIpOiAiK2EpfXJldHVybltzLGFdfSxmbHVzaFRyYW5zZm9ybUNhY2hlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsdCkpfXZhciByPSIiO2lmKChkfHxiLlN0YXRlLmlzQW5kcm9pZCYmIWIuU3RhdGUuaXNDaHJvbWUpJiZpKGUpLmlzU1ZHKXt2YXIgYT17dHJhbnNsYXRlOlt0KCJ0cmFuc2xhdGVYIiksdCgidHJhbnNsYXRlWSIpXSxza2V3WDpbdCgic2tld1giKV0sc2tld1k6W3QoInNrZXdZIildLHNjYWxlOjEhPT10KCJzY2FsZSIpP1t0KCJzY2FsZSIpLHQoInNjYWxlIildOlt0KCJzY2FsZVgiKSx0KCJzY2FsZVkiKV0scm90YXRlOlt0KCJyb3RhdGVaIiksMCwwXX07Zi5lYWNoKGkoZSkudHJhbnNmb3JtQ2FjaGUsZnVuY3Rpb24oZSl7L150cmFuc2xhdGUvaS50ZXN0KGUpP2U9InRyYW5zbGF0ZSI6L15zY2FsZS9pLnRlc3QoZSk/ZT0ic2NhbGUiOi9ecm90YXRlL2kudGVzdChlKSYmKGU9InJvdGF0ZSIpLGFbZV0mJihyKz1lKyIoIithW2VdLmpvaW4oIiAiKSsiKSAiLGRlbGV0ZSBhW2VdKX0pfWVsc2V7dmFyIG4sbztmLmVhY2goaShlKS50cmFuc2Zvcm1DYWNoZSxmdW5jdGlvbih0KXtyZXR1cm4gbj1pKGUpLnRyYW5zZm9ybUNhY2hlW3RdLCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZSI9PT10PyhvPW4sITApOig5PT09ZCYmInJvdGF0ZVoiPT09dCYmKHQ9InJvdGF0ZSIpLHZvaWQocis9dCtuKyIgIikpfSksbyYmKHI9InBlcnNwZWN0aXZlIitvKyIgIityKX1TLnNldFByb3BlcnR5VmFsdWUoZSwidHJhbnNmb3JtIixyKX19O1MuSG9va3MucmVnaXN0ZXIoKSxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyKCksYi5ob29rPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1hO3JldHVybiBlPW8oZSksZi5lYWNoKGUsZnVuY3Rpb24oZSxvKXtpZihpKG8pPT09YSYmYi5pbml0KG8pLHI9PT1hKW49PT1hJiYobj1iLkNTUy5nZXRQcm9wZXJ0eVZhbHVlKG8sdCkpO2Vsc2V7dmFyIHM9Yi5DU1Muc2V0UHJvcGVydHlWYWx1ZShvLHQscik7InRyYW5zZm9ybSI9PT1zWzBdJiZiLkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKG8pLG49c319KSxufTt2YXIgUD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcz9rLnByb21pc2V8fG51bGw6bH1mdW5jdGlvbiBuKCl7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBwKGUsdCl7dmFyIHI9YSxuPWEsaT1hO3JldHVybiBtLmlzQXJyYXkoZSk/KHI9ZVswXSwhbS5pc0FycmF5KGVbMV0pJiYvXltcZC1dLy50ZXN0KGVbMV0pfHxtLmlzRnVuY3Rpb24oZVsxXSl8fFMuUmVnRXguaXNIZXgudGVzdChlWzFdKT9pPWVbMV06KG0uaXNTdHJpbmcoZVsxXSkmJiFTLlJlZ0V4LmlzSGV4LnRlc3QoZVsxXSl8fG0uaXNBcnJheShlWzFdKSkmJihuPXQ/ZVsxXTp1KGVbMV0scy5kdXJhdGlvbiksZVsyXSE9PWEmJihpPWVbMl0pKSk6cj1lLHR8fChuPW58fHMuZWFzaW5nKSxtLmlzRnVuY3Rpb24ocikmJihyPXIuY2FsbChvLFYsdykpLG0uaXNGdW5jdGlvbihpKSYmKGk9aS5jYWxsKG8sVix3KSksW3J8fDAsbixpXX1mdW5jdGlvbiBkKGUsdCl7dmFyIHIsYTtyZXR1cm4gYT0odHx8IjAiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLGZ1bmN0aW9uKGUpe3JldHVybiByPWUsIiJ9KSxyfHwocj1TLlZhbHVlcy5nZXRVbml0VHlwZShlKSksW2Escl19ZnVuY3Rpb24gaCgpe3ZhciBlPXtteVBhcmVudDpvLnBhcmVudE5vZGV8fHIuYm9keSxwb3NpdGlvbjpTLmdldFByb3BlcnR5VmFsdWUobywicG9zaXRpb24iKSxmb250U2l6ZTpTLmdldFByb3BlcnR5VmFsdWUobywiZm9udFNpemUiKX0sYT1lLnBvc2l0aW9uPT09TC5sYXN0UG9zaXRpb24mJmUubXlQYXJlbnQ9PT1MLmxhc3RQYXJlbnQsbj1lLmZvbnRTaXplPT09TC5sYXN0Rm9udFNpemU7TC5sYXN0UGFyZW50PWUubXlQYXJlbnQsTC5sYXN0UG9zaXRpb249ZS5wb3NpdGlvbixMLmxhc3RGb250U2l6ZT1lLmZvbnRTaXplO3ZhciBzPTEwMCxsPXt9O2lmKG4mJmEpbC5lbVRvUHg9TC5sYXN0RW1Ub1B4LGwucGVyY2VudFRvUHhXaWR0aD1MLmxhc3RQZXJjZW50VG9QeFdpZHRoLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7ZWxzZXt2YXIgdT1pKG8pLmlzU1ZHP3IuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsInJlY3QiKTpyLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5pdCh1KSxlLm15UGFyZW50LmFwcGVuZENoaWxkKHUpLGYuZWFjaChbIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIl0sZnVuY3Rpb24oZSx0KXtiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsdCwiaGlkZGVuIil9KSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsInBvc2l0aW9uIixlLnBvc2l0aW9uKSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsImZvbnRTaXplIixlLmZvbnRTaXplKSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsImJveFNpemluZyIsImNvbnRlbnQtYm94IiksZi5lYWNoKFsibWluV2lkdGgiLCJtYXhXaWR0aCIsIndpZHRoIiwibWluSGVpZ2h0IiwibWF4SGVpZ2h0IiwiaGVpZ2h0Il0sZnVuY3Rpb24oZSx0KXtiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsdCxzKyIlIil9KSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsInBhZGRpbmdMZWZ0IixzKyJlbSIpLGwucGVyY2VudFRvUHhXaWR0aD1MLmxhc3RQZXJjZW50VG9QeFdpZHRoPShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZSh1LCJ3aWR0aCIsbnVsbCwhMCkpfHwxKS9zLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ9KHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKHUsImhlaWdodCIsbnVsbCwhMCkpfHwxKS9zLGwuZW1Ub1B4PUwubGFzdEVtVG9QeD0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUodSwicGFkZGluZ0xlZnQiKSl8fDEpL3MsZS5teVBhcmVudC5yZW1vdmVDaGlsZCh1KX1yZXR1cm4gbnVsbD09PUwucmVtVG9QeCYmKEwucmVtVG9QeD1wYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShyLmJvZHksImZvbnRTaXplIikpfHwxNiksbnVsbD09PUwudndUb1B4JiYoTC52d1RvUHg9cGFyc2VGbG9hdCh0LmlubmVyV2lkdGgpLzEwMCxMLnZoVG9QeD1wYXJzZUZsb2F0KHQuaW5uZXJIZWlnaHQpLzEwMCksbC5yZW1Ub1B4PUwucmVtVG9QeCxsLnZ3VG9QeD1MLnZ3VG9QeCxsLnZoVG9QeD1MLnZoVG9QeCxiLmRlYnVnPj0xJiZjb25zb2xlLmxvZygiVW5pdCByYXRpb3M6ICIrSlNPTi5zdHJpbmdpZnkobCksbyksbH1pZihzLmJlZ2luJiYwPT09Vil0cnl7cy5iZWdpbi5jYWxsKGcsZyl9Y2F0Y2goeCl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IHh9LDEpfWlmKCJzY3JvbGwiPT09QSl7dmFyIFAsQyxULEY9L154JC9pLnRlc3Qocy5heGlzKT8iTGVmdCI6IlRvcCIsaj1wYXJzZUZsb2F0KHMub2Zmc2V0KXx8MDtzLmNvbnRhaW5lcj9tLmlzV3JhcHBlZChzLmNvbnRhaW5lcil8fG0uaXNOb2RlKHMuY29udGFpbmVyKT8ocy5jb250YWluZXI9cy5jb250YWluZXJbMF18fHMuY29udGFpbmVyLFA9cy5jb250YWluZXJbInNjcm9sbCIrRl0sVD1QK2YobykucG9zaXRpb24oKVtGLnRvTG93ZXJDYXNlKCldK2opOnMuY29udGFpbmVyPW51bGw6KFA9Yi5TdGF0ZS5zY3JvbGxBbmNob3JbYi5TdGF0ZVsic2Nyb2xsUHJvcGVydHkiK0ZdXSxDPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbInNjcm9sbFByb3BlcnR5IisoIkxlZnQiPT09Rj8iVG9wIjoiTGVmdCIpXV0sVD1mKG8pLm9mZnNldCgpW0YudG9Mb3dlckNhc2UoKV0raiksbD17c2Nyb2xsOntyb290UHJvcGVydHlWYWx1ZTohMSxzdGFydFZhbHVlOlAsY3VycmVudFZhbHVlOlAsZW5kVmFsdWU6VCx1bml0VHlwZToiIixlYXNpbmc6cy5lYXNpbmcsc2Nyb2xsRGF0YTp7Y29udGFpbmVyOnMuY29udGFpbmVyLGRpcmVjdGlvbjpGLGFsdGVybmF0ZVZhbHVlOkN9fSxlbGVtZW50Om99LGIuZGVidWcmJmNvbnNvbGUubG9nKCJ0d2VlbnNDb250YWluZXIgKHNjcm9sbCk6ICIsbC5zY3JvbGwsbyl9ZWxzZSBpZigicmV2ZXJzZSI9PT1BKXtpZighaShvKS50d2VlbnNDb250YWluZXIpcmV0dXJuIHZvaWQgZi5kZXF1ZXVlKG8scy5xdWV1ZSk7Im5vbmUiPT09aShvKS5vcHRzLmRpc3BsYXkmJihpKG8pLm9wdHMuZGlzcGxheT0iYXV0byIpLCJoaWRkZW4iPT09aShvKS5vcHRzLnZpc2liaWxpdHkmJihpKG8pLm9wdHMudmlzaWJpbGl0eT0idmlzaWJsZSIpLGkobykub3B0cy5sb29wPSExLGkobykub3B0cy5iZWdpbj1udWxsLGkobykub3B0cy5jb21wbGV0ZT1udWxsLHYuZWFzaW5nfHxkZWxldGUgcy5lYXNpbmcsdi5kdXJhdGlvbnx8ZGVsZXRlIHMuZHVyYXRpb24scz1mLmV4dGVuZCh7fSxpKG8pLm9wdHMscyk7dmFyIEU9Zi5leHRlbmQoITAse30saShvKS50d2VlbnNDb250YWluZXIpO2Zvcih2YXIgSCBpbiBFKWlmKCJlbGVtZW50IiE9PUgpe3ZhciBOPUVbSF0uc3RhcnRWYWx1ZTtFW0hdLnN0YXJ0VmFsdWU9RVtIXS5jdXJyZW50VmFsdWU9RVtIXS5lbmRWYWx1ZSxFW0hdLmVuZFZhbHVlPU4sbS5pc0VtcHR5T2JqZWN0KHYpfHwoRVtIXS5lYXNpbmc9cy5lYXNpbmcpLGIuZGVidWcmJmNvbnNvbGUubG9nKCJyZXZlcnNlIHR3ZWVuc0NvbnRhaW5lciAoIitIKyIpOiAiK0pTT04uc3RyaW5naWZ5KEVbSF0pLG8pfWw9RX1lbHNlIGlmKCJzdGFydCI9PT1BKXt2YXIgRTtpKG8pLnR3ZWVuc0NvbnRhaW5lciYmaShvKS5pc0FuaW1hdGluZz09PSEwJiYoRT1pKG8pLnR3ZWVuc0NvbnRhaW5lciksZi5lYWNoKHksZnVuY3Rpb24oZSx0KXtpZihSZWdFeHAoIl4iK1MuTGlzdHMuY29sb3JzLmpvaW4oIiR8XiIpKyIkIikudGVzdChlKSl7dmFyIHI9cCh0LCEwKSxuPXJbMF0sbz1yWzFdLGk9clsyXTtpZihTLlJlZ0V4LmlzSGV4LnRlc3Qobikpe2Zvcih2YXIgcz1bIlJlZCIsIkdyZWVuIiwiQmx1ZSJdLGw9Uy5WYWx1ZXMuaGV4VG9SZ2IobiksdT1pP1MuVmFsdWVzLmhleFRvUmdiKGkpOmEsYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgZj1bbFtjXV07byYmZi5wdXNoKG8pLHUhPT1hJiZmLnB1c2godVtjXSkseVtlK3NbY11dPWZ9ZGVsZXRlIHlbZV19fX0pO2Zvcih2YXIgeiBpbiB5KXt2YXIgTz1wKHlbel0pLHE9T1swXSwkPU9bMV0sTT1PWzJdO3o9Uy5OYW1lcy5jYW1lbENhc2Uoeik7dmFyIEk9Uy5Ib29rcy5nZXRSb290KHopLEI9ITE7aWYoaShvKS5pc1NWR3x8InR3ZWVuIj09PUl8fFMuTmFtZXMucHJlZml4Q2hlY2soSSlbMV0hPT0hMXx8Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0ldIT09YSl7KHMuZGlzcGxheSE9PWEmJm51bGwhPT1zLmRpc3BsYXkmJiJub25lIiE9PXMuZGlzcGxheXx8cy52aXNpYmlsaXR5IT09YSYmImhpZGRlbiIhPT1zLnZpc2liaWxpdHkpJiYvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoeikmJiFNJiYwIT09cSYmKE09MCkscy5fY2FjaGVWYWx1ZXMmJkUmJkVbel0/KE09PT1hJiYoTT1FW3pdLmVuZFZhbHVlK0Vbel0udW5pdFR5cGUpLEI9aShvKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0ldKTpTLkhvb2tzLnJlZ2lzdGVyZWRbel0/TT09PWE/KEI9Uy5nZXRQcm9wZXJ0eVZhbHVlKG8sSSksTT1TLmdldFByb3BlcnR5VmFsdWUobyx6LEIpKTpCPVMuSG9va3MudGVtcGxhdGVzW0ldWzFdOk09PT1hJiYoTT1TLmdldFByb3BlcnR5VmFsdWUobyx6KSk7dmFyIFcsRyxZLEQ9ITE7aWYoVz1kKHosTSksTT1XWzBdLFk9V1sxXSxXPWQoeixxKSxxPVdbMF0ucmVwbGFjZSgvXihbKy1cLypdKT0vLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIEQ9dCwiIn0pLEc9V1sxXSxNPXBhcnNlRmxvYXQoTSl8fDAscT1wYXJzZUZsb2F0KHEpfHwwLCIlIj09PUcmJigvXihmb250U2l6ZXxsaW5lSGVpZ2h0KSQvLnRlc3Qoeik/KHEvPTEwMCxHPSJlbSIpOi9ec2NhbGUvLnRlc3Qoeik/KHEvPTEwMCxHPSIiKTovKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KHopJiYocT1xLzEwMCoyNTUsRz0iIikpLC9bXC8qXS8udGVzdChEKSlHPVk7ZWxzZSBpZihZIT09RyYmMCE9PU0paWYoMD09PXEpRz1ZO2Vsc2V7bj1ufHxoKCk7dmFyIFE9L21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3Qoeil8fC9YJC8udGVzdCh6KXx8IngiPT09ej8ieCI6InkiO3N3aXRjaChZKXtjYXNlIiUiOk0qPSJ4Ij09PVE/bi5wZXJjZW50VG9QeFdpZHRoOm4ucGVyY2VudFRvUHhIZWlnaHQ7YnJlYWs7Y2FzZSJweCI6YnJlYWs7ZGVmYXVsdDpNKj1uW1krIlRvUHgiXX1zd2l0Y2goRyl7Y2FzZSIlIjpNKj0xLygieCI9PT1RP24ucGVyY2VudFRvUHhXaWR0aDpuLnBlcmNlbnRUb1B4SGVpZ2h0KTticmVhaztjYXNlInB4IjpicmVhaztkZWZhdWx0Ok0qPTEvbltHKyJUb1B4Il19fXN3aXRjaChEKXtjYXNlIisiOnE9TStxO2JyZWFrO2Nhc2UiLSI6cT1NLXE7YnJlYWs7Y2FzZSIqIjpxPU0qcTticmVhaztjYXNlIi8iOnE9TS9xfWxbel09e3Jvb3RQcm9wZXJ0eVZhbHVlOkIsc3RhcnRWYWx1ZTpNLGN1cnJlbnRWYWx1ZTpNLGVuZFZhbHVlOnEsdW5pdFR5cGU6RyxlYXNpbmc6JH0sYi5kZWJ1ZyYmY29uc29sZS5sb2coInR3ZWVuc0NvbnRhaW5lciAoIit6KyIpOiAiK0pTT04uc3RyaW5naWZ5KGxbel0pLG8pfWVsc2UgYi5kZWJ1ZyYmY29uc29sZS5sb2coIlNraXBwaW5nIFsiK0krIl0gZHVlIHRvIGEgbGFjayBvZiBicm93c2VyIHN1cHBvcnQuIil9bC5lbGVtZW50PW99bC5lbGVtZW50JiYoUy5WYWx1ZXMuYWRkQ2xhc3MobywidmVsb2NpdHktYW5pbWF0aW5nIiksUi5wdXNoKGwpLCIiPT09cy5xdWV1ZSYmKGkobykudHdlZW5zQ29udGFpbmVyPWwsaShvKS5vcHRzPXMpLGkobykuaXNBbmltYXRpbmc9ITAsVj09PXctMT8oYi5TdGF0ZS5jYWxscy5wdXNoKFtSLGcscyxudWxsLGsucmVzb2x2ZXJdKSxiLlN0YXRlLmlzVGlja2luZz09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITAsYygpKSk6VisrKX12YXIgbixvPXRoaXMscz1mLmV4dGVuZCh7fSxiLmRlZmF1bHRzLHYpLGw9e307c3dpdGNoKGkobyk9PT1hJiZiLmluaXQobykscGFyc2VGbG9hdChzLmRlbGF5KSYmcy5xdWV1ZSE9PSExJiZmLnF1ZXVlKG8scy5xdWV1ZSxmdW5jdGlvbihlKXtiLnZlbG9jaXR5UXVldWVFbnRyeUZsYWc9ITAsaShvKS5kZWxheVRpbWVyPXtzZXRUaW1lb3V0OnNldFRpbWVvdXQoZSxwYXJzZUZsb2F0KHMuZGVsYXkpKSxuZXh0OmV9fSkscy5kdXJhdGlvbi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe2Nhc2UiZmFzdCI6cy5kdXJhdGlvbj0yMDA7YnJlYWs7Y2FzZSJub3JtYWwiOnMuZHVyYXRpb249aDticmVhaztjYXNlInNsb3ciOnMuZHVyYXRpb249NjAwO2JyZWFrO2RlZmF1bHQ6cy5kdXJhdGlvbj1wYXJzZUZsb2F0KHMuZHVyYXRpb24pfHwxfWIubW9jayE9PSExJiYoYi5tb2NrPT09ITA/cy5kdXJhdGlvbj1zLmRlbGF5PTE6KHMuZHVyYXRpb24qPXBhcnNlRmxvYXQoYi5tb2NrKXx8MSxzLmRlbGF5Kj1wYXJzZUZsb2F0KGIubW9jayl8fDEpKSxzLmVhc2luZz11KHMuZWFzaW5nLHMuZHVyYXRpb24pLHMuYmVnaW4mJiFtLmlzRnVuY3Rpb24ocy5iZWdpbikmJihzLmJlZ2luPW51bGwpLHMucHJvZ3Jlc3MmJiFtLmlzRnVuY3Rpb24ocy5wcm9ncmVzcykmJihzLnByb2dyZXNzPW51bGwpLHMuY29tcGxldGUmJiFtLmlzRnVuY3Rpb24ocy5jb21wbGV0ZSkmJihzLmNvbXBsZXRlPW51bGwpLHMuZGlzcGxheSE9PWEmJm51bGwhPT1zLmRpc3BsYXkmJihzLmRpc3BsYXk9cy5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSwiYXV0byI9PT1zLmRpc3BsYXkmJihzLmRpc3BsYXk9Yi5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKG8pKSkscy52aXNpYmlsaXR5IT09YSYmbnVsbCE9PXMudmlzaWJpbGl0eSYmKHMudmlzaWJpbGl0eT1zLnZpc2liaWxpdHkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSxzLm1vYmlsZUhBPXMubW9iaWxlSEEmJmIuU3RhdGUuaXNNb2JpbGUmJiFiLlN0YXRlLmlzR2luZ2VyYnJlYWQscy5xdWV1ZT09PSExP3MuZGVsYXk/c2V0VGltZW91dChlLHMuZGVsYXkpOmUoKTpmLnF1ZXVlKG8scy5xdWV1ZSxmdW5jdGlvbih0LHIpe3JldHVybiByPT09ITA/KGsucHJvbWlzZSYmay5yZXNvbHZlcihnKSwhMCk6KGIudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZz0hMCx2b2lkIGUodCkpfSksIiIhPT1zLnF1ZXVlJiYiZngiIT09cy5xdWV1ZXx8ImlucHJvZ3Jlc3MiPT09Zi5xdWV1ZShvKVswXXx8Zi5kZXF1ZXVlKG8pfXZhciBzLGwsZCxnLHksdix4PWFyZ3VtZW50c1swXSYmKGFyZ3VtZW50c1swXS5wfHxmLmlzUGxhaW5PYmplY3QoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpJiYhYXJndW1lbnRzWzBdLnByb3BlcnRpZXMubmFtZXN8fG0uaXNTdHJpbmcoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpKTtpZihtLmlzV3JhcHBlZCh0aGlzKT8ocz0hMSxkPTAsZz10aGlzLGw9dGhpcyk6KHM9ITAsZD0xLGc9eD9hcmd1bWVudHNbMF0uZWxlbWVudHN8fGFyZ3VtZW50c1swXS5lOmFyZ3VtZW50c1swXSksZz1vKGcpKXt4Pyh5PWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzfHxhcmd1bWVudHNbMF0ucCx2PWFyZ3VtZW50c1swXS5vcHRpb25zfHxhcmd1bWVudHNbMF0ubyk6KHk9YXJndW1lbnRzW2RdLHY9YXJndW1lbnRzW2QrMV0pO3ZhciB3PWcubGVuZ3RoLFY9MDtpZighL14oc3RvcHxmaW5pc2gpJC9pLnRlc3QoeSkmJiFmLmlzUGxhaW5PYmplY3Qodikpe3ZhciBDPWQrMTt2PXt9O2Zvcih2YXIgVD1DO1Q8YXJndW1lbnRzLmxlbmd0aDtUKyspbS5pc0FycmF5KGFyZ3VtZW50c1tUXSl8fCEvXihmYXN0fG5vcm1hbHxzbG93KSQvaS50ZXN0KGFyZ3VtZW50c1tUXSkmJiEvXlxkLy50ZXN0KGFyZ3VtZW50c1tUXSk/bS5pc1N0cmluZyhhcmd1bWVudHNbVF0pfHxtLmlzQXJyYXkoYXJndW1lbnRzW1RdKT92LmVhc2luZz1hcmd1bWVudHNbVF06bS5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tUXSkmJih2LmNvbXBsZXRlPWFyZ3VtZW50c1tUXSk6di5kdXJhdGlvbj1hcmd1bWVudHNbVF19dmFyIGs9e3Byb21pc2U6bnVsbCxyZXNvbHZlcjpudWxsLHJlamVjdGVyOm51bGx9O3MmJmIuUHJvbWlzZSYmKGsucHJvbWlzZT1uZXcgYi5Qcm9taXNlKGZ1bmN0aW9uKGUsdCl7ay5yZXNvbHZlcj1lLGsucmVqZWN0ZXI9dH0pKTt2YXIgQTtzd2l0Y2goeSl7Y2FzZSJzY3JvbGwiOkE9InNjcm9sbCI7YnJlYWs7Y2FzZSJyZXZlcnNlIjpBPSJyZXZlcnNlIjticmVhaztjYXNlImZpbmlzaCI6Y2FzZSJzdG9wIjpmLmVhY2goZyxmdW5jdGlvbihlLHQpe2kodCkmJmkodCkuZGVsYXlUaW1lciYmKGNsZWFyVGltZW91dChpKHQpLmRlbGF5VGltZXIuc2V0VGltZW91dCksaSh0KS5kZWxheVRpbWVyLm5leHQmJmkodCkuZGVsYXlUaW1lci5uZXh0KCksZGVsZXRlIGkodCkuZGVsYXlUaW1lcil9KTt2YXIgRj1bXTtyZXR1cm4gZi5lYWNoKGIuU3RhdGUuY2FsbHMsZnVuY3Rpb24oZSx0KXt0JiZmLmVhY2godFsxXSxmdW5jdGlvbihyLG4pe3ZhciBvPXY9PT1hPyIiOnY7cmV0dXJuIG89PT0hMHx8dFsyXS5xdWV1ZT09PW98fHY9PT1hJiZ0WzJdLnF1ZXVlPT09ITE/dm9pZCBmLmVhY2goZyxmdW5jdGlvbihyLGEpe2E9PT1uJiYoKHY9PT0hMHx8bS5pc1N0cmluZyh2KSkmJihmLmVhY2goZi5xdWV1ZShhLG0uaXNTdHJpbmcodik/djoiIiksZnVuY3Rpb24oZSx0KXsKbS5pc0Z1bmN0aW9uKHQpJiZ0KG51bGwsITApfSksZi5xdWV1ZShhLG0uaXNTdHJpbmcodik/djoiIixbXSkpLCJzdG9wIj09PXk/KGkoYSkmJmkoYSkudHdlZW5zQ29udGFpbmVyJiZvIT09ITEmJmYuZWFjaChpKGEpLnR3ZWVuc0NvbnRhaW5lcixmdW5jdGlvbihlLHQpe3QuZW5kVmFsdWU9dC5jdXJyZW50VmFsdWV9KSxGLnB1c2goZSkpOiJmaW5pc2giPT09eSYmKHRbMl0uZHVyYXRpb249MSkpfSk6ITB9KX0pLCJzdG9wIj09PXkmJihmLmVhY2goRixmdW5jdGlvbihlLHQpe3AodCwhMCl9KSxrLnByb21pc2UmJmsucmVzb2x2ZXIoZykpLGUoKTtkZWZhdWx0OmlmKCFmLmlzUGxhaW5PYmplY3QoeSl8fG0uaXNFbXB0eU9iamVjdCh5KSl7aWYobS5pc1N0cmluZyh5KSYmYi5SZWRpcmVjdHNbeV0pe3ZhciBqPWYuZXh0ZW5kKHt9LHYpLEU9ai5kdXJhdGlvbixIPWouZGVsYXl8fDA7cmV0dXJuIGouYmFja3dhcmRzPT09ITAmJihnPWYuZXh0ZW5kKCEwLFtdLGcpLnJldmVyc2UoKSksZi5lYWNoKGcsZnVuY3Rpb24oZSx0KXtwYXJzZUZsb2F0KGouc3RhZ2dlcik/ai5kZWxheT1IK3BhcnNlRmxvYXQoai5zdGFnZ2VyKSplOm0uaXNGdW5jdGlvbihqLnN0YWdnZXIpJiYoai5kZWxheT1IK2ouc3RhZ2dlci5jYWxsKHQsZSx3KSksai5kcmFnJiYoai5kdXJhdGlvbj1wYXJzZUZsb2F0KEUpfHwoL14oY2FsbG91dHx0cmFuc2l0aW9uKS8udGVzdCh5KT8xZTM6aCksai5kdXJhdGlvbj1NYXRoLm1heChqLmR1cmF0aW9uKihqLmJhY2t3YXJkcz8xLWUvdzooZSsxKS93KSwuNzUqai5kdXJhdGlvbiwyMDApKSxiLlJlZGlyZWN0c1t5XS5jYWxsKHQsdCxqfHx7fSxlLHcsZyxrLnByb21pc2U/azphKX0pLGUoKX12YXIgTj0iVmVsb2NpdHk6IEZpcnN0IGFyZ3VtZW50ICgiK3krIikgd2FzIG5vdCBhIHByb3BlcnR5IG1hcCwgYSBrbm93biBhY3Rpb24sIG9yIGEgcmVnaXN0ZXJlZCByZWRpcmVjdC4gQWJvcnRpbmcuIjtyZXR1cm4gay5wcm9taXNlP2sucmVqZWN0ZXIobmV3IEVycm9yKE4pKTpjb25zb2xlLmxvZyhOKSxlKCl9QT0ic3RhcnQifXZhciBMPXtsYXN0UGFyZW50Om51bGwsbGFzdFBvc2l0aW9uOm51bGwsbGFzdEZvbnRTaXplOm51bGwsbGFzdFBlcmNlbnRUb1B4V2lkdGg6bnVsbCxsYXN0UGVyY2VudFRvUHhIZWlnaHQ6bnVsbCxsYXN0RW1Ub1B4Om51bGwscmVtVG9QeDpudWxsLHZ3VG9QeDpudWxsLHZoVG9QeDpudWxsfSxSPVtdO2YuZWFjaChnLGZ1bmN0aW9uKGUsdCl7bS5pc05vZGUodCkmJm4uY2FsbCh0KX0pO3ZhciB6LGo9Zi5leHRlbmQoe30sYi5kZWZhdWx0cyx2KTtpZihqLmxvb3A9cGFyc2VJbnQoai5sb29wKSx6PTIqai5sb29wLTEsai5sb29wKWZvcih2YXIgTz0wO3o+TztPKyspe3ZhciBxPXtkZWxheTpqLmRlbGF5LHByb2dyZXNzOmoucHJvZ3Jlc3N9O089PT16LTEmJihxLmRpc3BsYXk9ai5kaXNwbGF5LHEudmlzaWJpbGl0eT1qLnZpc2liaWxpdHkscS5jb21wbGV0ZT1qLmNvbXBsZXRlKSxQKGcsInJldmVyc2UiLHEpfXJldHVybiBlKCl9fTtiPWYuZXh0ZW5kKFAsYiksYi5hbmltYXRlPVA7dmFyIHc9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGc7cmV0dXJuIGIuU3RhdGUuaXNNb2JpbGV8fHIuaGlkZGVuPT09YXx8ci5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIixmdW5jdGlvbigpe3IuaGlkZGVuPyh3PWZ1bmN0aW9uKGUpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSghMCl9LDE2KX0sYygpKTp3PXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxnfSksZS5WZWxvY2l0eT1iLGUhPT10JiYoZS5mbi52ZWxvY2l0eT1QLGUuZm4udmVsb2NpdHkuZGVmYXVsdHM9Yi5kZWZhdWx0cyksZi5lYWNoKFsiRG93biIsIlVwIl0sZnVuY3Rpb24oZSx0KXtiLlJlZGlyZWN0c1sic2xpZGUiK3RdPWZ1bmN0aW9uKGUscixuLG8saSxzKXt2YXIgbD1mLmV4dGVuZCh7fSxyKSx1PWwuYmVnaW4sYz1sLmNvbXBsZXRlLHA9e2hlaWdodDoiIixtYXJnaW5Ub3A6IiIsbWFyZ2luQm90dG9tOiIiLHBhZGRpbmdUb3A6IiIscGFkZGluZ0JvdHRvbToiIn0sZD17fTtsLmRpc3BsYXk9PT1hJiYobC5kaXNwbGF5PSJEb3duIj09PXQ/ImlubGluZSI9PT1iLkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZSk/ImlubGluZS1ibG9jayI6ImJsb2NrIjoibm9uZSIpLGwuYmVnaW49ZnVuY3Rpb24oKXt1JiZ1LmNhbGwoaSxpKTtmb3IodmFyIHIgaW4gcCl7ZFtyXT1lLnN0eWxlW3JdO3ZhciBhPWIuQ1NTLmdldFByb3BlcnR5VmFsdWUoZSxyKTtwW3JdPSJEb3duIj09PXQ/W2EsMF06WzAsYV19ZC5vdmVyZmxvdz1lLnN0eWxlLm92ZXJmbG93LGUuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiJ9LGwuY29tcGxldGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gZCllLnN0eWxlW3RdPWRbdF07YyYmYy5jYWxsKGksaSkscyYmcy5yZXNvbHZlcihpKX0sYihlLHAsbCl9fSksZi5lYWNoKFsiSW4iLCJPdXQiXSxmdW5jdGlvbihlLHQpe2IuUmVkaXJlY3RzWyJmYWRlIit0XT1mdW5jdGlvbihlLHIsbixvLGkscyl7dmFyIGw9Zi5leHRlbmQoe30sciksdT17b3BhY2l0eToiSW4iPT09dD8xOjB9LGM9bC5jb21wbGV0ZTtsLmNvbXBsZXRlPW4hPT1vLTE/bC5iZWdpbj1udWxsOmZ1bmN0aW9uKCl7YyYmYy5jYWxsKGksaSkscyYmcy5yZXNvbHZlcihpKX0sbC5kaXNwbGF5PT09YSYmKGwuZGlzcGxheT0iSW4iPT09dD8iYXV0byI6Im5vbmUiKSxiKHRoaXMsdSxsKX19KSxifSh3aW5kb3cualF1ZXJ5fHx3aW5kb3cuWmVwdG98fHdpbmRvdyx3aW5kb3csZG9jdW1lbnQpfSkpOwo7IWZ1bmN0aW9uKGEsYixjLGQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBrKGEsYixjKXtyZXR1cm4gc2V0VGltZW91dChxKGEsYyksYil9ZnVuY3Rpb24gbChhLGIsYyl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/KG0oYSxjW2JdLGMpLCEwKTohMX1mdW5jdGlvbiBtKGEsYixjKXt2YXIgZTtpZihhKWlmKGEuZm9yRWFjaClhLmZvckVhY2goYixjKTtlbHNlIGlmKGEubGVuZ3RoIT09ZClmb3IoZT0wO2U8YS5sZW5ndGg7KWIuY2FsbChjLGFbZV0sZSxhKSxlKys7ZWxzZSBmb3IoZSBpbiBhKWEuaGFzT3duUHJvcGVydHkoZSkmJmIuY2FsbChjLGFbZV0sZSxhKX1mdW5jdGlvbiBuKGEsYixjKXtmb3IodmFyIGU9T2JqZWN0LmtleXMoYiksZj0wO2Y8ZS5sZW5ndGg7KSghY3x8YyYmYVtlW2ZdXT09PWQpJiYoYVtlW2ZdXT1iW2VbZl1dKSxmKys7cmV0dXJuIGF9ZnVuY3Rpb24gbyhhLGIpe3JldHVybiBuKGEsYiwhMCl9ZnVuY3Rpb24gcChhLGIsYyl7dmFyIGUsZD1iLnByb3RvdHlwZTtlPWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZCksZS5jb25zdHJ1Y3Rvcj1hLGUuX3N1cGVyPWQsYyYmbihlLGMpfWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PWc/YS5hcHBseShiP2JbMF18fGQ6ZCxiKTphfWZ1bmN0aW9uIHMoYSxiKXtyZXR1cm4gYT09PWQ/YjphfWZ1bmN0aW9uIHQoYSxiLGMpe20oeChiKSxmdW5jdGlvbihiKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX0pfWZ1bmN0aW9uIHUoYSxiLGMpe20oeChiKSxmdW5jdGlvbihiKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX0pfWZ1bmN0aW9uIHYoYSxiKXtmb3IoO2E7KXtpZihhPT1iKXJldHVybiEwO2E9YS5wYXJlbnROb2RlfXJldHVybiExfWZ1bmN0aW9uIHcoYSxiKXtyZXR1cm4gYS5pbmRleE9mKGIpPi0xfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEudHJpbSgpLnNwbGl0KC9ccysvZyl9ZnVuY3Rpb24geShhLGIsYyl7aWYoYS5pbmRleE9mJiYhYylyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7KXtpZihjJiZhW2RdW2NdPT1ifHwhYyYmYVtkXT09PWIpcmV0dXJuIGQ7ZCsrfXJldHVybi0xfWZ1bmN0aW9uIHooYSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsMCl9ZnVuY3Rpb24gQShhLGIsYyl7Zm9yKHZhciBkPVtdLGU9W10sZj0wO2Y8YS5sZW5ndGg7KXt2YXIgZz1iP2FbZl1bYl06YVtmXTt5KGUsZyk8MCYmZC5wdXNoKGFbZl0pLGVbZl09ZyxmKyt9cmV0dXJuIGMmJihkPWI/ZC5zb3J0KGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFbYl0+Y1tiXX0pOmQuc29ydCgpKSxkfWZ1bmN0aW9uIEIoYSxiKXtmb3IodmFyIGMsZixnPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGg9MDtoPGUubGVuZ3RoOyl7aWYoYz1lW2hdLGY9Yz9jK2c6YixmIGluIGEpcmV0dXJuIGY7aCsrfXJldHVybiBkfWZ1bmN0aW9uIEQoKXtyZXR1cm4gQysrfWZ1bmN0aW9uIEUoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50O3JldHVybiBiLmRlZmF1bHRWaWV3fHxiLnBhcmVudFdpbmRvd31mdW5jdGlvbiBhYihhLGIpe3ZhciBjPXRoaXM7dGhpcy5tYW5hZ2VyPWEsdGhpcy5jYWxsYmFjaz1iLHRoaXMuZWxlbWVudD1hLmVsZW1lbnQsdGhpcy50YXJnZXQ9YS5vcHRpb25zLmlucHV0VGFyZ2V0LHRoaXMuZG9tSGFuZGxlcj1mdW5jdGlvbihiKXtyKGEub3B0aW9ucy5lbmFibGUsW2FdKSYmYy5oYW5kbGVyKGIpfSx0aGlzLmluaXQoKX1mdW5jdGlvbiBiYihhKXt2YXIgYixjPWEub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBiPWM/YzpIP3diOkk/RWI6Rz9HYjpyYixuZXcgYihhLGNiKX1mdW5jdGlvbiBjYihhLGIsYyl7dmFyIGQ9Yy5wb2ludGVycy5sZW5ndGgsZT1jLmNoYW5nZWRQb2ludGVycy5sZW5ndGgsZj1iJk8mJjA9PT1kLWUsZz1iJihRfFIpJiYwPT09ZC1lO2MuaXNGaXJzdD0hIWYsYy5pc0ZpbmFsPSEhZyxmJiYoYS5zZXNzaW9uPXt9KSxjLmV2ZW50VHlwZT1iLGRiKGEsYyksYS5lbWl0KCJoYW1tZXIuaW5wdXQiLGMpLGEucmVjb2duaXplKGMpLGEuc2Vzc2lvbi5wcmV2SW5wdXQ9Y31mdW5jdGlvbiBkYihhLGIpe3ZhciBjPWEuc2Vzc2lvbixkPWIucG9pbnRlcnMsZT1kLmxlbmd0aDtjLmZpcnN0SW5wdXR8fChjLmZpcnN0SW5wdXQ9Z2IoYikpLGU+MSYmIWMuZmlyc3RNdWx0aXBsZT9jLmZpcnN0TXVsdGlwbGU9Z2IoYik6MT09PWUmJihjLmZpcnN0TXVsdGlwbGU9ITEpO3ZhciBmPWMuZmlyc3RJbnB1dCxnPWMuZmlyc3RNdWx0aXBsZSxoPWc/Zy5jZW50ZXI6Zi5jZW50ZXIsaT1iLmNlbnRlcj1oYihkKTtiLnRpbWVTdGFtcD1qKCksYi5kZWx0YVRpbWU9Yi50aW1lU3RhbXAtZi50aW1lU3RhbXAsYi5hbmdsZT1sYihoLGkpLGIuZGlzdGFuY2U9a2IoaCxpKSxlYihjLGIpLGIub2Zmc2V0RGlyZWN0aW9uPWpiKGIuZGVsdGFYLGIuZGVsdGFZKSxiLnNjYWxlPWc/bmIoZy5wb2ludGVycyxkKToxLGIucm90YXRpb249Zz9tYihnLnBvaW50ZXJzLGQpOjAsZmIoYyxiKTt2YXIgaz1hLmVsZW1lbnQ7dihiLnNyY0V2ZW50LnRhcmdldCxrKSYmKGs9Yi5zcmNFdmVudC50YXJnZXQpLGIudGFyZ2V0PWt9ZnVuY3Rpb24gZWIoYSxiKXt2YXIgYz1iLmNlbnRlcixkPWEub2Zmc2V0RGVsdGF8fHt9LGU9YS5wcmV2RGVsdGF8fHt9LGY9YS5wcmV2SW5wdXR8fHt9OyhiLmV2ZW50VHlwZT09PU98fGYuZXZlbnRUeXBlPT09USkmJihlPWEucHJldkRlbHRhPXt4OmYuZGVsdGFYfHwwLHk6Zi5kZWx0YVl8fDB9LGQ9YS5vZmZzZXREZWx0YT17eDpjLngseTpjLnl9KSxiLmRlbHRhWD1lLngrKGMueC1kLngpLGIuZGVsdGFZPWUueSsoYy55LWQueSl9ZnVuY3Rpb24gZmIoYSxiKXt2YXIgZixnLGgsaixjPWEubGFzdEludGVydmFsfHxiLGU9Yi50aW1lU3RhbXAtYy50aW1lU3RhbXA7aWYoYi5ldmVudFR5cGUhPVImJihlPk58fGMudmVsb2NpdHk9PT1kKSl7dmFyIGs9Yy5kZWx0YVgtYi5kZWx0YVgsbD1jLmRlbHRhWS1iLmRlbHRhWSxtPWliKGUsayxsKTtnPW0ueCxoPW0ueSxmPWkobS54KT5pKG0ueSk/bS54Om0ueSxqPWpiKGssbCksYS5sYXN0SW50ZXJ2YWw9Yn1lbHNlIGY9Yy52ZWxvY2l0eSxnPWMudmVsb2NpdHlYLGg9Yy52ZWxvY2l0eVksaj1jLmRpcmVjdGlvbjtiLnZlbG9jaXR5PWYsYi52ZWxvY2l0eVg9ZyxiLnZlbG9jaXR5WT1oLGIuZGlyZWN0aW9uPWp9ZnVuY3Rpb24gZ2IoYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEucG9pbnRlcnMubGVuZ3RoOyliW2NdPXtjbGllbnRYOmgoYS5wb2ludGVyc1tjXS5jbGllbnRYKSxjbGllbnRZOmgoYS5wb2ludGVyc1tjXS5jbGllbnRZKX0sYysrO3JldHVybnt0aW1lU3RhbXA6aigpLHBvaW50ZXJzOmIsY2VudGVyOmhiKGIpLGRlbHRhWDphLmRlbHRhWCxkZWx0YVk6YS5kZWx0YVl9fWZ1bmN0aW9uIGhiKGEpe3ZhciBiPWEubGVuZ3RoO2lmKDE9PT1iKXJldHVybnt4OmgoYVswXS5jbGllbnRYKSx5OmgoYVswXS5jbGllbnRZKX07Zm9yKHZhciBjPTAsZD0wLGU9MDtiPmU7KWMrPWFbZV0uY2xpZW50WCxkKz1hW2VdLmNsaWVudFksZSsrO3JldHVybnt4OmgoYy9iKSx5OmgoZC9iKX19ZnVuY3Rpb24gaWIoYSxiLGMpe3JldHVybnt4OmIvYXx8MCx5OmMvYXx8MH19ZnVuY3Rpb24gamIoYSxiKXtyZXR1cm4gYT09PWI/UzppKGEpPj1pKGIpP2E+MD9UOlU6Yj4wP1Y6V31mdW5jdGlvbiBrYihhLGIsYyl7Y3x8KGM9JCk7dmFyIGQ9YltjWzBdXS1hW2NbMF1dLGU9YltjWzFdXS1hW2NbMV1dO3JldHVybiBNYXRoLnNxcnQoZCpkK2UqZSl9ZnVuY3Rpb24gbGIoYSxiLGMpe2N8fChjPSQpO3ZhciBkPWJbY1swXV0tYVtjWzBdXSxlPWJbY1sxXV0tYVtjWzFdXTtyZXR1cm4gMTgwKk1hdGguYXRhbjIoZSxkKS9NYXRoLlBJfWZ1bmN0aW9uIG1iKGEsYil7cmV0dXJuIGxiKGJbMV0sYlswXSxfKS1sYihhWzFdLGFbMF0sXyl9ZnVuY3Rpb24gbmIoYSxiKXtyZXR1cm4ga2IoYlswXSxiWzFdLF8pL2tiKGFbMF0sYVsxXSxfKX1mdW5jdGlvbiByYigpe3RoaXMuZXZFbD1wYix0aGlzLmV2V2luPXFiLHRoaXMuYWxsb3c9ITAsdGhpcy5wcmVzc2VkPSExLGFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiB3Yigpe3RoaXMuZXZFbD11Yix0aGlzLmV2V2luPXZiLGFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnN0b3JlPXRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHM9W119ZnVuY3Rpb24gQWIoKXt0aGlzLmV2VGFyZ2V0PXliLHRoaXMuZXZXaW49emIsdGhpcy5zdGFydGVkPSExLGFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBCYihhLGIpe3ZhciBjPXooYS50b3VjaGVzKSxkPXooYS5jaGFuZ2VkVG91Y2hlcyk7cmV0dXJuIGImKFF8UikmJihjPUEoYy5jb25jYXQoZCksImlkZW50aWZpZXIiLCEwKSksW2MsZF19ZnVuY3Rpb24gRWIoKXt0aGlzLmV2VGFyZ2V0PURiLHRoaXMudGFyZ2V0SWRzPXt9LGFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBGYihhLGIpe3ZhciBjPXooYS50b3VjaGVzKSxkPXRoaXMudGFyZ2V0SWRzO2lmKGImKE98UCkmJjE9PT1jLmxlbmd0aClyZXR1cm4gZFtjWzBdLmlkZW50aWZpZXJdPSEwLFtjLGNdO3ZhciBlLGYsZz16KGEuY2hhbmdlZFRvdWNoZXMpLGg9W10saT10aGlzLnRhcmdldDtpZihmPWMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiB2KGEudGFyZ2V0LGkpfSksYj09PU8pZm9yKGU9MDtlPGYubGVuZ3RoOylkW2ZbZV0uaWRlbnRpZmllcl09ITAsZSsrO2ZvcihlPTA7ZTxnLmxlbmd0aDspZFtnW2VdLmlkZW50aWZpZXJdJiZoLnB1c2goZ1tlXSksYiYoUXxSKSYmZGVsZXRlIGRbZ1tlXS5pZGVudGlmaWVyXSxlKys7cmV0dXJuIGgubGVuZ3RoP1tBKGYuY29uY2F0KGgpLCJpZGVudGlmaWVyIiwhMCksaF06dm9pZCAwfWZ1bmN0aW9uIEdiKCl7YWIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBhPXEodGhpcy5oYW5kbGVyLHRoaXMpO3RoaXMudG91Y2g9bmV3IEViKHRoaXMubWFuYWdlcixhKSx0aGlzLm1vdXNlPW5ldyByYih0aGlzLm1hbmFnZXIsYSl9ZnVuY3Rpb24gUGIoYSxiKXt0aGlzLm1hbmFnZXI9YSx0aGlzLnNldChiKX1mdW5jdGlvbiBRYihhKXtpZih3KGEsTWIpKXJldHVybiBNYjt2YXIgYj13KGEsTmIpLGM9dyhhLE9iKTtyZXR1cm4gYiYmYz9OYisiICIrT2I6Ynx8Yz9iP05iOk9iOncoYSxMYik/TGI6S2J9ZnVuY3Rpb24gWWIoYSl7dGhpcy5pZD1EKCksdGhpcy5tYW5hZ2VyPW51bGwsdGhpcy5vcHRpb25zPW8oYXx8e30sdGhpcy5kZWZhdWx0cyksdGhpcy5vcHRpb25zLmVuYWJsZT1zKHRoaXMub3B0aW9ucy5lbmFibGUsITApLHRoaXMuc3RhdGU9UmIsdGhpcy5zaW11bHRhbmVvdXM9e30sdGhpcy5yZXF1aXJlRmFpbD1bXX1mdW5jdGlvbiBaYihhKXtyZXR1cm4gYSZXYj8iY2FuY2VsIjphJlViPyJlbmQiOmEmVGI/Im1vdmUiOmEmU2I/InN0YXJ0IjoiIn1mdW5jdGlvbiAkYihhKXtyZXR1cm4gYT09Vz8iZG93biI6YT09Vj8idXAiOmE9PVQ/ImxlZnQiOmE9PVU/InJpZ2h0IjoiIn1mdW5jdGlvbiBfYihhLGIpe3ZhciBjPWIubWFuYWdlcjtyZXR1cm4gYz9jLmdldChhKTphfWZ1bmN0aW9uIGFjKCl7WWIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGJjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFg9bnVsbCx0aGlzLnBZPW51bGx9ZnVuY3Rpb24gY2MoKXthYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZGMoKXtZYi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsfWZ1bmN0aW9uIGVjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGZjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGdjKCl7WWIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gaGMoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJlY29nbml6ZXJzPXMoYi5yZWNvZ25pemVycyxoYy5kZWZhdWx0cy5wcmVzZXQpLG5ldyBrYyhhLGIpfWZ1bmN0aW9uIGtjKGEsYil7Yj1ifHx7fSx0aGlzLm9wdGlvbnM9byhiLGhjLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxhLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5lbGVtZW50PWEsdGhpcy5pbnB1dD1iYih0aGlzKSx0aGlzLnRvdWNoQWN0aW9uPW5ldyBQYih0aGlzLHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbiksbGModGhpcywhMCksbShiLnJlY29nbml6ZXJzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWRkKG5ldyBhWzBdKGFbMV0pKTthWzJdJiZiLnJlY29nbml6ZVdpdGgoYVsyXSksYVszXSYmYi5yZXF1aXJlRmFpbHVyZShhWzNdKX0sdGhpcyl9ZnVuY3Rpb24gbGMoYSxiKXt2YXIgYz1hLmVsZW1lbnQ7bShhLm9wdGlvbnMuY3NzUHJvcHMsZnVuY3Rpb24oYSxkKXtjLnN0eWxlW0IoYy5zdHlsZSxkKV09Yj9hOiIifSl9ZnVuY3Rpb24gbWMoYSxjKXt2YXIgZD1iLmNyZWF0ZUV2ZW50KCJFdmVudCIpO2QuaW5pdEV2ZW50KGEsITAsITApLGQuZ2VzdHVyZT1jLGMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZCl9dmFyIGU9WyIiLCJ3ZWJraXQiLCJtb3oiLCJNUyIsIm1zIiwibyJdLGY9Yi5jcmVhdGVFbGVtZW50KCJkaXYiKSxnPSJmdW5jdGlvbiIsaD1NYXRoLnJvdW5kLGk9TWF0aC5hYnMsaj1EYXRlLm5vdyxDPTEsRj0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2ksRz0ib250b3VjaHN0YXJ0ImluIGEsSD1CKGEsIlBvaW50ZXJFdmVudCIpIT09ZCxJPUcmJkYudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxKPSJ0b3VjaCIsSz0icGVuIixMPSJtb3VzZSIsTT0ia2luZWN0IixOPTI1LE89MSxQPTIsUT00LFI9OCxTPTEsVD0yLFU9NCxWPTgsVz0xNixYPVR8VSxZPVZ8VyxaPVh8WSwkPVsieCIsInkiXSxfPVsiY2xpZW50WCIsImNsaWVudFkiXTthYi5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oKXt9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJnQodGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJnQodGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJnQoRSh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZFbCYmdSh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmdSh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmdShFKHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfX07dmFyIG9iPXttb3VzZWRvd246Tyxtb3VzZW1vdmU6UCxtb3VzZXVwOlF9LHBiPSJtb3VzZWRvd24iLHFiPSJtb3VzZW1vdmUgbW91c2V1cCI7cChyYixhYix7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1vYlthLnR5cGVdO2ImTyYmMD09PWEuYnV0dG9uJiYodGhpcy5wcmVzc2VkPSEwKSxiJlAmJjEhPT1hLndoaWNoJiYoYj1RKSx0aGlzLnByZXNzZWQmJnRoaXMuYWxsb3cmJihiJlEmJih0aGlzLnByZXNzZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOlthXSxjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOkwsc3JjRXZlbnQ6YX0pKX19KTt2YXIgc2I9e3BvaW50ZXJkb3duOk8scG9pbnRlcm1vdmU6UCxwb2ludGVydXA6USxwb2ludGVyY2FuY2VsOlIscG9pbnRlcm91dDpSfSx0Yj17MjpKLDM6Syw0OkwsNTpNfSx1Yj0icG9pbnRlcmRvd24iLHZiPSJwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbCI7YS5NU1BvaW50ZXJFdmVudCYmKHViPSJNU1BvaW50ZXJEb3duIix2Yj0iTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwiKSxwKHdiLGFiLHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RvcmUsYz0hMSxkPWEudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoIm1zIiwiIiksZT1zYltkXSxmPXRiW2EucG9pbnRlclR5cGVdfHxhLnBvaW50ZXJUeXBlLGc9Zj09SixoPXkoYixhLnBvaW50ZXJJZCwicG9pbnRlcklkIik7ZSZPJiYoMD09PWEuYnV0dG9ufHxnKT8wPmgmJihiLnB1c2goYSksaD1iLmxlbmd0aC0xKTplJihRfFIpJiYoYz0hMCksMD5ofHwoYltoXT1hLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGUse3BvaW50ZXJzOmIsY2hhbmdlZFBvaW50ZXJzOlthXSxwb2ludGVyVHlwZTpmLHNyY0V2ZW50OmF9KSxjJiZiLnNwbGljZShoLDEpKX19KTt2YXIgeGI9e3RvdWNoc3RhcnQ6Tyx0b3VjaG1vdmU6UCx0b3VjaGVuZDpRLHRvdWNoY2FuY2VsOlJ9LHliPSJ0b3VjaHN0YXJ0Iix6Yj0idG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwiO3AoQWIsYWIse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9eGJbYS50eXBlXTtpZihiPT09TyYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgYz1CYi5jYWxsKHRoaXMsYSxiKTtiJihRfFIpJiYwPT09Y1swXS5sZW5ndGgtY1sxXS5sZW5ndGgmJih0aGlzLnN0YXJ0ZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOmNbMF0sY2hhbmdlZFBvaW50ZXJzOmNbMV0scG9pbnRlclR5cGU6SixzcmNFdmVudDphfSl9fX0pO3ZhciBDYj17dG91Y2hzdGFydDpPLHRvdWNobW92ZTpQLHRvdWNoZW5kOlEsdG91Y2hjYW5jZWw6Un0sRGI9InRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsIjtwKEViLGFiLHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPUNiW2EudHlwZV0sYz1GYi5jYWxsKHRoaXMsYSxiKTtjJiZ0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixiLHtwb2ludGVyczpjWzBdLGNoYW5nZWRQb2ludGVyczpjWzFdLHBvaW50ZXJUeXBlOkosc3JjRXZlbnQ6YX0pfX0pLHAoR2IsYWIse2hhbmRsZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMucG9pbnRlclR5cGU9PUosZT1jLnBvaW50ZXJUeXBlPT1MO2lmKGQpdGhpcy5tb3VzZS5hbGxvdz0hMTtlbHNlIGlmKGUmJiF0aGlzLm1vdXNlLmFsbG93KXJldHVybjtiJihRfFIpJiYodGhpcy5tb3VzZS5hbGxvdz0hMCksdGhpcy5jYWxsYmFjayhhLGIsYyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnRvdWNoLmRlc3Ryb3koKSx0aGlzLm1vdXNlLmRlc3Ryb3koKX19KTt2YXIgSGI9QihmLnN0eWxlLCJ0b3VjaEFjdGlvbiIpLEliPUhiIT09ZCxKYj0iY29tcHV0ZSIsS2I9ImF1dG8iLExiPSJtYW5pcHVsYXRpb24iLE1iPSJub25lIixOYj0icGFuLXgiLE9iPSJwYW4teSI7UGIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSl7YT09SmImJihhPXRoaXMuY29tcHV0ZSgpKSxJYiYmKHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW0hiXT1hKSx0aGlzLmFjdGlvbnM9YS50b0xvd2VyQ2FzZSgpLnRyaW0oKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pfSxjb21wdXRlOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIG0odGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLGZ1bmN0aW9uKGIpe3IoYi5vcHRpb25zLmVuYWJsZSxbYl0pJiYoYT1hLmNvbmNhdChiLmdldFRvdWNoQWN0aW9uKCkpKX0pLFFiKGEuam9pbigiICIpKX0scHJldmVudERlZmF1bHRzOmZ1bmN0aW9uKGEpe2lmKCFJYil7dmFyIGI9YS5zcmNFdmVudCxjPWEub2Zmc2V0RGlyZWN0aW9uO2lmKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZClyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgMDt2YXIgZD10aGlzLmFjdGlvbnMsZT13KGQsTWIpLGY9dyhkLE9iKSxnPXcoZCxOYik7cmV0dXJuIGV8fGYmJmMmWHx8ZyYmYyZZP3RoaXMucHJldmVudFNyYyhiKTp2b2lkIDB9fSxwcmV2ZW50U3JjOmZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZD0hMCxhLnByZXZlbnREZWZhdWx0KCl9fTt2YXIgUmI9MSxTYj0yLFRiPTQsVWI9OCxWYj1VYixXYj0xNixYYj0zMjtZYi5wcm90b3R5cGU9e2RlZmF1bHRzOnt9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gbih0aGlzLm9wdGlvbnMsYSksdGhpcy5tYW5hZ2VyJiZ0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCksdGhpc30scmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtpZihsKGEsInJlY29nbml6ZVdpdGgiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuc2ltdWx0YW5lb3VzO3JldHVybiBhPV9iKGEsdGhpcyksYlthLmlkXXx8KGJbYS5pZF09YSxhLnJlY29nbml6ZVdpdGgodGhpcykpLHRoaXN9LGRyb3BSZWNvZ25pemVXaXRoOmZ1bmN0aW9uKGEpe3JldHVybiBsKGEsImRyb3BSZWNvZ25pemVXaXRoIix0aGlzKT90aGlzOihhPV9iKGEsdGhpcyksZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdLHRoaXMpfSxyZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihsKGEsInJlcXVpcmVGYWlsdXJlIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlcXVpcmVGYWlsO3JldHVybiBhPV9iKGEsdGhpcyksLTE9PT15KGIsYSkmJihiLnB1c2goYSksYS5yZXF1aXJlRmFpbHVyZSh0aGlzKSksdGhpc30sZHJvcFJlcXVpcmVGYWlsdXJlOmZ1bmN0aW9uKGEpe2lmKGwoYSwiZHJvcFJlcXVpcmVGYWlsdXJlIix0aGlzKSlyZXR1cm4gdGhpczthPV9iKGEsdGhpcyk7dmFyIGI9eSh0aGlzLnJlcXVpcmVGYWlsLGEpO3JldHVybiBiPi0xJiZ0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShiLDEpLHRoaXN9LGhhc1JlcXVpcmVGYWlsdXJlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aD4wfSxjYW5SZWNvZ25pemVXaXRoOmZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy5zaW11bHRhbmVvdXNbYS5pZF19LGVtaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChkKXtiLm1hbmFnZXIuZW1pdChiLm9wdGlvbnMuZXZlbnQrKGQ/WmIoYyk6IiIpLGEpfXZhciBiPXRoaXMsYz10aGlzLnN0YXRlO1ViPmMmJmQoITApLGQoKSxjPj1VYiYmZCghMCl9LHRyeUVtaXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FuRW1pdCgpP3RoaXMuZW1pdChhKToodGhpcy5zdGF0ZT1YYix2b2lkIDApfSxjYW5FbWl0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aDspe2lmKCEodGhpcy5yZXF1aXJlRmFpbFthXS5zdGF0ZSYoWGJ8UmIpKSlyZXR1cm4hMTthKyt9cmV0dXJuITB9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj1uKHt9LGEpO3JldHVybiByKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsYl0pPyh0aGlzLnN0YXRlJihWYnxXYnxYYikmJih0aGlzLnN0YXRlPVJiKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhiKSx0aGlzLnN0YXRlJihTYnxUYnxVYnxXYikmJnRoaXMudHJ5RW1pdChiKSx2b2lkIDApOih0aGlzLnJlc2V0KCksdGhpcy5zdGF0ZT1YYix2b2lkIDApfSxwcm9jZXNzOmZ1bmN0aW9uKCl7fSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe30scmVzZXQ6ZnVuY3Rpb24oKXt9fSxwKGFjLFliLHtkZWZhdWx0czp7cG9pbnRlcnM6MX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLnBvaW50ZXJzO3JldHVybiAwPT09Ynx8YS5wb2ludGVycy5sZW5ndGg9PT1ifSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RhdGUsYz1hLmV2ZW50VHlwZSxkPWImKFNifFRiKSxlPXRoaXMuYXR0clRlc3QoYSk7cmV0dXJuIGQmJihjJlJ8fCFlKT9ifFdiOmR8fGU/YyZRP2J8VWI6YiZTYj9ifFRiOlNiOlhifX0pLHAoYmMsYWMse2RlZmF1bHRzOntldmVudDoicGFuIix0aHJlc2hvbGQ6MTAscG9pbnRlcnM6MSxkaXJlY3Rpb246Wn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGI9W107cmV0dXJuIGEmWCYmYi5wdXNoKE9iKSxhJlkmJmIucHVzaChOYiksYn0sZGlyZWN0aW9uVGVzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz0hMCxkPWEuZGlzdGFuY2UsZT1hLmRpcmVjdGlvbixmPWEuZGVsdGFYLGc9YS5kZWx0YVk7cmV0dXJuIGUmYi5kaXJlY3Rpb258fChiLmRpcmVjdGlvbiZYPyhlPTA9PT1mP1M6MD5mP1Q6VSxjPWYhPXRoaXMucFgsZD1NYXRoLmFicyhhLmRlbHRhWCkpOihlPTA9PT1nP1M6MD5nP1Y6VyxjPWchPXRoaXMucFksZD1NYXRoLmFicyhhLmRlbHRhWSkpKSxhLmRpcmVjdGlvbj1lLGMmJmQ+Yi50aHJlc2hvbGQmJmUmYi5kaXJlY3Rpb259LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiBhYy5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYodGhpcy5zdGF0ZSZTYnx8ISh0aGlzLnN0YXRlJlNiKSYmdGhpcy5kaXJlY3Rpb25UZXN0KGEpKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnBYPWEuZGVsdGFYLHRoaXMucFk9YS5kZWx0YVk7dmFyIGI9JGIoYS5kaXJlY3Rpb24pO2ImJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGEpfX0pLHAoY2MsYWMse2RlZmF1bHRzOntldmVudDoicGluY2giLHRocmVzaG9sZDowLHBvaW50ZXJzOjJ9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW01iXX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKE1hdGguYWJzKGEuc2NhbGUtMSk+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZTYil9LGVtaXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsYSksMSE9PWEuc2NhbGUpe3ZhciBiPWEuc2NhbGU8MT8iaW4iOiJvdXQiO3RoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpfX19KSxwKGRjLFliLHtkZWZhdWx0czp7ZXZlbnQ6InByZXNzIixwb2ludGVyczoxLHRpbWU6NTAwLHRocmVzaG9sZDo1fSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltLYl19LHByb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9YS5wb2ludGVycy5sZW5ndGg9PT1iLnBvaW50ZXJzLGQ9YS5kaXN0YW5jZTxiLnRocmVzaG9sZCxlPWEuZGVsdGFUaW1lPmIudGltZTtpZih0aGlzLl9pbnB1dD1hLCFkfHwhY3x8YS5ldmVudFR5cGUmKFF8UikmJiFlKXRoaXMucmVzZXQoKTtlbHNlIGlmKGEuZXZlbnRUeXBlJk8pdGhpcy5yZXNldCgpLHRoaXMuX3RpbWVyPWsoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPVZiLHRoaXMudHJ5RW1pdCgpfSxiLnRpbWUsdGhpcyk7ZWxzZSBpZihhLmV2ZW50VHlwZSZRKXJldHVybiBWYjtyZXR1cm4gWGJ9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnN0YXRlPT09VmImJihhJiZhLmV2ZW50VHlwZSZRP3RoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCsidXAiLGEpOih0aGlzLl9pbnB1dC50aW1lU3RhbXA9aigpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpKX19KSxwKGVjLGFjLHtkZWZhdWx0czp7ZXZlbnQ6InJvdGF0ZSIsdGhyZXNob2xkOjAscG9pbnRlcnM6Mn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bTWJdfSxhdHRyVGVzdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYoTWF0aC5hYnMoYS5yb3RhdGlvbik+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZTYil9fSkscChmYyxhYyx7ZGVmYXVsdHM6e2V2ZW50OiJzd2lwZSIsdGhyZXNob2xkOjEwLHZlbG9jaXR5Oi42NSxkaXJlY3Rpb246WHxZLHBvaW50ZXJzOjF9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGJjLnByb3RvdHlwZS5nZXRUb3VjaEFjdGlvbi5jYWxsKHRoaXMpfSxhdHRyVGVzdDpmdW5jdGlvbihhKXt2YXIgYyxiPXRoaXMub3B0aW9ucy5kaXJlY3Rpb247cmV0dXJuIGImKFh8WSk/Yz1hLnZlbG9jaXR5OmImWD9jPWEudmVsb2NpdHlYOmImWSYmKGM9YS52ZWxvY2l0eVkpLHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmYiZhLmRpcmVjdGlvbiYmYS5kaXN0YW5jZT50aGlzLm9wdGlvbnMudGhyZXNob2xkJiZpKGMpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmYS5ldmVudFR5cGUmUX0sZW1pdDpmdW5jdGlvbihhKXt2YXIgYj0kYihhLmRpcmVjdGlvbik7YiYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSksdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LGEpfX0pLHAoZ2MsWWIse2RlZmF1bHRzOntldmVudDoidGFwIixwb2ludGVyczoxLHRhcHM6MSxpbnRlcnZhbDozMDAsdGltZToyNTAsdGhyZXNob2xkOjIscG9zVGhyZXNob2xkOjEwfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltMYl19LHByb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9YS5wb2ludGVycy5sZW5ndGg9PT1iLnBvaW50ZXJzLGQ9YS5kaXN0YW5jZTxiLnRocmVzaG9sZCxlPWEuZGVsdGFUaW1lPGIudGltZTtpZih0aGlzLnJlc2V0KCksYS5ldmVudFR5cGUmTyYmMD09PXRoaXMuY291bnQpcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtpZihkJiZlJiZjKXtpZihhLmV2ZW50VHlwZSE9USlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBmPXRoaXMucFRpbWU/YS50aW1lU3RhbXAtdGhpcy5wVGltZTxiLmludGVydmFsOiEwLGc9IXRoaXMucENlbnRlcnx8a2IodGhpcy5wQ2VudGVyLGEuY2VudGVyKTxiLnBvc1RocmVzaG9sZDt0aGlzLnBUaW1lPWEudGltZVN0YW1wLHRoaXMucENlbnRlcj1hLmNlbnRlcixnJiZmP3RoaXMuY291bnQrPTE6dGhpcy5jb3VudD0xLHRoaXMuX2lucHV0PWE7dmFyIGg9dGhpcy5jb3VudCViLnRhcHM7aWYoMD09PWgpcmV0dXJuIHRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCk/KHRoaXMuX3RpbWVyPWsoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPVZiLHRoaXMudHJ5RW1pdCgpfSxiLmludGVydmFsLHRoaXMpLFNiKTpWYn1yZXR1cm4gWGJ9LGZhaWxUaW1lb3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVyPWsoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPVhifSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsdGhpcyksWGJ9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbigpe3RoaXMuc3RhdGU9PVZiJiYodGhpcy5faW5wdXQudGFwQ291bnQ9dGhpcy5jb3VudCx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKX19KSxoYy5WRVJTSU9OPSIyLjAuNCIsaGMuZGVmYXVsdHM9e2RvbUV2ZW50czohMSx0b3VjaEFjdGlvbjpKYixlbmFibGU6ITAsaW5wdXRUYXJnZXQ6bnVsbCxpbnB1dENsYXNzOm51bGwscHJlc2V0OltbZWMse2VuYWJsZTohMX1dLFtjYyx7ZW5hYmxlOiExfSxbInJvdGF0ZSJdXSxbZmMse2RpcmVjdGlvbjpYfV0sW2JjLHtkaXJlY3Rpb246WH0sWyJzd2lwZSJdXSxbZ2NdLFtnYyx7ZXZlbnQ6ImRvdWJsZXRhcCIsdGFwczoyfSxbInRhcCJdXSxbZGNdXSxjc3NQcm9wczp7dXNlclNlbGVjdDoiZGVmYXVsdCIsdG91Y2hTZWxlY3Q6Im5vbmUiLHRvdWNoQ2FsbG91dDoibm9uZSIsY29udGVudFpvb21pbmc6Im5vbmUiLHVzZXJEcmFnOiJub25lIix0YXBIaWdobGlnaHRDb2xvcjoicmdiYSgwLDAsMCwwKSJ9fTt2YXIgaWM9MSxqYz0yO2tjLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe3JldHVybiBuKHRoaXMub3B0aW9ucyxhKSxhLnRvdWNoQWN0aW9uJiZ0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGEuaW5wdXRUYXJnZXQmJih0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmlucHV0LnRhcmdldD1hLmlucHV0VGFyZ2V0LHRoaXMuaW5wdXQuaW5pdCgpKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuc2Vzc2lvbi5zdG9wcGVkPWE/amM6aWN9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlc3Npb247aWYoIWIuc3RvcHBlZCl7dGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoYSk7dmFyIGMsZD10aGlzLnJlY29nbml6ZXJzLGU9Yi5jdXJSZWNvZ25pemVyOyghZXx8ZSYmZS5zdGF0ZSZWYikmJihlPWIuY3VyUmVjb2duaXplcj1udWxsKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoOyljPWRbZl0sYi5zdG9wcGVkPT09amN8fGUmJmMhPWUmJiFjLmNhblJlY29nbml6ZVdpdGgoZSk/Yy5yZXNldCgpOmMucmVjb2duaXplKGEpLCFlJiZjLnN0YXRlJihTYnxUYnxVYikmJihlPWIuY3VyUmVjb2duaXplcj1jKSxmKyt9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFliKXJldHVybiBhO2Zvcih2YXIgYj10aGlzLnJlY29nbml6ZXJzLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdLm9wdGlvbnMuZXZlbnQ9PWEpcmV0dXJuIGJbY107cmV0dXJuIG51bGx9LGFkZDpmdW5jdGlvbihhKXtpZihsKGEsImFkZCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5nZXQoYS5vcHRpb25zLmV2ZW50KTtyZXR1cm4gYiYmdGhpcy5yZW1vdmUoYiksdGhpcy5yZWNvZ25pemVycy5wdXNoKGEpLGEubWFuYWdlcj10aGlzLHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksYX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGwoYSwicmVtb3ZlIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlY29nbml6ZXJzO3JldHVybiBhPXRoaXMuZ2V0KGEpLGIuc3BsaWNlKHkoYixhKSwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gbSh4KGEpLGZ1bmN0aW9uKGEpe2NbYV09Y1thXXx8W10sY1thXS5wdXNoKGIpfSksdGhpc30sb2ZmOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gbSh4KGEpLGZ1bmN0aW9uKGEpe2I/Y1thXS5zcGxpY2UoeShjW2FdLGIpLDEpOmRlbGV0ZSBjW2FdfSksdGhpc30sZW1pdDpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW9ucy5kb21FdmVudHMmJm1jKGEsYik7dmFyIGM9dGhpcy5oYW5kbGVyc1thXSYmdGhpcy5oYW5kbGVyc1thXS5zbGljZSgpO2lmKGMmJmMubGVuZ3RoKXtiLnR5cGU9YSxiLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpfTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOyljW2RdKGIpLGQrK319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJmxjKHRoaXMsITEpLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsfX0sbihoYyx7SU5QVVRfU1RBUlQ6TyxJTlBVVF9NT1ZFOlAsSU5QVVRfRU5EOlEsSU5QVVRfQ0FOQ0VMOlIsU1RBVEVfUE9TU0lCTEU6UmIsU1RBVEVfQkVHQU46U2IsU1RBVEVfQ0hBTkdFRDpUYixTVEFURV9FTkRFRDpVYixTVEFURV9SRUNPR05JWkVEOlZiLFNUQVRFX0NBTkNFTExFRDpXYixTVEFURV9GQUlMRUQ6WGIsRElSRUNUSU9OX05PTkU6UyxESVJFQ1RJT05fTEVGVDpULERJUkVDVElPTl9SSUdIVDpVLERJUkVDVElPTl9VUDpWLERJUkVDVElPTl9ET1dOOlcsRElSRUNUSU9OX0hPUklaT05UQUw6WCxESVJFQ1RJT05fVkVSVElDQUw6WSxESVJFQ1RJT05fQUxMOlosTWFuYWdlcjprYyxJbnB1dDphYixUb3VjaEFjdGlvbjpQYixUb3VjaElucHV0OkViLE1vdXNlSW5wdXQ6cmIsUG9pbnRlckV2ZW50SW5wdXQ6d2IsVG91Y2hNb3VzZUlucHV0OkdiLFNpbmdsZVRvdWNoSW5wdXQ6QWIsUmVjb2duaXplcjpZYixBdHRyUmVjb2duaXplcjphYyxUYXA6Z2MsUGFuOmJjLFN3aXBlOmZjLFBpbmNoOmNjLFJvdGF0ZTplYyxQcmVzczpkYyxvbjp0LG9mZjp1LGVhY2g6bSxtZXJnZTpvLGV4dGVuZDpuLGluaGVyaXQ6cCxiaW5kRm46cSxwcmVmaXhlZDpCfSksdHlwZW9mIGRlZmluZT09ZyYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gaGN9KToidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9aGM6YVtjXT1oY30od2luZG93LGRvY3VtZW50LCJIYW1tZXIiKTs7KGZ1bmN0aW9uKGZhY3RvcnkpIHsKICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgICAgICBkZWZpbmUoWydqcXVlcnknLCAnaGFtbWVyanMnXSwgZmFjdG9yeSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHJlcXVpcmUoJ2hhbW1lcmpzJykpOwogICAgfSBlbHNlIHsKICAgICAgICBmYWN0b3J5KGpRdWVyeSwgSGFtbWVyKTsKICAgIH0KfShmdW5jdGlvbigkLCBIYW1tZXIpIHsKICAgIGZ1bmN0aW9uIGhhbW1lcmlmeShlbCwgb3B0aW9ucykgewogICAgICAgIHZhciAkZWwgPSAkKGVsKTsKICAgICAgICBpZighJGVsLmRhdGEoImhhbW1lciIpKSB7CiAgICAgICAgICAgICRlbC5kYXRhKCJoYW1tZXIiLCBuZXcgSGFtbWVyKCRlbFswXSwgb3B0aW9ucykpOwogICAgICAgIH0KICAgIH0KCiAgICAkLmZuLmhhbW1lciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBoYW1tZXJpZnkodGhpcywgb3B0aW9ucyk7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8vIGV4dGVuZCB0aGUgZW1pdCBtZXRob2QgdG8gYWxzbyB0cmlnZ2VyIGpRdWVyeSBldmVudHMKICAgIEhhbW1lci5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0ID0gKGZ1bmN0aW9uKG9yaWdpbmFsRW1pdCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7CiAgICAgICAgICAgIG9yaWdpbmFsRW1pdC5jYWxsKHRoaXMsIHR5cGUsIGRhdGEpOwogICAgICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih7CiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgZ2VzdHVyZTogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgfSkoSGFtbWVyLk1hbmFnZXIucHJvdG90eXBlLmVtaXQpOwp9KSk7CjsvLyBSZXF1aXJlZCBmb3IgTWV0ZW9yIHBhY2thZ2UsIHRoZSB1c2Ugb2Ygd2luZG93IHByZXZlbnRzIGV4cG9ydCBieSBNZXRlb3IKKGZ1bmN0aW9uKHdpbmRvdyl7CiAgaWYod2luZG93LlBhY2thZ2UpewogICAgTWF0ZXJpYWxpemUgPSB7fTsKICB9IGVsc2UgewogICAgd2luZG93Lk1hdGVyaWFsaXplID0ge307CiAgfQp9KSh3aW5kb3cpOwoKCi8qCiAqIHJhZi5qcwogKiBodHRwczovL2dpdGh1Yi5jb20vbmdyeW1hbi9yYWYuanMKICoKICogb3JpZ2luYWwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlcgogKiBpbnNwaXJlZCBmcm9tIHBhdWxfaXJpc2ggZ2lzdCBhbmQgcG9zdAogKgogKiBDb3B5cmlnaHQgKGMpIDIwMTMgbmdyeW1hbgogKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLwooZnVuY3Rpb24od2luZG93KSB7CiAgdmFyIGxhc3RUaW1lID0gMCwKICAgIHZlbmRvcnMgPSBbJ3dlYmtpdCcsICdtb3onXSwKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUsCiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSwKICAgIGkgPSB2ZW5kb3JzLmxlbmd0aDsKCiAgLy8gdHJ5IHRvIHVuLXByZWZpeCBleGlzdGluZyByYWYKICB3aGlsZSAoLS1pID49IDAgJiYgIXJlcXVlc3RBbmltYXRpb25GcmFtZSkgewogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbaV0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW2ldICsgJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddOwogIH0KCiAgLy8gcG9seWZpbGwgd2l0aCBzZXRUaW1lb3V0IGZhbGxiYWNrCiAgLy8gaGVhdmlseSBpbnNwaXJlZCBmcm9tIEBkYXJpdXMgZ2lzdCBtb2Q6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC8xNTc5NjcxI2NvbW1lbnQtODM3OTQ1CiAgaWYgKCFyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgIWNhbmNlbEFuaW1hdGlvbkZyYW1lKSB7CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICB2YXIgbm93ID0gK0RhdGUubm93KCksCiAgICAgICAgbmV4dFRpbWUgPSBNYXRoLm1heChsYXN0VGltZSArIDE2LCBub3cpOwogICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBjYWxsYmFjayhsYXN0VGltZSA9IG5leHRUaW1lKTsKICAgICAgfSwgbmV4dFRpbWUgLSBub3cpOwogICAgfTsKCiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IGNsZWFyVGltZW91dDsKICB9CgogIC8vIGV4cG9ydCB0byB3aW5kb3cKICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lOwogIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGNhbmNlbEFuaW1hdGlvbkZyYW1lOwp9KHdpbmRvdykpOwoKCi8qKgogKiBHZW5lcmF0ZSBhcHByb3hpbWF0ZWQgc2VsZWN0b3Igc3RyaW5nIGZvciBhIGpRdWVyeSBvYmplY3QKICogQHBhcmFtIHtqUXVlcnl9IG9iaiAgalF1ZXJ5IG9iamVjdCB0byBiZSBwYXJzZWQKICogQHJldHVybnMge3N0cmluZ30KICovCk1hdGVyaWFsaXplLm9iamVjdFNlbGVjdG9yU3RyaW5nID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIHRhZ1N0ciA9IG9iai5wcm9wKCd0YWdOYW1lJykgfHwgJyc7CiAgdmFyIGlkU3RyID0gb2JqLmF0dHIoJ2lkJykgfHwgJyc7CiAgdmFyIGNsYXNzU3RyID0gb2JqLmF0dHIoJ2NsYXNzJykgfHwgJyc7CiAgcmV0dXJuICh0YWdTdHIgKyBpZFN0ciArIGNsYXNzU3RyKS5yZXBsYWNlKC9ccy9nLCcnKTsKfTsKCgovLyBVbmlxdWUgUmFuZG9tIElECk1hdGVyaWFsaXplLmd1aWQgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gczQoKSB7CiAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkKICAgICAgLnRvU3RyaW5nKDE2KQogICAgICAuc3Vic3RyaW5nKDEpOwogIH0KICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArCiAgICAgICAgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTsKICB9Owp9KSgpOwoKLyoqCiAqIEVzY2FwZXMgaGFzaCBmcm9tIHNwZWNpYWwgY2hhcmFjdGVycwogKiBAcGFyYW0ge3N0cmluZ30gaGFzaCAgU3RyaW5nIHJldHVybmVkIGZyb20gdGhpcy5oYXNoCiAqIEByZXR1cm5zIHtzdHJpbmd9CiAqLwpNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoID0gZnVuY3Rpb24oaGFzaCkgewogIHJldHVybiBoYXNoLnJlcGxhY2UoIC8oOnxcLnxcW3xcXXwsfD0pL2csICJcXCQxIiApOwp9OwoKTWF0ZXJpYWxpemUuZWxlbWVudE9yUGFyZW50SXNGaXhlZCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgJGNoZWNrRWxlbWVudHMgPSAkZWxlbWVudC5hZGQoJGVsZW1lbnQucGFyZW50cygpKTsKICAgIHZhciBpc0ZpeGVkID0gZmFsc2U7CiAgICAkY2hlY2tFbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgaWYgKCQodGhpcykuY3NzKCJwb3NpdGlvbiIpID09PSAiZml4ZWQiKSB7CiAgICAgICAgICAgIGlzRml4ZWQgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gaXNGaXhlZDsKfTsKCgovKioKICogR2V0IHRpbWUgaW4gbXMKICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRQogKiBAdHlwZSB7ZnVuY3Rpb259CiAqIEByZXR1cm4ge251bWJlcn0KICovCnZhciBnZXRUaW1lID0gKERhdGUubm93IHx8IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7Cn0pOwoKCi8qKgogKiBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2UKICogZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuCiAqIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjsKICogYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3MKICogYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uCiAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0UKICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuYwogKiBAcGFyYW0ge251bWJlcn0gd2FpdAogKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMKICogQHJldHVybnMge0Z1bmN0aW9ufQogKi8KTWF0ZXJpYWxpemUudGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7CiAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDsKICB2YXIgdGltZW91dCA9IG51bGw7CiAgdmFyIHByZXZpb3VzID0gMDsKICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pOwogIHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHsKICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBnZXRUaW1lKCk7CiAgICB0aW1lb3V0ID0gbnVsbDsKICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7CiAgfTsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIG5vdyA9IGdldFRpbWUoKTsKICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7CiAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7CiAgICBjb250ZXh0ID0gdGhpczsKICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICBpZiAocmVtYWluaW5nIDw9IDApIHsKICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICB0aW1lb3V0ID0gbnVsbDsKICAgICAgcHJldmlvdXMgPSBub3c7CiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDsKICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHsKICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07Cn07CgoKLy8gVmVsb2NpdHkgaGFzIGNvbmZsaWN0cyB3aGVuIGxvYWRlZCB3aXRoIGpRdWVyeSwgdGhpcyB3aWxsIGNoZWNrIGZvciBpdAovLyBGaXJzdCwgY2hlY2sgaWYgaW4gbm9Db25mbGljdCBtb2RlCnZhciBWZWw7CmlmIChqUXVlcnkpIHsKICBWZWwgPSBqUXVlcnkuVmVsb2NpdHk7Cn0gZWxzZSBpZiAoJCkgewogIFZlbCA9ICQuVmVsb2NpdHk7Cn0gZWxzZSB7CiAgVmVsID0gVmVsb2NpdHk7Cn0KOyhmdW5jdGlvbiAoJCkgewogICQuZm4uY29sbGFwc2libGUgPSBmdW5jdGlvbihvcHRpb25zLCBtZXRob2RQYXJhbSkgewogICAgdmFyIGRlZmF1bHRzID0gewogICAgICBhY2NvcmRpb246IHVuZGVmaW5lZCwKICAgICAgb25PcGVuOiB1bmRlZmluZWQsCiAgICAgIG9uQ2xvc2U6IHVuZGVmaW5lZAogICAgfTsKCiAgICB2YXIgbWV0aG9kTmFtZSA9IG9wdGlvbnM7CiAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpOwoKCiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKCiAgICAgIHZhciAkcGFuZWxfaGVhZGVycyA9ICQodGhpcykuZmluZCgnPiBsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXInKTsKCiAgICAgIHZhciBjb2xsYXBzaWJsZV90eXBlID0gJHRoaXMuZGF0YSgiY29sbGFwc2libGUiKTsKCiAgICAgIC8qKioqKioqKioqKioqKioqCiAgICAgIEhlbHBlciBGdW5jdGlvbnMKICAgICAgKioqKioqKioqKioqKioqKi8KCiAgICAgIC8vIEFjY29yZGlvbiBPcGVuCiAgICAgIGZ1bmN0aW9uIGFjY29yZGlvbk9wZW4ob2JqZWN0KSB7CiAgICAgICAgJHBhbmVsX2hlYWRlcnMgPSAkdGhpcy5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpOwogICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7CiAgICAgICAgICBvYmplY3QucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgfQogICAgICAgIGlmIChvYmplY3QucGFyZW50KCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKXsKICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlRG93bih7IGR1cmF0aW9uOiAzNTAsIGVhc2luZzogImVhc2VPdXRRdWFydCIsIHF1ZXVlOiBmYWxzZSwgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7fX0pOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSxmYWxzZSkuc2xpZGVVcCh7IGR1cmF0aW9uOiAzNTAsIGVhc2luZzogImVhc2VPdXRRdWFydCIsIHF1ZXVlOiBmYWxzZSwgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7fX0pOwogICAgICAgIH0KCiAgICAgICAgJHBhbmVsX2hlYWRlcnMubm90KG9iamVjdCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKCiAgICAgICAgLy8gQ2xvc2UgcHJldmlvdXNseSBvcGVuIGFjY29yZGlvbiBlbGVtZW50cy4KICAgICAgICAkcGFuZWxfaGVhZGVycy5ub3Qob2JqZWN0KS5wYXJlbnQoKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOnZpc2libGUnKSkgewogICAgICAgICAgICAkKHRoaXMpLnNsaWRlVXAoewogICAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsCiAgICAgICAgICAgICAgZWFzaW5nOiAiZWFzZU91dFF1YXJ0IiwKICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsCiAgICAgICAgICAgICAgY29tcGxldGU6CiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTsKICAgICAgICAgICAgICAgICAgZXhlY0NhbGxiYWNrcygkKHRoaXMpLnNpYmxpbmdzKCcuY29sbGFwc2libGUtaGVhZGVyJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gRXhwYW5kYWJsZSBPcGVuCiAgICAgIGZ1bmN0aW9uIGV4cGFuZGFibGVPcGVuKG9iamVjdCkgewogICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7CiAgICAgICAgICBvYmplY3QucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgfQogICAgICAgIGlmIChvYmplY3QucGFyZW50KCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKXsKICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlRG93bih7IGR1cmF0aW9uOiAzNTAsIGVhc2luZzogImVhc2VPdXRRdWFydCIsIHF1ZXVlOiBmYWxzZSwgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7fX0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlVXAoeyBkdXJhdGlvbjogMzUwLCBlYXNpbmc6ICJlYXNlT3V0UXVhcnQiLCBxdWV1ZTogZmFsc2UsIGNvbXBsZXRlOiBmdW5jdGlvbigpIHskKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO319KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIE9wZW4gY29sbGFwc2libGUuIG9iamVjdDogLmNvbGxhcHNpYmxlLWhlYWRlcgogICAgICBmdW5jdGlvbiBjb2xsYXBzaWJsZU9wZW4ob2JqZWN0LCBub1RvZ2dsZSkgewogICAgICAgIGlmICghbm9Ub2dnbGUpIHsKICAgICAgICAgIG9iamVjdC50b2dnbGVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5hY2NvcmRpb24gfHwgY29sbGFwc2libGVfdHlwZSA9PT0gImFjY29yZGlvbiIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb24KICAgICAgICAgIGFjY29yZGlvbk9wZW4ob2JqZWN0KTsKICAgICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgRXhwYW5kYWJsZXMKICAgICAgICAgIGV4cGFuZGFibGVPcGVuKG9iamVjdCk7CiAgICAgICAgfQoKICAgICAgICBleGVjQ2FsbGJhY2tzKG9iamVjdCk7CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSBjYWxsYmFja3MKICAgICAgZnVuY3Rpb24gZXhlY0NhbGxiYWNrcyhvYmplY3QpIHsKICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uT3BlbikgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgb3B0aW9ucy5vbk9wZW4uY2FsbCh0aGlzLCBvYmplY3QucGFyZW50KCkpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMub25DbG9zZSkgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgb3B0aW9ucy5vbkNsb3NlLmNhbGwodGhpcywgb2JqZWN0LnBhcmVudCgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiBDaGVjayBpZiBvYmplY3QgaXMgY2hpbGRyZW4gb2YgcGFuZWwgaGVhZGVyCiAgICAgICAqIEBwYXJhbSAge09iamVjdH0gIG9iamVjdCBKcXVlcnkgb2JqZWN0CiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgaXQgaXMgY2hpbGRyZW4KICAgICAgICovCiAgICAgIGZ1bmN0aW9uIGlzQ2hpbGRyZW5PZlBhbmVsSGVhZGVyKG9iamVjdCkgewoKICAgICAgICB2YXIgcGFuZWxIZWFkZXIgPSBnZXRQYW5lbEhlYWRlcihvYmplY3QpOwoKICAgICAgICByZXR1cm4gcGFuZWxIZWFkZXIubGVuZ3RoID4gMDsKICAgICAgfQoKICAgICAgLyoqCiAgICAgICAqIEdldCBwYW5lbCBoZWFkZXIgZnJvbSBhIGNoaWxkcmVuIGVsZW1lbnQKICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgSnF1ZXJ5IG9iamVjdAogICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHBhbmVsIGhlYWRlciBvYmplY3QKICAgICAgICovCiAgICAgIGZ1bmN0aW9uIGdldFBhbmVsSGVhZGVyKG9iamVjdCkgewoKICAgICAgICByZXR1cm4gb2JqZWN0LmNsb3Nlc3QoJ2xpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpOwogICAgICB9CgoKICAgICAgLy8gVHVybiBvZmYgYW55IGV4aXN0aW5nIGV2ZW50IGhhbmRsZXJzCiAgICAgIGZ1bmN0aW9uIHJlbW92ZUV2ZW50SGFuZGxlcnMoKSB7CiAgICAgICAgJHRoaXMub2ZmKCdjbGljay5jb2xsYXBzZScsICc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpOwogICAgICB9CgogICAgICAvKioqKiogIEVuZCBIZWxwZXIgRnVuY3Rpb25zICAqKioqKi8KCgogICAgICAvLyBNZXRob2RzCiAgICAgIGlmIChtZXRob2ROYW1lID09PSAnZGVzdHJveScpIHsKICAgICAgICByZW1vdmVFdmVudEhhbmRsZXJzKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKG1ldGhvZFBhcmFtID49IDAgJiYKICAgICAgICAgIG1ldGhvZFBhcmFtIDwgJHBhbmVsX2hlYWRlcnMubGVuZ3RoKSB7CiAgICAgICAgdmFyICRjdXJyX2hlYWRlciA9ICRwYW5lbF9oZWFkZXJzLmVxKG1ldGhvZFBhcmFtKTsKICAgICAgICBpZiAoJGN1cnJfaGVhZGVyLmxlbmd0aCAmJgogICAgICAgICAgICAobWV0aG9kTmFtZSA9PT0gJ29wZW4nIHx8CiAgICAgICAgICAgIChtZXRob2ROYW1lID09PSAnY2xvc2UnICYmCiAgICAgICAgICAgICRjdXJyX2hlYWRlci5oYXNDbGFzcygnYWN0aXZlJykpKSkgewogICAgICAgICAgY29sbGFwc2libGVPcGVuKCRjdXJyX2hlYWRlcik7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKCiAgICAgIHJlbW92ZUV2ZW50SGFuZGxlcnMoKTsKCgogICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW4KICAgICAgJHRoaXMub24oJ2NsaWNrLmNvbGxhcHNlJywgJz4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBlbGVtZW50ID0gJChlLnRhcmdldCk7CgogICAgICAgIGlmIChpc0NoaWxkcmVuT2ZQYW5lbEhlYWRlcihlbGVtZW50KSkgewogICAgICAgICAgZWxlbWVudCA9IGdldFBhbmVsSGVhZGVyKGVsZW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgY29sbGFwc2libGVPcGVuKGVsZW1lbnQpOwogICAgICB9KTsKCgogICAgICAvLyBPcGVuIGZpcnN0IGFjdGl2ZQogICAgICBpZiAob3B0aW9ucy5hY2NvcmRpb24gfHwgY29sbGFwc2libGVfdHlwZSA9PT0gImFjY29yZGlvbiIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb24KICAgICAgICBjb2xsYXBzaWJsZU9wZW4oJHBhbmVsX2hlYWRlcnMuZmlsdGVyKCcuYWN0aXZlJykuZmlyc3QoKSwgdHJ1ZSk7CgogICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgRXhwYW5kYWJsZXMKICAgICAgICAkcGFuZWxfaGVhZGVycy5maWx0ZXIoJy5hY3RpdmUnKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgY29sbGFwc2libGVPcGVuKCQodGhpcyksIHRydWUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgfSk7CiAgfTsKCiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgICQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKCk7CiAgfSk7Cn0oIGpRdWVyeSApKTs7KGZ1bmN0aW9uICgkKSB7CgogIC8vIEFkZCBwb3NpYmlsaXR5IHRvIHNjcm9sbCB0byBzZWxlY3RlZCBvcHRpb24KICAvLyB1c2VmdWxsIGZvciBzZWxlY3QgZm9yIGV4YW1wbGUKICAkLmZuLnNjcm9sbFRvID0gZnVuY3Rpb24oZWxlbSkgewogICAgJCh0aGlzKS5zY3JvbGxUb3AoJCh0aGlzKS5zY3JvbGxUb3AoKSAtICQodGhpcykub2Zmc2V0KCkudG9wICsgJChlbGVtKS5vZmZzZXQoKS50b3ApOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgJC5mbi5kcm9wZG93biA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgIGluRHVyYXRpb246IDMwMCwKICAgICAgb3V0RHVyYXRpb246IDIyNSwKICAgICAgY29uc3RyYWluV2lkdGg6IHRydWUsIC8vIENvbnN0cmFpbnMgd2lkdGggb2YgZHJvcGRvd24gdG8gdGhlIGFjdGl2YXRvcgogICAgICBob3ZlcjogZmFsc2UsCiAgICAgIGd1dHRlcjogMCwgLy8gU3BhY2luZyBmcm9tIGVkZ2UKICAgICAgYmVsb3dPcmlnaW46IGZhbHNlLAogICAgICBhbGlnbm1lbnQ6ICdsZWZ0JywKICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZQogICAgfTsKCiAgICAvLyBPcGVuIGRyb3Bkb3duLgogICAgaWYgKG9wdGlvbnMgPT09ICJvcGVuIikgewogICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJyk7CiAgICAgIH0pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gQ2xvc2UgZHJvcGRvd24uCiAgICBpZiAob3B0aW9ucyA9PT0gImNsb3NlIikgewogICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbG9zZScpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHRoaXMuZWFjaChmdW5jdGlvbigpewogICAgICB2YXIgb3JpZ2luID0gJCh0aGlzKTsKICAgICAgdmFyIGN1cnJfb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7CiAgICAgIHZhciBpc0ZvY3VzZWQgPSBmYWxzZTsKCiAgICAgIC8vIERyb3Bkb3duIG1lbnUKICAgICAgdmFyIGFjdGl2YXRlcyA9ICQoIiMiKyBvcmlnaW4uYXR0cignZGF0YS1hY3RpdmF0ZXMnKSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkgewogICAgICAgIGlmIChvcmlnaW4uZGF0YSgnaW5kdXJhdGlvbicpICE9PSB1bmRlZmluZWQpCiAgICAgICAgICBjdXJyX29wdGlvbnMuaW5EdXJhdGlvbiA9IG9yaWdpbi5kYXRhKCdpbmR1cmF0aW9uJyk7CiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdvdXRkdXJhdGlvbicpICE9PSB1bmRlZmluZWQpCiAgICAgICAgICBjdXJyX29wdGlvbnMub3V0RHVyYXRpb24gPSBvcmlnaW4uZGF0YSgnb3V0ZHVyYXRpb24nKTsKICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJykgIT09IHVuZGVmaW5lZCkKICAgICAgICAgIGN1cnJfb3B0aW9ucy5jb25zdHJhaW5XaWR0aCA9IG9yaWdpbi5kYXRhKCdjb25zdHJhaW53aWR0aCcpOwogICAgICAgIGlmIChvcmlnaW4uZGF0YSgnaG92ZXInKSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgY3Vycl9vcHRpb25zLmhvdmVyID0gb3JpZ2luLmRhdGEoJ2hvdmVyJyk7CiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdndXR0ZXInKSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgY3Vycl9vcHRpb25zLmd1dHRlciA9IG9yaWdpbi5kYXRhKCdndXR0ZXInKTsKICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2JlbG93b3JpZ2luJykgIT09IHVuZGVmaW5lZCkKICAgICAgICAgIGN1cnJfb3B0aW9ucy5iZWxvd09yaWdpbiA9IG9yaWdpbi5kYXRhKCdiZWxvd29yaWdpbicpOwogICAgICAgIGlmIChvcmlnaW4uZGF0YSgnYWxpZ25tZW50JykgIT09IHVuZGVmaW5lZCkKICAgICAgICAgIGN1cnJfb3B0aW9ucy5hbGlnbm1lbnQgPSBvcmlnaW4uZGF0YSgnYWxpZ25tZW50Jyk7CiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdzdG9wcHJvcGFnYXRpb24nKSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgY3Vycl9vcHRpb25zLnN0b3BQcm9wYWdhdGlvbiA9IG9yaWdpbi5kYXRhKCdzdG9wcHJvcGFnYXRpb24nKTsKICAgICAgfQoKICAgICAgdXBkYXRlT3B0aW9ucygpOwoKICAgICAgLy8gQXR0YWNoIGRyb3Bkb3duIHRvIGl0cyBhY3RpdmF0b3IKICAgICAgb3JpZ2luLmFmdGVyKGFjdGl2YXRlcyk7CgogICAgICAvKgogICAgICAgIEhlbHBlciBmdW5jdGlvbiB0byBwb3NpdGlvbiBhbmQgcmVzaXplIGRyb3Bkb3duLgogICAgICAgIFVzZWQgaW4gaG92ZXIgYW5kIGNsaWNrIGhhbmRsZXIuCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIHBsYWNlRHJvcGRvd24oZXZlbnRUeXBlKSB7CiAgICAgICAgLy8gQ2hlY2sgZm9yIHNpbXVsdGFuZW91cyBmb2N1cyBhbmQgY2xpY2sgZXZlbnRzLgogICAgICAgIGlmIChldmVudFR5cGUgPT09ICdmb2N1cycpIHsKICAgICAgICAgIGlzRm9jdXNlZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBodG1sIGRhdGEgYXR0cmlidXRlcwogICAgICAgIHVwZGF0ZU9wdGlvbnMoKTsKCiAgICAgICAgLy8gU2V0IERyb3Bkb3duIHN0YXRlCiAgICAgICAgYWN0aXZhdGVzLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICBvcmlnaW4uYWRkQ2xhc3MoJ2FjdGl2ZScpOwoKICAgICAgICAvLyBDb25zdHJhaW4gd2lkdGgKICAgICAgICBpZiAoY3Vycl9vcHRpb25zLmNvbnN0cmFpbldpZHRoID09PSB0cnVlKSB7CiAgICAgICAgICBhY3RpdmF0ZXMuY3NzKCd3aWR0aCcsIG9yaWdpbi5vdXRlcldpZHRoKCkpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWN0aXZhdGVzLmNzcygnd2hpdGUtc3BhY2UnLCAnbm93cmFwJyk7CiAgICAgICAgfQoKICAgICAgICAvLyBPZmZzY3JlZW4gZGV0ZWN0aW9uCiAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICB2YXIgb3JpZ2luSGVpZ2h0ID0gb3JpZ2luLmlubmVySGVpZ2h0KCk7CiAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdDsKICAgICAgICB2YXIgb2Zmc2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKTsKICAgICAgICB2YXIgY3VyckFsaWdubWVudCA9IGN1cnJfb3B0aW9ucy5hbGlnbm1lbnQ7CiAgICAgICAgdmFyIGd1dHRlclNwYWNpbmcgPSAwOwogICAgICAgIHZhciBsZWZ0UG9zaXRpb24gPSAwOwoKICAgICAgICAvLyBCZWxvdyBPcmlnaW4KICAgICAgICB2YXIgdmVydGljYWxPZmZzZXQgPSAwOwogICAgICAgIGlmIChjdXJyX29wdGlvbnMuYmVsb3dPcmlnaW4gPT09IHRydWUpIHsKICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gb3JpZ2luSGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgLy8gQ2hlY2sgZm9yIHNjcm9sbGluZyBwb3NpdGlvbmVkIGNvbnRhaW5lci4KICAgICAgICB2YXIgc2Nyb2xsWU9mZnNldCA9IDA7CiAgICAgICAgdmFyIHNjcm9sbFhPZmZzZXQgPSAwOwogICAgICAgIHZhciB3cmFwcGVyID0gb3JpZ2luLnBhcmVudCgpOwogICAgICAgIGlmICghd3JhcHBlci5pcygnYm9keScpKSB7CiAgICAgICAgICBpZiAod3JhcHBlclswXS5zY3JvbGxIZWlnaHQgPiB3cmFwcGVyWzBdLmNsaWVudEhlaWdodCkgewogICAgICAgICAgICBzY3JvbGxZT2Zmc2V0ID0gd3JhcHBlclswXS5zY3JvbGxUb3A7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAod3JhcHBlclswXS5zY3JvbGxXaWR0aCA+IHdyYXBwZXJbMF0uY2xpZW50V2lkdGgpIHsKICAgICAgICAgICAgc2Nyb2xsWE9mZnNldCA9IHdyYXBwZXJbMF0uc2Nyb2xsTGVmdDsKICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICBpZiAob2Zmc2V0TGVmdCArIGFjdGl2YXRlcy5pbm5lcldpZHRoKCkgPiAkKHdpbmRvdykud2lkdGgoKSkgewogICAgICAgICAgLy8gRHJvcGRvd24gZ29lcyBwYXN0IHNjcmVlbiBvbiByaWdodCwgZm9yY2UgcmlnaHQgYWxpZ25tZW50CiAgICAgICAgICBjdXJyQWxpZ25tZW50ID0gJ3JpZ2h0JzsKCiAgICAgICAgfSBlbHNlIGlmIChvZmZzZXRMZWZ0IC0gYWN0aXZhdGVzLmlubmVyV2lkdGgoKSArIG9yaWdpbi5pbm5lcldpZHRoKCkgPCAwKSB7CiAgICAgICAgICAvLyBEcm9wZG93biBnb2VzIHBhc3Qgc2NyZWVuIG9uIGxlZnQsIGZvcmNlIGxlZnQgYWxpZ25tZW50CiAgICAgICAgICBjdXJyQWxpZ25tZW50ID0gJ2xlZnQnOwogICAgICAgIH0KICAgICAgICAvLyBWZXJ0aWNhbCBib3R0b20gb2Zmc2NyZWVuIGRldGVjdGlvbgogICAgICAgIGlmIChvZmZzZXRUb3AgKyBhY3RpdmF0ZXMuaW5uZXJIZWlnaHQoKSA+IHdpbmRvd0hlaWdodCkgewogICAgICAgICAgLy8gSWYgZ29pbmcgdXB3YXJkcyBzdGlsbCBnb2VzIG9mZnNjcmVlbiwganVzdCBjcm9wIGhlaWdodCBvZiBkcm9wZG93bi4KICAgICAgICAgIGlmIChvZmZzZXRUb3AgKyBvcmlnaW5IZWlnaHQgLSBhY3RpdmF0ZXMuaW5uZXJIZWlnaHQoKSA8IDApIHsKICAgICAgICAgICAgdmFyIGFkanVzdGVkSGVpZ2h0ID0gd2luZG93SGVpZ2h0IC0gb2Zmc2V0VG9wIC0gdmVydGljYWxPZmZzZXQ7CiAgICAgICAgICAgIGFjdGl2YXRlcy5jc3MoJ21heC1oZWlnaHQnLCBhZGp1c3RlZEhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBGbG93IHVwd2FyZHMuCiAgICAgICAgICAgIGlmICghdmVydGljYWxPZmZzZXQpIHsKICAgICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCArPSBvcmlnaW5IZWlnaHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmVydGljYWxPZmZzZXQgLT0gYWN0aXZhdGVzLmlubmVySGVpZ2h0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBIYW5kbGUgZWRnZSBhbGlnbm1lbnQKICAgICAgICBpZiAoY3VyckFsaWdubWVudCA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICBndXR0ZXJTcGFjaW5nID0gY3Vycl9vcHRpb25zLmd1dHRlcjsKICAgICAgICAgIGxlZnRQb3NpdGlvbiA9IG9yaWdpbi5wb3NpdGlvbigpLmxlZnQgKyBndXR0ZXJTcGFjaW5nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjdXJyQWxpZ25tZW50ID09PSAncmlnaHQnKSB7CiAgICAgICAgICAvLyBNYXRlcmlhbCBpY29ucyBmaXgKICAgICAgICAgIGFjdGl2YXRlcwogICAgICAgICAgICAuc3RvcCh0cnVlLCB0cnVlKQogICAgICAgICAgICAuY3NzKHsKICAgICAgICAgICAgICBvcGFjaXR5OiAwLAogICAgICAgICAgICAgIGxlZnQ6IDAKICAgICAgICAgICAgfSkKCiAgICAgICAgICB2YXIgb2Zmc2V0UmlnaHQgPSBvcmlnaW4ucG9zaXRpb24oKS5sZWZ0ICsgb3JpZ2luLm91dGVyV2lkdGgoKSAtIGFjdGl2YXRlcy5vdXRlcldpZHRoKCk7CiAgICAgICAgICBndXR0ZXJTcGFjaW5nID0gLWN1cnJfb3B0aW9ucy5ndXR0ZXI7CiAgICAgICAgICBsZWZ0UG9zaXRpb24gPSAgb2Zmc2V0UmlnaHQgKyBndXR0ZXJTcGFjaW5nOwogICAgICAgIH0KCiAgICAgICAgLy8gUG9zaXRpb24gZHJvcGRvd24KICAgICAgICBhY3RpdmF0ZXMuY3NzKHsKICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgICAgdG9wOiBvcmlnaW4ucG9zaXRpb24oKS50b3AgKyB2ZXJ0aWNhbE9mZnNldCArIHNjcm9sbFlPZmZzZXQsCiAgICAgICAgICBsZWZ0OiBsZWZ0UG9zaXRpb24gKyBzY3JvbGxYT2Zmc2V0CiAgICAgICAgfSk7CgogICAgICAgIC8vIFNob3cgZHJvcGRvd24KICAgICAgICBhY3RpdmF0ZXMKICAgICAgICAgIC5zbGlkZURvd24oewogICAgICAgICAgICBxdWV1ZTogZmFsc2UsCiAgICAgICAgICAgIGR1cmF0aW9uOiBjdXJyX29wdGlvbnMuaW5EdXJhdGlvbiwKICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJywKICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuYW5pbWF0ZSgge29wYWNpdHk6IDF9LCB7cXVldWU6IGZhbHNlLCBkdXJhdGlvbjogY3Vycl9vcHRpb25zLmluRHVyYXRpb24sIGVhc2luZzogJ2Vhc2VPdXRTaW5lJ30pOwoKICAgICAgICAvLyBBZGQgY2xpY2sgY2xvc2UgaGFuZGxlciB0byBkb2N1bWVudAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2suJysgYWN0aXZhdGVzLmF0dHIoJ2lkJyksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGhpZGVEcm9wZG93bigpOwogICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLicrIGFjdGl2YXRlcy5hdHRyKCdpZCcpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIDApOwogICAgICB9CgogICAgICBmdW5jdGlvbiBoaWRlRHJvcGRvd24oKSB7CiAgICAgICAgLy8gQ2hlY2sgZm9yIHNpbXVsdGFuZW91cyBmb2N1cyBhbmQgY2xpY2sgZXZlbnRzLgogICAgICAgIGlzRm9jdXNlZCA9IGZhbHNlOwogICAgICAgIGFjdGl2YXRlcy5mYWRlT3V0KGN1cnJfb3B0aW9ucy5vdXREdXJhdGlvbik7CiAgICAgICAgYWN0aXZhdGVzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICBvcmlnaW4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2suJysgYWN0aXZhdGVzLmF0dHIoJ2lkJykpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGFjdGl2YXRlcy5jc3MoJ21heC1oZWlnaHQnLCAnJyk7IH0sIGN1cnJfb3B0aW9ucy5vdXREdXJhdGlvbik7CiAgICAgIH0KCiAgICAgIC8vIEhvdmVyCiAgICAgIGlmIChjdXJyX29wdGlvbnMuaG92ZXIpIHsKICAgICAgICB2YXIgb3BlbiA9IGZhbHNlOwogICAgICAgIG9yaWdpbi5vZmYoJ2NsaWNrLicgKyBvcmlnaW4uYXR0cignaWQnKSk7CiAgICAgICAgLy8gSG92ZXIgaGFuZGxlciB0byBzaG93IGRyb3Bkb3duCiAgICAgICAgb3JpZ2luLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSl7IC8vIE1vdXNlIG92ZXIKICAgICAgICAgIGlmIChvcGVuID09PSBmYWxzZSkgewogICAgICAgICAgICBwbGFjZURyb3Bkb3duKCk7CiAgICAgICAgICAgIG9wZW4gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG9yaWdpbi5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpewogICAgICAgICAgLy8gSWYgaG92ZXIgb24gb3JpZ2luIHRoZW4gdG8gc29tZXRoaW5nIG90aGVyIHRoYW4gZHJvcGRvd24gY29udGVudCwgdGhlbiBjbG9zZQogICAgICAgICAgdmFyIHRvRWwgPSBlLnRvRWxlbWVudCB8fCBlLnJlbGF0ZWRUYXJnZXQ7IC8vIGFkZGVkIGJyb3dzZXIgY29tcGF0aWJpbGl0eSBmb3IgdGFyZ2V0IGVsZW1lbnQKICAgICAgICAgIGlmKCEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuaXMoYWN0aXZhdGVzKSkgewogICAgICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKTsKICAgICAgICAgICAgaGlkZURyb3Bkb3duKCk7CiAgICAgICAgICAgIG9wZW4gPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgYWN0aXZhdGVzLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSl7IC8vIE1vdXNlIG91dAogICAgICAgICAgdmFyIHRvRWwgPSBlLnRvRWxlbWVudCB8fCBlLnJlbGF0ZWRUYXJnZXQ7CiAgICAgICAgICBpZighJCh0b0VsKS5jbG9zZXN0KCcuZHJvcGRvd24tYnV0dG9uJykuaXMob3JpZ2luKSkgewogICAgICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKTsKICAgICAgICAgICAgaGlkZURyb3Bkb3duKCk7CiAgICAgICAgICAgIG9wZW4gPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gQ2xpY2sKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBDbGljayBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd24KICAgICAgICBvcmlnaW4ub2ZmKCdjbGljay4nICsgb3JpZ2luLmF0dHIoJ2lkJykpOwogICAgICAgIG9yaWdpbi5vbignY2xpY2suJytvcmlnaW4uYXR0cignaWQnKSwgZnVuY3Rpb24oZSl7CiAgICAgICAgICBpZiAoIWlzRm9jdXNlZCkgewogICAgICAgICAgICBpZiAoIG9yaWdpblswXSA9PSBlLmN1cnJlbnRUYXJnZXQgJiYKICAgICAgICAgICAgICAgICAhb3JpZ2luLmhhc0NsYXNzKCdhY3RpdmUnKSAmJgogICAgICAgICAgICAgICAgICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnRzIGJ1dHRvbiBjbGljayBmcm9tIG1vdmluZyB3aW5kb3cKICAgICAgICAgICAgICBpZiAoY3Vycl9vcHRpb25zLnN0b3BQcm9wYWdhdGlvbikgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcGxhY2VEcm9wZG93bignY2xpY2snKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBJZiBvcmlnaW4gaXMgY2xpY2tlZCBhbmQgbWVudSBpcyBvcGVuLCBjbG9zZSBtZW51CiAgICAgICAgICAgIGVsc2UgaWYgKG9yaWdpbi5oYXNDbGFzcygnYWN0aXZlJykpIHsKICAgICAgICAgICAgICBoaWRlRHJvcGRvd24oKTsKICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLicrIGFjdGl2YXRlcy5hdHRyKCdpZCcpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgfSAvLyBFbmQgZWxzZQoKICAgICAgLy8gTGlzdGVuIHRvIG9wZW4gYW5kIGNsb3NlIGV2ZW50IC0gdXNlZnVsIGZvciBzZWxlY3QgY29tcG9uZW50CiAgICAgIG9yaWdpbi5vbignb3BlbicsIGZ1bmN0aW9uKGUsIGV2ZW50VHlwZSkgewogICAgICAgIHBsYWNlRHJvcGRvd24oZXZlbnRUeXBlKTsKICAgICAgfSk7CiAgICAgIG9yaWdpbi5vbignY2xvc2UnLCBoaWRlRHJvcGRvd24pOwoKCiAgICB9KTsKICB9OyAvLyBFbmQgZHJvcGRvd24gcGx1Z2luCgogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7CiAgICAkKCcuZHJvcGRvd24tYnV0dG9uJykuZHJvcGRvd24oKTsKICB9KTsKfSggalF1ZXJ5ICkpOwo7KGZ1bmN0aW9uKCQpIHsKICB2YXIgX3N0YWNrID0gMCwKICBfbGFzdElEID0gMCwKICBfZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uKCkgewogICAgX2xhc3RJRCsrOwogICAgcmV0dXJuICdtYXRlcmlhbGl6ZS1tb2RhbC1vdmVybGF5LScgKyBfbGFzdElEOwogIH07CgogIHZhciBtZXRob2RzID0gewogICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgIG9wYWNpdHk6IDAuNSwKICAgICAgICBpbkR1cmF0aW9uOiAzNTAsCiAgICAgICAgb3V0RHVyYXRpb246IDI1MCwKICAgICAgICByZWFkeTogdW5kZWZpbmVkLAogICAgICAgIGNvbXBsZXRlOiB1bmRlZmluZWQsCiAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgc3RhcnRpbmdUb3A6ICc0JScsCiAgICAgICAgZW5kaW5nVG9wOiAnMTAlJwogICAgICB9OwoKICAgICAgLy8gT3ZlcnJpZGUgZGVmYXVsdHMKICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTsKCiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyICRtb2RhbCA9ICQodGhpcyk7CiAgICAgICAgdmFyIG1vZGFsX2lkID0gJCh0aGlzKS5hdHRyKCJpZCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7CgogICAgICAgIHZhciBjbG9zZU1vZGFsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgb3ZlcmxheUlEID0gJG1vZGFsLmRhdGEoJ292ZXJsYXktaWQnKTsKICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJyMnICsgb3ZlcmxheUlEKTsKICAgICAgICAgICRtb2RhbC5yZW1vdmVDbGFzcygnb3BlbicpOwoKICAgICAgICAgIC8vIEVuYWJsZSBzY3JvbGxpbmcKICAgICAgICAgICQoJ2JvZHknKS5jc3MoewogICAgICAgICAgICBvdmVyZmxvdzogJycsCiAgICAgICAgICAgIHdpZHRoOiAnJwogICAgICAgICAgfSk7CgogICAgICAgICAgJG1vZGFsLmZpbmQoJy5tb2RhbC1jbG9zZScpLm9mZignY2xpY2suY2xvc2UnKTsKICAgICAgICAgICQoZG9jdW1lbnQpLm9mZigna2V5dXAubW9kYWwnICsgb3ZlcmxheUlEKTsKCiAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSggeyBvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiBvcHRpb25zLm91dER1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2U6ICJlYXNlT3V0UXVhcnQifSk7CgoKICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uCiAgICAgICAgICB2YXIgZXhpdFZlbG9jaXR5T3B0aW9ucyA9IHsKICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMub3V0RHVyYXRpb24sCiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwKICAgICAgICAgICAgZWFzZTogImVhc2VPdXRDdWJpYyIsCiAgICAgICAgICAgIC8vIEhhbmRsZSBtb2RhbCByZWFkeSBjYWxsYmFjawogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe2Rpc3BsYXk6Im5vbmUifSk7CgogICAgICAgICAgICAgIC8vIENhbGwgY29tcGxldGUgY2FsbGJhY2sKICAgICAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMuY29tcGxldGUpID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBsZXRlLmNhbGwodGhpcywgJG1vZGFsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgJG92ZXJsYXkucmVtb3ZlKCk7CiAgICAgICAgICAgICAgX3N0YWNrLS07CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpZiAoJG1vZGFsLmhhc0NsYXNzKCdib3R0b20tc2hlZXQnKSkgewogICAgICAgICAgICAkbW9kYWwudmVsb2NpdHkoe2JvdHRvbTogIi0xMDAlIiwgb3BhY2l0eTogMH0sIGV4aXRWZWxvY2l0eU9wdGlvbnMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSgKICAgICAgICAgICAgICB7IHRvcDogb3B0aW9ucy5zdGFydGluZ1RvcCwgb3BhY2l0eTogMCwgc2NhbGVYOiAwLjd9LAogICAgICAgICAgICAgIGV4aXRWZWxvY2l0eU9wdGlvbnMKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgb3Blbk1vZGFsID0gZnVuY3Rpb24oJHRyaWdnZXIpIHsKICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTsKICAgICAgICAgIHZhciBvbGRXaWR0aCA9ICRib2R5LmlubmVyV2lkdGgoKTsKICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7CiAgICAgICAgICAkYm9keS53aWR0aChvbGRXaWR0aCk7CgogICAgICAgICAgaWYgKCRtb2RhbC5oYXNDbGFzcygnb3BlbicpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgb3ZlcmxheUlEID0gX2dlbmVyYXRlSUQoKTsKICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiPjwvZGl2PicpOwogICAgICAgICAgdmFyIGxTdGFjayA9ICgrK19zdGFjayk7CgogICAgICAgICAgLy8gU3RvcmUgYSByZWZlcmVuY2Ugb2YgdGhlIG92ZXJsYXkKICAgICAgICAgICRvdmVybGF5LmF0dHIoJ2lkJywgb3ZlcmxheUlEKS5jc3MoJ3otaW5kZXgnLCAxMDAwICsgbFN0YWNrICogMik7CiAgICAgICAgICAkbW9kYWwuZGF0YSgnb3ZlcmxheS1pZCcsIG92ZXJsYXlJRCkuY3NzKCd6LWluZGV4JywgMTAwMCArIGxTdGFjayAqIDIgKyAxKTsKICAgICAgICAgICRtb2RhbC5hZGRDbGFzcygnb3BlbicpOwoKICAgICAgICAgICQoImJvZHkiKS5hcHBlbmQoJG92ZXJsYXkpOwoKICAgICAgICAgIGlmIChvcHRpb25zLmRpc21pc3NpYmxlKSB7CiAgICAgICAgICAgICRvdmVybGF5LmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIFJldHVybiBvbiBFU0MKICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwLm1vZGFsJyArIG92ZXJsYXlJRCwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7ICAgLy8gRVNDIGtleQogICAgICAgICAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgJG1vZGFsLmZpbmQoIi5tb2RhbC1jbG9zZSIpLm9uKCdjbGljay5jbG9zZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICAgICAgfSk7CgogICAgICAgICAgJG92ZXJsYXkuY3NzKHsgZGlzcGxheSA6ICJibG9jayIsIG9wYWNpdHkgOiAwIH0pOwoKICAgICAgICAgICRtb2RhbC5jc3MoewogICAgICAgICAgICBkaXNwbGF5IDogImJsb2NrIiwKICAgICAgICAgICAgb3BhY2l0eTogMAogICAgICAgICAgfSk7CgogICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IG9wdGlvbnMub3BhY2l0eX0sIHtkdXJhdGlvbjogb3B0aW9ucy5pbkR1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2U6ICJlYXNlT3V0Q3ViaWMifSk7CiAgICAgICAgICAkbW9kYWwuZGF0YSgnYXNzb2NpYXRlZC1vdmVybGF5JywgJG92ZXJsYXlbMF0pOwoKICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uCiAgICAgICAgICB2YXIgZW50ZXJWZWxvY2l0eU9wdGlvbnMgPSB7CiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmluRHVyYXRpb24sCiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwKICAgICAgICAgICAgZWFzZTogImVhc2VPdXRDdWJpYyIsCiAgICAgICAgICAgIC8vIEhhbmRsZSBtb2RhbCByZWFkeSBjYWxsYmFjawogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLnJlYWR5KSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgb3B0aW9ucy5yZWFkeS5jYWxsKHRoaXMsICRtb2RhbCwgJHRyaWdnZXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ2JvdHRvbS1zaGVldCcpKSB7CiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7Ym90dG9tOiAiMCIsIG9wYWNpdHk6IDF9LCBlbnRlclZlbG9jaXR5T3B0aW9ucyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJC5WZWxvY2l0eS5ob29rKCRtb2RhbCwgInNjYWxlWCIsIDAuNyk7CiAgICAgICAgICAgICRtb2RhbC5jc3MoeyB0b3A6IG9wdGlvbnMuc3RhcnRpbmdUb3AgfSk7CiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7dG9wOiBvcHRpb25zLmVuZGluZ1RvcCwgb3BhY2l0eTogMSwgc2NhbGVYOiAnMSd9LCBlbnRlclZlbG9jaXR5T3B0aW9ucyk7CiAgICAgICAgICB9CgogICAgICAgIH07CgogICAgICAgIC8vIFJlc2V0IGhhbmRsZXJzCiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5tb2RhbFRyaWdnZXInLCAnYVtocmVmPSIjJyArIG1vZGFsX2lkICsgJyJdLCBbZGF0YS10YXJnZXQ9IicgKyBtb2RhbF9pZCArICciXScpOwogICAgICAgICQodGhpcykub2ZmKCdvcGVuTW9kYWwnKTsKICAgICAgICAkKHRoaXMpLm9mZignY2xvc2VNb2RhbCcpOwoKICAgICAgICAvLyBDbG9zZSBIYW5kbGVycwogICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay5tb2RhbFRyaWdnZXInLCAnYVtocmVmPSIjJyArIG1vZGFsX2lkICsgJyJdLCBbZGF0YS10YXJnZXQ9IicgKyBtb2RhbF9pZCArICciXScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnRpbmdUb3AgPSAoJCh0aGlzKS5vZmZzZXQoKS50b3AgLSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkpIC8xLjE1OwogICAgICAgICAgb3Blbk1vZGFsKCQodGhpcykpOwogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0pOyAvLyBkb25lIHNldCBvbiBjbGljawoKICAgICAgICAkKHRoaXMpLm9uKCdvcGVuTW9kYWwnLCBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBtb2RhbF9pZCA9ICQodGhpcykuYXR0cigiaHJlZiIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7CiAgICAgICAgICBvcGVuTW9kYWwoKTsKICAgICAgICB9KTsKCiAgICAgICAgJCh0aGlzKS5vbignY2xvc2VNb2RhbCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICAgIH0pOwogICAgICB9KTsgLy8gZG9uZSByZXR1cm4KICAgIH0sCiAgICBvcGVuIDogZnVuY3Rpb24oKSB7CiAgICAgIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CiAgICAgICQodGhpcykudHJpZ2dlcignb3Blbk1vZGFsJyk7CiAgICB9LAogICAgY2xvc2UgOiBmdW5jdGlvbigpIHsKICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbG9zZU1vZGFsJyk7CiAgICB9CiAgfTsKCiAgJC5mbi5tb2RhbCA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykgewogICAgaWYgKCBtZXRob2RzW21ldGhvZE9yT3B0aW9uc10gKSB7CiAgICAgIHJldHVybiBtZXRob2RzWyBtZXRob2RPck9wdGlvbnMgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTsKICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kT3JPcHRpb25zICkgewogICAgICAvLyBEZWZhdWx0IHRvICJpbml0IgogICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKICAgIH0gZWxzZSB7CiAgICAgICQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2RPck9wdGlvbnMgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5tb2RhbCcgKTsKICAgIH0KICB9Owp9KShqUXVlcnkpOwo7KGZ1bmN0aW9uICgkKSB7CgogICQuZm4ubWF0ZXJpYWxib3ggPSBmdW5jdGlvbiAoKSB7CgogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdpbml0aWFsaXplZCcpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAkKHRoaXMpLmFkZENsYXNzKCdpbml0aWFsaXplZCcpOwoKICAgICAgdmFyIG92ZXJsYXlBY3RpdmUgPSBmYWxzZTsKICAgICAgdmFyIGRvbmVBbmltYXRpbmcgPSB0cnVlOwogICAgICB2YXIgaW5EdXJhdGlvbiA9IDI3NTsKICAgICAgdmFyIG91dER1cmF0aW9uID0gMjAwOwogICAgICB2YXIgb3JpZ2luID0gJCh0aGlzKTsKICAgICAgdmFyIHBsYWNlaG9sZGVyID0gJCgnPGRpdj48L2Rpdj4nKS5hZGRDbGFzcygnbWF0ZXJpYWwtcGxhY2Vob2xkZXInKTsKICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSAwOwogICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSAwOwogICAgICB2YXIgYW5jZXN0b3JzQ2hhbmdlZDsKICAgICAgdmFyIGFuY2VzdG9yOwogICAgICB2YXIgb3JpZ2luSW5saW5lU3R5bGVzID0gb3JpZ2luLmF0dHIoJ3N0eWxlJyk7CiAgICAgIG9yaWdpbi53cmFwKHBsYWNlaG9sZGVyKTsKCgogICAgICAvLyBTdGFydCBjbGljayBoYW5kbGVyCiAgICAgIG9yaWdpbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKTsKICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgIHZhciBvcmlnaW5hbFdpZHRoID0gb3JpZ2luLndpZHRoKCk7CiAgICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gb3JpZ2luLmhlaWdodCgpOwoKCiAgICAgICAgLy8gSWYgYWxyZWFkeSBtb2RhbCwgcmV0dXJuIHRvIG9yaWdpbmFsCiAgICAgICAgaWYgKGRvbmVBbmltYXRpbmcgPT09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG92ZXJsYXlBY3RpdmUgJiYgZG9uZUFuaW1hdGluZz09PXRydWUpIHsKICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgoKICAgICAgICAvLyBTZXQgc3RhdGVzCiAgICAgICAgZG9uZUFuaW1hdGluZyA9IGZhbHNlOwogICAgICAgIG9yaWdpbi5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgb3ZlcmxheUFjdGl2ZSA9IHRydWU7CgogICAgICAgIC8vIFNldCBwb3NpdGlvbmluZyBmb3IgcGxhY2Vob2xkZXIKICAgICAgICBwbGFjZWhvbGRlci5jc3MoewogICAgICAgICAgd2lkdGg6IHBsYWNlaG9sZGVyWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLAogICAgICAgICAgaGVpZ2h0OiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsCiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgICAgIHRvcDogMCwKICAgICAgICAgIGxlZnQ6IDAKICAgICAgICB9KTsKCiAgICAgICAgLy8gRmluZCBhbmNlc3RvciB3aXRoIG92ZXJmbG93OiBoaWRkZW47IGFuZCByZW1vdmUgaXQKICAgICAgICBhbmNlc3RvcnNDaGFuZ2VkID0gdW5kZWZpbmVkOwogICAgICAgIGFuY2VzdG9yID0gcGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZTsKICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgIHdoaWxlIChhbmNlc3RvciAhPT0gbnVsbCAmJiAhJChhbmNlc3RvcikuaXMoZG9jdW1lbnQpKSB7CiAgICAgICAgICB2YXIgY3VyciA9ICQoYW5jZXN0b3IpOwogICAgICAgICAgaWYgKGN1cnIuY3NzKCdvdmVyZmxvdycpICE9PSAndmlzaWJsZScpIHsKICAgICAgICAgICAgY3Vyci5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTsKICAgICAgICAgICAgaWYgKGFuY2VzdG9yc0NoYW5nZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGFuY2VzdG9yc0NoYW5nZWQgPSBjdXJyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGFuY2VzdG9yc0NoYW5nZWQgPSBhbmNlc3RvcnNDaGFuZ2VkLmFkZChjdXJyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnROb2RlOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IGNzcyBvbiBvcmlnaW4KICAgICAgICBvcmlnaW4uY3NzKHsKICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgICAgJ3otaW5kZXgnOiAxMDAwLAogICAgICAgICAgJ3dpbGwtY2hhbmdlJzogJ2xlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCcKICAgICAgICB9KQogICAgICAgIC5kYXRhKCd3aWR0aCcsIG9yaWdpbmFsV2lkdGgpCiAgICAgICAgLmRhdGEoJ2hlaWdodCcsIG9yaWdpbmFsSGVpZ2h0KTsKCiAgICAgICAgLy8gQWRkIG92ZXJsYXkKICAgICAgICB2YXIgb3ZlcmxheSA9ICQoJzxkaXYgaWQ9Im1hdGVyaWFsYm94LW92ZXJsYXkiPjwvZGl2PicpCiAgICAgICAgICAuY3NzKHsKICAgICAgICAgICAgb3BhY2l0eTogMAogICAgICAgICAgfSkKICAgICAgICAgIC5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICBpZiAoZG9uZUFuaW1hdGluZyA9PT0gdHJ1ZSkKICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpOwogICAgICAgICAgfSk7CgogICAgICAgIC8vIFB1dCBiZWZvcmUgaW4gb3JpZ2luIGltYWdlIHRvIHByZXNlcnZlIHotaW5kZXggbGF5ZXJpbmcuCiAgICAgICAgb3JpZ2luLmJlZm9yZShvdmVybGF5KTsKCiAgICAgICAgLy8gU2V0IGRpbWVuc2lvbnMgaWYgbmVlZGVkCiAgICAgICAgdmFyIG92ZXJsYXlPZmZzZXQgPSBvdmVybGF5WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIG92ZXJsYXkuY3NzKHsKICAgICAgICAgIHdpZHRoOiB3aW5kb3dXaWR0aCwKICAgICAgICAgIGhlaWdodDogd2luZG93SGVpZ2h0LAogICAgICAgICAgbGVmdDogLTEgKiBvdmVybGF5T2Zmc2V0LmxlZnQsCiAgICAgICAgICB0b3A6IC0xICogb3ZlcmxheU9mZnNldC50b3AKICAgICAgICB9KQoKICAgICAgICAvLyBBbmltYXRlIE92ZXJsYXkKICAgICAgICBvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAge2R1cmF0aW9uOiBpbkR1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30gKTsKCiAgICAgICAgLy8gQWRkIGFuZCBhbmltYXRlIGNhcHRpb24gaWYgaXQgZXhpc3RzCiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdjYXB0aW9uJykgIT09ICIiKSB7CiAgICAgICAgICB2YXIgJHBob3RvX2NhcHRpb24gPSAkKCc8ZGl2IGNsYXNzPSJtYXRlcmlhbGJveC1jYXB0aW9uIj48L2Rpdj4nKTsKICAgICAgICAgICRwaG90b19jYXB0aW9uLnRleHQob3JpZ2luLmRhdGEoJ2NhcHRpb24nKSk7CiAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRwaG90b19jYXB0aW9uKTsKICAgICAgICAgICRwaG90b19jYXB0aW9uLmNzcyh7ICJkaXNwbGF5IjogImlubGluZSIgfSk7CiAgICAgICAgICAkcGhvdG9fY2FwdGlvbi52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtkdXJhdGlvbjogaW5EdXJhdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICB9CgogICAgICAgIC8vIFJlc2l6ZSBJbWFnZQogICAgICAgIHZhciByYXRpbyA9IDA7CiAgICAgICAgdmFyIHdpZHRoUGVyY2VudCA9IG9yaWdpbmFsV2lkdGggLyB3aW5kb3dXaWR0aDsKICAgICAgICB2YXIgaGVpZ2h0UGVyY2VudCA9IG9yaWdpbmFsSGVpZ2h0IC8gd2luZG93SGVpZ2h0OwogICAgICAgIHZhciBuZXdXaWR0aCA9IDA7CiAgICAgICAgdmFyIG5ld0hlaWdodCA9IDA7CgogICAgICAgIGlmICh3aWR0aFBlcmNlbnQgPiBoZWlnaHRQZXJjZW50KSB7CiAgICAgICAgICByYXRpbyA9IG9yaWdpbmFsSGVpZ2h0IC8gb3JpZ2luYWxXaWR0aDsKICAgICAgICAgIG5ld1dpZHRoID0gd2luZG93V2lkdGggKiAwLjk7CiAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dXaWR0aCAqIDAuOSAqIHJhdGlvOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxXaWR0aCAvIG9yaWdpbmFsSGVpZ2h0OwogICAgICAgICAgbmV3V2lkdGggPSAod2luZG93SGVpZ2h0ICogMC45KSAqIHJhdGlvOwogICAgICAgICAgbmV3SGVpZ2h0ID0gd2luZG93SGVpZ2h0ICogMC45OwogICAgICAgIH0KCiAgICAgICAgLy8gQW5pbWF0ZSBpbWFnZSArIHNldCB6LWluZGV4CiAgICAgICAgaWYob3JpZ2luLmhhc0NsYXNzKCdyZXNwb25zaXZlLWltZycpKSB7CiAgICAgICAgICBvcmlnaW4udmVsb2NpdHkoeydtYXgtd2lkdGgnOiBuZXdXaWR0aCwgJ3dpZHRoJzogb3JpZ2luYWxXaWR0aH0sIHtkdXJhdGlvbjogMCwgcXVldWU6IGZhbHNlLAogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICBvcmlnaW4uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KQogICAgICAgICAgICAgIC52ZWxvY2l0eSgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHQsCiAgICAgICAgICAgICAgICAgIHdpZHRoOiBuZXdXaWR0aCwKICAgICAgICAgICAgICAgICAgbGVmdDogJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgd2luZG93V2lkdGgvMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLmxlZnQgLSBuZXdXaWR0aC8yLAogICAgICAgICAgICAgICAgICB0b3A6ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpICsgd2luZG93SGVpZ2h0LzIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS50b3AgLSBuZXdIZWlnaHQvIDIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpbkR1cmF0aW9uLAogICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7ZG9uZUFuaW1hdGluZyA9IHRydWU7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gLy8gRW5kIENvbXBsZXRlCiAgICAgICAgICB9KTsgLy8gRW5kIFZlbG9jaXR5CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgb3JpZ2luLmNzcygnbGVmdCcsIDApCiAgICAgICAgICAuY3NzKCd0b3AnLCAwKQogICAgICAgICAgLnZlbG9jaXR5KAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHQsCiAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoLAogICAgICAgICAgICAgIGxlZnQ6ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSArIHdpbmRvd1dpZHRoLzIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS5sZWZ0IC0gbmV3V2lkdGgvMiwKICAgICAgICAgICAgICB0b3A6ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpICsgd2luZG93SGVpZ2h0LzIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS50b3AgLSBuZXdIZWlnaHQvIDIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGR1cmF0aW9uOiBpbkR1cmF0aW9uLAogICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwKICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsCiAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7ZG9uZUFuaW1hdGluZyA9IHRydWU7fQogICAgICAgICAgICB9CiAgICAgICAgICAgICk7IC8vIEVuZCBWZWxvY2l0eQogICAgICAgIH0KCiAgICAgICAgLy8gSGFuZGxlIEV4aXQgdHJpZ2dlcnMKICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbC5tYXRlcmlhbGJveCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKG92ZXJsYXlBY3RpdmUpIHsKICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS5tYXRlcmlhbGJveCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKG92ZXJsYXlBY3RpdmUpIHsKICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAubWF0ZXJpYWxib3gnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAvLyBFU0Mga2V5CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyAmJgogICAgICAgICAgICAgIGRvbmVBbmltYXRpbmcgPT09IHRydWUgJiYKICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlKSB7CiAgICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgIH0pOyAvLyBFbmQgY2xpY2sgaGFuZGxlcgoKCiAgICAgIC8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgbW9kYWxlZCBpbWFnZSB0byB0aGUgb3JpZ2luYWwgc3BvdAogICAgICBmdW5jdGlvbiByZXR1cm5Ub09yaWdpbmFsKCkgewoKICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7CgogICAgICAgIHZhciBwbGFjZWhvbGRlciA9IG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpOwogICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBvcmlnaW4uZGF0YSgnd2lkdGgnKTsKICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBvcmlnaW4uZGF0YSgnaGVpZ2h0Jyk7CgogICAgICAgIG9yaWdpbi52ZWxvY2l0eSgic3RvcCIsIHRydWUpOwogICAgICAgICQoJyNtYXRlcmlhbGJveC1vdmVybGF5JykudmVsb2NpdHkoInN0b3AiLCB0cnVlKTsKICAgICAgICAkKCcubWF0ZXJpYWxib3gtY2FwdGlvbicpLnZlbG9jaXR5KCJzdG9wIiwgdHJ1ZSk7CgogICAgICAgIC8vIGRpc2FibGUgZXhpdCBoYW5kbGVycwogICAgICAgICQod2luZG93KS5vZmYoJ3Njcm9sbC5tYXRlcmlhbGJveCcpOwogICAgICAgICQoZG9jdW1lbnQpLm9mZigna2V5dXAubWF0ZXJpYWxib3gnKTsKICAgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUubWF0ZXJpYWxib3gnKTsKCiAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eSh7b3BhY2l0eTogMH0sIHsKICAgICAgICAgIGR1cmF0aW9uOiBvdXREdXJhdGlvbiwgLy8gRGVsYXkgcHJldmVudHMgYW5pbWF0aW9uIG92ZXJsYXBwaW5nCiAgICAgICAgICBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpewogICAgICAgICAgICAvLyBSZW1vdmUgT3ZlcmxheQogICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIFJlc2l6ZSBJbWFnZQogICAgICAgIG9yaWdpbi52ZWxvY2l0eSgKICAgICAgICAgIHsKICAgICAgICAgICAgd2lkdGg6IG9yaWdpbmFsV2lkdGgsCiAgICAgICAgICAgIGhlaWdodDogb3JpZ2luYWxIZWlnaHQsCiAgICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICAgIHRvcDogMAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZHVyYXRpb246IG91dER1cmF0aW9uLAogICAgICAgICAgICBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7CiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnLAogICAgICAgICAgICAgICAgd2lkdGg6ICcnLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLAogICAgICAgICAgICAgICAgdG9wOiAnJywKICAgICAgICAgICAgICAgIGxlZnQ6ICcnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIG9yaWdpbi5yZW1vdmVBdHRyKCdzdHlsZScpOwogICAgICAgICAgICAgIG9yaWdpbi5hdHRyKCdzdHlsZScsIG9yaWdpbklubGluZVN0eWxlcyk7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcwogICAgICAgICAgICAgIG9yaWdpbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IHRydWU7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSBvdmVyZmxvdyBvdmVycmlkZXMgb24gYW5jZXN0b3JzCiAgICAgICAgICAgICAgaWYgKGFuY2VzdG9yc0NoYW5nZWQpIHsKICAgICAgICAgICAgICAgIGFuY2VzdG9yc0NoYW5nZWQuY3NzKCdvdmVyZmxvdycsICcnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApOwoKICAgICAgICAvLyBSZW1vdmUgQ2FwdGlvbiArIHJlc2V0IGNzcyBzZXR0aW5ncyBvbiBpbWFnZQogICAgICAgICQoJy5tYXRlcmlhbGJveC1jYXB0aW9uJykudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7CiAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sIC8vIERlbGF5IHByZXZlbnRzIGFuaW1hdGlvbiBvdmVybGFwcGluZwogICAgICAgICAgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXsKICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgIH0KICAgIH0pOwogIH07CgogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7CiAgICAkKCcubWF0ZXJpYWxib3hlZCcpLm1hdGVyaWFsYm94KCk7CiAgfSk7Cgp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKCiAgJC5mbi5wYXJhbGxheCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgIC8vIFBhcmFsbGF4IFNjcmlwdHMKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICAkdGhpcy5hZGRDbGFzcygncGFyYWxsYXgnKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBhcmFsbGF4KGluaXRpYWwpIHsKICAgICAgICB2YXIgY29udGFpbmVyX2hlaWdodDsKICAgICAgICBpZiAod2luZG93X3dpZHRoIDwgNjAxKSB7CiAgICAgICAgICBjb250YWluZXJfaGVpZ2h0ID0gKCR0aGlzLmhlaWdodCgpID4gMCkgPyAkdGhpcy5oZWlnaHQoKSA6ICR0aGlzLmNoaWxkcmVuKCJpbWciKS5oZWlnaHQoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBjb250YWluZXJfaGVpZ2h0ID0gKCR0aGlzLmhlaWdodCgpID4gMCkgPyAkdGhpcy5oZWlnaHQoKSA6IDUwMDsKICAgICAgICB9CiAgICAgICAgdmFyICRpbWcgPSAkdGhpcy5jaGlsZHJlbigiaW1nIikuZmlyc3QoKTsKICAgICAgICB2YXIgaW1nX2hlaWdodCA9ICRpbWcuaGVpZ2h0KCk7CiAgICAgICAgdmFyIHBhcmFsbGF4X2Rpc3QgPSBpbWdfaGVpZ2h0IC0gY29udGFpbmVyX2hlaWdodDsKICAgICAgICB2YXIgYm90dG9tID0gJHRoaXMub2Zmc2V0KCkudG9wICsgY29udGFpbmVyX2hlaWdodDsKICAgICAgICB2YXIgdG9wID0gJHRoaXMub2Zmc2V0KCkudG9wOwogICAgICAgIHZhciBzY3JvbGxUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7CiAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICB2YXIgd2luZG93Qm90dG9tID0gc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0OwogICAgICAgIHZhciBwZXJjZW50U2Nyb2xsZWQgPSAod2luZG93Qm90dG9tIC0gdG9wKSAvIChjb250YWluZXJfaGVpZ2h0ICsgd2luZG93SGVpZ2h0KTsKICAgICAgICB2YXIgcGFyYWxsYXggPSBNYXRoLnJvdW5kKChwYXJhbGxheF9kaXN0ICogcGVyY2VudFNjcm9sbGVkKSk7CgogICAgICAgIGlmIChpbml0aWFsKSB7CiAgICAgICAgICAkaW1nLmNzcygnZGlzcGxheScsICdibG9jaycpOwogICAgICAgIH0KICAgICAgICBpZiAoKGJvdHRvbSA+IHNjcm9sbFRvcCkgJiYgKHRvcCA8IChzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQpKSkgewogICAgICAgICAgJGltZy5jc3MoJ3RyYW5zZm9ybScsICJ0cmFuc2xhdGUzRCgtNTAlLCIgKyBwYXJhbGxheCArICJweCwgMCkiKTsKICAgICAgICB9CgogICAgICB9CgogICAgICAvLyBXYWl0IGZvciBpbWFnZSBsb2FkCiAgICAgICR0aGlzLmNoaWxkcmVuKCJpbWciKS5vbmUoImxvYWQiLCBmdW5jdGlvbigpIHsKICAgICAgICB1cGRhdGVQYXJhbGxheCh0cnVlKTsKICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy5jb21wbGV0ZSkgJCh0aGlzKS50cmlnZ2VyKCJsb2FkIik7CiAgICAgIH0pOwoKICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsKICAgICAgICB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgICAgICB1cGRhdGVQYXJhbGxheChmYWxzZSk7CiAgICAgIH0pOwoKICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsKICAgICAgICB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgICAgICB1cGRhdGVQYXJhbGxheChmYWxzZSk7CiAgICAgIH0pOwoKICAgIH0pOwoKICB9Owp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKCiAgdmFyIG1ldGhvZHMgPSB7CiAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykgewogICAgICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgICAgb25TaG93OiBudWxsLAogICAgICAgIHN3aXBlYWJsZTogZmFsc2UsCiAgICAgICAgcmVzcG9uc2l2ZVRocmVzaG9sZDogSW5maW5pdHksIC8vIGJyZWFrcG9pbnQgZm9yIHN3aXBlYWJsZQogICAgICB9OwogICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpOwogICAgICB2YXIgbmFtZXNwYWNlID0gTWF0ZXJpYWxpemUub2JqZWN0U2VsZWN0b3JTdHJpbmcoJCh0aGlzKSk7CgogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpIHsKCiAgICAgIHZhciB1bmlxdWVOYW1lc3BhY2UgPSBuYW1lc3BhY2UraTsKCiAgICAgIC8vIEZvciBlYWNoIHNldCBvZiB0YWJzLCB3ZSB3YW50IHRvIGtlZXAgdHJhY2sgb2YKICAgICAgLy8gd2hpY2ggdGFiIGlzIGFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgY29udGVudAogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLAogICAgICAgICAgd2luZG93X3dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7CgogICAgICB2YXIgJGFjdGl2ZSwgJGNvbnRlbnQsICRsaW5rcyA9ICR0aGlzLmZpbmQoJ2xpLnRhYiBhJyksCiAgICAgICAgICAkdGFic193aWR0aCA9ICR0aGlzLndpZHRoKCksCiAgICAgICAgICAkdGFic19jb250ZW50ID0gJCgpLAogICAgICAgICAgJHRhYnNfd3JhcHBlciwKICAgICAgICAgICR0YWJfd2lkdGggPSBNYXRoLm1heCgkdGFic193aWR0aCwgJHRoaXNbMF0uc2Nyb2xsV2lkdGgpIC8gJGxpbmtzLmxlbmd0aCwKICAgICAgICAgICRpbmRpY2F0b3IsCiAgICAgICAgICBpbmRleCA9IHByZXZfaW5kZXggPSAwLAogICAgICAgICAgY2xpY2tlZCA9IGZhbHNlLAogICAgICAgICAgY2xpY2tlZFRpbWVvdXQsCiAgICAgICAgICB0cmFuc2l0aW9uID0gMzAwOwoKCiAgICAgIC8vIEZpbmRzIHJpZ2h0IGF0dHJpYnV0ZSBmb3IgaW5kaWNhdG9yIGJhc2VkIG9uIGFjdGl2ZSB0YWIuCiAgICAgIC8vIGVsOiBqUXVlcnkgT2JqZWN0CiAgICAgIHZhciBjYWxjUmlnaHRQb3MgPSBmdW5jdGlvbihlbCkgewogICAgICAgIHJldHVybiBNYXRoLmNlaWwoJHRhYnNfd2lkdGggLSBlbC5wb3NpdGlvbigpLmxlZnQgLSBlbC5vdXRlcldpZHRoKCkgLSAkdGhpcy5zY3JvbGxMZWZ0KCkpOwogICAgICB9OwoKICAgICAgLy8gRmluZHMgbGVmdCBhdHRyaWJ1dGUgZm9yIGluZGljYXRvciBiYXNlZCBvbiBhY3RpdmUgdGFiLgogICAgICAvLyBlbDogalF1ZXJ5IE9iamVjdAogICAgICB2YXIgY2FsY0xlZnRQb3MgPSBmdW5jdGlvbihlbCkgewogICAgICAgIHJldHVybiBNYXRoLmZsb29yKGVsLnBvc2l0aW9uKCkubGVmdCArICR0aGlzLnNjcm9sbExlZnQoKSk7CiAgICAgIH07CgogICAgICAvLyBBbmltYXRlcyBJbmRpY2F0b3IgdG8gYWN0aXZlIHRhYi4KICAgICAgLy8gcHJldl9pbmRleDogTnVtYmVyCiAgICAgIHZhciBhbmltYXRlSW5kaWNhdG9yID0gZnVuY3Rpb24ocHJldl9pbmRleCkgewogICAgICAgIGlmICgoaW5kZXggLSBwcmV2X2luZGV4KSA+PSAwKSB7CiAgICAgICAgICAkaW5kaWNhdG9yLnZlbG9jaXR5KHsicmlnaHQiOiBjYWxjUmlnaHRQb3MoJGFjdGl2ZSkgfSwgeyBkdXJhdGlvbjogdHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICRpbmRpY2F0b3IudmVsb2NpdHkoeyJsZWZ0IjogY2FsY0xlZnRQb3MoJGFjdGl2ZSkgfSwge2R1cmF0aW9uOiB0cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgZGVsYXk6IDkwfSk7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAkaW5kaWNhdG9yLnZlbG9jaXR5KHsibGVmdCI6IGNhbGNMZWZ0UG9zKCRhY3RpdmUpIH0sIHsgZHVyYXRpb246IHRyYW5zaXRpb24sIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICAkaW5kaWNhdG9yLnZlbG9jaXR5KHsicmlnaHQiOiBjYWxjUmlnaHRQb3MoJGFjdGl2ZSkgfSwge2R1cmF0aW9uOiB0cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgZGVsYXk6IDkwfSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8gQ2hhbmdlIHN3aXBlYWJsZSBhY2NvcmRpbmcgdG8gcmVzcG9uc2l2ZSB0aHJlc2hvbGQKICAgICAgaWYgKG9wdGlvbnMuc3dpcGVhYmxlKSB7CiAgICAgICAgaWYgKHdpbmRvd193aWR0aCA+IG9wdGlvbnMucmVzcG9uc2l2ZVRocmVzaG9sZCkgewogICAgICAgICAgb3B0aW9ucy5zd2lwZWFibGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCgogICAgICAvLyBJZiB0aGUgbG9jYXRpb24uaGFzaCBtYXRjaGVzIG9uZSBvZiB0aGUgbGlua3MsIHVzZSB0aGF0IGFzIHRoZSBhY3RpdmUgdGFiLgogICAgICAkYWN0aXZlID0gJCgkbGlua3MuZmlsdGVyKCdbaHJlZj0iJytsb2NhdGlvbi5oYXNoKyciXScpKTsKCiAgICAgIC8vIElmIG5vIG1hdGNoIGlzIGZvdW5kLCB1c2UgdGhlIGZpcnN0IGxpbmsgb3IgYW55IHdpdGggY2xhc3MgJ2FjdGl2ZScgYXMgdGhlIGluaXRpYWwgYWN0aXZlIHRhYi4KICAgICAgaWYgKCRhY3RpdmUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgJGFjdGl2ZSA9ICQodGhpcykuZmluZCgnbGkudGFiIGEuYWN0aXZlJykuZmlyc3QoKTsKICAgICAgfQogICAgICBpZiAoJGFjdGl2ZS5sZW5ndGggPT09IDApIHsKICAgICAgICAkYWN0aXZlID0gJCh0aGlzKS5maW5kKCdsaS50YWIgYScpLmZpcnN0KCk7CiAgICAgIH0KCiAgICAgICRhY3RpdmUuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICBpbmRleCA9ICRsaW5rcy5pbmRleCgkYWN0aXZlKTsKICAgICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGluZGV4ID0gMDsKICAgICAgfQoKICAgICAgaWYgKCRhY3RpdmVbMF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICRjb250ZW50ID0gJCgkYWN0aXZlWzBdLmhhc2gpOwogICAgICAgICRjb250ZW50LmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgfQoKICAgICAgLy8gYXBwZW5kIGluZGljYXRvciB0aGVuIHNldCBpbmRpY2F0b3Igd2lkdGggdG8gdGFiIHdpZHRoCiAgICAgIGlmICghJHRoaXMuZmluZCgnLmluZGljYXRvcicpLmxlbmd0aCkgewogICAgICAgICR0aGlzLmFwcGVuZCgnPGxpIGNsYXNzPSJpbmRpY2F0b3IiPjwvbGk+Jyk7CiAgICAgIH0KICAgICAgJGluZGljYXRvciA9ICR0aGlzLmZpbmQoJy5pbmRpY2F0b3InKTsKCiAgICAgIC8vIHdlIG1ha2Ugc3VyZSB0aGF0IHRoZSBpbmRpY2F0b3IgaXMgYXQgdGhlIGVuZCBvZiB0aGUgdGFicwogICAgICAkdGhpcy5hcHBlbmQoJGluZGljYXRvcik7CgogICAgICBpZiAoJHRoaXMuaXMoIjp2aXNpYmxlIikpIHsKICAgICAgICAvLyAkaW5kaWNhdG9yLmNzcyh7InJpZ2h0IjogJHRhYnNfd2lkdGggLSAoKGluZGV4ICsgMSkgKiAkdGFiX3dpZHRoKX0pOwogICAgICAgIC8vICRpbmRpY2F0b3IuY3NzKHsibGVmdCI6IGluZGV4ICogJHRhYl93aWR0aH0pOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAkaW5kaWNhdG9yLmNzcyh7InJpZ2h0IjogY2FsY1JpZ2h0UG9zKCRhY3RpdmUpIH0pOwogICAgICAgICAgJGluZGljYXRvci5jc3MoeyJsZWZ0IjogY2FsY0xlZnRQb3MoJGFjdGl2ZSkgfSk7CiAgICAgICAgfSwgMCk7CiAgICAgIH0KICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLnRhYnMtJyt1bmlxdWVOYW1lc3BhY2UpLm9uKCdyZXNpemUudGFicy0nK3VuaXF1ZU5hbWVzcGFjZSwgZnVuY3Rpb24gKCkgewogICAgICAgICR0YWJzX3dpZHRoID0gJHRoaXMud2lkdGgoKTsKICAgICAgICAkdGFiX3dpZHRoID0gTWF0aC5tYXgoJHRhYnNfd2lkdGgsICR0aGlzWzBdLnNjcm9sbFdpZHRoKSAvICRsaW5rcy5sZW5ndGg7CiAgICAgICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgICAgaW5kZXggPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoJHRhYl93aWR0aCAhPT0gMCAmJiAkdGFic193aWR0aCAhPT0gMCkgewogICAgICAgICAgJGluZGljYXRvci5jc3MoeyJyaWdodCI6IGNhbGNSaWdodFBvcygkYWN0aXZlKSB9KTsKICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHsibGVmdCI6IGNhbGNMZWZ0UG9zKCRhY3RpdmUpIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBJbml0aWFsaXplIFRhYnMgQ29udGVudC4KICAgICAgaWYgKG9wdGlvbnMuc3dpcGVhYmxlKSB7CiAgICAgICAgLy8gVE9ETzogRHVwbGljYXRlIGNhbGxzIHdpdGggc3dpcGVhYmxlPyBoYW5kbGUgbXVsdGlwbGUgZGl2IHdyYXBwaW5nLgogICAgICAgICRsaW5rcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciAkY3Vycl9jb250ZW50ID0gJChNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpOwogICAgICAgICAgJGN1cnJfY29udGVudC5hZGRDbGFzcygnY2Fyb3VzZWwtaXRlbScpOwogICAgICAgICAgJHRhYnNfY29udGVudCA9ICR0YWJzX2NvbnRlbnQuYWRkKCRjdXJyX2NvbnRlbnQpOwogICAgICAgIH0pOwogICAgICAgICR0YWJzX3dyYXBwZXIgPSAkdGFic19jb250ZW50LndyYXBBbGwoJzxkaXYgY2xhc3M9InRhYnMtY29udGVudCBjYXJvdXNlbCI+PC9kaXY+Jyk7CiAgICAgICAgJHRhYnNfY29udGVudC5jc3MoJ2Rpc3BsYXknLCAnJyk7CiAgICAgICAgJCgnLnRhYnMtY29udGVudC5jYXJvdXNlbCcpLmNhcm91c2VsKHsKICAgICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICAgIG5vV3JhcDogdHJ1ZSwKICAgICAgICAgIG9uQ3ljbGVUbzogZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICBpZiAoIWNsaWNrZWQpIHsKICAgICAgICAgICAgICB2YXIgcHJldl9pbmRleCA9IGluZGV4OwogICAgICAgICAgICAgIGluZGV4ID0gJHRhYnNfd3JhcHBlci5pbmRleChpdGVtKTsKICAgICAgICAgICAgICAkYWN0aXZlID0gJGxpbmtzLmVxKGluZGV4KTsKICAgICAgICAgICAgICBhbmltYXRlSW5kaWNhdG9yKHByZXZfaW5kZXgpOwogICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5vblNob3cpID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLm9uU2hvdy5jYWxsKCR0aGlzWzBdLCAkY29udGVudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEhpZGUgdGhlIHJlbWFpbmluZyBjb250ZW50CiAgICAgICAgJGxpbmtzLm5vdCgkYWN0aXZlKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoTWF0ZXJpYWxpemUuZXNjYXBlSGFzaCh0aGlzLmhhc2gpKS5oaWRlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KCgogICAgICAvLyBCaW5kIHRoZSBjbGljayBldmVudCBoYW5kbGVyCiAgICAgICR0aGlzLm9mZignY2xpY2sudGFicycpLm9uKCdjbGljay50YWJzJywgJ2EnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIEFjdCBhcyByZWd1bGFyIGxpbmsgaWYgdGFyZ2V0IGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQuCiAgICAgICAgaWYgKCEhJCh0aGlzKS5hdHRyKCJ0YXJnZXQiKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY2xpY2tlZCA9IHRydWU7CiAgICAgICAgJHRhYnNfd2lkdGggPSAkdGhpcy53aWR0aCgpOwogICAgICAgICR0YWJfd2lkdGggPSBNYXRoLm1heCgkdGFic193aWR0aCwgJHRoaXNbMF0uc2Nyb2xsV2lkdGgpIC8gJGxpbmtzLmxlbmd0aDsKCiAgICAgICAgLy8gTWFrZSB0aGUgb2xkIHRhYiBpbmFjdGl2ZS4KICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICB2YXIgJG9sZENvbnRlbnQgPSAkY29udGVudAoKICAgICAgICAvLyBVcGRhdGUgdGhlIHZhcmlhYmxlcyB3aXRoIHRoZSBuZXcgbGluayBhbmQgY29udGVudAogICAgICAgICRhY3RpdmUgPSAkKHRoaXMpOwogICAgICAgICRjb250ZW50ID0gJChNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpOwogICAgICAgICRsaW5rcyA9ICR0aGlzLmZpbmQoJ2xpLnRhYiBhJyk7CiAgICAgICAgdmFyIGFjdGl2ZVJlY3QgPSAkYWN0aXZlLnBvc2l0aW9uKCk7CgogICAgICAgIC8vIE1ha2UgdGhlIHRhYiBhY3RpdmUuCiAgICAgICAgJGFjdGl2ZS5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgcHJldl9pbmRleCA9IGluZGV4OwogICAgICAgIGluZGV4ID0gJGxpbmtzLmluZGV4KCQodGhpcykpOwogICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgIGluZGV4ID0gMDsKICAgICAgICB9CiAgICAgICAgLy8gQ2hhbmdlIHVybCB0byBjdXJyZW50IHRhYgogICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJGFjdGl2ZS5hdHRyKCdocmVmJyk7CgogICAgICAgIC8vIFN3YXAgY29udGVudAogICAgICAgIGlmIChvcHRpb25zLnN3aXBlYWJsZSkgewogICAgICAgICAgaWYgKCR0YWJzX2NvbnRlbnQubGVuZ3RoKSB7CiAgICAgICAgICAgICR0YWJzX2NvbnRlbnQuY2Fyb3VzZWwoJ3NldCcsIGluZGV4LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMub25TaG93KSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgb3B0aW9ucy5vblNob3cuY2FsbCgkdGhpc1swXSwgJGNvbnRlbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICgkY29udGVudCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICRjb250ZW50LnNob3coKTsKICAgICAgICAgICAgJGNvbnRlbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMub25TaG93KSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgIG9wdGlvbnMub25TaG93LmNhbGwodGhpcywgJGNvbnRlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCRvbGRDb250ZW50ICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAhJG9sZENvbnRlbnQuaXMoJGNvbnRlbnQpKSB7CiAgICAgICAgICAgICRvbGRDb250ZW50LmhpZGUoKTsKICAgICAgICAgICAgJG9sZENvbnRlbnQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUmVzZXQgY2xpY2tlZCBzdGF0ZQogICAgICAgIGNsaWNrZWRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBjbGlja2VkID0gZmFsc2U7IH0sIHRyYW5zaXRpb24pOwoKICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yCiAgICAgICAgYW5pbWF0ZUluZGljYXRvcihwcmV2X2luZGV4KTsKCiAgICAgICAgLy8gUHJldmVudCB0aGUgYW5jaG9yJ3MgZGVmYXVsdCBjbGljayBhY3Rpb24KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgfSwKICAgIHNlbGVjdF90YWIgOiBmdW5jdGlvbiggaWQgKSB7CiAgICAgIHRoaXMuZmluZCgnYVtocmVmPSIjJyArIGlkICsgJyJdJykudHJpZ2dlcignY2xpY2snKTsKICAgIH0KICB9OwoKICAkLmZuLnRhYnMgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHsKICAgIGlmICggbWV0aG9kc1ttZXRob2RPck9wdGlvbnNdICkgewogICAgICByZXR1cm4gbWV0aG9kc1sgbWV0aG9kT3JPcHRpb25zIF0uYXBwbHkoIHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSk7CiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZE9yT3B0aW9ucyApIHsKICAgICAgLy8gRGVmYXVsdCB0byAiaW5pdCIKICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CiAgICB9IGVsc2UgewogICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudGFicycgKTsKICAgIH0KICB9OwoKICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpewogICAgJCgndWwudGFicycpLnRhYnMoKTsKICB9KTsKfSggalF1ZXJ5ICkpOwo7KGZ1bmN0aW9uICgkKSB7CiAgICAkLmZuLnRvb2x0aXAgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICB2YXIgdGltZW91dCA9IG51bGwsCiAgICAgIG1hcmdpbiA9IDU7CgogICAgICAvLyBEZWZhdWx0cwogICAgICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgICAgZGVsYXk6IDM1MCwKICAgICAgICB0b29sdGlwOiAnJywKICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScsCiAgICAgICAgaHRtbDogZmFsc2UKICAgICAgfTsKCiAgICAgIC8vIFJlbW92ZSB0b29sdGlwIGZyb20gdGhlIGFjdGl2YXRvcgogICAgICBpZiAob3B0aW9ucyA9PT0gInJlbW92ZSIpIHsKICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAkKCcjJyArICQodGhpcykuYXR0cignZGF0YS10b29sdGlwLWlkJykpLnJlbW92ZSgpOwogICAgICAgICAgJCh0aGlzKS5vZmYoJ21vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXAnKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7CgogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB0b29sdGlwSWQgPSBNYXRlcmlhbGl6ZS5ndWlkKCk7CiAgICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7CgogICAgICAgIC8vIERlc3Ryb3kgb2xkIHRvb2x0aXAKICAgICAgICBpZiAob3JpZ2luLmF0dHIoJ2RhdGEtdG9vbHRpcC1pZCcpKSB7CiAgICAgICAgICAkKCcjJyArIG9yaWdpbi5hdHRyKCdkYXRhLXRvb2x0aXAtaWQnKSkucmVtb3ZlKCk7CiAgICAgICAgfQoKICAgICAgICBvcmlnaW4uYXR0cignZGF0YS10b29sdGlwLWlkJywgdG9vbHRpcElkKTsKCiAgICAgICAgLy8gR2V0IGF0dHJpYnV0ZXMuCiAgICAgICAgdmFyIGFsbG93SHRtbCwKICAgICAgICAgICAgdG9vbHRpcERlbGF5LAogICAgICAgICAgICB0b29sdGlwUG9zaXRpb24sCiAgICAgICAgICAgIHRvb2x0aXBUZXh0LAogICAgICAgICAgICB0b29sdGlwRWwsCiAgICAgICAgICAgIGJhY2tkcm9wOwogICAgICAgIHZhciBzZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBhbGxvd0h0bWwgPSBvcmlnaW4uYXR0cignZGF0YS1odG1sJykgPyBvcmlnaW4uYXR0cignZGF0YS1odG1sJykgPT09ICd0cnVlJyA6IG9wdGlvbnMuaHRtbDsKICAgICAgICAgIHRvb2x0aXBEZWxheSA9IG9yaWdpbi5hdHRyKCdkYXRhLWRlbGF5Jyk7CiAgICAgICAgICB0b29sdGlwRGVsYXkgPSAodG9vbHRpcERlbGF5ID09PSB1bmRlZmluZWQgfHwgdG9vbHRpcERlbGF5ID09PSAnJykgPwogICAgICAgICAgICAgIG9wdGlvbnMuZGVsYXkgOiB0b29sdGlwRGVsYXk7CiAgICAgICAgICB0b29sdGlwUG9zaXRpb24gPSBvcmlnaW4uYXR0cignZGF0YS1wb3NpdGlvbicpOwogICAgICAgICAgdG9vbHRpcFBvc2l0aW9uID0gKHRvb2x0aXBQb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHRvb2x0aXBQb3NpdGlvbiA9PT0gJycpID8KICAgICAgICAgICAgICBvcHRpb25zLnBvc2l0aW9uIDogdG9vbHRpcFBvc2l0aW9uOwogICAgICAgICAgdG9vbHRpcFRleHQgPSBvcmlnaW4uYXR0cignZGF0YS10b29sdGlwJyk7CiAgICAgICAgICB0b29sdGlwVGV4dCA9ICh0b29sdGlwVGV4dCA9PT0gdW5kZWZpbmVkIHx8IHRvb2x0aXBUZXh0ID09PSAnJykgPwogICAgICAgICAgICAgIG9wdGlvbnMudG9vbHRpcCA6IHRvb2x0aXBUZXh0OwogICAgICAgIH07CiAgICAgICAgc2V0QXR0cmlidXRlcygpOwoKICAgICAgICB2YXIgcmVuZGVyVG9vbHRpcEVsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgdG9vbHRpcCA9ICQoJzxkaXYgY2xhc3M9Im1hdGVyaWFsLXRvb2x0aXAiPjwvZGl2PicpOwoKICAgICAgICAgIC8vIENyZWF0ZSBUZXh0IHNwYW4KICAgICAgICAgIGlmIChhbGxvd0h0bWwpIHsKICAgICAgICAgICAgdG9vbHRpcFRleHQgPSAkKCc8c3Bhbj48L3NwYW4+JykuaHRtbCh0b29sdGlwVGV4dCk7CiAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgIHRvb2x0aXBUZXh0ID0gJCgnPHNwYW4+PC9zcGFuPicpLnRleHQodG9vbHRpcFRleHQpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIENyZWF0ZSB0b29sdGlwCiAgICAgICAgICB0b29sdGlwLmFwcGVuZCh0b29sdGlwVGV4dCkKICAgICAgICAgICAgLmFwcGVuZFRvKCQoJ2JvZHknKSkKICAgICAgICAgICAgLmF0dHIoJ2lkJywgdG9vbHRpcElkKTsKCiAgICAgICAgICAvLyBDcmVhdGUgYmFja2Ryb3AKICAgICAgICAgIGJhY2tkcm9wID0gJCgnPGRpdiBjbGFzcz0iYmFja2Ryb3AiPjwvZGl2PicpOwogICAgICAgICAgYmFja2Ryb3AuYXBwZW5kVG8odG9vbHRpcCk7CiAgICAgICAgICByZXR1cm4gdG9vbHRpcDsKICAgICAgICB9OwogICAgICAgIHRvb2x0aXBFbCA9IHJlbmRlclRvb2x0aXBFbCgpOwoKICAgICAgICAvLyBEZXN0cm95IHByZXZpb3VzbHkgYmluZGVkIGV2ZW50cwogICAgICAgIG9yaWdpbi5vZmYoJ21vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXAnKTsKICAgICAgICAvLyBNb3VzZSBJbgogICAgICAgIHZhciBzdGFydGVkID0gZmFsc2UsIHRpbWVvdXRSZWY7CiAgICAgICAgb3JpZ2luLm9uKHsnbW91c2VlbnRlci50b29sdGlwJzogZnVuY3Rpb24oZSkgewogICAgICAgICAgdmFyIHNob3dUb29sdGlwID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMoKTsKICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7CiAgICAgICAgICAgIHRvb2x0aXBFbC52ZWxvY2l0eSgnc3RvcCcpOwogICAgICAgICAgICBiYWNrZHJvcC52ZWxvY2l0eSgnc3RvcCcpOwogICAgICAgICAgICB0b29sdGlwRWwuY3NzKHsgdmlzaWJpbGl0eTogJ3Zpc2libGUnLCBsZWZ0OiAnMHB4JywgdG9wOiAnMHB4JyB9KTsKCiAgICAgICAgICAgIC8vIFRvb2x0aXAgcG9zaXRpb25pbmcKICAgICAgICAgICAgdmFyIG9yaWdpbldpZHRoID0gb3JpZ2luLm91dGVyV2lkdGgoKTsKICAgICAgICAgICAgdmFyIG9yaWdpbkhlaWdodCA9IG9yaWdpbi5vdXRlckhlaWdodCgpOwogICAgICAgICAgICB2YXIgdG9vbHRpcEhlaWdodCA9IHRvb2x0aXBFbC5vdXRlckhlaWdodCgpOwogICAgICAgICAgICB2YXIgdG9vbHRpcFdpZHRoID0gdG9vbHRpcEVsLm91dGVyV2lkdGgoKTsKICAgICAgICAgICAgdmFyIHRvb2x0aXBWZXJ0aWNhbE1vdmVtZW50ID0gJzBweCc7CiAgICAgICAgICAgIHZhciB0b29sdGlwSG9yaXpvbnRhbE1vdmVtZW50ID0gJzBweCc7CiAgICAgICAgICAgIHZhciBiYWNrZHJvcE9mZnNldFdpZHRoID0gYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgIHZhciBiYWNrZHJvcE9mZnNldEhlaWdodCA9IGJhY2tkcm9wWzBdLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgdmFyIHNjYWxlWEZhY3RvciA9IDg7CiAgICAgICAgICAgIHZhciBzY2FsZVlGYWN0b3IgPSA4OwogICAgICAgICAgICB2YXIgc2NhbGVGYWN0b3IgPSAwOwogICAgICAgICAgICB2YXIgdGFyZ2V0VG9wLCB0YXJnZXRMZWZ0LCBuZXdDb29yZGluYXRlczsKCiAgICAgICAgICAgIGlmICh0b29sdGlwUG9zaXRpb24gPT09ICJ0b3AiKSB7CiAgICAgICAgICAgICAgLy8gVG9wIFBvc2l0aW9uCiAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCAtIHRvb2x0aXBIZWlnaHQgLSBtYXJnaW47CiAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IG9yaWdpbi5vZmZzZXQoKS5sZWZ0ICsgb3JpZ2luV2lkdGgvMiAtIHRvb2x0aXBXaWR0aC8yOwogICAgICAgICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gcmVwb3NpdGlvbldpdGhpblNjcmVlbih0YXJnZXRMZWZ0LCB0YXJnZXRUb3AsIHRvb2x0aXBXaWR0aCwgdG9vbHRpcEhlaWdodCk7CiAgICAgICAgICAgICAgdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQgPSAnLTEwcHgnOwogICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7CiAgICAgICAgICAgICAgICBib3R0b206IDAsCiAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTRweCAxNHB4IDAgMCcsCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgMTAwJScsCiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IHRvb2x0aXBIZWlnaHQsCiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAodG9vbHRpcFdpZHRoLzIpIC0gKGJhY2tkcm9wT2Zmc2V0V2lkdGgvMikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBMZWZ0IFBvc2l0aW9uCiAgICAgICAgICAgIGVsc2UgaWYgKHRvb2x0aXBQb3NpdGlvbiA9PT0gImxlZnQiKSB7CiAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCArIG9yaWdpbkhlaWdodC8yIC0gdG9vbHRpcEhlaWdodC8yOwogICAgICAgICAgICAgIHRhcmdldExlZnQgPSAgb3JpZ2luLm9mZnNldCgpLmxlZnQgLSB0b29sdGlwV2lkdGggLSBtYXJnaW47CiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTsKCiAgICAgICAgICAgICAgdG9vbHRpcEhvcml6b250YWxNb3ZlbWVudCA9ICctMTBweCc7CiAgICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHsKICAgICAgICAgICAgICAgIHRvcDogJy03cHgnLAogICAgICAgICAgICAgICAgcmlnaHQ6IDAsCiAgICAgICAgICAgICAgICB3aWR0aDogJzE0cHgnLAogICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTRweCcsCiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICcxNHB4IDAgMCAxNHB4JywKICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzk1JSA1MCUnLAogICAgICAgICAgICAgICAgbWFyZ2luVG9wOiB0b29sdGlwSGVpZ2h0LzIsCiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiB0b29sdGlwV2lkdGgKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSaWdodCBQb3NpdGlvbgogICAgICAgICAgICBlbHNlIGlmICh0b29sdGlwUG9zaXRpb24gPT09ICJyaWdodCIpIHsKICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wICsgb3JpZ2luSGVpZ2h0LzIgLSB0b29sdGlwSGVpZ2h0LzI7CiAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IG9yaWdpbi5vZmZzZXQoKS5sZWZ0ICsgb3JpZ2luV2lkdGggKyBtYXJnaW47CiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTsKCiAgICAgICAgICAgICAgdG9vbHRpcEhvcml6b250YWxNb3ZlbWVudCA9ICcrMTBweCc7CiAgICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHsKICAgICAgICAgICAgICAgIHRvcDogJy03cHgnLAogICAgICAgICAgICAgICAgbGVmdDogMCwKICAgICAgICAgICAgICAgIHdpZHRoOiAnMTRweCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxNHB4JywKICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzAgMTRweCAxNHB4IDAnLAogICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnNSUgNTAlJywKICAgICAgICAgICAgICAgIG1hcmdpblRvcDogdG9vbHRpcEhlaWdodC8yLAogICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJzBweCcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAvLyBCb3R0b20gUG9zaXRpb24KICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wICsgb3JpZ2luLm91dGVySGVpZ2h0KCkgKyBtYXJnaW47CiAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IG9yaWdpbi5vZmZzZXQoKS5sZWZ0ICsgb3JpZ2luV2lkdGgvMiAtIHRvb2x0aXBXaWR0aC8yOwogICAgICAgICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gcmVwb3NpdGlvbldpdGhpblNjcmVlbih0YXJnZXRMZWZ0LCB0YXJnZXRUb3AsIHRvb2x0aXBXaWR0aCwgdG9vbHRpcEhlaWdodCk7CiAgICAgICAgICAgICAgdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQgPSAnKzEwcHgnOwogICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7CiAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogKHRvb2x0aXBXaWR0aC8yKSAtIChiYWNrZHJvcE9mZnNldFdpZHRoLzIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNldCB0b29wdGlwIGNzcyBwbGFjZW1lbnQKICAgICAgICAgICAgdG9vbHRpcEVsLmNzcyh7CiAgICAgICAgICAgICAgdG9wOiBuZXdDb29yZGluYXRlcy55LAogICAgICAgICAgICAgIGxlZnQ6IG5ld0Nvb3JkaW5hdGVzLngKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBDYWxjdWxhdGUgU2NhbGUgdG8gZmlsbAogICAgICAgICAgICBzY2FsZVhGYWN0b3IgPSBNYXRoLlNRUlQyICogdG9vbHRpcFdpZHRoIC8gcGFyc2VJbnQoYmFja2Ryb3BPZmZzZXRXaWR0aCk7CiAgICAgICAgICAgIHNjYWxlWUZhY3RvciA9IE1hdGguU1FSVDIgKiB0b29sdGlwSGVpZ2h0IC8gcGFyc2VJbnQoYmFja2Ryb3BPZmZzZXRIZWlnaHQpOwogICAgICAgICAgICBzY2FsZUZhY3RvciA9IE1hdGgubWF4KHNjYWxlWEZhY3Rvciwgc2NhbGVZRmFjdG9yKTsKCiAgICAgICAgICAgIHRvb2x0aXBFbC52ZWxvY2l0eSh7IHRyYW5zbGF0ZVk6IHRvb2x0aXBWZXJ0aWNhbE1vdmVtZW50LCB0cmFuc2xhdGVYOiB0b29sdGlwSG9yaXpvbnRhbE1vdmVtZW50fSwgeyBkdXJhdGlvbjogMzUwLCBxdWV1ZTogZmFsc2UgfSkKICAgICAgICAgICAgICAudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgZGVsYXk6IDUwLCBxdWV1ZTogZmFsc2V9KTsKICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHsgdmlzaWJpbGl0eTogJ3Zpc2libGUnIH0pCiAgICAgICAgICAgICAgLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjogNTUsIGRlbGF5OiAwLCBxdWV1ZTogZmFsc2V9KQogICAgICAgICAgICAgIC52ZWxvY2l0eSh7c2NhbGVYOiBzY2FsZUZhY3Rvciwgc2NhbGVZOiBzY2FsZUZhY3Rvcn0sIHtkdXJhdGlvbjogMzAwLCBkZWxheTogMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ30pOwogICAgICAgICAgfTsKCiAgICAgICAgICB0aW1lb3V0UmVmID0gc2V0VGltZW91dChzaG93VG9vbHRpcCwgdG9vbHRpcERlbGF5KTsgLy8gRW5kIEludGVydmFsCgogICAgICAgIC8vIE1vdXNlIE91dAogICAgICAgIH0sCiAgICAgICAgJ21vdXNlbGVhdmUudG9vbHRpcCc6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAvLyBSZXNldCBTdGF0ZQogICAgICAgICAgc3RhcnRlZCA9IGZhbHNlOwogICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYpOwoKICAgICAgICAgIC8vIEFuaW1hdGUgYmFjawogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKHN0YXJ0ZWQgIT09IHRydWUpIHsKICAgICAgICAgICAgICB0b29sdGlwRWwudmVsb2NpdHkoewogICAgICAgICAgICAgICAgb3BhY2l0eTogMCwgdHJhbnNsYXRlWTogMCwgdHJhbnNsYXRlWDogMH0sIHsgZHVyYXRpb246IDIyNSwgcXVldWU6IGZhbHNlfSk7CiAgICAgICAgICAgICAgYmFja2Ryb3AudmVsb2NpdHkoe29wYWNpdHk6IDAsIHNjYWxlWDogMSwgc2NhbGVZOiAxfSwgewogICAgICAgICAgICAgICAgZHVyYXRpb246MjI1LAogICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLAogICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7IHZpc2liaWxpdHk6ICdoaWRkZW4nIH0pOwogICAgICAgICAgICAgICAgICB0b29sdGlwRWwuY3NzKHsgdmlzaWJpbGl0eTogJ2hpZGRlbicgfSk7CiAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTt9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sMjI1KTsKICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKICB9OwoKICB2YXIgcmVwb3NpdGlvbldpdGhpblNjcmVlbiA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpIHsKICAgIHZhciBuZXdYID0geDsKICAgIHZhciBuZXdZID0geTsKCiAgICBpZiAobmV3WCA8IDApIHsKICAgICAgbmV3WCA9IDQ7CiAgICB9IGVsc2UgaWYgKG5ld1ggKyB3aWR0aCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7CiAgICAgIG5ld1ggLT0gbmV3WCArIHdpZHRoIC0gd2luZG93LmlubmVyV2lkdGg7CiAgICB9CgogICAgaWYgKG5ld1kgPCAwKSB7CiAgICAgIG5ld1kgPSA0OwogICAgfSBlbHNlIGlmIChuZXdZICsgaGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0ICsgJCh3aW5kb3cpLnNjcm9sbFRvcCkgewogICAgICBuZXdZIC09IG5ld1kgKyBoZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICB9CgogICAgcmV0dXJuIHt4OiBuZXdYLCB5OiBuZXdZfTsKICB9OwoKICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpewogICAgICQoJy50b29sdGlwcGVkJykudG9vbHRpcCgpOwogICB9KTsKfSggalF1ZXJ5ICkpOwo7LyohCiAqIFdhdmVzIHYwLjYuNAogKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlcwogKgogKiBDb3B5cmlnaHQgMjAxNCBBbGZpYW5hIEUuIFNpYnVlYSBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwczovL2dpdGh1Yi5jb20vZmlhbnMvV2F2ZXMvYmxvYi9tYXN0ZXIvTElDRU5TRQogKi8KCjsoZnVuY3Rpb24od2luZG93KSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyIFdhdmVzID0gV2F2ZXMgfHwge307CiAgICB2YXIgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpOwoKICAgIC8vIEZpbmQgZXhhY3QgcG9zaXRpb24gb2YgZWxlbWVudAogICAgZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHsKICAgICAgICByZXR1cm4gaXNXaW5kb3coZWxlbSkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3OwogICAgfQoKICAgIGZ1bmN0aW9uIG9mZnNldChlbGVtKSB7CiAgICAgICAgdmFyIGRvY0VsZW0sIHdpbiwKICAgICAgICAgICAgYm94ID0ge3RvcDogMCwgbGVmdDogMH0sCiAgICAgICAgICAgIGRvYyA9IGVsZW0gJiYgZWxlbS5vd25lckRvY3VtZW50OwoKICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCiAgICAgICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkgewogICAgICAgICAgICBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIH0KICAgICAgICB3aW4gPSBnZXRXaW5kb3coZG9jKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0b3A6IGJveC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbGVtLmNsaWVudFRvcCwKICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnQKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnZlcnRTdHlsZShvYmopIHsKICAgICAgICB2YXIgc3R5bGUgPSAnJzsKCiAgICAgICAgZm9yICh2YXIgYSBpbiBvYmopIHsKICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShhKSkgewogICAgICAgICAgICAgICAgc3R5bGUgKz0gKGEgKyAnOicgKyBvYmpbYV0gKyAnOycpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3R5bGU7CiAgICB9CgogICAgdmFyIEVmZmVjdCA9IHsKCiAgICAgICAgLy8gRWZmZWN0IGRlbGF5CiAgICAgICAgZHVyYXRpb246IDc1MCwKCiAgICAgICAgc2hvdzogZnVuY3Rpb24oZSwgZWxlbWVudCkgewoKICAgICAgICAgICAgLy8gRGlzYWJsZSByaWdodCBjbGljawogICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudCB8fCB0aGlzOwoKICAgICAgICAgICAgLy8gQ3JlYXRlIHJpcHBsZQogICAgICAgICAgICB2YXIgcmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSAnd2F2ZXMtcmlwcGxlJzsKICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQocmlwcGxlKTsKCiAgICAgICAgICAgIC8vIEdldCBjbGljayBjb29yZGluYXRlIGFuZCBlbGVtZW50IHdpdGRoCiAgICAgICAgICAgIHZhciBwb3MgICAgICAgICA9IG9mZnNldChlbCk7CiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgICA9IChlLnBhZ2VZIC0gcG9zLnRvcCk7CiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggICA9IChlLnBhZ2VYIC0gcG9zLmxlZnQpOwogICAgICAgICAgICB2YXIgc2NhbGUgICAgICAgPSAnc2NhbGUoJysoKGVsLmNsaWVudFdpZHRoIC8gMTAwKSAqIDEwKSsnKSc7CgogICAgICAgICAgICAvLyBTdXBwb3J0IGZvciB0b3VjaCBkZXZpY2VzCiAgICAgICAgICAgIGlmICgndG91Y2hlcycgaW4gZSkgewogICAgICAgICAgICAgIHJlbGF0aXZlWSAgID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApOwogICAgICAgICAgICAgIHJlbGF0aXZlWCAgID0gKGUudG91Y2hlc1swXS5wYWdlWCAtIHBvcy5sZWZ0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQXR0YWNoIGRhdGEgdG8gZWxlbWVudAogICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTsKICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgcmVsYXRpdmVYKTsKICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS15JywgcmVsYXRpdmVZKTsKCiAgICAgICAgICAgIC8vIFNldCByaXBwbGUgcG9zaXRpb24KICAgICAgICAgICAgdmFyIHJpcHBsZVN0eWxlID0gewogICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLAogICAgICAgICAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVgrJ3B4JwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9IHJpcHBsZS5jbGFzc05hbWUgKyAnIHdhdmVzLW5vdHJhbnNpdGlvbic7CiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7CiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lLnJlcGxhY2UoJ3dhdmVzLW5vdHJhbnNpdGlvbicsICcnKTsKCiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGUKICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzY2FsZTsKICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNmb3JtJ10gPSBzY2FsZTsKICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlOwogICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNmb3JtJ10gPSBzY2FsZTsKICAgICAgICAgICAgcmlwcGxlU3R5bGUudHJhbnNmb3JtID0gc2NhbGU7CiAgICAgICAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgICA9ICcxJzsKCiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7CiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nXSAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7CiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7CiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7CgogICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknOwogICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknOwogICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknOwogICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknOwoKICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTsKICAgICAgICB9LAoKICAgICAgICBoaWRlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaHVwKGUpOwoKICAgICAgICAgICAgdmFyIGVsID0gdGhpczsKICAgICAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGggKiAxLjQ7CgogICAgICAgICAgICAvLyBHZXQgZmlyc3QgcmlwcGxlCiAgICAgICAgICAgIHZhciByaXBwbGUgPSBudWxsOwogICAgICAgICAgICB2YXIgcmlwcGxlcyA9IGVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dhdmVzLXJpcHBsZScpOwogICAgICAgICAgICBpZiAocmlwcGxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggICA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpOwogICAgICAgICAgICB2YXIgcmVsYXRpdmVZICAgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTsKICAgICAgICAgICAgdmFyIHNjYWxlICAgICAgID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScpOwoKICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmUKICAgICAgICAgICAgdmFyIGRpZmYgPSBEYXRlLm5vdygpIC0gTnVtYmVyKHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcpKTsKICAgICAgICAgICAgdmFyIGRlbGF5ID0gMzUwIC0gZGlmZjsKCiAgICAgICAgICAgIGlmIChkZWxheSA8IDApIHsKICAgICAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRmFkZSBvdXQgcmlwcGxlIGFmdGVyIGRlbGF5CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLAogICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCcsCiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMCcsCgogICAgICAgICAgICAgICAgICAgIC8vIER1cmF0aW9uCiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsCiAgICAgICAgICAgICAgICAgICAgJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsCiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLAogICAgICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJywKICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBzY2FsZSwKICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSwKICAgICAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLAogICAgICAgICAgICAgICAgICAgICctby10cmFuc2Zvcm0nOiBzY2FsZSwKICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGUsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHN0eWxlKSk7CgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVDaGlsZChyaXBwbGUpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgRWZmZWN0LmR1cmF0aW9uKTsKICAgICAgICAgICAgfSwgZGVsYXkpOwogICAgICAgIH0sCgogICAgICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3QKICAgICAgICB3cmFwSW5wdXQ6IGZ1bmN0aW9uKGVsZW1lbnRzKSB7CiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgZWxlbWVudHMubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRzW2FdOwoKICAgICAgICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaW5wdXQgYWxyZWFkeSBoYXZlIHBhcmVudCBqdXN0IHBhc3MgdGhyb3VnaAogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaScgJiYgcGFyZW50LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBjbGFzcyBhbmQgc3R5bGUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnQKICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTsKICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICcgd2F2ZXMtaW5wdXQtd3JhcHBlcic7CgogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50U3R5bGUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7CgogICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTdHlsZSA9ICcnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZWxlbWVudFN0eWxlKTsKCiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7CiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpOwoKICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBhcyBjaGlsZAogICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQod3JhcHBlciwgZWwpOwogICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCgogICAgLyoqCiAgICAgKiBEaXNhYmxlIG1vdXNlZG93biBldmVudCBmb3IgNTAwbXMgZHVyaW5nIGFuZCBhZnRlciB0b3VjaAogICAgICovCiAgICB2YXIgVG91Y2hIYW5kbGVyID0gewogICAgICAgIC8qIHVzZXMgYW4gaW50ZWdlciByYXRoZXIgdGhhbiBib29sIHNvIHRoZXJlJ3Mgbm8gaXNzdWVzIHdpdGgKICAgICAgICAgKiBuZWVkaW5nIHRvIGNsZWFyIHRpbWVvdXRzIGlmIGFub3RoZXIgdG91Y2ggZXZlbnQgb2NjdXJyZWQKICAgICAgICAgKiB3aXRoaW4gdGhlIDUwMG1zLiBDYW5ub3QgbW91c2V1cCBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kCiAgICAgICAgICogdG91Y2hlbmQsIG5vciBpbiB0aGUgNTAwbXMgYWZ0ZXIgdG91Y2hlbmQuICovCiAgICAgICAgdG91Y2hlczogMCwKICAgICAgICBhbGxvd0V2ZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBhbGxvdyA9IHRydWU7CgogICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHsKICAgICAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaGVzICs9IDE7IC8vcHVzaAogICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2hlcyAtPSAxOyAvL3BvcCBhZnRlciA1MDBtcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiBUb3VjaEhhbmRsZXIudG91Y2hlcyA+IDApIHsKICAgICAgICAgICAgICAgIGFsbG93ID0gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBhbGxvdzsKICAgICAgICB9LAogICAgICAgIHRvdWNodXA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSk7CiAgICAgICAgfQogICAgfTsKCgogICAgLyoqCiAgICAgKiBEZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlciBmb3IgLndhdmVzLWVmZmVjdCBlbGVtZW50LgogICAgICogcmV0dXJucyBudWxsIHdoZW4gLndhdmVzLWVmZmVjdCBlbGVtZW50IG5vdCBpbiAiY2xpY2sgdHJlZSIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpIHsKICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgdmFyIGVsZW1lbnQgPSBudWxsOwogICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CgogICAgICAgIHdoaWxlICh0YXJnZXQucGFyZW50RWxlbWVudCAhPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkgewogICAgICAgICAgICAgICAgZWxlbWVudCA9IHRhcmdldDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignd2F2ZXMtZWZmZWN0JykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICAvKioKICAgICAqIEJ1YmJsZSB0aGUgY2xpY2sgYW5kIHNob3cgZWZmZWN0IGlmIC53YXZlcy1lZmZlY3QgZWxlbSB3YXMgZm91bmQKICAgICAqLwogICAgZnVuY3Rpb24gc2hvd0VmZmVjdChlKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSk7CgogICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7CiAgICAgICAgICAgIEVmZmVjdC5zaG93KGUsIGVsZW1lbnQpOwoKICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgewogICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgRWZmZWN0LmhpZGUsIGZhbHNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgRWZmZWN0LmhpZGUsIGZhbHNlKTsKICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgRWZmZWN0LmhpZGUsIGZhbHNlKTsKICAgICAgICB9CiAgICB9CgogICAgV2F2ZXMuZGlzcGxheUVmZmVjdCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgICAgaWYgKCdkdXJhdGlvbicgaW4gb3B0aW9ucykgewogICAgICAgICAgICBFZmZlY3QuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uOwogICAgICAgIH0KCiAgICAgICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnCiAgICAgICAgRWZmZWN0LndyYXBJbnB1dCgkJCgnLndhdmVzLWVmZmVjdCcpKTsKCiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzaG93RWZmZWN0LCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHNob3dFZmZlY3QsIGZhbHNlKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBBdHRhY2ggV2F2ZXMgdG8gYW4gaW5wdXQgZWxlbWVudCAob3IgYW55IGVsZW1lbnQgd2hpY2ggZG9lc24ndAogICAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuCiAgICAgKiAgIEludGVuZGVkIHRvIGJlIHVzZWQgd2l0aCBkeW5hbWljYWxseSBsb2FkZWQgZm9ybXMvaW5wdXRzLCBvcgogICAgICogd2hlcmUgdGhlIHVzZXIgZG9lc24ndCB3YW50IGEgZGVsZWdhdGVkIGNsaWNrIGhhbmRsZXIuCiAgICAgKi8KICAgIFdhdmVzLmF0dGFjaCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAvL0ZVVFVSRTogYXV0b21hdGljYWxseSBhZGQgd2F2ZXMgY2xhc3NlcyBhbmQgYWxsb3cgdXNlcnMKICAgICAgICAvLyB0byBzcGVjaWZ5IHRoZW0gd2l0aCBhbiBvcHRpb25zIHBhcmFtPyBFZy4gbGlnaHQvY2xhc3NpYy9idXR0b24KICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHsKICAgICAgICAgICAgRWZmZWN0LndyYXBJbnB1dChbZWxlbWVudF0pOwogICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgewogICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzaG93RWZmZWN0LCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHNob3dFZmZlY3QsIGZhbHNlKTsKICAgIH07CgogICAgd2luZG93LldhdmVzID0gV2F2ZXM7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QoKTsKICAgIH0sIGZhbHNlKTsKCn0pKHdpbmRvdyk7CjtNYXRlcmlhbGl6ZS50b2FzdCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBkaXNwbGF5TGVuZ3RoLCBjbGFzc05hbWUsIGNvbXBsZXRlQ2FsbGJhY2spIHsKICBjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgIiI7CgogIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3QtY29udGFpbmVyJyk7CgogIC8vIENyZWF0ZSB0b2FzdCBjb250YWluZXIgaWYgaXQgZG9lcyBub3QgZXhpc3QKICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7CiAgICAvLyBjcmVhdGUgbm90aWZpY2F0aW9uIGNvbnRhaW5lcgogICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb250YWluZXIuaWQgPSAndG9hc3QtY29udGFpbmVyJzsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICB9CgogIC8vIFNlbGVjdCBhbmQgYXBwZW5kIHRvYXN0CiAgdmFyIG5ld1RvYXN0ID0gY3JlYXRlVG9hc3QobWVzc2FnZSk7CgogIC8vIG9ubHkgYXBwZW5kIHRvYXN0IGlmIG1lc3NhZ2UgaXMgbm90IHVuZGVmaW5lZAogIGlmKG1lc3NhZ2UpewogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1RvYXN0KTsKICB9CgogIG5ld1RvYXN0LnN0eWxlLm9wYWNpdHkgPSAwOwoKICAvLyBBbmltYXRlIHRvYXN0IGluCiAgVmVsKG5ld1RvYXN0LCB7dHJhbnNsYXRlWTogJy0zNXB4JywgIG9wYWNpdHk6IDEgfSwge2R1cmF0aW9uOiAzMDAsCiAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLAogICAgcXVldWU6IGZhbHNlfSk7CgogIC8vIEFsbG93cyB0aW1lciB0byBiZSBwYXVzZSB3aGlsZSBiZWluZyBwYW5uZWQKICB2YXIgdGltZUxlZnQgPSBkaXNwbGF5TGVuZ3RoOwogIHZhciBjb3VudGVySW50ZXJ2YWw7CiAgaWYgKHRpbWVMZWZ0ICE9IG51bGwpICB7CiAgICBjb3VudGVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCAoZnVuY3Rpb24oKXsKICAgICAgaWYgKG5ld1RvYXN0LnBhcmVudE5vZGUgPT09IG51bGwpCiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoY291bnRlckludGVydmFsKTsKCiAgICAgIC8vIElmIHRvYXN0IGlzIG5vdCBiZWluZyBkcmFnZ2VkLCBkZWNyZWFzZSBpdHMgdGltZSByZW1haW5pbmcKICAgICAgaWYgKCFuZXdUb2FzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhbm5pbmcnKSkgewogICAgICAgIHRpbWVMZWZ0IC09IDIwOwogICAgICB9CgogICAgICBpZiAodGltZUxlZnQgPD0gMCkgewogICAgICAgIC8vIEFuaW1hdGUgdG9hc3Qgb3V0CiAgICAgICAgVmVsKG5ld1RvYXN0LCB7Im9wYWNpdHkiOiAwLCBtYXJnaW5Ub3A6ICctNDBweCd9LCB7IGR1cmF0aW9uOiAzNzUsCiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJywKICAgICAgICAgICAgcXVldWU6IGZhbHNlLAogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBvcHRpb25hbCBjYWxsYmFjawogICAgICAgICAgICAgIGlmKHR5cGVvZihjb21wbGV0ZUNhbGxiYWNrKSA9PT0gImZ1bmN0aW9uIikKICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2FsbGJhY2soKTsKICAgICAgICAgICAgICAvLyBSZW1vdmUgdG9hc3QgYWZ0ZXIgaXQgdGltZXMgb3V0CiAgICAgICAgICAgICAgdGhpc1swXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXNbMF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChjb3VudGVySW50ZXJ2YWwpOwogICAgICB9CiAgICB9LCAyMCk7CiAgfQoKCgogIGZ1bmN0aW9uIGNyZWF0ZVRvYXN0KGh0bWwpIHsKCiAgICAvLyBDcmVhdGUgdG9hc3QKICAgIHZhciB0b2FzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgndG9hc3QnKTsKICAgIGlmIChjbGFzc05hbWUpIHsKICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBjb3VudCA9IGNsYXNzZXMubGVuZ3RoOyBpIDwgY291bnQ7IGkrKykgewogICAgICAgIHRvYXN0LmNsYXNzTGlzdC5hZGQoY2xhc3Nlc1tpXSk7CiAgICAgIH0KICAgIH0KICAvLyBJZiB0eXBlIG9mIHBhcmFtZXRlciBpcyBIVE1MIEVsZW1lbnQKICAgIGlmICggdHlwZW9mIEhUTUxFbGVtZW50ID09PSAib2JqZWN0IiA/IGh0bWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA6IGh0bWwgJiYgdHlwZW9mIGh0bWwgPT09ICJvYmplY3QiICYmIGh0bWwgIT09IG51bGwgJiYgaHRtbC5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2YgaHRtbC5ub2RlTmFtZT09PSJzdHJpbmciCikgewogICAgICB0b2FzdC5hcHBlbmRDaGlsZChodG1sKTsKICAgIH0KICAgIGVsc2UgaWYgKGh0bWwgaW5zdGFuY2VvZiBqUXVlcnkpIHsKICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgalF1ZXJ5IG9iamVjdAogICAgICB0b2FzdC5hcHBlbmRDaGlsZChodG1sWzBdKTsKICAgIH0KICAgIGVsc2UgewogICAgICAvLyBJbnNlcnQgYXMgdGV4dDsKICAgICAgdG9hc3QuaW5uZXJIVE1MID0gaHRtbDsKICAgIH0KICAgIC8vIEJpbmQgaGFtbWVyCiAgICB2YXIgaGFtbWVySGFuZGxlciA9IG5ldyBIYW1tZXIodG9hc3QsIHtwcmV2ZW50X2RlZmF1bHQ6IGZhbHNlfSk7CiAgICBoYW1tZXJIYW5kbGVyLm9uKCdwYW4nLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciBkZWx0YVggPSBlLmRlbHRhWDsKICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IDgwOwoKICAgICAgLy8gQ2hhbmdlIHRvYXN0IHN0YXRlCiAgICAgIGlmICghdG9hc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYW5uaW5nJykpewogICAgICAgIHRvYXN0LmNsYXNzTGlzdC5hZGQoJ3Bhbm5pbmcnKTsKICAgICAgfQoKICAgICAgdmFyIG9wYWNpdHlQZXJjZW50ID0gMS1NYXRoLmFicyhkZWx0YVggLyBhY3RpdmF0aW9uRGlzdGFuY2UpOwogICAgICBpZiAob3BhY2l0eVBlcmNlbnQgPCAwKQogICAgICAgIG9wYWNpdHlQZXJjZW50ID0gMDsKCiAgICAgIFZlbCh0b2FzdCwge2xlZnQ6IGRlbHRhWCwgb3BhY2l0eTogb3BhY2l0eVBlcmNlbnQgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKCiAgICB9KTsKCiAgICBoYW1tZXJIYW5kbGVyLm9uKCdwYW5lbmQnLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciBkZWx0YVggPSBlLmRlbHRhWDsKICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IDgwOwoKICAgICAgLy8gSWYgdG9hc3QgZHJhZ2dlZCBwYXN0IGFjdGl2YXRpb24gcG9pbnQKICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiBhY3RpdmF0aW9uRGlzdGFuY2UpIHsKICAgICAgICBWZWwodG9hc3QsIHttYXJnaW5Ub3A6ICctNDBweCd9LCB7IGR1cmF0aW9uOiAzNzUsCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsCiAgICAgICAgICBxdWV1ZTogZmFsc2UsCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYodHlwZW9mKGNvbXBsZXRlQ2FsbGJhY2spID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgY29tcGxldGVDYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRvYXN0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9hc3QpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgfSBlbHNlIHsKICAgICAgICB0b2FzdC5jbGFzc0xpc3QucmVtb3ZlKCdwYW5uaW5nJyk7CiAgICAgICAgLy8gUHV0IHRvYXN0IGJhY2sgaW50byBvcmlnaW5hbCBwb3NpdGlvbgogICAgICAgIFZlbCh0b2FzdCwgeyBsZWZ0OiAwLCBvcGFjaXR5OiAxIH0sIHsgZHVyYXRpb246IDMwMCwKICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJywKICAgICAgICAgIHF1ZXVlOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHRvYXN0OwogIH0KfTsKOyhmdW5jdGlvbiAoJCkgewoKICB2YXIgbWV0aG9kcyA9IHsKICAgIGluaXQgOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAgIHZhciBkZWZhdWx0cyA9IHsKICAgICAgICBtZW51V2lkdGg6IDMwMCwKICAgICAgICBlZGdlOiAnbGVmdCcsCiAgICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZSwKICAgICAgICBkcmFnZ2FibGU6IHRydWUsCiAgICAgICAgb25PcGVuOiBudWxsLAogICAgICAgIG9uQ2xvc2U6IG51bGwKICAgICAgfTsKICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTsKCiAgICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpewogICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgICAgdmFyIG1lbnVJZCA9ICR0aGlzLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJyk7CiAgICAgICAgdmFyIG1lbnUgPSAkKCIjIisgbWVudUlkKTsKCiAgICAgICAgLy8gU2V0IHRvIHdpZHRoCiAgICAgICAgaWYgKG9wdGlvbnMubWVudVdpZHRoICE9IDMwMCkgewogICAgICAgICAgbWVudS5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpOwogICAgICAgIH0KCiAgICAgICAgLy8gQWRkIFRvdWNoIEFyZWEKICAgICAgICB2YXIgJGRyYWdUYXJnZXQgPSAkKCcuZHJhZy10YXJnZXRbZGF0YS1zaWRlbmF2PSInICsgbWVudUlkICsgJyJdJyk7CiAgICAgICAgaWYgKG9wdGlvbnMuZHJhZ2dhYmxlKSB7CiAgICAgICAgICAvLyBSZWdlbmVyYXRlIGRyYWdUYXJnZXQKICAgICAgICAgIGlmICgkZHJhZ1RhcmdldC5sZW5ndGgpIHsKICAgICAgICAgICAgJGRyYWdUYXJnZXQucmVtb3ZlKCk7CiAgICAgICAgICB9CgogICAgICAgICAgJGRyYWdUYXJnZXQgPSAkKCc8ZGl2IGNsYXNzPSJkcmFnLXRhcmdldCI+PC9kaXY+JykuYXR0cignZGF0YS1zaWRlbmF2JywgbWVudUlkKTsKICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGRyYWdUYXJnZXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAkZHJhZ1RhcmdldCA9ICQoKTsKICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT0gJ2xlZnQnKSB7CiAgICAgICAgICBtZW51LmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoLTEwMCUpJyk7CiAgICAgICAgICAkZHJhZ1RhcmdldC5jc3MoeydsZWZ0JzogMH0pOyAvLyBBZGQgVG91Y2ggQXJlYQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIG1lbnUuYWRkQ2xhc3MoJ3JpZ2h0LWFsaWduZWQnKSAvLyBDaGFuZ2UgdGV4dC1hbGlnbm1lbnQgdG8gcmlnaHQKICAgICAgICAgICAgLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMTAwJSknKTsKICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7J3JpZ2h0JzogMH0pOyAvLyBBZGQgVG91Y2ggQXJlYQogICAgICAgIH0KCiAgICAgICAgLy8gSWYgZml4ZWQgc2lkZW5hdiwgYnJpbmcgbWVudSBvdXQKICAgICAgICBpZiAobWVudS5oYXNDbGFzcygnZml4ZWQnKSkgewogICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTIpIHsKICAgICAgICAgICAgICBtZW51LmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMCknKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAvLyBXaW5kb3cgcmVzaXplIHRvIHJlc2V0IG9uIGxhcmdlIHNjcmVlbnMgZml4ZWQKICAgICAgICBpZiAobWVudS5oYXNDbGFzcygnZml4ZWQnKSkgewogICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZSggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5MikgewogICAgICAgICAgICAgIC8vIENsb3NlIG1lbnUgaWYgd2luZG93IGlzIHJlc2l6ZWQgYmlnZ2VyIHRoYW4gOTkyIGFuZCB1c2VyIGhhcyBmaXhlZCBzaWRlbmF2CiAgICAgICAgICAgICAgaWYgKCQoJyNzaWRlbmF2LW92ZXJsYXknKS5sZW5ndGggIT09IDAgJiYgbWVudU91dCkgewogICAgICAgICAgICAgICAgcmVtb3ZlTWVudSh0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBtZW51LnJlbW92ZUF0dHIoJ3N0eWxlJyk7CiAgICAgICAgICAgICAgICBtZW51LmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMCUpJyk7CiAgICAgICAgICAgICAgICAvLyBtZW51LmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG1lbnVPdXQgPT09IGZhbHNlKXsKICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHsKICAgICAgICAgICAgICAgIG1lbnUuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgtMTAwJSknKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWVudS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDEwMCUpJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gaWYgY2xvc2VPbkNsaWNrLCB0aGVuIGFkZCBjbG9zZSBldmVudCBmb3IgYWxsIGEgdGFncyBpbiBzaWRlIHNpZGVOYXYKICAgICAgICBpZiAob3B0aW9ucy5jbG9zZU9uQ2xpY2sgPT09IHRydWUpIHsKICAgICAgICAgIG1lbnUub24oImNsaWNrLml0ZW1jbGljayIsICJhOm5vdCguY29sbGFwc2libGUtaGVhZGVyKSIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmICghKHdpbmRvdy5pbm5lcldpZHRoID4gOTkyICYmIG1lbnUuaGFzQ2xhc3MoJ2ZpeGVkJykpKXsKICAgICAgICAgICAgICByZW1vdmVNZW51KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlbW92ZU1lbnUgPSBmdW5jdGlvbihyZXN0b3JlTmF2KSB7CiAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7CiAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7CiAgICAgICAgICAvLyBSZWVuYWJsZSBzY3JvbGxpbmcKICAgICAgICAgICQoJ2JvZHknKS5jc3MoewogICAgICAgICAgICBvdmVyZmxvdzogJycsCiAgICAgICAgICAgIHdpZHRoOiAnJwogICAgICAgICAgfSk7CgogICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiAyMDAsCiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsCiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpOwogICAgICAgICAgICB9IH0pOwogICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICAgIC8vIFJlc2V0IHBoYW50b20gZGl2CiAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcnLCByaWdodDogJycsIGxlZnQ6ICcwJ30pOwogICAgICAgICAgICBtZW51LnZlbG9jaXR5KAogICAgICAgICAgICAgIHsndHJhbnNsYXRlWCc6ICctMTAwJSd9LAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDIwMCwKICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsCiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3JlTmF2ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBGaXhlZCBzaWRlbmF2CiAgICAgICAgICAgICAgICAgICAgbWVudS5yZW1vdmVBdHRyKCdzdHlsZScpOwogICAgICAgICAgICAgICAgICAgIG1lbnUuY3NzKCd3aWR0aCcsIG9wdGlvbnMubWVudVdpZHRoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gUmVzZXQgcGhhbnRvbSBkaXYKICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJycsIHJpZ2h0OiAnMCcsIGxlZnQ6ICcnfSk7CiAgICAgICAgICAgIG1lbnUudmVsb2NpdHkoCiAgICAgICAgICAgICAgeyd0cmFuc2xhdGVYJzogJzEwMCUnfSwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiAyMDAsCiAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsCiAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLAogICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBpZiAocmVzdG9yZU5hdiA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgRml4ZWQgc2lkZW5hdgogICAgICAgICAgICAgICAgICAgIG1lbnUucmVtb3ZlQXR0cignc3R5bGUnKTsKICAgICAgICAgICAgICAgICAgICBtZW51LmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBDYWxsYmFjawogICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uQ2xvc2UpID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIG9wdGlvbnMub25DbG9zZS5jYWxsKHRoaXMsIG1lbnUpOwogICAgICAgICAgfQogICAgICAgIH0KCgoKICAgICAgICAvLyBUb3VjaCBFdmVudAogICAgICAgIHZhciBwYW5uaW5nID0gZmFsc2U7CiAgICAgICAgdmFyIG1lbnVPdXQgPSBmYWxzZTsKCiAgICAgICAgaWYgKG9wdGlvbnMuZHJhZ2dhYmxlKSB7CiAgICAgICAgICAkZHJhZ1RhcmdldC5vbignY2xpY2snLCBmdW5jdGlvbigpewogICAgICAgICAgICBpZiAobWVudU91dCkgewogICAgICAgICAgICAgIHJlbW92ZU1lbnUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgJGRyYWdUYXJnZXQuaGFtbWVyKHsKICAgICAgICAgICAgcHJldmVudF9kZWZhdWx0OiBmYWxzZQogICAgICAgICAgfSkub24oJ3BhbicsIGZ1bmN0aW9uKGUpIHsKCiAgICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT0gInRvdWNoIikgewoKICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gZS5nZXN0dXJlLmRpcmVjdGlvbjsKICAgICAgICAgICAgICB2YXIgeCA9IGUuZ2VzdHVyZS5jZW50ZXIueDsKICAgICAgICAgICAgICB2YXIgeSA9IGUuZ2VzdHVyZS5jZW50ZXIueTsKICAgICAgICAgICAgICB2YXIgdmVsb2NpdHlYID0gZS5nZXN0dXJlLnZlbG9jaXR5WDsKCiAgICAgICAgICAgICAgLy8gVmVydGljYWwgc2Nyb2xsIGJ1Z2ZpeAogICAgICAgICAgICAgIGlmICh4ID09PSAwICYmIHkgPT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIERpc2FibGUgU2Nyb2xsaW5nCiAgICAgICAgICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpOwogICAgICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJyNzaWRlbmF2LW92ZXJsYXknKTsKICAgICAgICAgICAgICB2YXIgb2xkV2lkdGggPSAkYm9keS5pbm5lcldpZHRoKCk7CiAgICAgICAgICAgICAgJGJvZHkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTsKICAgICAgICAgICAgICAkYm9keS53aWR0aChvbGRXaWR0aCk7CgogICAgICAgICAgICAgIC8vIElmIG92ZXJsYXkgZG9lcyBub3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIGlmIGl0IGlzIGNsaWNrZWQsIGNsb3NlIG1lbnUKICAgICAgICAgICAgICBpZiAoJG92ZXJsYXkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAkb3ZlcmxheSA9ICQoJzxkaXYgaWQ9InNpZGVuYXYtb3ZlcmxheSI+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAkb3ZlcmxheS5jc3MoJ29wYWNpdHknLCAwKS5jbGljayggZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFJ1biAnb25PcGVuJyB3aGVuIHNpZGVuYXYgaXMgb3BlbmVkIHZpYSB0b3VjaC9zd2lwZSBpZiBhcHBsaWNhYmxlCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMub25PcGVuKSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBvcHRpb25zLm9uT3Blbi5jYWxsKHRoaXMsIG1lbnUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRvdmVybGF5KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIEtlZXAgd2l0aGluIGJvdW5kYXJpZXMKICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHsKICAgICAgICAgICAgICAgIGlmICh4ID4gb3B0aW9ucy5tZW51V2lkdGgpIHsgeCA9IG9wdGlvbnMubWVudVdpZHRoOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh4IDwgMCkgeyB4ID0gMDsgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvbgogICAgICAgICAgICAgICAgaWYgKHggPCAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkgeyBtZW51T3V0ID0gZmFsc2U7IH0KICAgICAgICAgICAgICAgIC8vIFJpZ2h0IERpcmVjdGlvbgogICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+PSAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkgeyBtZW51T3V0ID0gdHJ1ZTsgfQogICAgICAgICAgICAgICAgbWVudS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKCcgKyAoeCAtIG9wdGlvbnMubWVudVdpZHRoKSArICdweCknKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvbgogICAgICAgICAgICAgICAgaWYgKHggPCAod2luZG93LmlubmVyV2lkdGggLSBvcHRpb25zLm1lbnVXaWR0aCAvIDIpKSB7CiAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gUmlnaHQgRGlyZWN0aW9uCiAgICAgICAgICAgICAgICBlbHNlIGlmICh4ID49ICh3aW5kb3cuaW5uZXJXaWR0aCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHsKICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciByaWdodFBvcyA9ICh4IC0gb3B0aW9ucy5tZW51V2lkdGggLyAyKTsKICAgICAgICAgICAgICAgIGlmIChyaWdodFBvcyA8IDApIHsKICAgICAgICAgICAgICAgICAgcmlnaHRQb3MgPSAwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1lbnUuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgnICsgcmlnaHRQb3MgKyAncHgpJyk7CiAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgLy8gUGVyY2VudGFnZSBvdmVybGF5CiAgICAgICAgICAgICAgdmFyIG92ZXJsYXlQZXJjOwogICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0JykgewogICAgICAgICAgICAgICAgb3ZlcmxheVBlcmMgPSB4IC8gb3B0aW9ucy5tZW51V2lkdGg7CiAgICAgICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7b3BhY2l0eTogb3ZlcmxheVBlcmMgfSwge2R1cmF0aW9uOiAxMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBvdmVybGF5UGVyYyA9IE1hdGguYWJzKCh4IC0gd2luZG93LmlubmVyV2lkdGgpIC8gb3B0aW9ucy5tZW51V2lkdGgpOwogICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IG92ZXJsYXlQZXJjIH0sIHtkdXJhdGlvbjogMTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgfSkub24oJ3BhbmVuZCcsIGZ1bmN0aW9uKGUpIHsKCiAgICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT0gInRvdWNoIikgewogICAgICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJyNzaWRlbmF2LW92ZXJsYXknKTsKICAgICAgICAgICAgICB2YXIgdmVsb2NpdHlYID0gZS5nZXN0dXJlLnZlbG9jaXR5WDsKICAgICAgICAgICAgICB2YXIgeCA9IGUuZ2VzdHVyZS5jZW50ZXIueDsKICAgICAgICAgICAgICB2YXIgbGVmdFBvcyA9IHggLSBvcHRpb25zLm1lbnVXaWR0aDsKICAgICAgICAgICAgICB2YXIgcmlnaHRQb3MgPSB4IC0gb3B0aW9ucy5tZW51V2lkdGggLyAyOwogICAgICAgICAgICAgIGlmIChsZWZ0UG9zID4gMCApIHsKICAgICAgICAgICAgICAgIGxlZnRQb3MgPSAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmlnaHRQb3MgPCAwKSB7CiAgICAgICAgICAgICAgICByaWdodFBvcyA9IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB2ZWxvY2l0eVggPD0gMC4zIHRoZW4gdGhlIHVzZXIgaXMgZmxpbmdpbmcgdGhlIG1lbnUgY2xvc2VkIHNvIGlnbm9yZSBtZW51T3V0CiAgICAgICAgICAgICAgICBpZiAoKG1lbnVPdXQgJiYgdmVsb2NpdHlYIDw9IDAuMykgfHwgdmVsb2NpdHlYIDwgLTAuNSkgewogICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gbWVudSB0byBvcGVuCiAgICAgICAgICAgICAgICAgIGlmIChsZWZ0UG9zICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbWVudS52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgbGVmdFBvc119LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDEgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJzUwJScsIHJpZ2h0OiAwLCBsZWZ0OiAnJ30pOwogICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtZW51T3V0IHx8IHZlbG9jaXR5WCA+IDAuMykgewogICAgICAgICAgICAgICAgICAvLyBFbmFibGUgU2Nyb2xsaW5nCiAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoewogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnJywKICAgICAgICAgICAgICAgICAgICB3aWR0aDogJycKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIC8vIFNsaWRlIG1lbnUgY2xvc2VkCiAgICAgICAgICAgICAgICAgIG1lbnUudmVsb2NpdHkoeyd0cmFuc2xhdGVYJzogWy0xICogb3B0aW9ucy5tZW51V2lkdGggLSAxMCwgbGVmdFBvc119LCB7ZHVyYXRpb246IDIwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDAgfSwge2R1cmF0aW9uOiAyMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBSdW4gJ29uQ2xvc2UnIHdoZW4gc2lkZW5hdiBpcyBjbG9zZWQgdmlhIHRvdWNoL3N3aXBlIGlmIGFwcGxpY2FibGUKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5vbkNsb3NlKSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uQ2xvc2UuY2FsbCh0aGlzLCBtZW51KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9fSk7CiAgICAgICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcxMHB4JywgcmlnaHQ6ICcnLCBsZWZ0OiAwfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA+PSAtMC4zKSB8fCB2ZWxvY2l0eVggPiAwLjUpIHsKICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG1lbnUgdG8gb3BlbgogICAgICAgICAgICAgICAgICBpZiAocmlnaHRQb3MgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICBtZW51LnZlbG9jaXR5KHsndHJhbnNsYXRlWCc6IFswLCByaWdodFBvc119LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDEgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJzUwJScsIHJpZ2h0OiAnJywgbGVmdDogMH0pOwogICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtZW51T3V0IHx8IHZlbG9jaXR5WCA8IC0wLjMpIHsKICAgICAgICAgICAgICAgICAgLy8gRW5hYmxlIFNjcm9sbGluZwogICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHsKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgLy8gU2xpZGUgbWVudSBjbG9zZWQKICAgICAgICAgICAgICAgICAgbWVudS52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbb3B0aW9ucy5tZW51V2lkdGggKyAxMCwgcmlnaHRQb3NdfSwge2R1cmF0aW9uOiAyMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9fSk7CiAgICAgICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcxMHB4JywgcmlnaHQ6IDAsIGxlZnQ6ICcnfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy5vZmYoJ2NsaWNrLnNpZGVuYXYnKS5vbignY2xpY2suc2lkZW5hdicsIGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKG1lbnVPdXQgPT09IHRydWUpIHsKICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlOwogICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHJlbW92ZU1lbnUoKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgLy8gRGlzYWJsZSBTY3JvbGxpbmcKICAgICAgICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpOwogICAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCc8ZGl2IGlkPSJzaWRlbmF2LW92ZXJsYXkiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgb2xkV2lkdGggPSAkYm9keS5pbm5lcldpZHRoKCk7CiAgICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7CiAgICAgICAgICAgICRib2R5LndpZHRoKG9sZFdpZHRoKTsKCiAgICAgICAgICAgIC8vIFB1c2ggY3VycmVudCBkcmFnIHRhcmdldCBvbiB0b3Agb2YgRE9NIHRyZWUKICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZHJhZ1RhcmdldCk7CgogICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHsKICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnNTAlJywgcmlnaHQ6IDAsIGxlZnQ6ICcnfSk7CiAgICAgICAgICAgICAgbWVudS52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgLTEgKiBvcHRpb25zLm1lbnVXaWR0aF19LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnNTAlJywgcmlnaHQ6ICcnLCBsZWZ0OiAwfSk7CiAgICAgICAgICAgICAgbWVudS52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgb3B0aW9ucy5tZW51V2lkdGhdfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRvdmVybGF5LmNzcygnb3BhY2l0eScsIDApCiAgICAgICAgICAgIC5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTsKICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpOwogICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLAogICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfSB9KTsKCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkb3ZlcmxheSk7CiAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsCiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gQ2FsbGJhY2sKICAgICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uT3BlbikgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBvcHRpb25zLm9uT3Blbi5jYWxsKHRoaXMsIG1lbnUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKCgogICAgfSwKICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICRvdmVybGF5ID0gJCgnI3NpZGVuYXYtb3ZlcmxheScpOwogICAgICB2YXIgJGRyYWdUYXJnZXQgPSAkKCcuZHJhZy10YXJnZXRbZGF0YS1zaWRlbmF2PSInICsgJCh0aGlzKS5hdHRyKCdkYXRhLWFjdGl2YXRlcycpICsgJyJdJyk7CiAgICAgICRvdmVybGF5LnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICRkcmFnVGFyZ2V0LnJlbW92ZSgpOwogICAgICAkKHRoaXMpLm9mZignY2xpY2snKTsKICAgICAgJG92ZXJsYXkucmVtb3ZlKCk7CiAgICB9LAogICAgc2hvdyA6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICB9LAogICAgaGlkZSA6IGZ1bmN0aW9uKCkgewogICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudHJpZ2dlcignY2xpY2snKTsKICAgIH0KICB9OwoKCiAgJC5mbi5zaWRlTmF2ID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7CiAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHsKICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpOwogICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7CiAgICAgIC8vIERlZmF1bHQgdG8gImluaXQiCiAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwogICAgfSBlbHNlIHsKICAgICAgJC5lcnJvciggJ01ldGhvZCAnICsgIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnNpZGVOYXYnICk7CiAgICB9CiAgfTsgLy8gUGx1Z2luIGVuZAp9KCBqUXVlcnkgKSk7CjsvKioKICogRXh0ZW5kIGpxdWVyeSB3aXRoIGEgc2Nyb2xsc3B5IHBsdWdpbi4KICogVGhpcyB3YXRjaGVzIHRoZSB3aW5kb3cgc2Nyb2xsIGFuZCBmaXJlcyBldmVudHMgd2hlbiBlbGVtZW50cyBhcmUgc2Nyb2xsZWQgaW50byB2aWV3cG9ydC4KICoKICogdGhyb3R0bGUoKSBhbmQgZ2V0VGltZSgpIHRha2VuIGZyb20gVW5kZXJzY29yZS5qcwogKiBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUKICoKICogQGF1dGhvciBDb3B5cmlnaHQgMjAxMyBKb2huIFNtYXJ0CiAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vdGhlc21hcnQvanF1ZXJ5LXNjcm9sbHNweS9tYXN0ZXIvTElDRU5TRQogKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90aGVzbWFydAogKiBAdmVyc2lvbiAwLjEuMgogKi8KKGZ1bmN0aW9uKCQpIHsKCgl2YXIgaldpbmRvdyA9ICQod2luZG93KTsKCXZhciBlbGVtZW50cyA9IFtdOwoJdmFyIGVsZW1lbnRzSW5WaWV3ID0gW107Cgl2YXIgaXNTcHlpbmcgPSBmYWxzZTsKCXZhciB0aWNrcyA9IDA7Cgl2YXIgdW5pcXVlX2lkID0gMTsKCXZhciBvZmZzZXQgPSB7CgkJdG9wIDogMCwKCQlyaWdodCA6IDAsCgkJYm90dG9tIDogMCwKCQlsZWZ0IDogMCwKCX0KCgkvKioKCSAqIEZpbmQgZWxlbWVudHMgdGhhdCBhcmUgd2l0aGluIHRoZSBib3VuZGFyeQoJICogQHBhcmFtIHtudW1iZXJ9IHRvcAoJICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0CgkgKiBAcGFyYW0ge251bWJlcn0gYm90dG9tCgkgKiBAcGFyYW0ge251bWJlcn0gbGVmdAoJICogQHJldHVybiB7alF1ZXJ5fQkJQSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzCgkgKi8KCWZ1bmN0aW9uIGZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHsKCQl2YXIgaGl0cyA9ICQoKTsKCQkkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHsKCQkJaWYgKGVsZW1lbnQuaGVpZ2h0KCkgPiAwKSB7CgkJCQl2YXIgZWxUb3AgPSBlbGVtZW50Lm9mZnNldCgpLnRvcCwKCQkJCQllbExlZnQgPSBlbGVtZW50Lm9mZnNldCgpLmxlZnQsCgkJCQkJZWxSaWdodCA9IGVsTGVmdCArIGVsZW1lbnQud2lkdGgoKSwKCQkJCQllbEJvdHRvbSA9IGVsVG9wICsgZWxlbWVudC5oZWlnaHQoKTsKCgkJCQl2YXIgaXNJbnRlcnNlY3QgPSAhKGVsTGVmdCA+IHJpZ2h0IHx8CgkJCQkJZWxSaWdodCA8IGxlZnQgfHwKCQkJCQllbFRvcCA+IGJvdHRvbSB8fAoJCQkJCWVsQm90dG9tIDwgdG9wKTsKCgkJCQlpZiAoaXNJbnRlcnNlY3QpIHsKCQkJCQloaXRzLnB1c2goZWxlbWVudCk7CgkJCQl9CgkJCX0KCQl9KTsKCgkJcmV0dXJuIGhpdHM7Cgl9CgoKCS8qKgoJICogQ2FsbGVkIHdoZW4gdGhlIHVzZXIgc2Nyb2xscyB0aGUgd2luZG93CgkgKi8KCWZ1bmN0aW9uIG9uU2Nyb2xsKHNjcm9sbE9mZnNldCkgewoJCS8vIHVuaXF1ZSB0aWNrIGlkCgkJKyt0aWNrczsKCgkJLy8gdmlld3BvcnQgcmVjdGFuZ2xlCgkJdmFyIHRvcCA9IGpXaW5kb3cuc2Nyb2xsVG9wKCksCgkJCWxlZnQgPSBqV2luZG93LnNjcm9sbExlZnQoKSwKCQkJcmlnaHQgPSBsZWZ0ICsgaldpbmRvdy53aWR0aCgpLAoJCQlib3R0b20gPSB0b3AgKyBqV2luZG93LmhlaWdodCgpOwoKCQkvLyBkZXRlcm1pbmUgd2hpY2ggZWxlbWVudHMgYXJlIGluIHZpZXcKCQl2YXIgaW50ZXJzZWN0aW9ucyA9IGZpbmRFbGVtZW50cyh0b3Arb2Zmc2V0LnRvcCArIHNjcm9sbE9mZnNldCB8fCAyMDAsIHJpZ2h0K29mZnNldC5yaWdodCwgYm90dG9tK29mZnNldC5ib3R0b20sIGxlZnQrb2Zmc2V0LmxlZnQpOwoJCSQuZWFjaChpbnRlcnNlY3Rpb25zLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7CgoJCQl2YXIgbGFzdFRpY2sgPSBlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycpOwoJCQlpZiAodHlwZW9mIGxhc3RUaWNrICE9ICdudW1iZXInKSB7CgkJCQkvLyBlbnRlcmVkIGludG8gdmlldwoJCQkJZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmVudGVyJyk7CgkJCX0KCgkJCS8vIHVwZGF0ZSB0aWNrIGlkCgkJCWVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJywgdGlja3MpOwoJCX0pOwoKCQkvLyBkZXRlcm1pbmUgd2hpY2ggZWxlbWVudHMgYXJlIG5vIGxvbmdlciBpbiB2aWV3CgkJJC5lYWNoKGVsZW1lbnRzSW5WaWV3LCBmdW5jdGlvbihpLCBlbGVtZW50KSB7CgkJCXZhciBsYXN0VGljayA9IGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJyk7CgkJCWlmICh0eXBlb2YgbGFzdFRpY2sgPT0gJ251bWJlcicgJiYgbGFzdFRpY2sgIT09IHRpY2tzKSB7CgkJCQkvLyBleGl0ZWQgZnJvbSB2aWV3CgkJCQllbGVtZW50LnRyaWdnZXJIYW5kbGVyKCdzY3JvbGxTcHk6ZXhpdCcpOwoJCQkJZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnLCBudWxsKTsKCQkJfQoJCX0pOwoKCQkvLyByZW1lbWJlciBlbGVtZW50cyBpbiB2aWV3IGZvciBuZXh0IHRpY2sKCQllbGVtZW50c0luVmlldyA9IGludGVyc2VjdGlvbnM7Cgl9CgoJLyoqCgkgKiBDYWxsZWQgd2hlbiB3aW5kb3cgaXMgcmVzaXplZAoJKi8KCWZ1bmN0aW9uIG9uV2luU2l6ZSgpIHsKCQlqV2luZG93LnRyaWdnZXIoJ3Njcm9sbFNweTp3aW5TaXplJyk7Cgl9CgoKCS8qKgoJICogRW5hYmxlcyBTY3JvbGxTcHkgdXNpbmcgYSBzZWxlY3RvcgoJICogQHBhcmFtIHtqUXVlcnl8c3RyaW5nfSBzZWxlY3RvciAgVGhlIGVsZW1lbnRzIGNvbGxlY3Rpb24sIG9yIGEgc2VsZWN0b3IKCSAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucwlPcHRpb25hbC4KICAgICAgICB0aHJvdHRsZSA6IG51bWJlciAtPiBzY3JvbGxzcHkgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zCiAgICAgICAgb2Zmc2V0VG9wIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHRvcC4gRGVmYXVsdDogMAogICAgICAgIG9mZnNldFJpZ2h0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHJpZ2h0LiBEZWZhdWx0OiAwCiAgICAgICAgb2Zmc2V0Qm90dG9tIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGJvdHRvbS4gRGVmYXVsdDogMAogICAgICAgIG9mZnNldExlZnQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gbGVmdC4gRGVmYXVsdDogMAoJCQkJYWN0aXZlQ2xhc3MgOiBzdHJpbmcgLT4gQ2xhc3MgbmFtZSB0byBiZSBhZGRlZCB0byB0aGUgYWN0aXZlIGxpbmsuIERlZmF1bHQ6IGFjdGl2ZQoJICogQHJldHVybnMge2pRdWVyeX0KCSAqLwoJJC5zY3JvbGxTcHkgPSBmdW5jdGlvbihzZWxlY3Rvciwgb3B0aW9ucykgewoJICB2YXIgZGVmYXVsdHMgPSB7CgkJCXRocm90dGxlOiAxMDAsCgkJCXNjcm9sbE9mZnNldDogMjAwLCAvLyBvZmZzZXQgLSAyMDAgYWxsb3dzIGVsZW1lbnRzIG5lYXIgYm90dG9tIG9mIHBhZ2UgdG8gc2Nyb2xsCgkJCWFjdGl2ZUNsYXNzOiAnYWN0aXZlJywKCQkJZ2V0QWN0aXZlRWxlbWVudDogZnVuY3Rpb24oaWQpIHsKCQkJCXJldHVybiAnYVtocmVmPSIjJyArIGlkICsgJyJdJzsKCQkJfQogICAgfTsKICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7CgoJCXZhciB2aXNpYmxlID0gW107CgkJc2VsZWN0b3IgPSAkKHNlbGVjdG9yKTsKCQlzZWxlY3Rvci5lYWNoKGZ1bmN0aW9uKGksIGVsZW1lbnQpIHsKCQkJZWxlbWVudHMucHVzaCgkKGVsZW1lbnQpKTsKCQkJJChlbGVtZW50KS5kYXRhKCJzY3JvbGxTcHk6aWQiLCBpKTsKCQkJLy8gU21vb3RoIHNjcm9sbCB0byBzZWN0aW9uCgkJICAkKCdhW2hyZWY9IiMnICsgJChlbGVtZW50KS5hdHRyKCdpZCcpICsgJyJdJykuY2xpY2soZnVuY3Rpb24oZSkgewoJCSAgICBlLnByZXZlbnREZWZhdWx0KCk7CgkJICAgIHZhciBvZmZzZXQgPSAkKE1hdGVyaWFsaXplLmVzY2FwZUhhc2godGhpcy5oYXNoKSkub2Zmc2V0KCkudG9wICsgMTsKCSAgICAJJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IG9mZnNldCAtIG9wdGlvbnMuc2Nyb2xsT2Zmc2V0IH0sIHtkdXJhdGlvbjogNDAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRDdWJpYyd9KTsKCQkgIH0pOwoJCX0pOwoKCQlvZmZzZXQudG9wID0gb3B0aW9ucy5vZmZzZXRUb3AgfHwgMDsKCQlvZmZzZXQucmlnaHQgPSBvcHRpb25zLm9mZnNldFJpZ2h0IHx8IDA7CgkJb2Zmc2V0LmJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tIHx8IDA7CgkJb2Zmc2V0LmxlZnQgPSBvcHRpb25zLm9mZnNldExlZnQgfHwgMDsKCgkJdmFyIHRocm90dGxlZFNjcm9sbCA9IE1hdGVyaWFsaXplLnRocm90dGxlKGZ1bmN0aW9uKCkgewoJCQlvblNjcm9sbChvcHRpb25zLnNjcm9sbE9mZnNldCk7CgkJfSwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApOwoJCXZhciByZWFkeVNjcm9sbCA9IGZ1bmN0aW9uKCl7CgkJCSQoZG9jdW1lbnQpLnJlYWR5KHRocm90dGxlZFNjcm9sbCk7CgkJfTsKCgkJaWYgKCFpc1NweWluZykgewoJCQlqV2luZG93Lm9uKCdzY3JvbGwnLCByZWFkeVNjcm9sbCk7CgkJCWpXaW5kb3cub24oJ3Jlc2l6ZScsIHJlYWR5U2Nyb2xsKTsKCQkJaXNTcHlpbmcgPSB0cnVlOwoJCX0KCgkJLy8gcGVyZm9ybSBhIHNjYW4gb25jZSwgYWZ0ZXIgY3VycmVudCBleGVjdXRpb24gY29udGV4dCwgYW5kIGFmdGVyIGRvbSBpcyByZWFkeQoJCXNldFRpbWVvdXQocmVhZHlTY3JvbGwsIDApOwoKCgkJc2VsZWN0b3Iub24oJ3Njcm9sbFNweTplbnRlcicsIGZ1bmN0aW9uKCkgewoJCQl2aXNpYmxlID0gJC5ncmVwKHZpc2libGUsIGZ1bmN0aW9uKHZhbHVlKSB7CgkgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDsKCSAgICB9KTsKCgkJCXZhciAkdGhpcyA9ICQodGhpcyk7CgoJCQlpZiAodmlzaWJsZVswXSkgewoJCQkJJChvcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQodmlzaWJsZVswXS5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3Mob3B0aW9ucy5hY3RpdmVDbGFzcyk7CgkJCQlpZiAoJHRoaXMuZGF0YSgnc2Nyb2xsU3B5OmlkJykgPCB2aXNpYmxlWzBdLmRhdGEoJ3Njcm9sbFNweTppZCcpKSB7CgkJCQkJdmlzaWJsZS51bnNoaWZ0KCQodGhpcykpOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJdmlzaWJsZS5wdXNoKCQodGhpcykpOwoJCQkJfQoJCQl9CgkJCWVsc2UgewoJCQkJdmlzaWJsZS5wdXNoKCQodGhpcykpOwoJCQl9CgoKCQkJJChvcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQodmlzaWJsZVswXS5hdHRyKCdpZCcpKSkuYWRkQ2xhc3Mob3B0aW9ucy5hY3RpdmVDbGFzcyk7CgkJfSk7CgkJc2VsZWN0b3Iub24oJ3Njcm9sbFNweTpleGl0JywgZnVuY3Rpb24oKSB7CgkJCXZpc2libGUgPSAkLmdyZXAodmlzaWJsZSwgZnVuY3Rpb24odmFsdWUpIHsKCSAgICAgIHJldHVybiB2YWx1ZS5oZWlnaHQoKSAhPSAwOwoJICAgIH0pOwoKCQkJaWYgKHZpc2libGVbMF0pIHsKCQkJCSQob3B0aW9ucy5nZXRBY3RpdmVFbGVtZW50KHZpc2libGVbMF0uYXR0cignaWQnKSkpLnJlbW92ZUNsYXNzKG9wdGlvbnMuYWN0aXZlQ2xhc3MpOwoJCQkJdmFyICR0aGlzID0gJCh0aGlzKTsKCQkJCXZpc2libGUgPSAkLmdyZXAodmlzaWJsZSwgZnVuY3Rpb24odmFsdWUpIHsKCSAgICAgICAgcmV0dXJuIHZhbHVlLmF0dHIoJ2lkJykgIT0gJHRoaXMuYXR0cignaWQnKTsKCSAgICAgIH0pOwoJICAgICAgaWYgKHZpc2libGVbMF0pIHsgLy8gQ2hlY2sgaWYgZW1wdHkKCQkJCQkkKG9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudCh2aXNpYmxlWzBdLmF0dHIoJ2lkJykpKS5hZGRDbGFzcyhvcHRpb25zLmFjdGl2ZUNsYXNzKTsKCSAgICAgIH0KCQkJfQoJCX0pOwoKCQlyZXR1cm4gc2VsZWN0b3I7Cgl9OwoKCS8qKgoJICogTGlzdGVuIGZvciB3aW5kb3cgcmVzaXplIGV2ZW50cwoJICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zCQkJCQkJT3B0aW9uYWwuIFNldCB7IHRocm90dGxlOiBudW1iZXIgfSB0byBjaGFuZ2UgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zCgkgKiBAcmV0dXJucyB7alF1ZXJ5fQkJJCh3aW5kb3cpCgkgKi8KCSQud2luU2l6ZVNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKCQkkLndpblNpemVTcHkgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGpXaW5kb3c7IH07IC8vIGxvY2sgZnJvbSBtdWx0aXBsZSBjYWxscwoJCW9wdGlvbnMgPSBvcHRpb25zIHx8IHsKCQkJdGhyb3R0bGU6IDEwMAoJCX07CgkJcmV0dXJuIGpXaW5kb3cub24oJ3Jlc2l6ZScsIE1hdGVyaWFsaXplLnRocm90dGxlKG9uV2luU2l6ZSwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApKTsKCX07CgoJLyoqCgkgKiBFbmFibGVzIFNjcm9sbFNweSBvbiBhIGNvbGxlY3Rpb24gb2YgZWxlbWVudHMKCSAqIGUuZy4gJCgnLnNjcm9sbFNweScpLnNjcm9sbFNweSgpCgkgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMJT3B0aW9uYWwuCgkJCQkJCQkJCQkJdGhyb3R0bGUgOiBudW1iZXIgLT4gc2Nyb2xsc3B5IHRocm90dGxpbmcuIERlZmF1bHQ6IDEwMCBtcwoJCQkJCQkJCQkJCW9mZnNldFRvcCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSB0b3AuIERlZmF1bHQ6IDAKCQkJCQkJCQkJCQlvZmZzZXRSaWdodCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSByaWdodC4gRGVmYXVsdDogMAoJCQkJCQkJCQkJCW9mZnNldEJvdHRvbSA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBib3R0b20uIERlZmF1bHQ6IDAKCQkJCQkJCQkJCQlvZmZzZXRMZWZ0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGxlZnQuIERlZmF1bHQ6IDAKCSAqIEByZXR1cm5zIHtqUXVlcnl9CgkgKi8KCSQuZm4uc2Nyb2xsU3B5ID0gZnVuY3Rpb24ob3B0aW9ucykgewoJCXJldHVybiAkLnNjcm9sbFNweSgkKHRoaXMpLCBvcHRpb25zKTsKCX07Cgp9KShqUXVlcnkpOwo7KGZ1bmN0aW9uICgkKSB7CiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7CgogICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGxhYmVscyBvZiB0ZXh0IGZpZWxkcwogICAgTWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcyA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhJzsKICAgICAgJChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkgewogICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgICAgaWYgKCQoZWxlbWVudCkudmFsKCkubGVuZ3RoID4gMCB8fCAkKGVsZW1lbnQpLmlzKCc6Zm9jdXMnKSB8fCBlbGVtZW50LmF1dG9mb2N1cyB8fCAkdGhpcy5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICB9IGVsc2UgaWYgKCQoZWxlbWVudClbMF0udmFsaWRpdHkpIHsKICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCAkKGVsZW1lbnQpWzBdLnZhbGlkaXR5LmJhZElucHV0ID09PSB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIC8vIFRleHQgYmFzZWQgaW5wdXRzCiAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhJzsKCiAgICAvLyBBZGQgYWN0aXZlIGlmIGZvcm0gYXV0byBjb21wbGV0ZQogICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmKCQodGhpcykudmFsKCkubGVuZ3RoICE9PSAwIHx8ICQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgIH0KICAgICAgdmFsaWRhdGVfZmllbGQoJCh0aGlzKSk7CiAgICB9KTsKCiAgICAvLyBBZGQgYWN0aXZlIGlmIGlucHV0IGVsZW1lbnQgaGFzIGJlZW4gcHJlLXBvcHVsYXRlZCBvbiBkb2N1bWVudCByZWFkeQogICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7CiAgICAgIE1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHMoKTsKICAgIH0pOwoKICAgIC8vIEhUTUwgRE9NIEZPUk0gUkVTRVQgaGFuZGxpbmcKICAgICQoZG9jdW1lbnQpLm9uKCdyZXNldCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgdmFyIGZvcm1SZXNldCA9ICQoZS50YXJnZXQpOwogICAgICBpZiAoZm9ybVJlc2V0LmlzKCdmb3JtJykpIHsKICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTsKICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCd2YWx1ZScpID09PSAnJykgewogICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gUmVzZXQgc2VsZWN0CiAgICAgICAgZm9ybVJlc2V0LmZpbmQoJ3NlbGVjdC5pbml0aWFsaXplZCcpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHJlc2V0X3RleHQgPSBmb3JtUmVzZXQuZmluZCgnb3B0aW9uW3NlbGVjdGVkXScpLnRleHQoKTsKICAgICAgICAgIGZvcm1SZXNldC5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJykudmFsKHJlc2V0X3RleHQpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBBZGQgYWN0aXZlIHdoZW4gZWxlbWVudCBoYXMgZm9jdXMKICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7CiAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCAucHJlZml4JykuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgfSk7CgogICAgJChkb2N1bWVudCkub24oJ2JsdXInLCBpbnB1dF9zZWxlY3RvciwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgJGlucHV0RWxlbWVudCA9ICQodGhpcyk7CiAgICAgIHZhciBzZWxlY3RvciA9ICIucHJlZml4IjsKCiAgICAgIGlmICgkaW5wdXRFbGVtZW50LnZhbCgpLmxlbmd0aCA9PT0gMCAmJiAkaW5wdXRFbGVtZW50WzBdLnZhbGlkaXR5LmJhZElucHV0ICE9PSB0cnVlICYmICRpbnB1dEVsZW1lbnQuYXR0cigncGxhY2Vob2xkZXInKSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc2VsZWN0b3IgKz0gIiwgbGFiZWwiOwogICAgICB9CgogICAgICAkaW5wdXRFbGVtZW50LnNpYmxpbmdzKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CgogICAgICB2YWxpZGF0ZV9maWVsZCgkaW5wdXRFbGVtZW50KTsKICAgIH0pOwoKICAgIHdpbmRvdy52YWxpZGF0ZV9maWVsZCA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgICB2YXIgaGFzTGVuZ3RoID0gb2JqZWN0LmF0dHIoJ2RhdGEtbGVuZ3RoJykgIT09IHVuZGVmaW5lZDsKICAgICAgdmFyIGxlbkF0dHIgPSBwYXJzZUludChvYmplY3QuYXR0cignZGF0YS1sZW5ndGgnKSk7CiAgICAgIHZhciBsZW4gPSBvYmplY3QudmFsKCkubGVuZ3RoOwoKICAgICAgaWYgKG9iamVjdC52YWwoKS5sZW5ndGggPT09IDAgJiYgb2JqZWN0WzBdLnZhbGlkaXR5LmJhZElucHV0ID09PSBmYWxzZSkgewogICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ3ZhbGlkYXRlJykpIHsKICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTsKICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7CiAgICAgICAgICAvLyBDaGVjayBmb3IgY2hhcmFjdGVyIGNvdW50ZXIgYXR0cmlidXRlcwogICAgICAgICAgaWYgKChvYmplY3QuaXMoJzp2YWxpZCcpICYmIGhhc0xlbmd0aCAmJiAobGVuIDw9IGxlbkF0dHIpKSB8fCAob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiAhaGFzTGVuZ3RoKSkgewogICAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTsKICAgICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCd2YWxpZCcpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTsKICAgICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCdpbnZhbGlkJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIC8vIFJhZGlvIGFuZCBDaGVja2JveCBmb2N1cyBjbGFzcwogICAgdmFyIHJhZGlvX2NoZWNrYm94ID0gJ2lucHV0W3R5cGU9cmFkaW9dLCBpbnB1dFt0eXBlPWNoZWNrYm94XSc7CiAgICAkKGRvY3VtZW50KS5vbigna2V5dXAucmFkaW8nLCByYWRpb19jaGVja2JveCwgZnVuY3Rpb24oZSkgewogICAgICAvLyBUQUIsIGNoZWNrIGlmIHRhYmJpbmcgdG8gcmFkaW8gb3IgY2hlY2tib3guCiAgICAgIGlmIChlLndoaWNoID09PSA5KSB7CiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndGFiYmVkJyk7CiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgICAkdGhpcy5vbmUoJ2JsdXInLCBmdW5jdGlvbihlKSB7CgogICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndGFiYmVkJyk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBUZXh0YXJlYSBBdXRvIFJlc2l6ZQogICAgdmFyIGhpZGRlbkRpdiA9ICQoJy5oaWRkZW5kaXYnKS5maXJzdCgpOwogICAgaWYgKCFoaWRkZW5EaXYubGVuZ3RoKSB7CiAgICAgIGhpZGRlbkRpdiA9ICQoJzxkaXYgY2xhc3M9ImhpZGRlbmRpdiBjb21tb24iPjwvZGl2PicpOwogICAgICAkKCdib2R5JykuYXBwZW5kKGhpZGRlbkRpdik7CiAgICB9CiAgICB2YXIgdGV4dF9hcmVhX3NlbGVjdG9yID0gJy5tYXRlcmlhbGl6ZS10ZXh0YXJlYSc7CgogICAgZnVuY3Rpb24gdGV4dGFyZWFBdXRvUmVzaXplKCR0ZXh0YXJlYSkgewogICAgICAvLyBTZXQgZm9udCBwcm9wZXJ0aWVzIG9mIGhpZGRlbkRpdgoKICAgICAgdmFyIGZvbnRGYW1pbHkgPSAkdGV4dGFyZWEuY3NzKCdmb250LWZhbWlseScpOwogICAgICB2YXIgZm9udFNpemUgPSAkdGV4dGFyZWEuY3NzKCdmb250LXNpemUnKTsKICAgICAgdmFyIGxpbmVIZWlnaHQgPSAkdGV4dGFyZWEuY3NzKCdsaW5lLWhlaWdodCcpOwoKICAgICAgaWYgKGZvbnRTaXplKSB7IGhpZGRlbkRpdi5jc3MoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKTsgfQogICAgICBpZiAoZm9udEZhbWlseSkgeyBoaWRkZW5EaXYuY3NzKCdmb250LWZhbWlseScsIGZvbnRGYW1pbHkpOyB9CiAgICAgIGlmIChsaW5lSGVpZ2h0KSB7IGhpZGRlbkRpdi5jc3MoJ2xpbmUtaGVpZ2h0JywgbGluZUhlaWdodCk7IH0KCiAgICAgIC8vIFNldCBvcmlnaW5hbC1oZWlnaHQsIGlmIG5vbmUKICAgICAgaWYgKCEkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JykpIHsKICAgICAgICAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JywgJHRleHRhcmVhLmhlaWdodCgpKTsKICAgICAgfQoKICAgICAgaWYgKCR0ZXh0YXJlYS5hdHRyKCd3cmFwJykgPT09ICdvZmYnKSB7CiAgICAgICAgaGlkZGVuRGl2LmNzcygnb3ZlcmZsb3ctd3JhcCcsICdub3JtYWwnKQogICAgICAgICAgICAgICAgIC5jc3MoJ3doaXRlLXNwYWNlJywgJ3ByZScpOwogICAgICB9CgogICAgICBoaWRkZW5EaXYudGV4dCgkdGV4dGFyZWEudmFsKCkgKyAnXG4nKTsKICAgICAgdmFyIGNvbnRlbnQgPSBoaWRkZW5EaXYuaHRtbCgpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgIGhpZGRlbkRpdi5odG1sKGNvbnRlbnQpOwoKCiAgICAgIC8vIFdoZW4gdGV4dGFyZWEgaXMgaGlkZGVuLCB3aWR0aCBnb2VzIGNyYXp5LgogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGhhbGYgb2Ygd2luZG93IHNpemUKCiAgICAgIGlmICgkdGV4dGFyZWEuaXMoJzp2aXNpYmxlJykpIHsKICAgICAgICBoaWRkZW5EaXYuY3NzKCd3aWR0aCcsICR0ZXh0YXJlYS53aWR0aCgpKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBoaWRkZW5EaXYuY3NzKCd3aWR0aCcsICQod2luZG93KS53aWR0aCgpLzIpOwogICAgICB9CgoKICAgICAgLyoqCiAgICAgICAqIFJlc2l6ZSBpZiB0aGUgbmV3IGhlaWdodCBpcyBncmVhdGVyIHRoYW4gdGhlCiAgICAgICAqIG9yaWdpbmFsIGhlaWdodCBvZiB0aGUgdGV4dGFyZWEKICAgICAgICovCiAgICAgIGlmICgkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JykgPD0gaGlkZGVuRGl2LmhlaWdodCgpKSB7CiAgICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmhlaWdodCgpKTsKICAgICAgfSBlbHNlIGlmICgkdGV4dGFyZWEudmFsKCkubGVuZ3RoIDwgJHRleHRhcmVhLmRhdGEoJ3ByZXZpb3VzLWxlbmd0aCcpKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogSW4gY2FzZSB0aGUgbmV3IGhlaWdodCBpcyBsZXNzIHRoYW4gb3JpZ2luYWwgaGVpZ2h0LCBpdAogICAgICAgICAqIG1lYW5zIHRoZSB0ZXh0YXJlYSBoYXMgbGVzcyB0ZXh0IHRoYW4gYmVmb3JlCiAgICAgICAgICogU28gd2Ugc2V0IHRoZSBoZWlnaHQgdG8gdGhlIG9yaWdpbmFsIG9uZQogICAgICAgICAqLwogICAgICAgICR0ZXh0YXJlYS5jc3MoJ2hlaWdodCcsICR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnKSk7CiAgICAgIH0KICAgICAgJHRleHRhcmVhLmRhdGEoJ3ByZXZpb3VzLWxlbmd0aCcsICR0ZXh0YXJlYS52YWwoKS5sZW5ndGgpOwogICAgfQoKICAgICQodGV4dF9hcmVhX3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0ZXh0YXJlYSA9ICQodGhpcyk7CiAgICAgIC8qKgogICAgICAgKiBJbnN0ZWFkIG9mIHJlc2l6aW5nIHRleHRhcmVhIG9uIGRvY3VtZW50IGxvYWQsCiAgICAgICAqIHN0b3JlIHRoZSBvcmlnaW5hbCBoZWlnaHQgYW5kIHRoZSBvcmlnaW5hbCBsZW5ndGgKICAgICAgICovCiAgICAgICR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnLCAkdGV4dGFyZWEuaGVpZ2h0KCkpOwogICAgICAkdGV4dGFyZWEuZGF0YSgncHJldmlvdXMtbGVuZ3RoJywgJHRleHRhcmVhLnZhbCgpLmxlbmd0aCk7CiAgICB9KTsKCiAgICAkKCdib2R5Jykub24oJ2tleXVwIGtleWRvd24gYXV0b3Jlc2l6ZScsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkgewogICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7CiAgICB9KTsKCiAgICAvLyBGaWxlIElucHV0IFBhdGgKICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLmZpbGUtZmllbGQgaW5wdXRbdHlwZT0iZmlsZSJdJywgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZmlsZV9maWVsZCA9ICQodGhpcykuY2xvc2VzdCgnLmZpbGUtZmllbGQnKTsKICAgICAgdmFyIHBhdGhfaW5wdXQgPSBmaWxlX2ZpZWxkLmZpbmQoJ2lucHV0LmZpbGUtcGF0aCcpOwogICAgICB2YXIgZmlsZXMgICAgICA9ICQodGhpcylbMF0uZmlsZXM7CiAgICAgIHZhciBmaWxlX25hbWVzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmaWxlX25hbWVzLnB1c2goZmlsZXNbaV0ubmFtZSk7CiAgICAgIH0KICAgICAgcGF0aF9pbnB1dC52YWwoZmlsZV9uYW1lcy5qb2luKCIsICIpKTsKICAgICAgcGF0aF9pbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgIH0pOwoKICAgIC8qKioqKioqKioqKioqKioqCiAgICAqICBSYW5nZSBJbnB1dCAgKgogICAgKioqKioqKioqKioqKioqKi8KCiAgICB2YXIgcmFuZ2VfdHlwZSA9ICdpbnB1dFt0eXBlPXJhbmdlXSc7CiAgICB2YXIgcmFuZ2VfbW91c2Vkb3duID0gZmFsc2U7CiAgICB2YXIgbGVmdDsKCiAgICAkKHJhbmdlX3R5cGUpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgdGh1bWIgPSAkKCc8c3BhbiBjbGFzcz0idGh1bWIiPjxzcGFuIGNsYXNzPSJ2YWx1ZSI+PC9zcGFuPjwvc3Bhbj4nKTsKICAgICAgJCh0aGlzKS5hZnRlcih0aHVtYik7CiAgICB9KTsKCiAgICB2YXIgc2hvd1JhbmdlQnViYmxlID0gZnVuY3Rpb24odGh1bWIpIHsKICAgICAgdmFyIHBhZGRpbmdMZWZ0ID0gcGFyc2VJbnQodGh1bWIucGFyZW50KCkuY3NzKCdwYWRkaW5nLWxlZnQnKSk7CiAgICAgIHZhciBtYXJnaW5MZWZ0ID0gKC03ICsgcGFkZGluZ0xlZnQpICsgJ3B4JzsKICAgICAgdGh1bWIudmVsb2NpdHkoeyBoZWlnaHQ6ICIzMHB4Iiwgd2lkdGg6ICIzMHB4IiwgdG9wOiAiLTMwcHgiLCBtYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0fSwgeyBkdXJhdGlvbjogMzAwLCBlYXNpbmc6ICdlYXNlT3V0RXhwbycgfSk7CiAgICB9OwoKICAgIHZhciBjYWxjUmFuZ2VPZmZzZXQgPSBmdW5jdGlvbihyYW5nZSkgewogICAgICB2YXIgd2lkdGggPSByYW5nZS53aWR0aCgpIC0gMTU7CiAgICAgIHZhciBtYXggPSBwYXJzZUZsb2F0KHJhbmdlLmF0dHIoJ21heCcpKTsKICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQocmFuZ2UuYXR0cignbWluJykpOwogICAgICB2YXIgcGVyY2VudCA9IChwYXJzZUZsb2F0KHJhbmdlLnZhbCgpKSAtIG1pbikgLyAobWF4IC0gbWluKTsKICAgICAgcmV0dXJuIHBlcmNlbnQgKiB3aWR0aDsKICAgIH0KCiAgICB2YXIgcmFuZ2Vfd3JhcHBlciA9ICcucmFuZ2UtZmllbGQnOwogICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIHJhbmdlX3R5cGUsIGZ1bmN0aW9uKGUpIHsKICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5zaWJsaW5ncygnLnRodW1iJyk7CiAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwoJCh0aGlzKS52YWwoKSk7CgogICAgICBpZiAoIXRodW1iLmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgIHNob3dSYW5nZUJ1YmJsZSh0aHVtYik7CiAgICAgIH0KCiAgICAgIHZhciBvZmZzZXRMZWZ0ID0gY2FsY1JhbmdlT2Zmc2V0KCQodGhpcykpOwogICAgICB0aHVtYi5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0Jywgb2Zmc2V0TGVmdCk7CiAgICB9KTsKCiAgICAkKGRvY3VtZW50KS5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCByYW5nZV90eXBlLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciB0aHVtYiA9ICQodGhpcykuc2libGluZ3MoJy50aHVtYicpOwoKICAgICAgLy8gSWYgdGh1bWIgaW5kaWNhdG9yIGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0CiAgICAgIGlmICh0aHVtYi5sZW5ndGggPD0gMCkgewogICAgICAgIHRodW1iID0gJCgnPHNwYW4gY2xhc3M9InRodW1iIj48c3BhbiBjbGFzcz0idmFsdWUiPjwvc3Bhbj48L3NwYW4+Jyk7CiAgICAgICAgJCh0aGlzKS5hZnRlcih0aHVtYik7CiAgICAgIH0KCiAgICAgIC8vIFNldCBpbmRpY2F0b3IgdmFsdWUKICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCgkKHRoaXMpLnZhbCgpKTsKCiAgICAgIHJhbmdlX21vdXNlZG93biA9IHRydWU7CiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpOwoKICAgICAgaWYgKCF0aHVtYi5oYXNDbGFzcygnYWN0aXZlJykpIHsKICAgICAgICBzaG93UmFuZ2VCdWJibGUodGh1bWIpOwogICAgICB9CgogICAgICBpZiAoZS50eXBlICE9PSAnaW5wdXQnKSB7CiAgICAgICAgdmFyIG9mZnNldExlZnQgPSBjYWxjUmFuZ2VPZmZzZXQoJCh0aGlzKSk7CiAgICAgICAgdGh1bWIuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIG9mZnNldExlZnQpOwogICAgICB9CiAgICB9KTsKCiAgICAkKGRvY3VtZW50KS5vbignbW91c2V1cCB0b3VjaGVuZCcsIHJhbmdlX3dyYXBwZXIsIGZ1bmN0aW9uKCkgewogICAgICByYW5nZV9tb3VzZWRvd24gPSBmYWxzZTsKICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICB9KTsKCiAgICAkKGRvY3VtZW50KS5vbignaW5wdXQgbW91c2Vtb3ZlIHRvdWNobW92ZScsIHJhbmdlX3dyYXBwZXIsIGZ1bmN0aW9uKGUpIHsKICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7CiAgICAgIHZhciBsZWZ0OwogICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpLmZpbmQocmFuZ2VfdHlwZSk7CgogICAgICBpZiAocmFuZ2VfbW91c2Vkb3duKSB7CiAgICAgICAgaWYgKCF0aHVtYi5oYXNDbGFzcygnYWN0aXZlJykpIHsKICAgICAgICAgIHNob3dSYW5nZUJ1YmJsZSh0aHVtYik7CiAgICAgICAgfQoKICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IGNhbGNSYW5nZU9mZnNldChpbnB1dCk7CiAgICAgICAgdGh1bWIuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIG9mZnNldExlZnQpOwogICAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwodGh1bWIuc2libGluZ3MocmFuZ2VfdHlwZSkudmFsKCkpOwogICAgICB9CiAgICB9KTsKCiAgICAkKGRvY3VtZW50KS5vbignbW91c2VvdXQgdG91Y2hsZWF2ZScsIHJhbmdlX3dyYXBwZXIsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoIXJhbmdlX21vdXNlZG93bikgewoKICAgICAgICB2YXIgdGh1bWIgPSAkKHRoaXMpLmNoaWxkcmVuKCcudGh1bWInKTsKICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBwYXJzZUludCgkKHRoaXMpLmNzcygncGFkZGluZy1sZWZ0JykpOwogICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gKDcgKyBwYWRkaW5nTGVmdCkgKyAncHgnOwoKICAgICAgICBpZiAodGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7CiAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7IGhlaWdodDogJzAnLCB3aWR0aDogJzAnLCB0b3A6ICcxMHB4JywgbWFyZ2luTGVmdDogbWFyZ2luTGVmdH0sIHsgZHVyYXRpb246IDEwMCB9KTsKICAgICAgICB9CiAgICAgICAgdGh1bWIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICB9CiAgICB9KTsKCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIEF1dG8gY29tcGxldGUgcGx1Z2luICAqCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgICQuZm4uYXV0b2NvbXBsZXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgLy8gRGVmYXVsdHMKICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgIGRhdGE6IHt9LAogICAgICAgIGxpbWl0OiBJbmZpbml0eSwKICAgICAgICBvbkF1dG9jb21wbGV0ZTogbnVsbCwKICAgICAgICBtaW5MZW5ndGg6IDEKICAgICAgfTsKCiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7CgogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciAkaW5wdXQgPSAkKHRoaXMpOwogICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLAogICAgICAgICAgICBjb3VudCA9IDAsCiAgICAgICAgICAgIGFjdGl2ZUluZGV4ID0gLTEsCiAgICAgICAgICAgIG9sZFZhbCwKICAgICAgICAgICAgJGlucHV0RGl2ID0gJGlucHV0LmNsb3Nlc3QoJy5pbnB1dC1maWVsZCcpOyAvLyBEaXYgdG8gYXBwZW5kIG9uCgogICAgICAgIC8vIENoZWNrIGlmIGRhdGEgaXNuJ3QgZW1wdHkKICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChkYXRhKSkgewogICAgICAgICAgdmFyICRhdXRvY29tcGxldGUgPSAkKCc8dWwgY2xhc3M9ImF1dG9jb21wbGV0ZS1jb250ZW50IGRyb3Bkb3duLWNvbnRlbnQiPjwvdWw+Jyk7CiAgICAgICAgICB2YXIgJG9sZEF1dG9jb21wbGV0ZTsKCiAgICAgICAgICAvLyBBcHBlbmQgYXV0b2NvbXBsZXRlIGVsZW1lbnQuCiAgICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBzdHJ1Y3R1cmUgaW5pdC4KICAgICAgICAgIGlmICgkaW5wdXREaXYubGVuZ3RoKSB7CiAgICAgICAgICAgICRvbGRBdXRvY29tcGxldGUgPSAkaW5wdXREaXYuY2hpbGRyZW4oJy5hdXRvY29tcGxldGUtY29udGVudC5kcm9wZG93bi1jb250ZW50JykuZmlyc3QoKTsKICAgICAgICAgICAgaWYgKCEkb2xkQXV0b2NvbXBsZXRlLmxlbmd0aCkgewogICAgICAgICAgICAgICRpbnB1dERpdi5hcHBlbmQoJGF1dG9jb21wbGV0ZSk7IC8vIFNldCB1bCBpbiBib2R5CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRvbGRBdXRvY29tcGxldGUgPSAkaW5wdXQubmV4dCgnLmF1dG9jb21wbGV0ZS1jb250ZW50LmRyb3Bkb3duLWNvbnRlbnQnKTsKICAgICAgICAgICAgaWYgKCEkb2xkQXV0b2NvbXBsZXRlLmxlbmd0aCkgewogICAgICAgICAgICAgICRpbnB1dC5hZnRlcigkYXV0b2NvbXBsZXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCRvbGRBdXRvY29tcGxldGUubGVuZ3RoKSB7CiAgICAgICAgICAgICRhdXRvY29tcGxldGUgPSAkb2xkQXV0b2NvbXBsZXRlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEhpZ2hsaWdodCBwYXJ0aWFsIG1hdGNoLgogICAgICAgICAgdmFyIGhpZ2hsaWdodCA9IGZ1bmN0aW9uKHN0cmluZywgJGVsKSB7CiAgICAgICAgICAgIHZhciBpbWcgPSAkZWwuZmluZCgnaW1nJyk7CiAgICAgICAgICAgIHZhciBtYXRjaFN0YXJ0ID0gJGVsLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIiIgKyBzdHJpbmcudG9Mb3dlckNhc2UoKSArICIiKSwKICAgICAgICAgICAgICAgIG1hdGNoRW5kID0gbWF0Y2hTdGFydCArIHN0cmluZy5sZW5ndGggLSAxLAogICAgICAgICAgICAgICAgYmVmb3JlTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKDAsIG1hdGNoU3RhcnQpLAogICAgICAgICAgICAgICAgbWF0Y2hUZXh0ID0gJGVsLnRleHQoKS5zbGljZShtYXRjaFN0YXJ0LCBtYXRjaEVuZCArIDEpLAogICAgICAgICAgICAgICAgYWZ0ZXJNYXRjaCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hFbmQgKyAxKTsKICAgICAgICAgICAgJGVsLmh0bWwoIjxzcGFuPiIgKyBiZWZvcmVNYXRjaCArICI8c3BhbiBjbGFzcz0naGlnaGxpZ2h0Jz4iICsgbWF0Y2hUZXh0ICsgIjwvc3Bhbj4iICsgYWZ0ZXJNYXRjaCArICI8L3NwYW4+Iik7CiAgICAgICAgICAgIGlmIChpbWcubGVuZ3RoKSB7CiAgICAgICAgICAgICAgJGVsLnByZXBlbmQoaW1nKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICAvLyBSZXNldCBjdXJyZW50IGVsZW1lbnQgcG9zaXRpb24KICAgICAgICAgIHZhciByZXNldEN1cnJlbnRFbGVtZW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFjdGl2ZUluZGV4ID0gLTE7CiAgICAgICAgICAgICRhdXRvY29tcGxldGUuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBSZW1vdmUgYXV0b2NvbXBsZXRlIGVsZW1lbnRzCiAgICAgICAgICB2YXIgcmVtb3ZlQXV0b2NvbXBsZXRlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICRhdXRvY29tcGxldGUuZW1wdHkoKTsKICAgICAgICAgICAgcmVzZXRDdXJyZW50RWxlbWVudCgpOwogICAgICAgICAgICBvbGRWYWwgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9OwoKICAgICAgICAgICRpbnB1dC5vZmYoJ2JsdXIuYXV0b2NvbXBsZXRlJykub24oJ2JsdXIuYXV0b2NvbXBsZXRlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJlbW92ZUF1dG9jb21wbGV0ZSgpOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gUGVyZm9ybSBzZWFyY2gKICAgICAgICAgICRpbnB1dC5vZmYoJ2tleXVwLmF1dG9jb21wbGV0ZSBmb2N1cy5hdXRvY29tcGxldGUnKS5vbigna2V5dXAuYXV0b2NvbXBsZXRlIGZvY3VzLmF1dG9jb21wbGV0ZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIC8vIFJlc2V0IGNvdW50LgogICAgICAgICAgICBjb3VudCA9IDA7CiAgICAgICAgICAgIHZhciB2YWwgPSAkaW5wdXQudmFsKCkudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgICAgIC8vIERvbid0IGNhcHR1cmUgZW50ZXIgb3IgYXJyb3cga2V5IHVzYWdlLgogICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMgfHwKICAgICAgICAgICAgICAgIGUud2hpY2ggPT09IDM4IHx8CiAgICAgICAgICAgICAgICBlLndoaWNoID09PSA0MCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBpc24ndCBlbXB0eQogICAgICAgICAgICBpZiAob2xkVmFsICE9PSB2YWwpIHsKICAgICAgICAgICAgICByZW1vdmVBdXRvY29tcGxldGUoKTsKCiAgICAgICAgICAgICAgaWYgKHZhbC5sZW5ndGggPj0gb3B0aW9ucy5taW5MZW5ndGgpIHsKICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJgogICAgICAgICAgICAgICAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpICE9PSAtMSAmJgogICAgICAgICAgICAgICAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkgIT09IHZhbCkgewogICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGlmIHBhc3QgbGltaXQKICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gb3B0aW9ucy5saW1pdCkgewogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgYXV0b2NvbXBsZXRlT3B0aW9uID0gJCgnPGxpPjwvbGk+Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZGF0YVtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGVPcHRpb24uYXBwZW5kKCc8aW1nIHNyYz0iJysgZGF0YVtrZXldICsnIiBjbGFzcz0icmlnaHQgY2lyY2xlIj48c3Bhbj4nKyBrZXkgKyc8L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZU9wdGlvbi5hcHBlbmQoJzxzcGFuPicrIGtleSArJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRhdXRvY29tcGxldGUuYXBwZW5kKGF1dG9jb21wbGV0ZU9wdGlvbik7CiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KHZhbCwgYXV0b2NvbXBsZXRlT3B0aW9uKTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVcGRhdGUgb2xkVmFsCiAgICAgICAgICAgIG9sZFZhbCA9IHZhbDsKICAgICAgICAgIH0pOwoKICAgICAgICAgICRpbnB1dC5vZmYoJ2tleWRvd24uYXV0b2NvbXBsZXRlJykub24oJ2tleWRvd24uYXV0b2NvbXBsZXRlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgLy8gQXJyb3cga2V5cyBhbmQgZW50ZXIga2V5IHVzYWdlCiAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZS53aGljaCwKICAgICAgICAgICAgICAgIGxpRWxlbWVudCwKICAgICAgICAgICAgICAgIG51bUl0ZW1zID0gJGF1dG9jb21wbGV0ZS5jaGlsZHJlbignbGknKS5sZW5ndGgsCiAgICAgICAgICAgICAgICAkYWN0aXZlID0gJGF1dG9jb21wbGV0ZS5jaGlsZHJlbignLmFjdGl2ZScpLmZpcnN0KCk7CgogICAgICAgICAgICAvLyBzZWxlY3QgZWxlbWVudCBvbiBFbnRlcgogICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMTMgJiYgYWN0aXZlSW5kZXggPj0gMCkgewogICAgICAgICAgICAgIGxpRWxlbWVudCA9ICRhdXRvY29tcGxldGUuY2hpbGRyZW4oJ2xpJykuZXEoYWN0aXZlSW5kZXgpOwogICAgICAgICAgICAgIGlmIChsaUVsZW1lbnQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBsaUVsZW1lbnQudHJpZ2dlcignbW91c2Vkb3duLmF1dG9jb21wbGV0ZScpOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENhcHR1cmUgdXAgYW5kIGRvd24ga2V5CiAgICAgICAgICAgIGlmICgga2V5Q29kZSA9PT0gMzggfHwga2V5Q29kZSA9PT0gNDAgKSB7CiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMzggJiYKICAgICAgICAgICAgICAgICAgYWN0aXZlSW5kZXggPiAwKSB7CiAgICAgICAgICAgICAgICBhY3RpdmVJbmRleC0tOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IDQwICYmCiAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4IDwgKG51bUl0ZW1zIC0gMSkpIHsKICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4Kys7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgICBpZiAoYWN0aXZlSW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5jaGlsZHJlbignbGknKS5lcShhY3RpdmVJbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gU2V0IGlucHV0IHZhbHVlCiAgICAgICAgICAkYXV0b2NvbXBsZXRlLm9uKCdtb3VzZWRvd24uYXV0b2NvbXBsZXRlIHRvdWNoc3RhcnQuYXV0b2NvbXBsZXRlJywgJ2xpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGV4dCA9ICQodGhpcykudGV4dCgpLnRyaW0oKTsKICAgICAgICAgICAgJGlucHV0LnZhbCh0ZXh0KTsKICAgICAgICAgICAgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICByZW1vdmVBdXRvY29tcGxldGUoKTsKCiAgICAgICAgICAgIC8vIEhhbmRsZSBvbkF1dG9jb21wbGV0ZSBjYWxsYmFjay4KICAgICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uQXV0b2NvbXBsZXRlKSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgIG9wdGlvbnMub25BdXRvY29tcGxldGUuY2FsbCh0aGlzLCB0ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogIH0pOyAvLyBFbmQgb2YgJChkb2N1bWVudCkucmVhZHkKCiAgLyoqKioqKioqKioqKioqKioqKioKICAgKiAgU2VsZWN0IFBsdWdpbiAgKgogICAqKioqKioqKioqKioqKioqKiovCiAgJC5mbi5tYXRlcmlhbF9zZWxlY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpewogICAgICB2YXIgJHNlbGVjdCA9ICQodGhpcyk7CgogICAgICBpZiAoJHNlbGVjdC5oYXNDbGFzcygnYnJvd3Nlci1kZWZhdWx0JykpIHsKICAgICAgICByZXR1cm47IC8vIENvbnRpbnVlIHRvIG5leHQgKHJldHVybiBmYWxzZSBicmVha3Mgb3V0IG9mIGVudGlyZSBsb29wKQogICAgICB9CgogICAgICB2YXIgbXVsdGlwbGUgPSAkc2VsZWN0LmF0dHIoJ211bHRpcGxlJykgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICBsYXN0SUQgPSAkc2VsZWN0LmRhdGEoJ3NlbGVjdC1pZCcpOyAvLyBUZWFyIGRvd24gc3RydWN0dXJlIGlmIFNlbGVjdCBuZWVkcyB0byBiZSByZWJ1aWx0CgogICAgICBpZiAobGFzdElEKSB7CiAgICAgICAgJHNlbGVjdC5wYXJlbnQoKS5maW5kKCdzcGFuLmNhcmV0JykucmVtb3ZlKCk7CiAgICAgICAgJHNlbGVjdC5wYXJlbnQoKS5maW5kKCdpbnB1dCcpLnJlbW92ZSgpOwoKICAgICAgICAkc2VsZWN0LnVud3JhcCgpOwogICAgICAgICQoJ3VsI3NlbGVjdC1vcHRpb25zLScrbGFzdElEKS5yZW1vdmUoKTsKICAgICAgfQoKICAgICAgLy8gSWYgZGVzdHJveWluZyB0aGUgc2VsZWN0LCByZW1vdmUgdGhlIHNlbGVsY3QtaWQgYW5kIHJlc2V0IGl0IHRvIGl0J3MgdW5pbml0aWFsaXplZCBzdGF0ZS4KICAgICAgaWYoY2FsbGJhY2sgPT09ICdkZXN0cm95JykgewogICAgICAgICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJywgbnVsbCkucmVtb3ZlQ2xhc3MoJ2luaXRpYWxpemVkJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdW5pcXVlSUQgPSBNYXRlcmlhbGl6ZS5ndWlkKCk7CiAgICAgICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJywgdW5pcXVlSUQpOwogICAgICB2YXIgd3JhcHBlciA9ICQoJzxkaXYgY2xhc3M9InNlbGVjdC13cmFwcGVyIj48L2Rpdj4nKTsKICAgICAgd3JhcHBlci5hZGRDbGFzcygkc2VsZWN0LmF0dHIoJ2NsYXNzJykpOwogICAgICB2YXIgb3B0aW9ucyA9ICQoJzx1bCBpZD0ic2VsZWN0LW9wdGlvbnMtJyArIHVuaXF1ZUlEICsnIiBjbGFzcz0iZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd24gJyArIChtdWx0aXBsZSA/ICdtdWx0aXBsZS1zZWxlY3QtZHJvcGRvd24nIDogJycpICsgJyI+PC91bD4nKSwKICAgICAgICAgIHNlbGVjdENoaWxkcmVuID0gJHNlbGVjdC5jaGlsZHJlbignb3B0aW9uLCBvcHRncm91cCcpLAogICAgICAgICAgdmFsdWVzU2VsZWN0ZWQgPSBbXSwKICAgICAgICAgIG9wdGlvbnNIb3ZlciA9IGZhbHNlOwoKICAgICAgdmFyIGxhYmVsID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5odG1sKCkgfHwgJHNlbGVjdC5maW5kKCdvcHRpb246Zmlyc3QnKS5odG1sKCkgfHwgIiI7CgogICAgICAvLyBGdW5jdGlvbiB0aGF0IHJlbmRlcnMgYW5kIGFwcGVuZHMgdGhlIG9wdGlvbiB0YWtpbmcgaW50bwogICAgICAvLyBhY2NvdW50IHR5cGUgYW5kIHBvc3NpYmxlIGltYWdlIGljb24uCiAgICAgIHZhciBhcHBlbmRPcHRpb25XaXRoSWNvbiA9IGZ1bmN0aW9uKHNlbGVjdCwgb3B0aW9uLCB0eXBlKSB7CiAgICAgICAgLy8gQWRkIGRpc2FibGVkIGF0dHIgaWYgZGlzYWJsZWQKICAgICAgICB2YXIgZGlzYWJsZWRDbGFzcyA9IChvcHRpb24uaXMoJzpkaXNhYmxlZCcpKSA/ICdkaXNhYmxlZCAnIDogJyc7CiAgICAgICAgdmFyIG9wdGdyb3VwQ2xhc3MgPSAodHlwZSA9PT0gJ29wdGdyb3VwLW9wdGlvbicpID8gJ29wdGdyb3VwLW9wdGlvbiAnIDogJyc7CiAgICAgICAgdmFyIG11bHRpcGxlQ2hlY2tib3ggPSBtdWx0aXBsZSA/ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giJyArIGRpc2FibGVkQ2xhc3MgKyAnLz48bGFiZWw+PC9sYWJlbD4nIDogJyc7CgogICAgICAgIC8vIGFkZCBpY29ucwogICAgICAgIHZhciBpY29uX3VybCA9IG9wdGlvbi5kYXRhKCdpY29uJyk7CiAgICAgICAgdmFyIGNsYXNzZXMgPSBvcHRpb24uYXR0cignY2xhc3MnKTsKICAgICAgICBpZiAoISFpY29uX3VybCkgewogICAgICAgICAgdmFyIGNsYXNzU3RyaW5nID0gJyc7CiAgICAgICAgICBpZiAoISFjbGFzc2VzKSBjbGFzc1N0cmluZyA9ICcgY2xhc3M9IicgKyBjbGFzc2VzICsgJyInOwoKICAgICAgICAgIC8vIENoZWNrIGZvciBtdWx0aXBsZSB0eXBlLgogICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPSInICsgZGlzYWJsZWRDbGFzcyArIG9wdGdyb3VwQ2xhc3MgKyAnIj48aW1nIGFsdD0iIiBzcmM9IicgKyBpY29uX3VybCArICciJyArIGNsYXNzU3RyaW5nICsgJz48c3Bhbj4nICsgbXVsdGlwbGVDaGVja2JveCArIG9wdGlvbi5odG1sKCkgKyAnPC9zcGFuPjwvbGk+JykpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBmb3IgbXVsdGlwbGUgdHlwZS4KICAgICAgICBvcHRpb25zLmFwcGVuZCgkKCc8bGkgY2xhc3M9IicgKyBkaXNhYmxlZENsYXNzICsgb3B0Z3JvdXBDbGFzcyArICciPjxzcGFuPicgKyBtdWx0aXBsZUNoZWNrYm94ICsgb3B0aW9uLmh0bWwoKSArICc8L3NwYW4+PC9saT4nKSk7CiAgICAgIH07CgogICAgICAvKiBDcmVhdGUgZHJvcGRvd24gc3RydWN0dXJlLiAqLwogICAgICBpZiAoc2VsZWN0Q2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgc2VsZWN0Q2hpbGRyZW4uZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdvcHRpb24nKSkgewogICAgICAgICAgICAvLyBEaXJlY3QgZGVzY2VuZGFudCBvcHRpb24uCiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkgewogICAgICAgICAgICAgIGFwcGVuZE9wdGlvbldpdGhJY29uKCRzZWxlY3QsICQodGhpcyksICdtdWx0aXBsZScpOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhcHBlbmRPcHRpb25XaXRoSWNvbigkc2VsZWN0LCAkKHRoaXMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmlzKCdvcHRncm91cCcpKSB7CiAgICAgICAgICAgIC8vIE9wdGdyb3VwLgogICAgICAgICAgICB2YXIgc2VsZWN0T3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpOwogICAgICAgICAgICBvcHRpb25zLmFwcGVuZCgkKCc8bGkgY2xhc3M9Im9wdGdyb3VwIj48c3Bhbj4nICsgJCh0aGlzKS5hdHRyKCdsYWJlbCcpICsgJzwvc3Bhbj48L2xpPicpKTsKCiAgICAgICAgICAgIHNlbGVjdE9wdGlvbnMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBhcHBlbmRPcHRpb25XaXRoSWNvbigkc2VsZWN0LCAkKHRoaXMpLCAnb3B0Z3JvdXAtb3B0aW9uJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBvcHRpb25zLmZpbmQoJ2xpOm5vdCgub3B0Z3JvdXApJykuZWFjaChmdW5jdGlvbiAoaSkgewogICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBlbGVtZW50IGlzIGRpc2FibGVkCiAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2Rpc2FibGVkJykgJiYgISQodGhpcykuaGFzQ2xhc3MoJ29wdGdyb3VwJykpIHsKICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkgewogICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nLCB0aGlzKS5wcm9wKCdjaGVja2VkJywgZnVuY3Rpb24oaSwgdikgeyByZXR1cm4gIXY7IH0pOwogICAgICAgICAgICAgIHNlbGVjdGVkID0gdG9nZ2xlRW50cnlGcm9tQXJyYXkodmFsdWVzU2VsZWN0ZWQsIGksICRzZWxlY3QpOwogICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignZm9jdXMnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvcHRpb25zLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICRuZXdTZWxlY3QudmFsKCQodGhpcykudGV4dCgpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgJCh0aGlzKSk7CiAgICAgICAgICAgICRzZWxlY3QuZmluZCgnb3B0aW9uJykuZXEoaSkucHJvcCgnc2VsZWN0ZWQnLCBzZWxlY3RlZCk7CiAgICAgICAgICAgIC8vIFRyaWdnZXIgb25jaGFuZ2UoKSBldmVudAogICAgICAgICAgICAkc2VsZWN0LnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJykgY2FsbGJhY2soKTsKICAgICAgICAgIH0KCiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIC8vIFdyYXAgRWxlbWVudHMKICAgICAgJHNlbGVjdC53cmFwKHdyYXBwZXIpOwogICAgICAvLyBBZGQgU2VsZWN0IERpc3BsYXkgRWxlbWVudAogICAgICB2YXIgZHJvcGRvd25JY29uID0gJCgnPHNwYW4gY2xhc3M9ImNhcmV0Ij4mIzk2NjA7PC9zcGFuPicpOwogICAgICBpZiAoJHNlbGVjdC5pcygnOmRpc2FibGVkJykpCiAgICAgICAgZHJvcGRvd25JY29uLmFkZENsYXNzKCdkaXNhYmxlZCcpOwoKICAgICAgLy8gZXNjYXBlIGRvdWJsZSBxdW90ZXMKICAgICAgdmFyIHNhbml0aXplZExhYmVsSHRtbCA9IGxhYmVsLnJlcGxhY2UoLyIvZywgJyZxdW90OycpOwoKICAgICAgdmFyICRuZXdTZWxlY3QgPSAkKCc8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InNlbGVjdC1kcm9wZG93biIgcmVhZG9ubHk9InRydWUiICcgKyAoKCRzZWxlY3QuaXMoJzpkaXNhYmxlZCcpKSA/ICdkaXNhYmxlZCcgOiAnJykgKyAnIGRhdGEtYWN0aXZhdGVzPSJzZWxlY3Qtb3B0aW9ucy0nICsgdW5pcXVlSUQgKyciIHZhbHVlPSInKyBzYW5pdGl6ZWRMYWJlbEh0bWwgKyciLz4nKTsKICAgICAgJHNlbGVjdC5iZWZvcmUoJG5ld1NlbGVjdCk7CiAgICAgICRuZXdTZWxlY3QuYmVmb3JlKGRyb3Bkb3duSWNvbik7CgogICAgICAkbmV3U2VsZWN0LmFmdGVyKG9wdGlvbnMpOwogICAgICAvLyBDaGVjayBpZiBzZWN0aW9uIGVsZW1lbnQgaXMgZGlzYWJsZWQKICAgICAgaWYgKCEkc2VsZWN0LmlzKCc6ZGlzYWJsZWQnKSkgewogICAgICAgICRuZXdTZWxlY3QuZHJvcGRvd24oeydob3Zlcic6IGZhbHNlfSk7CiAgICAgIH0KCiAgICAgIC8vIENvcHkgdGFiaW5kZXgKICAgICAgaWYgKCRzZWxlY3QuYXR0cigndGFiaW5kZXgnKSkgewogICAgICAgICQoJG5ld1NlbGVjdFswXSkuYXR0cigndGFiaW5kZXgnLCAkc2VsZWN0LmF0dHIoJ3RhYmluZGV4JykpOwogICAgICB9CgogICAgICAkc2VsZWN0LmFkZENsYXNzKCdpbml0aWFsaXplZCcpOwoKICAgICAgJG5ld1NlbGVjdC5vbih7CiAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24gKCl7CiAgICAgICAgICBpZiAoJCgndWwuc2VsZWN0LWRyb3Bkb3duJykubm90KG9wdGlvbnNbMF0pLmlzKCc6dmlzaWJsZScpKSB7CiAgICAgICAgICAgICQoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpLnRyaWdnZXIoJ2Nsb3NlJyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIW9wdGlvbnMuaXMoJzp2aXNpYmxlJykpIHsKICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJywgWydmb2N1cyddKTsKICAgICAgICAgICAgdmFyIGxhYmVsID0gJCh0aGlzKS52YWwoKTsKICAgICAgICAgICAgaWYgKG11bHRpcGxlICYmIGxhYmVsLmluZGV4T2YoJywnKSA+PSAwKSB7CiAgICAgICAgICAgICAgbGFiZWwgPSBsYWJlbC5zcGxpdCgnLCcpWzBdOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpJykuZmlsdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpID09PSBsYWJlbC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9KVswXTsKICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgc2VsZWN0ZWRPcHRpb24sIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKGUpewogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgJG5ld1NlbGVjdC5vbignYmx1cicsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmICghbXVsdGlwbGUpIHsKICAgICAgICAgICQodGhpcykudHJpZ2dlcignY2xvc2UnKTsKICAgICAgICB9CiAgICAgICAgb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwogICAgICB9KTsKCiAgICAgIG9wdGlvbnMuaG92ZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgb3B0aW9uc0hvdmVyID0gdHJ1ZTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIG9wdGlvbnNIb3ZlciA9IGZhbHNlOwogICAgICB9KTsKCiAgICAgICQod2luZG93KS5vbih7CiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkgewogICAgICAgICAgbXVsdGlwbGUgJiYgKG9wdGlvbnNIb3ZlciB8fCAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJykpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBBZGQgaW5pdGlhbCBtdWx0aXBsZSBzZWxlY3Rpb25zLgogICAgICBpZiAobXVsdGlwbGUpIHsKICAgICAgICAkc2VsZWN0LmZpbmQoIm9wdGlvbjpzZWxlY3RlZDpub3QoOmRpc2FibGVkKSIpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpOwoKICAgICAgICAgIHRvZ2dsZUVudHJ5RnJvbUFycmF5KHZhbHVlc1NlbGVjdGVkLCBpbmRleCwgJHNlbGVjdCk7CiAgICAgICAgICBvcHRpb25zLmZpbmQoImxpIikuZXEoaW5kZXgpLmZpbmQoIjpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLyoqCiAgICAgICAqIE1ha2Ugb3B0aW9uIGFzIHNlbGVjdGVkIGFuZCBzY3JvbGwgdG8gc2VsZWN0ZWQgcG9zaXRpb24KICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGNvbGxlY3Rpb24gIFNlbGVjdCBvcHRpb25zIGpRdWVyeSBlbGVtZW50CiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3T3B0aW9uICBlbGVtZW50IG9mIHRoZSBuZXcgb3B0aW9uCiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmlyc3RBY3RpdmF0aW9uICBJZiBvbiBmaXJzdCBhY3RpdmF0aW9uIG9mIHNlbGVjdAogICAgICAgKi8KICAgICAgdmFyIGFjdGl2YXRlT3B0aW9uID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgbmV3T3B0aW9uLCBmaXJzdEFjdGl2YXRpb24pIHsKICAgICAgICBpZiAobmV3T3B0aW9uKSB7CiAgICAgICAgICBjb2xsZWN0aW9uLmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7CiAgICAgICAgICB2YXIgb3B0aW9uID0gJChuZXdPcHRpb24pOwogICAgICAgICAgb3B0aW9uLmFkZENsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgaWYgKCFtdWx0aXBsZSB8fCAhIWZpcnN0QWN0aXZhdGlvbikgewogICAgICAgICAgICBvcHRpb25zLnNjcm9sbFRvKG9wdGlvbik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8gQWxsb3cgdXNlciB0byBzZWFyY2ggYnkgdHlwaW5nCiAgICAgIC8vIHRoaXMgYXJyYXkgaXMgY2xlYXJlZCBhZnRlciAxIHNlY29uZAogICAgICB2YXIgZmlsdGVyUXVlcnkgPSBbXSwKICAgICAgICAgIG9uS2V5RG93biA9IGZ1bmN0aW9uKGUpewogICAgICAgICAgICAvLyBUQUIgLSBzd2l0Y2ggdG8gYW5vdGhlciBpbnB1dAogICAgICAgICAgICBpZihlLndoaWNoID09IDkpewogICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEFSUk9XIERPV04gV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gb3BlbiBzZWxlY3Qgb3B0aW9ucwogICAgICAgICAgICBpZihlLndoaWNoID09IDQwICYmICFvcHRpb25zLmlzKCc6dmlzaWJsZScpKXsKICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ29wZW4nKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEVOVEVSIFdIRU4gU0VMRUNUIElTIENMT1NFRCAtIHN1Ym1pdCBmb3JtCiAgICAgICAgICAgIGlmKGUud2hpY2ggPT0gMTMgJiYgIW9wdGlvbnMuaXMoJzp2aXNpYmxlJykpewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8gQ0FTRSBXSEVOIFVTRVIgVFlQRSBMRVRURVJTCiAgICAgICAgICAgIHZhciBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICBub25MZXR0ZXJzID0gWzksMTMsMjcsMzgsNDBdOwogICAgICAgICAgICBpZiAobGV0dGVyICYmIChub25MZXR0ZXJzLmluZGV4T2YoZS53aGljaCkgPT09IC0xKSkgewogICAgICAgICAgICAgIGZpbHRlclF1ZXJ5LnB1c2gobGV0dGVyKTsKCiAgICAgICAgICAgICAgdmFyIHN0cmluZyA9IGZpbHRlclF1ZXJ5LmpvaW4oJycpLAogICAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpJykuZmlsdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyaW5nKSA9PT0gMDsKICAgICAgICAgICAgICAgICAgfSlbMF07CgogICAgICAgICAgICAgIGlmIChuZXdPcHRpb24pIHsKICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBFTlRFUiAtIHNlbGVjdCBvcHRpb24gYW5kIGNsb3NlIHdoZW4gc2VsZWN0IG9wdGlvbnMgYXJlIG9wZW5lZAogICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMykgewogICAgICAgICAgICAgIHZhciBhY3RpdmVPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLnNlbGVjdGVkOm5vdCguZGlzYWJsZWQpJylbMF07CiAgICAgICAgICAgICAgaWYoYWN0aXZlT3B0aW9uKXsKICAgICAgICAgICAgICAgICQoYWN0aXZlT3B0aW9uKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgICAgICAgICAgaWYgKCFtdWx0aXBsZSkgewogICAgICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBUlJPVyBET1dOIC0gbW92ZSB0byBuZXh0IG5vdCBkaXNhYmxlZCBvcHRpb24KICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gNDApIHsKICAgICAgICAgICAgICBpZiAob3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbmV3T3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLm5leHQoJ2xpOm5vdCguZGlzYWJsZWQpJylbMF07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGk6bm90KC5kaXNhYmxlZCknKVswXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgbmV3T3B0aW9uKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRVNDIC0gY2xvc2Ugb3B0aW9ucwogICAgICAgICAgICBpZiAoZS53aGljaCA9PSAyNykgewogICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQVJST1cgVVAgLSBtb3ZlIHRvIHByZXZpb3VzIG5vdCBkaXNhYmxlZCBvcHRpb24KICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMzgpIHsKICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLnNlbGVjdGVkJykucHJldignbGk6bm90KC5kaXNhYmxlZCknKVswXTsKICAgICAgICAgICAgICBpZihuZXdPcHRpb24pCiAgICAgICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbihvcHRpb25zLCBuZXdPcHRpb24pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBdXRvbWF0aWNhbHkgY2xlYW4gZmlsdGVyIHF1ZXJ5IHNvIHVzZXIgY2FuIHNlYXJjaCBhZ2FpbiBieSBzdGFydGluZyBsZXR0ZXJzCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgZmlsdGVyUXVlcnkgPSBbXTsgfSwgMTAwMCk7CiAgICAgICAgICB9OwoKICAgICAgJG5ld1NlbGVjdC5vbigna2V5ZG93bicsIG9uS2V5RG93bik7CiAgICB9KTsKCiAgICBmdW5jdGlvbiB0b2dnbGVFbnRyeUZyb21BcnJheShlbnRyaWVzQXJyYXksIGVudHJ5SW5kZXgsIHNlbGVjdCkgewogICAgICB2YXIgaW5kZXggPSBlbnRyaWVzQXJyYXkuaW5kZXhPZihlbnRyeUluZGV4KSwKICAgICAgICAgIG5vdEFkZGVkID0gaW5kZXggPT09IC0xOwoKICAgICAgaWYgKG5vdEFkZGVkKSB7CiAgICAgICAgZW50cmllc0FycmF5LnB1c2goZW50cnlJbmRleCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZW50cmllc0FycmF5LnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KCiAgICAgIHNlbGVjdC5zaWJsaW5ncygndWwuZHJvcGRvd24tY29udGVudCcpLmZpbmQoJ2xpOm5vdCgub3B0Z3JvdXApJykuZXEoZW50cnlJbmRleCkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOwoKICAgICAgLy8gdXNlIG5vdEFkZGVkIGluc3RlYWQgb2YgdHJ1ZSAodG8gZGV0ZWN0IGlmIHRoZSBvcHRpb24gaXMgc2VsZWN0ZWQgb3Igbm90KQogICAgICBzZWxlY3QuZmluZCgnb3B0aW9uJykuZXEoZW50cnlJbmRleCkucHJvcCgnc2VsZWN0ZWQnLCBub3RBZGRlZCk7CiAgICAgIHNldFZhbHVlVG9JbnB1dChlbnRyaWVzQXJyYXksIHNlbGVjdCk7CgogICAgICByZXR1cm4gbm90QWRkZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VmFsdWVUb0lucHV0KGVudHJpZXNBcnJheSwgc2VsZWN0KSB7CiAgICAgIHZhciB2YWx1ZSA9ICcnOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGNvdW50ID0gZW50cmllc0FycmF5Lmxlbmd0aDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICB2YXIgdGV4dCA9IHNlbGVjdC5maW5kKCdvcHRpb24nKS5lcShlbnRyaWVzQXJyYXlbaV0pLnRleHQoKTsKCiAgICAgICAgaSA9PT0gMCA/IHZhbHVlICs9IHRleHQgOiB2YWx1ZSArPSAnLCAnICsgdGV4dDsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIHZhbHVlID0gc2VsZWN0LmZpbmQoJ29wdGlvbjpkaXNhYmxlZCcpLmVxKDApLnRleHQoKTsKICAgICAgfQoKICAgICAgc2VsZWN0LnNpYmxpbmdzKCdpbnB1dC5zZWxlY3QtZHJvcGRvd24nKS52YWwodmFsdWUpOwogICAgfQogIH07Cgp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKCiAgdmFyIG1ldGhvZHMgPSB7CgogICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgIGluZGljYXRvcnM6IHRydWUsCiAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgdHJhbnNpdGlvbjogNTAwLAogICAgICAgIGludGVydmFsOiA2MDAwCiAgICAgIH07CiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7CgogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoKICAgICAgICAvLyBGb3IgZWFjaCBzbGlkZXIsIHdlIHdhbnQgdG8ga2VlcCB0cmFjayBvZgogICAgICAgIC8vIHdoaWNoIHNsaWRlIGlzIGFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgY29udGVudAogICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgICAgdmFyICRzbGlkZXIgPSAkdGhpcy5maW5kKCd1bC5zbGlkZXMnKS5maXJzdCgpOwogICAgICAgIHZhciAkc2xpZGVzID0gJHNsaWRlci5maW5kKCc+IGxpJyk7CiAgICAgICAgdmFyICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpOwogICAgICAgIHZhciAkYWN0aXZlLCAkaW5kaWNhdG9ycywgJGludGVydmFsOwogICAgICAgIGlmICgkYWN0aXZlX2luZGV4ICE9IC0xKSB7ICRhY3RpdmUgPSAkc2xpZGVzLmVxKCRhY3RpdmVfaW5kZXgpOyB9CgogICAgICAgIC8vIFRyYW5zaXRpb25zIHRoZSBjYXB0aW9uIGRlcGVuZGluZyBvbiBhbGlnbm1lbnQKICAgICAgICBmdW5jdGlvbiBjYXB0aW9uVHJhbnNpdGlvbihjYXB0aW9uLCBkdXJhdGlvbikgewogICAgICAgICAgaWYgKGNhcHRpb24uaGFzQ2xhc3MoImNlbnRlci1hbGlnbiIpKSB7CiAgICAgICAgICAgIGNhcHRpb24udmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVk6IC0xMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGNhcHRpb24uaGFzQ2xhc3MoInJpZ2h0LWFsaWduIikpIHsKICAgICAgICAgICAgY2FwdGlvbi52ZWxvY2l0eSh7b3BhY2l0eTogMCwgdHJhbnNsYXRlWDogMTAwfSwge2R1cmF0aW9uOiBkdXJhdGlvbiwgcXVldWU6IGZhbHNlfSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChjYXB0aW9uLmhhc0NsYXNzKCJsZWZ0LWFsaWduIikpIHsKICAgICAgICAgICAgY2FwdGlvbi52ZWxvY2l0eSh7b3BhY2l0eTogMCwgdHJhbnNsYXRlWDogLTEwMH0sIHtkdXJhdGlvbjogZHVyYXRpb24sIHF1ZXVlOiBmYWxzZX0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIHRyYW5zaXRpb24gdGhlIHNsaWRlIHRvIGFueSBpbmRleCBvZiB0aGUgbmV4dCBzbGlkZQogICAgICAgIGZ1bmN0aW9uIG1vdmVUb1NsaWRlKGluZGV4KSB7CiAgICAgICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLgogICAgICAgICAgaWYgKGluZGV4ID49ICRzbGlkZXMubGVuZ3RoKSBpbmRleCA9IDA7CiAgICAgICAgICBlbHNlIGlmIChpbmRleCA8IDApIGluZGV4ID0gJHNsaWRlcy5sZW5ndGggLTE7CgogICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7CgogICAgICAgICAgLy8gT25seSBkbyBpZiBpbmRleCBjaGFuZ2VzCiAgICAgICAgICBpZiAoJGFjdGl2ZV9pbmRleCAhPSBpbmRleCkgewogICAgICAgICAgICAkYWN0aXZlID0gJHNsaWRlcy5lcSgkYWN0aXZlX2luZGV4KTsKICAgICAgICAgICAgJGNhcHRpb24gPSAkYWN0aXZlLmZpbmQoJy5jYXB0aW9uJyk7CgogICAgICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgJGFjdGl2ZS52ZWxvY2l0eSh7b3BhY2l0eTogMH0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzbGlkZXMubm90KCcuYWN0aXZlJykudmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IDAsIHRyYW5zbGF0ZVk6IDB9LCB7ZHVyYXRpb246IDAsIHF1ZXVlOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pOwogICAgICAgICAgICBjYXB0aW9uVHJhbnNpdGlvbigkY2FwdGlvbiwgb3B0aW9ucy50cmFuc2l0aW9uKTsKCgogICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9ycwogICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2F0b3JzKSB7CiAgICAgICAgICAgICAgJGluZGljYXRvcnMuZXEoJGFjdGl2ZV9pbmRleCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkc2xpZGVzLmVxKGluZGV4KS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pOwogICAgICAgICAgICAkc2xpZGVzLmVxKGluZGV4KS5maW5kKCcuY2FwdGlvbicpLnZlbG9jaXR5KHtvcGFjaXR5OiAxLCB0cmFuc2xhdGVYOiAwLCB0cmFuc2xhdGVZOiAwfSwge2R1cmF0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sIGRlbGF5OiBvcHRpb25zLnRyYW5zaXRpb24sIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICAgICRzbGlkZXMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsKCgogICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9ycwogICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2F0b3JzKSB7CiAgICAgICAgICAgICAgJGluZGljYXRvcnMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IGhlaWdodCBvZiBzbGlkZXIKICAgICAgICAvLyBJZiBmdWxsc2NyZWVuLCBkbyBub3RoaW5nCiAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcygnZnVsbHNjcmVlbicpKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2F0b3JzKSB7CiAgICAgICAgICAgIC8vIEFkZCBoZWlnaHQgaWYgaW5kaWNhdG9ycyBhcmUgcHJlc2VudAogICAgICAgICAgICAkdGhpcy5oZWlnaHQob3B0aW9ucy5oZWlnaHQgKyA0MCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJHRoaXMuaGVpZ2h0KG9wdGlvbnMuaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICAgICRzbGlkZXIuaGVpZ2h0KG9wdGlvbnMuaGVpZ2h0KTsKICAgICAgICB9CgoKICAgICAgICAvLyBTZXQgaW5pdGlhbCBwb3NpdGlvbnMgb2YgY2FwdGlvbnMKICAgICAgICAkc2xpZGVzLmZpbmQoJy5jYXB0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjYXB0aW9uVHJhbnNpdGlvbigkKHRoaXMpLCAwKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gTW92ZSBpbWcgc3JjIGludG8gYmFja2dyb3VuZC1pbWFnZQogICAgICAgICRzbGlkZXMuZmluZCgnaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcGxhY2Vob2xkZXJCYXNlNjQgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUJBUC8vL3dBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PSc7CiAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSAhPT0gcGxhY2Vob2xkZXJCYXNlNjQpIHsKICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCInICsgJCh0aGlzKS5hdHRyKCdzcmMnKSArICciKScgKTsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCBwbGFjZWhvbGRlckJhc2U2NCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIGR5bmFtaWNhbGx5IGFkZCBpbmRpY2F0b3JzCiAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykgewogICAgICAgICAgJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9ImluZGljYXRvcnMiPjwvdWw+Jyk7CiAgICAgICAgICAkc2xpZGVzLmVhY2goZnVuY3Rpb24oIGluZGV4ICkgewogICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz0iaW5kaWNhdG9yLWl0ZW0iPjwvbGk+Jyk7CgogICAgICAgICAgICAvLyBIYW5kbGUgY2xpY2tzIG9uIGluZGljYXRvcnMKICAgICAgICAgICAgJGluZGljYXRvci5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkc2xpZGVyLnBhcmVudCgpOwogICAgICAgICAgICAgIHZhciBjdXJyX2luZGV4ID0gJHBhcmVudC5maW5kKCQodGhpcykpLmluZGV4KCk7CiAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoY3Vycl9pbmRleCk7CgogICAgICAgICAgICAgIC8vIHJlc2V0IGludGVydmFsCiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpOwogICAgICAgICAgICAgICRpbnRlcnZhbCA9IHNldEludGVydmFsKAogICAgICAgICAgICAgICAgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7CiAgICAgICAgICAgICAgICAgIGlmICgkc2xpZGVzLmxlbmd0aCA9PSAkYWN0aXZlX2luZGV4ICsgMSkgJGFjdGl2ZV9pbmRleCA9IDA7IC8vIGxvb3AgdG8gc3RhcnQKICAgICAgICAgICAgICAgICAgZWxzZSAkYWN0aXZlX2luZGV4ICs9IDE7CgogICAgICAgICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4KTsKCiAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnRyYW5zaXRpb24gKyBvcHRpb25zLmludGVydmFsCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICRpbmRpY2F0b3JzLmFwcGVuZCgkaW5kaWNhdG9yKTsKICAgICAgICAgIH0pOwogICAgICAgICAgJHRoaXMuYXBwZW5kKCRpbmRpY2F0b3JzKTsKICAgICAgICAgICRpbmRpY2F0b3JzID0gJHRoaXMuZmluZCgndWwuaW5kaWNhdG9ycycpLmZpbmQoJ2xpLmluZGljYXRvci1pdGVtJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJGFjdGl2ZSkgewogICAgICAgICAgJGFjdGl2ZS5zaG93KCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgJHNsaWRlcy5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pOwoKICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAwOwogICAgICAgICAgJGFjdGl2ZSA9ICRzbGlkZXMuZXEoJGFjdGl2ZV9pbmRleCk7CgogICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnMKICAgICAgICAgIGlmIChvcHRpb25zLmluZGljYXRvcnMpIHsKICAgICAgICAgICAgJGluZGljYXRvcnMuZXEoJGFjdGl2ZV9pbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQWRqdXN0IGhlaWdodCB0byBjdXJyZW50IHNsaWRlCiAgICAgICAgJGFjdGl2ZS5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpLnZlbG9jaXR5KHtvcGFjaXR5OiAxLCB0cmFuc2xhdGVYOiAwLCB0cmFuc2xhdGVZOiAwfSwge2R1cmF0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIGF1dG8gc2Nyb2xsCiAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoCiAgICAgICAgICBmdW5jdGlvbigpewogICAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTsKICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCArIDEpOwoKICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWwKICAgICAgICApOwoKCiAgICAgICAgLy8gSGFtbWVySlMsIFN3aXBlIG5hdmlnYXRpb24KCiAgICAgICAgLy8gVG91Y2ggRXZlbnQKICAgICAgICB2YXIgcGFubmluZyA9IGZhbHNlOwogICAgICAgIHZhciBzd2lwZUxlZnQgPSBmYWxzZTsKICAgICAgICB2YXIgc3dpcGVSaWdodCA9IGZhbHNlOwoKICAgICAgICAkdGhpcy5oYW1tZXIoewogICAgICAgICAgICBwcmV2ZW50X2RlZmF1bHQ6IGZhbHNlCiAgICAgICAgfSkub24oJ3BhbicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT09ICJ0b3VjaCIpIHsKCiAgICAgICAgICAgIC8vIHJlc2V0IGludGVydmFsCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJGludGVydmFsKTsKCiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uOwogICAgICAgICAgICB2YXIgeCA9IGUuZ2VzdHVyZS5kZWx0YVg7CiAgICAgICAgICAgIHZhciB2ZWxvY2l0eVggPSBlLmdlc3R1cmUudmVsb2NpdHlYOwogICAgICAgICAgICB2YXIgdmVsb2NpdHlZID0gZS5nZXN0dXJlLnZlbG9jaXR5WTsKCiAgICAgICAgICAgICRjdXJyX3NsaWRlID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJyk7CiAgICAgICAgICAgIGlmIChNYXRoLmFicyh2ZWxvY2l0eVgpID4gTWF0aC5hYnModmVsb2NpdHlZKSkgewogICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogeAogICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDUwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBTd2lwZSBMZWZ0CiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IDQgJiYgKHggPiAoJHRoaXMuaW5uZXJXaWR0aCgpIC8gMikgfHwgdmVsb2NpdHlYIDwgLTAuNjUpKSB7CiAgICAgICAgICAgICAgc3dpcGVSaWdodCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gU3dpcGUgUmlnaHQKICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAyICYmICh4IDwgKC0xICogJHRoaXMuaW5uZXJXaWR0aCgpIC8gMikgfHwgdmVsb2NpdHlYID4gMC42NSkpIHsKICAgICAgICAgICAgICBzd2lwZUxlZnQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBNYWtlIFNsaWRlIEJlaGluZCBhY3RpdmUgc2xpZGUgdmlzaWJsZQogICAgICAgICAgICB2YXIgbmV4dF9zbGlkZTsKICAgICAgICAgICAgaWYgKHN3aXBlTGVmdCkgewogICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkY3Vycl9zbGlkZS5uZXh0KCk7CiAgICAgICAgICAgICAgaWYgKG5leHRfc2xpZGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBuZXh0X3NsaWRlID0gJHNsaWRlcy5maXJzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBuZXh0X3NsaWRlLnZlbG9jaXR5KHsgb3BhY2l0eTogMQogICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3dpcGVSaWdodCkgewogICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkY3Vycl9zbGlkZS5wcmV2KCk7CiAgICAgICAgICAgICAgaWYgKG5leHRfc2xpZGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBuZXh0X3NsaWRlID0gJHNsaWRlcy5sYXN0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG5leHRfc2xpZGUudmVsb2NpdHkoeyBvcGFjaXR5OiAxCiAgICAgICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pOwogICAgICAgICAgICB9CgoKICAgICAgICAgIH0KCiAgICAgICAgfSkub24oJ3BhbmVuZCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT09ICJ0b3VjaCIpIHsKCiAgICAgICAgICAgICRjdXJyX3NsaWRlID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJyk7CiAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTsKICAgICAgICAgICAgY3Vycl9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7CgogICAgICAgICAgICBpZiAoIXN3aXBlUmlnaHQgJiYgIXN3aXBlTGVmdCB8fCAkc2xpZGVzLmxlbmd0aCA8PTEpIHsKICAgICAgICAgICAgICAvLyBSZXR1cm4gdG8gb3JpZ2luYWwgc3BvdAogICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogMAogICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChzd2lwZUxlZnQpIHsKICAgICAgICAgICAgICBtb3ZlVG9TbGlkZShjdXJyX2luZGV4ICsgMSk7CiAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6IC0xICogJHRoaXMuaW5uZXJXaWR0aCgpIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAwfSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2V9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChzd2lwZVJpZ2h0KSB7CiAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoY3Vycl9pbmRleCAtIDEpOwogICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOiAkdGhpcy5pbm5lcldpZHRoKCkgfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IDB9LCB7ZHVyYXRpb246IDAsIHF1ZXVlOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXBlTGVmdCA9IGZhbHNlOwogICAgICAgICAgICBzd2lwZVJpZ2h0ID0gZmFsc2U7CgogICAgICAgICAgICAvLyBSZXN0YXJ0IGludGVydmFsCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJGludGVydmFsKTsKICAgICAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoCiAgICAgICAgICAgICAgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpOwogICAgICAgICAgICAgICAgaWYgKCRzbGlkZXMubGVuZ3RoID09ICRhY3RpdmVfaW5kZXggKyAxKSAkYWN0aXZlX2luZGV4ID0gMDsgLy8gbG9vcCB0byBzdGFydAogICAgICAgICAgICAgICAgZWxzZSAkYWN0aXZlX2luZGV4ICs9IDE7CgogICAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCk7CgogICAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWwKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJHRoaXMub24oJ3NsaWRlclBhdXNlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKCRpbnRlcnZhbCk7CiAgICAgICAgfSk7CgogICAgICAgICR0aGlzLm9uKCdzbGlkZXJTdGFydCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpOwogICAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoCiAgICAgICAgICAgIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7CiAgICAgICAgICAgICAgaWYgKCRzbGlkZXMubGVuZ3RoID09ICRhY3RpdmVfaW5kZXggKyAxKSAkYWN0aXZlX2luZGV4ID0gMDsgLy8gbG9vcCB0byBzdGFydAogICAgICAgICAgICAgIGVsc2UgJGFjdGl2ZV9pbmRleCArPSAxOwoKICAgICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4KTsKCiAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWwKICAgICAgICAgICk7CiAgICAgICAgfSk7CgogICAgICAgICR0aGlzLm9uKCdzbGlkZXJOZXh0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTsKICAgICAgICAgIG1vdmVUb1NsaWRlKCRhY3RpdmVfaW5kZXggKyAxKTsKICAgICAgICB9KTsKCiAgICAgICAgJHRoaXMub24oJ3NsaWRlclByZXYnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpOwogICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCAtIDEpOwogICAgICAgIH0pOwoKICAgICAgfSk7CgoKCiAgICB9LAogICAgcGF1c2UgOiBmdW5jdGlvbigpIHsKICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJQYXVzZScpOwogICAgfSwKICAgIHN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICQodGhpcykudHJpZ2dlcignc2xpZGVyU3RhcnQnKTsKICAgIH0sCiAgICBuZXh0IDogZnVuY3Rpb24oKSB7CiAgICAgICQodGhpcykudHJpZ2dlcignc2xpZGVyTmV4dCcpOwogICAgfSwKICAgIHByZXYgOiBmdW5jdGlvbigpIHsKICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJQcmV2Jyk7CiAgICB9CiAgfTsKCgogICQuZm4uc2xpZGVyID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7CiAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHsKICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpOwogICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7CiAgICAgIC8vIERlZmF1bHQgdG8gImluaXQiCiAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwogICAgfSBlbHNlIHsKICAgICAgJC5lcnJvciggJ01ldGhvZCAnICsgIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnRvb2x0aXAnICk7CiAgICB9CiAgfTsgLy8gUGx1Z2luIGVuZAp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKCiAgICAkKGRvY3VtZW50KS5vbignY2xpY2suY2FyZCcsICcuY2FyZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gLmNhcmQtcmV2ZWFsJykubGVuZ3RoKSB7CiAgICAgICAgdmFyICRjYXJkID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhcmQnKTsKICAgICAgICBpZiAoJGNhcmQuZGF0YSgnaW5pdGlhbE92ZXJmbG93JykgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgJGNhcmQuZGF0YSgKICAgICAgICAgICAgJ2luaXRpYWxPdmVyZmxvdycsCiAgICAgICAgICAgICRjYXJkLmNzcygnb3ZlcmZsb3cnKSA9PT0gdW5kZWZpbmVkID8gJycgOiAkY2FyZC5jc3MoJ292ZXJmbG93JykKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUnKSkgfHwgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlIGknKSkpIHsKICAgICAgICAgIC8vIE1ha2UgUmV2ZWFsIGFuaW1hdGUgZG93biBhbmQgZGlzcGxheSBub25lCiAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXJldmVhbCcpLnZlbG9jaXR5KAogICAgICAgICAgICB7dHJhbnNsYXRlWTogMH0sIHsKICAgICAgICAgICAgICBkdXJhdGlvbjogMjI1LAogICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwKICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJywKICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7IGRpc3BsYXk6ICdub25lJ30pOwogICAgICAgICAgICAgICAgJGNhcmQuY3NzKCdvdmVyZmxvdycsICRjYXJkLmRhdGEoJ2luaXRpYWxPdmVyZmxvdycpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3InKSkgfHwKICAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZCAuYWN0aXZhdG9yIGknKSkgKSB7CiAgICAgICAgICAkY2FyZC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpOwogICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1yZXZlYWwnKS5jc3MoeyBkaXNwbGF5OiAnYmxvY2snfSkudmVsb2NpdHkoInN0b3AiLCBmYWxzZSkudmVsb2NpdHkoe3RyYW5zbGF0ZVk6ICctMTAwJSd9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ30pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogIH0pOwp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKICB2YXIgbWF0ZXJpYWxDaGlwc0RlZmF1bHRzID0gewogICAgZGF0YTogW10sCiAgICBwbGFjZWhvbGRlcjogJycsCiAgICBzZWNvbmRhcnlQbGFjZWhvbGRlcjogJycsCiAgICBhdXRvY29tcGxldGVPcHRpb25zOiB7fSwKICB9OwoKICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKICAgIC8vIEhhbmRsZSByZW1vdmFsIG9mIHN0YXRpYyBjaGlwcy4KICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2hpcCAuY2xvc2UnLCBmdW5jdGlvbihlKXsKICAgICAgdmFyICRjaGlwcyA9ICQodGhpcykuY2xvc2VzdCgnLmNoaXBzJyk7CiAgICAgIGlmICgkY2hpcHMuYXR0cignZGF0YS1pbml0aWFsaXplZCcpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgICQodGhpcykuY2xvc2VzdCgnLmNoaXAnKS5yZW1vdmUoKTsKICAgIH0pOwogIH0pOwoKICAkLmZuLm1hdGVyaWFsX2NoaXAgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy4kZWwgPSAkKHRoaXMpOwogICAgdGhpcy4kZG9jdW1lbnQgPSAkKGRvY3VtZW50KTsKICAgIHRoaXMuU0VMUyA9IHsKICAgICAgQ0hJUFM6ICcuY2hpcHMnLAogICAgICBDSElQOiAnLmNoaXAnLAogICAgICBJTlBVVDogJ2lucHV0JywKICAgICAgREVMRVRFOiAnLm1hdGVyaWFsLWljb25zJywKICAgICAgU0VMRUNURURfQ0hJUDogJy5zZWxlY3RlZCcsCiAgICB9OwoKICAgIGlmICgnZGF0YScgPT09IG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHRoaXMuJGVsLmRhdGEoJ2NoaXBzJyk7CiAgICB9CgogICAgdmFyIGN1cnJfb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBtYXRlcmlhbENoaXBzRGVmYXVsdHMsIG9wdGlvbnMpOwogICAgc2VsZi5oYXNBdXRvY29tcGxldGUgPSAhJC5pc0VtcHR5T2JqZWN0KGN1cnJfb3B0aW9ucy5hdXRvY29tcGxldGVPcHRpb25zLmRhdGEpOwoKICAgIC8vIEluaXRpYWxpemUKICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaSA9IDA7CiAgICAgIHZhciBjaGlwczsKICAgICAgc2VsZi4kZWwuZWFjaChmdW5jdGlvbigpewogICAgICAgIHZhciAkY2hpcHMgPSAkKHRoaXMpOwogICAgICAgIHZhciBjaGlwSWQgPSBNYXRlcmlhbGl6ZS5ndWlkKCk7CiAgICAgICAgc2VsZi5jaGlwSWQgPSBjaGlwSWQ7CgogICAgICAgIGlmICghY3Vycl9vcHRpb25zLmRhdGEgfHwgIShjdXJyX29wdGlvbnMuZGF0YSBpbnN0YW5jZW9mIEFycmF5KSkgewogICAgICAgICAgY3Vycl9vcHRpb25zLmRhdGEgPSBbXTsKICAgICAgICB9CiAgICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJywgY3Vycl9vcHRpb25zLmRhdGEpOwogICAgICAgICRjaGlwcy5hdHRyKCdkYXRhLWluZGV4JywgaSk7CiAgICAgICAgJGNoaXBzLmF0dHIoJ2RhdGEtaW5pdGlhbGl6ZWQnLCB0cnVlKTsKCiAgICAgICAgaWYgKCEkY2hpcHMuaGFzQ2xhc3Moc2VsZi5TRUxTLkNISVBTKSkgewogICAgICAgICAgJGNoaXBzLmFkZENsYXNzKCdjaGlwcycpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5jaGlwcygkY2hpcHMsIGNoaXBJZCk7CiAgICAgICAgaSsrOwogICAgICB9KTsKICAgIH07CgogICAgdGhpcy5oYW5kbGVFdmVudHMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIFNFTFMgPSBzZWxmLlNFTFM7CgogICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUykub24oJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUywgZnVuY3Rpb24oZSl7CiAgICAgICAgJChlLnRhcmdldCkuZmluZChTRUxTLklOUFVUKS5mb2N1cygpOwogICAgICB9KTsKCiAgICAgIHNlbGYuJGRvY3VtZW50Lm9mZignY2xpY2suY2hpcHMtc2VsZWN0JywgU0VMUy5DSElQKS5vbignY2xpY2suY2hpcHMtc2VsZWN0JywgU0VMUy5DSElQLCBmdW5jdGlvbihlKXsKICAgICAgICB2YXIgJGNoaXAgPSAkKGUudGFyZ2V0KTsKICAgICAgICBpZiAoJGNoaXAubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgd2FzU2VsZWN0ZWQgPSAkY2hpcC5oYXNDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgICAgIHZhciAkY2hpcHMgPSAkY2hpcC5jbG9zZXN0KFNFTFMuQ0hJUFMpOwogICAgICAgICAgJChTRUxTLkNISVApLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwoKICAgICAgICAgIGlmICghd2FzU2VsZWN0ZWQpIHsKICAgICAgICAgICAgc2VsZi5zZWxlY3RDaGlwKCRjaGlwLmluZGV4KCksICRjaGlwcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHNlbGYuJGRvY3VtZW50Lm9mZigna2V5ZG93bi5jaGlwcycpLm9uKCdrZXlkb3duLmNoaXBzJywgZnVuY3Rpb24oZSl7CiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCdpbnB1dCwgdGV4dGFyZWEnKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gZGVsZXRlCiAgICAgICAgdmFyICRjaGlwID0gc2VsZi4kZG9jdW1lbnQuZmluZChTRUxTLkNISVAgKyBTRUxTLlNFTEVDVEVEX0NISVApOwogICAgICAgIHZhciAkY2hpcHMgPSAkY2hpcC5jbG9zZXN0KFNFTFMuQ0hJUFMpOwogICAgICAgIHZhciBsZW5ndGggPSAkY2hpcC5zaWJsaW5ncyhTRUxTLkNISVApLmxlbmd0aDsKICAgICAgICB2YXIgaW5kZXg7CgogICAgICAgIGlmICghJGNoaXAubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoZS53aGljaCA9PT0gOCB8fCBlLndoaWNoID09PSA0NikgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIGluZGV4ID0gJGNoaXAuaW5kZXgoKTsKICAgICAgICAgIHNlbGYuZGVsZXRlQ2hpcChpbmRleCwgJGNoaXBzKTsKCiAgICAgICAgICB2YXIgc2VsZWN0SW5kZXggPSBudWxsOwogICAgICAgICAgaWYgKChpbmRleCArIDEpIDwgbGVuZ3RoKSB7CiAgICAgICAgICAgIHNlbGVjdEluZGV4ID0gaW5kZXg7CiAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW5ndGggfHwgKGluZGV4ICsgMSkgPT09IGxlbmd0aCkgewogICAgICAgICAgICBzZWxlY3RJbmRleCA9IGxlbmd0aCAtIDE7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHNlbGVjdEluZGV4IDwgMCkgc2VsZWN0SW5kZXggPSBudWxsOwoKICAgICAgICAgIGlmIChudWxsICE9PSBzZWxlY3RJbmRleCkgewogICAgICAgICAgICBzZWxmLnNlbGVjdENoaXAoc2VsZWN0SW5kZXgsICRjaGlwcyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWxlbmd0aCkgJGNoaXBzLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsKCiAgICAgICAgLy8gbGVmdAogICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gMzcpIHsKICAgICAgICAgIGluZGV4ID0gJGNoaXAuaW5kZXgoKSAtIDE7CiAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgICQoU0VMUy5DSElQKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgICAgIHNlbGYuc2VsZWN0Q2hpcChpbmRleCwgJGNoaXBzKTsKCiAgICAgICAgLy8gcmlnaHQKICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDM5KSB7CiAgICAgICAgICBpbmRleCA9ICRjaGlwLmluZGV4KCkgKyAxOwogICAgICAgICAgJChTRUxTLkNISVApLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgaWYgKGluZGV4ID4gbGVuZ3RoKSB7CiAgICAgICAgICAgICRjaGlwcy5maW5kKCdpbnB1dCcpLmZvY3VzKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHNlbGYuc2VsZWN0Q2hpcChpbmRleCwgJGNoaXBzKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdmb2N1c2luLmNoaXBzJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQpLm9uKCdmb2N1c2luLmNoaXBzJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQsIGZ1bmN0aW9uKGUpewogICAgICAgIHZhciAkY3VyckNoaXBzID0gJChlLnRhcmdldCkuY2xvc2VzdChTRUxTLkNISVBTKTsKICAgICAgICAkY3VyckNoaXBzLmFkZENsYXNzKCdmb2N1cycpOwogICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJ2xhYmVsLCAucHJlZml4JykuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICQoU0VMUy5DSElQKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgfSk7CgogICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2ZvY3Vzb3V0LmNoaXBzJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQpLm9uKCdmb2N1c291dC5jaGlwcycsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVULCBmdW5jdGlvbihlKXsKICAgICAgICB2YXIgJGN1cnJDaGlwcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoU0VMUy5DSElQUyk7CiAgICAgICAgJGN1cnJDaGlwcy5yZW1vdmVDbGFzcygnZm9jdXMnKTsKCiAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBpZiBlbXB0eQogICAgICAgIGlmICgkY3VyckNoaXBzLmRhdGEoJ2NoaXBzJykgPT09IHVuZGVmaW5lZCB8fCAhJGN1cnJDaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCkgewogICAgICAgICAgJGN1cnJDaGlwcy5zaWJsaW5ncygnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgfQogICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJy5wcmVmaXgnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgIH0pOwoKICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdrZXlkb3duLmNoaXBzLWFkZCcsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVUKS5vbigna2V5ZG93bi5jaGlwcy1hZGQnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5JTlBVVCwgZnVuY3Rpb24oZSl7CiAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTsKICAgICAgICB2YXIgJGNoaXBzID0gJHRhcmdldC5jbG9zZXN0KFNFTFMuQ0hJUFMpOwogICAgICAgIHZhciBjaGlwc0xlbmd0aCA9ICRjaGlwcy5jaGlsZHJlbihTRUxTLkNISVApLmxlbmd0aDsKCiAgICAgICAgLy8gZW50ZXIKICAgICAgICBpZiAoMTMgPT09IGUud2hpY2gpIHsKICAgICAgICAgIC8vIE92ZXJyaWRlIGVudGVyIGlmIGF1dG9jb21wbGV0aW5nLgogICAgICAgICAgaWYgKHNlbGYuaGFzQXV0b2NvbXBsZXRlICYmCiAgICAgICAgICAgICAgJGNoaXBzLmZpbmQoJy5hdXRvY29tcGxldGUtY29udGVudC5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoICYmCiAgICAgICAgICAgICAgJGNoaXBzLmZpbmQoJy5hdXRvY29tcGxldGUtY29udGVudC5kcm9wZG93bi1jb250ZW50JykuY2hpbGRyZW4oKS5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHNlbGYuYWRkQ2hpcCh7dGFnOiAkdGFyZ2V0LnZhbCgpfSwgJGNoaXBzKTsKICAgICAgICAgICR0YXJnZXQudmFsKCcnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIGRlbGV0ZSBvciBsZWZ0CiAgICAgICAgaWYgKCg4ID09PSBlLmtleUNvZGUgfHwgMzcgPT09IGUua2V5Q29kZSkgJiYgJycgPT09ICR0YXJnZXQudmFsKCkgJiYgY2hpcHNMZW5ndGgpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHNlbGYuc2VsZWN0Q2hpcChjaGlwc0xlbmd0aCAtIDEsICRjaGlwcyk7CiAgICAgICAgICAkdGFyZ2V0LmJsdXIoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8gQ2xpY2sgb24gZGVsZXRlIGljb24gaW4gY2hpcC4KICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdjbGljay5jaGlwcy1kZWxldGUnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5ERUxFVEUpLm9uKCdjbGljay5jaGlwcy1kZWxldGUnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5ERUxFVEUsIGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpOwogICAgICAgIHZhciAkY2hpcHMgPSAkdGFyZ2V0LmNsb3Nlc3QoU0VMUy5DSElQUyk7CiAgICAgICAgdmFyICRjaGlwID0gJHRhcmdldC5jbG9zZXN0KFNFTFMuQ0hJUCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBzZWxmLmRlbGV0ZUNoaXAoJGNoaXAuaW5kZXgoKSwgJGNoaXBzKTsKICAgICAgICAkY2hpcHMuZmluZCgnaW5wdXQnKS5mb2N1cygpOwogICAgICB9KTsKICAgIH07CgogICAgdGhpcy5jaGlwcyA9IGZ1bmN0aW9uKCRjaGlwcywgY2hpcElkKSB7CiAgICAgICRjaGlwcy5lbXB0eSgpOwogICAgICAkY2hpcHMuZGF0YSgnY2hpcHMnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW0pewogICAgICAgICRjaGlwcy5hcHBlbmQoc2VsZi5yZW5kZXJDaGlwKGVsZW0pKTsKICAgICAgfSk7CiAgICAgICRjaGlwcy5hcHBlbmQoJCgnPGlucHV0IGlkPSInICsgY2hpcElkICsnIiBjbGFzcz0iaW5wdXQiIHBsYWNlaG9sZGVyPSIiPicpKTsKICAgICAgc2VsZi5zZXRQbGFjZWhvbGRlcigkY2hpcHMpOwoKICAgICAgLy8gU2V0IGZvciBhdHRyaWJ1dGUgZm9yIGxhYmVsCiAgICAgIHZhciBsYWJlbCA9ICRjaGlwcy5uZXh0KCdsYWJlbCcpOwogICAgICBpZiAobGFiZWwubGVuZ3RoKSB7CiAgICAgICAgbGFiZWwuYXR0cignZm9yJywgY2hpcElkKTsKCiAgICAgICAgaWYgKCRjaGlwcy5kYXRhKCdjaGlwcycpIT09IHVuZGVmaW5lZCAmJiAkY2hpcHMuZGF0YSgnY2hpcHMnKS5sZW5ndGgpIHsKICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIFNldHVwIGF1dG9jb21wbGV0ZSBpZiBuZWVkZWQuCiAgICAgIHZhciBpbnB1dCA9ICQoJyMnICsgY2hpcElkKTsKICAgICAgaWYgKHNlbGYuaGFzQXV0b2NvbXBsZXRlKSB7CiAgICAgICAgY3Vycl9vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMub25BdXRvY29tcGxldGUgPSBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgIHNlbGYuYWRkQ2hpcCh7dGFnOiB2YWx9LCAkY2hpcHMpOwogICAgICAgICAgaW5wdXQudmFsKCcnKTsKICAgICAgICAgIGlucHV0LmZvY3VzKCk7CiAgICAgICAgfQogICAgICAgIGlucHV0LmF1dG9jb21wbGV0ZShjdXJyX29wdGlvbnMuYXV0b2NvbXBsZXRlT3B0aW9ucyk7CiAgICAgIH0KICAgIH07CgogICAgLyoqCiAgICAgKiBSZW5kZXIgY2hpcCBqUXVlcnkgZWxlbWVudC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtCiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9CiAgICAgKi8KICAgIHRoaXMucmVuZGVyQ2hpcCA9IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgaWYgKCFlbGVtLnRhZykgcmV0dXJuOwoKICAgICAgdmFyICRyZW5kZXJlZENoaXAgPSAkKCc8ZGl2IGNsYXNzPSJjaGlwIj48L2Rpdj4nKTsKICAgICAgJHJlbmRlcmVkQ2hpcC50ZXh0KGVsZW0udGFnKTsKICAgICAgaWYgKGVsZW0uaW1hZ2UpIHsKICAgICAgICAkcmVuZGVyZWRDaGlwLnByZXBlbmQoJCgnPGltZyAvPicpLmF0dHIoJ3NyYycsIGVsZW0uaW1hZ2UpKQogICAgICB9CiAgICAgICRyZW5kZXJlZENoaXAuYXBwZW5kKCQoJzxpIGNsYXNzPSJtYXRlcmlhbC1pY29ucyBjbG9zZSI+Y2xvc2U8L2k+JykpOwogICAgICByZXR1cm4gJHJlbmRlcmVkQ2hpcDsKICAgIH07CgogICAgdGhpcy5zZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCRjaGlwcykgewogICAgICBpZiAoJGNoaXBzLmRhdGEoJ2NoaXBzJykgIT09IHVuZGVmaW5lZCAmJiAkY2hpcHMuZGF0YSgnY2hpcHMnKS5sZW5ndGggJiYgY3Vycl9vcHRpb25zLnBsYWNlaG9sZGVyKSB7CiAgICAgICAgJGNoaXBzLmZpbmQoJ2lucHV0JykucHJvcCgncGxhY2Vob2xkZXInLCBjdXJyX29wdGlvbnMucGxhY2Vob2xkZXIpOwoKICAgICAgfSBlbHNlIGlmICgoJGNoaXBzLmRhdGEoJ2NoaXBzJykgPT09IHVuZGVmaW5lZCB8fCAhJGNoaXBzLmRhdGEoJ2NoaXBzJykubGVuZ3RoKSAmJiBjdXJyX29wdGlvbnMuc2Vjb25kYXJ5UGxhY2Vob2xkZXIpIHsKICAgICAgICAkY2hpcHMuZmluZCgnaW5wdXQnKS5wcm9wKCdwbGFjZWhvbGRlcicsIGN1cnJfb3B0aW9ucy5zZWNvbmRhcnlQbGFjZWhvbGRlcik7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oJGNoaXBzLCBlbGVtKSB7CiAgICAgIHZhciBjaGlwcyA9ICRjaGlwcy5kYXRhKCdjaGlwcycpOwogICAgICB2YXIgZXhpc3RzID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGk9MDsgaSA8IGNoaXBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGNoaXBzW2ldLnRhZyA9PT0gZWxlbS50YWcpIHsKICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gJycgIT09IGVsZW0udGFnICYmICFleGlzdHM7CiAgICB9OwoKICAgIHRoaXMuYWRkQ2hpcCA9IGZ1bmN0aW9uKGVsZW0sICRjaGlwcykgewogICAgICBpZiAoIXNlbGYuaXNWYWxpZCgkY2hpcHMsIGVsZW0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciAkcmVuZGVyZWRDaGlwID0gc2VsZi5yZW5kZXJDaGlwKGVsZW0pOwogICAgICB2YXIgbmV3RGF0YSA9IFtdOwogICAgICB2YXIgb2xkRGF0YSA9ICRjaGlwcy5kYXRhKCdjaGlwcycpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZERhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBuZXdEYXRhLnB1c2gob2xkRGF0YVtpXSk7CiAgICAgIH0KICAgICAgbmV3RGF0YS5wdXNoKGVsZW0pOwoKICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJywgbmV3RGF0YSk7CiAgICAgICRyZW5kZXJlZENoaXAuaW5zZXJ0QmVmb3JlKCRjaGlwcy5maW5kKCdpbnB1dCcpKTsKICAgICAgJGNoaXBzLnRyaWdnZXIoJ2NoaXAuYWRkJywgZWxlbSk7CiAgICAgIHNlbGYuc2V0UGxhY2Vob2xkZXIoJGNoaXBzKTsKICAgIH07CgogICAgdGhpcy5kZWxldGVDaGlwID0gZnVuY3Rpb24oY2hpcEluZGV4LCAkY2hpcHMpIHsKICAgICAgdmFyIGNoaXAgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKVtjaGlwSW5kZXhdOwogICAgICAkY2hpcHMuZmluZCgnLmNoaXAnKS5lcShjaGlwSW5kZXgpLnJlbW92ZSgpOwoKICAgICAgdmFyIG5ld0RhdGEgPSBbXTsKICAgICAgdmFyIG9sZERhdGEgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGREYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGkgIT09IGNoaXBJbmRleCkgewogICAgICAgICAgbmV3RGF0YS5wdXNoKG9sZERhdGFbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJywgbmV3RGF0YSk7CiAgICAgICRjaGlwcy50cmlnZ2VyKCdjaGlwLmRlbGV0ZScsIGNoaXApOwogICAgICBzZWxmLnNldFBsYWNlaG9sZGVyKCRjaGlwcyk7CiAgICB9OwoKICAgIHRoaXMuc2VsZWN0Q2hpcCA9IGZ1bmN0aW9uKGNoaXBJbmRleCwgJGNoaXBzKSB7CiAgICAgIHZhciAkY2hpcCA9ICRjaGlwcy5maW5kKCcuY2hpcCcpLmVxKGNoaXBJbmRleCk7CiAgICAgIGlmICgkY2hpcCAmJiBmYWxzZSA9PT0gJGNoaXAuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHsKICAgICAgICAkY2hpcC5hZGRDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgICAkY2hpcHMudHJpZ2dlcignY2hpcC5zZWxlY3QnLCAkY2hpcHMuZGF0YSgnY2hpcHMnKVtjaGlwSW5kZXhdKTsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLmdldENoaXBzRWxlbWVudCA9IGZ1bmN0aW9uKGluZGV4LCAkY2hpcHMpIHsKICAgICAgcmV0dXJuICRjaGlwcy5lcShpbmRleCk7CiAgICB9OwoKICAgIC8vIGluaXQKICAgIHRoaXMuaW5pdCgpOwoKICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7CiAgfTsKfSggalF1ZXJ5ICkpOwo7KGZ1bmN0aW9uICgkKSB7CiAgJC5mbi5wdXNocGluID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIC8vIERlZmF1bHRzCiAgICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgIHRvcDogMCwKICAgICAgYm90dG9tOiBJbmZpbml0eSwKICAgICAgb2Zmc2V0OiAwCiAgICB9OwoKICAgIC8vIFJlbW92ZSBwdXNocGluIGV2ZW50IGFuZCBjbGFzc2VzCiAgICBpZiAob3B0aW9ucyA9PT0gInJlbW92ZSIpIHsKICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoaWQgPSAkKHRoaXMpLmRhdGEoJ3B1c2hwaW4taWQnKSkgewogICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsLicgKyBpZCk7CiAgICAgICAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ3B1c2hwaW4taWQnKS5yZW1vdmVDbGFzcygncGluLXRvcCBwaW5uZWQgcGluLWJvdHRvbScpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7CgoKICAgICRpbmRleCA9IDA7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICB2YXIgJHVuaXF1ZUlkID0gTWF0ZXJpYWxpemUuZ3VpZCgpLAogICAgICAgICAgJHRoaXMgPSAkKHRoaXMpLAogICAgICAgICAgJG9yaWdpbmFsX29mZnNldCA9ICQodGhpcykub2Zmc2V0KCkudG9wOwoKICAgICAgZnVuY3Rpb24gcmVtb3ZlUGluQ2xhc3NlcyhvYmplY3QpIHsKICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3Bpbi10b3AnKTsKICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3Bpbm5lZCcpOwogICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygncGluLWJvdHRvbScpOwogICAgICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50cyhvYmplY3RzLCBzY3JvbGxlZCkgewogICAgICAgIG9iamVjdHMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBZGQgcG9zaXRpb24gZml4ZWQgKGJlY2F1c2UgaXRzIGJldHdlZW4gdG9wIGFuZCBib3R0b20pCiAgICAgICAgICBpZiAob3B0aW9ucy50b3AgPD0gc2Nyb2xsZWQgJiYgb3B0aW9ucy5ib3R0b20gPj0gc2Nyb2xsZWQgJiYgISQodGhpcykuaGFzQ2xhc3MoJ3Bpbm5lZCcpKSB7CiAgICAgICAgICAgIHJlbW92ZVBpbkNsYXNzZXMoJCh0aGlzKSk7CiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCBvcHRpb25zLm9mZnNldCk7CiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3Bpbm5lZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFkZCBwaW4tdG9wICh3aGVuIHNjcm9sbGVkIHBvc2l0aW9uIGlzIGFib3ZlIHRvcCkKICAgICAgICAgIGlmIChzY3JvbGxlZCA8IG9wdGlvbnMudG9wICYmICEkKHRoaXMpLmhhc0NsYXNzKCdwaW4tdG9wJykpIHsKICAgICAgICAgICAgcmVtb3ZlUGluQ2xhc3NlcygkKHRoaXMpKTsKICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ3RvcCcsIDApOwogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwaW4tdG9wJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gQWRkIHBpbi1ib3R0b20gKHdoZW4gc2Nyb2xsZWQgcG9zaXRpb24gaXMgYmVsb3cgYm90dG9tKQogICAgICAgICAgaWYgKHNjcm9sbGVkID4gb3B0aW9ucy5ib3R0b20gJiYgISQodGhpcykuaGFzQ2xhc3MoJ3Bpbi1ib3R0b20nKSkgewogICAgICAgICAgICByZW1vdmVQaW5DbGFzc2VzKCQodGhpcykpOwogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwaW4tYm90dG9tJyk7CiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCBvcHRpb25zLmJvdHRvbSAtICRvcmlnaW5hbF9vZmZzZXQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICAkKHRoaXMpLmRhdGEoJ3B1c2hwaW4taWQnLCAkdW5pcXVlSWQpOwogICAgICB1cGRhdGVFbGVtZW50cygkdGhpcywgJCh3aW5kb3cpLnNjcm9sbFRvcCgpKTsKICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwuJyArICR1bmlxdWVJZCwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciAkc2Nyb2xsZWQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyBvcHRpb25zLm9mZnNldDsKICAgICAgICB1cGRhdGVFbGVtZW50cygkdGhpcywgJHNjcm9sbGVkKTsKICAgICAgfSk7CgogICAgfSk7CgogIH07Cn0oIGpRdWVyeSApKTs7KGZ1bmN0aW9uICgkKSB7CiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7CgogICAgLy8galF1ZXJ5IHJldmVyc2UKICAgICQuZm4ucmV2ZXJzZSA9IFtdLnJldmVyc2U7CgogICAgLy8gSG92ZXIgYmVoYXZpb3VyOiBtYWtlIHN1cmUgdGhpcyBkb2Vzbid0IHdvcmsgb24gLmNsaWNrLXRvLXRvZ2dsZSBGQUJzIQogICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIuZml4ZWRBY3Rpb25CdG4nLCAnLmZpeGVkLWFjdGlvbi1idG46bm90KC5jbGljay10by10b2dnbGUpOm5vdCgudG9vbGJhciknLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTsKICAgIH0pOwogICAgJChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUuZml4ZWRBY3Rpb25CdG4nLCAnLmZpeGVkLWFjdGlvbi1idG46bm90KC5jbGljay10by10b2dnbGUpOm5vdCgudG9vbGJhciknLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIGNsb3NlRkFCTWVudSgkdGhpcyk7CiAgICB9KTsKCiAgICAvLyBUb2dnbGUtb24tY2xpY2sgYmVoYXZpb3VyLgogICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmZhYkNsaWNrVG9nZ2xlJywgJy5maXhlZC1hY3Rpb24tYnRuLmNsaWNrLXRvLXRvZ2dsZSA+IGEnLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIHZhciAkbWVudSA9ICR0aGlzLnBhcmVudCgpOwogICAgICBpZiAoJG1lbnUuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7CiAgICAgICAgY2xvc2VGQUJNZW51KCRtZW51KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvcGVuRkFCTWVudSgkbWVudSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIFRvb2xiYXIgdHJhbnNpdGlvbiBiZWhhdmlvdXIuCiAgICAkKGRvY3VtZW50KS5vbignY2xpY2suZmFiVG9vbGJhcicsICcuZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyID4gYScsIGZ1bmN0aW9uKGUpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgdmFyICRtZW51ID0gJHRoaXMucGFyZW50KCk7CiAgICAgIEZBQnRvVG9vbGJhcigkbWVudSk7CiAgICB9KTsKCiAgfSk7CgogICQuZm4uZXh0ZW5kKHsKICAgIG9wZW5GQUI6IGZ1bmN0aW9uKCkgewogICAgICBvcGVuRkFCTWVudSgkKHRoaXMpKTsKICAgIH0sCiAgICBjbG9zZUZBQjogZnVuY3Rpb24oKSB7CiAgICAgIGNsb3NlRkFCTWVudSgkKHRoaXMpKTsKICAgIH0sCiAgICBvcGVuVG9vbGJhcjogZnVuY3Rpb24oKSB7CiAgICAgIEZBQnRvVG9vbGJhcigkKHRoaXMpKTsKICAgIH0sCiAgICBjbG9zZVRvb2xiYXI6IGZ1bmN0aW9uKCkgewogICAgICB0b29sYmFyVG9GQUIoJCh0aGlzKSk7CiAgICB9CiAgfSk7CgoKICB2YXIgb3BlbkZBQk1lbnUgPSBmdW5jdGlvbiAoYnRuKSB7CiAgICB2YXIgJHRoaXMgPSBidG47CiAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSBmYWxzZSkgewoKICAgICAgLy8gR2V0IGRpcmVjdGlvbiBvcHRpb24KICAgICAgdmFyIGhvcml6b250YWwgPSAkdGhpcy5oYXNDbGFzcygnaG9yaXpvbnRhbCcpOwogICAgICB2YXIgb2Zmc2V0WSwgb2Zmc2V0WDsKCiAgICAgIGlmIChob3Jpem9udGFsID09PSB0cnVlKSB7CiAgICAgICAgb2Zmc2V0WCA9IDQwOwogICAgICB9IGVsc2UgewogICAgICAgIG9mZnNldFkgPSA0MDsKICAgICAgfQoKICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAkdGhpcy5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJykudmVsb2NpdHkoCiAgICAgICAgeyBzY2FsZVk6ICIuNCIsIHNjYWxlWDogIi40IiwgdHJhbnNsYXRlWTogb2Zmc2V0WSArICdweCcsIHRyYW5zbGF0ZVg6IG9mZnNldFggKyAncHgnfSwKICAgICAgICB7IGR1cmF0aW9uOiAwIH0pOwoKICAgICAgdmFyIHRpbWUgPSAwOwogICAgICAkdGhpcy5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJykucmV2ZXJzZSgpLmVhY2goIGZ1bmN0aW9uICgpIHsKICAgICAgICAkKHRoaXMpLnZlbG9jaXR5KAogICAgICAgICAgeyBvcGFjaXR5OiAiMSIsIHNjYWxlWDogIjEiLCBzY2FsZVk6ICIxIiwgdHJhbnNsYXRlWTogIjAiLCB0cmFuc2xhdGVYOiAnMCd9LAogICAgICAgICAgeyBkdXJhdGlvbjogODAsIGRlbGF5OiB0aW1lIH0pOwogICAgICAgIHRpbWUgKz0gNDA7CiAgICAgIH0pOwogICAgfQogIH07CgogIHZhciBjbG9zZUZBQk1lbnUgPSBmdW5jdGlvbiAoYnRuKSB7CiAgICB2YXIgJHRoaXMgPSBidG47CiAgICAvLyBHZXQgZGlyZWN0aW9uIG9wdGlvbgogICAgdmFyIGhvcml6b250YWwgPSAkdGhpcy5oYXNDbGFzcygnaG9yaXpvbnRhbCcpOwogICAgdmFyIG9mZnNldFksIG9mZnNldFg7CgogICAgaWYgKGhvcml6b250YWwgPT09IHRydWUpIHsKICAgICAgb2Zmc2V0WCA9IDQwOwogICAgfSBlbHNlIHsKICAgICAgb2Zmc2V0WSA9IDQwOwogICAgfQoKICAgICR0aGlzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgIHZhciB0aW1lID0gMDsKICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eSgic3RvcCIsIHRydWUpOwogICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnZlbG9jaXR5KAogICAgICB7IG9wYWNpdHk6ICIwIiwgc2NhbGVYOiAiLjQiLCBzY2FsZVk6ICIuNCIsIHRyYW5zbGF0ZVk6IG9mZnNldFkgKyAncHgnLCB0cmFuc2xhdGVYOiBvZmZzZXRYICsgJ3B4J30sCiAgICAgIHsgZHVyYXRpb246IDgwIH0KICAgICk7CiAgfTsKCgogIC8qKgogICAqIFRyYW5zZm9ybSBGQUIgaW50byB0b29sYmFyCiAgICogQHBhcmFtICB7T2JqZWN0fSAgb2JqZWN0IGpRdWVyeSBvYmplY3QKICAgKi8KICB2YXIgRkFCdG9Ub29sYmFyID0gZnVuY3Rpb24oYnRuKSB7CiAgICBpZiAoYnRuLmF0dHIoJ2RhdGEtb3BlbicpID09PSAidHJ1ZSIpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBvZmZzZXRYLCBvZmZzZXRZLCBzY2FsZUZhY3RvcjsKICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgIHZhciBidG5SZWN0ID0gYnRuWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgdmFyIGFuY2hvciA9IGJ0bi5maW5kKCc+IGEnKS5maXJzdCgpOwogICAgdmFyIG1lbnUgPSBidG4uZmluZCgnPiB1bCcpLmZpcnN0KCk7CiAgICB2YXIgYmFja2Ryb3AgPSAkKCc8ZGl2IGNsYXNzPSJmYWItYmFja2Ryb3AiPjwvZGl2PicpOwogICAgdmFyIGZhYkNvbG9yID0gYW5jaG9yLmNzcygnYmFja2dyb3VuZC1jb2xvcicpOwogICAgYW5jaG9yLmFwcGVuZChiYWNrZHJvcCk7CgogICAgb2Zmc2V0WCA9IGJ0blJlY3QubGVmdCAtICh3aW5kb3dXaWR0aCAvIDIpICsgKGJ0blJlY3Qud2lkdGggLyAyKTsKICAgIG9mZnNldFkgPSB3aW5kb3dIZWlnaHQgLSBidG5SZWN0LmJvdHRvbTsKICAgIHNjYWxlRmFjdG9yID0gd2luZG93V2lkdGggLyBiYWNrZHJvcC53aWR0aCgpOwogICAgYnRuLmF0dHIoJ2RhdGEtb3JpZ2luLWJvdHRvbScsIGJ0blJlY3QuYm90dG9tKTsKICAgIGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1sZWZ0JywgYnRuUmVjdC5sZWZ0KTsKICAgIGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi13aWR0aCcsIGJ0blJlY3Qud2lkdGgpOwoKICAgIC8vIFNldCBpbml0aWFsIHN0YXRlCiAgICBidG4uYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgYnRuLmF0dHIoJ2RhdGEtb3BlbicsIHRydWUpOwogICAgYnRuLmNzcyh7CiAgICAgICd0ZXh0LWFsaWduJzogJ2NlbnRlcicsCiAgICAgIHdpZHRoOiAnMTAwJScsCiAgICAgIGJvdHRvbTogMCwKICAgICAgbGVmdDogMCwKICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgb2Zmc2V0WCArICdweCknLAogICAgICB0cmFuc2l0aW9uOiAnbm9uZScKICAgIH0pOwogICAgYW5jaG9yLmNzcyh7CiAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoJyArIC1vZmZzZXRZICsgJ3B4KScsCiAgICAgIHRyYW5zaXRpb246ICdub25lJwogICAgfSk7CiAgICBiYWNrZHJvcC5jc3MoewogICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yCiAgICB9KTsKCgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgYnRuLmNzcyh7CiAgICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDg1LCAwLjY4MCwgMC41MzApLCBiYWNrZ3JvdW5kLWNvbG9yIDBzIGxpbmVhciAuMnMnCiAgICAgIH0pOwogICAgICBhbmNob3IuY3NzKHsKICAgICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLAogICAgICAgIHRyYW5zZm9ybTogJycsCiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMnCiAgICAgIH0pOwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBidG4uY3NzKHsKICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJywKICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogZmFiQ29sb3IKICAgICAgICB9KTsKICAgICAgICBiYWNrZHJvcC5jc3MoewogICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoJyArIHNjYWxlRmFjdG9yICsgJyknLAogICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA1NSwgMC42NzUsIDAuMTkwKScKICAgICAgICB9KTsKICAgICAgICBtZW51LmZpbmQoJz4gbGkgPiBhJykuY3NzKHsKICAgICAgICAgIG9wYWNpdHk6IDEKICAgICAgICB9KTsKCiAgICAgICAgLy8gU2Nyb2xsIHRvIGNsb3NlLgogICAgICAgICQod2luZG93KS5vbignc2Nyb2xsLmZhYlRvb2xiYXJDbG9zZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9vbGJhclRvRkFCKGJ0bik7CiAgICAgICAgICAkKHdpbmRvdykub2ZmKCdzY3JvbGwuZmFiVG9vbGJhckNsb3NlJyk7CiAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLmZhYlRvb2xiYXJDbG9zZScpOwogICAgICAgIH0pOwoKICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2suZmFiVG9vbGJhckNsb3NlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5jbG9zZXN0KG1lbnUpLmxlbmd0aCkgewogICAgICAgICAgICB0b29sYmFyVG9GQUIoYnRuKTsKICAgICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsLmZhYlRvb2xiYXJDbG9zZScpOwogICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLmZhYlRvb2xiYXJDbG9zZScpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LCAxMDApOwogICAgfSwgMCk7CiAgfTsKCiAgLyoqCiAgICogVHJhbnNmb3JtIHRvb2xiYXIgYmFjayBpbnRvIEZBQgogICAqIEBwYXJhbSAge09iamVjdH0gIG9iamVjdCBqUXVlcnkgb2JqZWN0CiAgICovCiAgdmFyIHRvb2xiYXJUb0ZBQiA9IGZ1bmN0aW9uKGJ0bikgewogICAgaWYgKGJ0bi5hdHRyKCdkYXRhLW9wZW4nKSAhPT0gInRydWUiKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgb2Zmc2V0WCwgb2Zmc2V0WSwgc2NhbGVGYWN0b3I7CiAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICB2YXIgYnRuV2lkdGggPSBidG4uYXR0cignZGF0YS1vcmlnaW4td2lkdGgnKTsKICAgIHZhciBidG5Cb3R0b20gPSBidG4uYXR0cignZGF0YS1vcmlnaW4tYm90dG9tJyk7CiAgICB2YXIgYnRuTGVmdCA9IGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1sZWZ0Jyk7CiAgICB2YXIgYW5jaG9yID0gYnRuLmZpbmQoJz4gLmJ0bi1mbG9hdGluZycpLmZpcnN0KCk7CiAgICB2YXIgbWVudSA9IGJ0bi5maW5kKCc+IHVsJykuZmlyc3QoKTsKICAgIHZhciBiYWNrZHJvcCA9IGJ0bi5maW5kKCcuZmFiLWJhY2tkcm9wJyk7CiAgICB2YXIgZmFiQ29sb3IgPSBhbmNob3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7CgogICAgb2Zmc2V0WCA9IGJ0bkxlZnQgLSAod2luZG93V2lkdGggLyAyKSArIChidG5XaWR0aCAvIDIpOwogICAgb2Zmc2V0WSA9IHdpbmRvd0hlaWdodCAtIGJ0bkJvdHRvbTsKICAgIHNjYWxlRmFjdG9yID0gd2luZG93V2lkdGggLyBiYWNrZHJvcC53aWR0aCgpOwoKCiAgICAvLyBIaWRlIGJhY2tkcm9wCiAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgYnRuLmF0dHIoJ2RhdGEtb3BlbicsIGZhbHNlKTsKICAgIGJ0bi5jc3MoewogICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICd0cmFuc3BhcmVudCcsCiAgICAgIHRyYW5zaXRpb246ICdub25lJwogICAgfSk7CiAgICBhbmNob3IuY3NzKHsKICAgICAgdHJhbnNpdGlvbjogJ25vbmUnCiAgICB9KTsKICAgIGJhY2tkcm9wLmNzcyh7CiAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJywKICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBmYWJDb2xvcgogICAgfSk7CiAgICBtZW51LmZpbmQoJz4gbGkgPiBhJykuY3NzKHsKICAgICAgb3BhY2l0eTogJycKICAgIH0pOwoKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIGJhY2tkcm9wLnJlbW92ZSgpOwoKICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGUuCiAgICAgIGJ0bi5jc3MoewogICAgICAgICd0ZXh0LWFsaWduJzogJycsCiAgICAgICAgd2lkdGg6ICcnLAogICAgICAgIGJvdHRvbTogJycsCiAgICAgICAgbGVmdDogJycsCiAgICAgICAgb3ZlcmZsb3c6ICcnLAogICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJycsCiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIC1vZmZzZXRYICsgJ3B4LDAsMCknCiAgICAgIH0pOwogICAgICBhbmNob3IuY3NzKHsKICAgICAgICBvdmVyZmxvdzogJycsCiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwnICsgb2Zmc2V0WSArICdweCwwKScKICAgICAgfSk7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGJ0bi5jc3MoewogICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJywKICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJwogICAgICAgIH0pOwogICAgICAgIGFuY2hvci5jc3MoewogICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJywKICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCknCiAgICAgICAgfSk7CiAgICAgIH0sIDIwKTsKICAgIH0sIDIwMCk7CiAgfTsKCgp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKICAvLyBJbWFnZSB0cmFuc2l0aW9uIGZ1bmN0aW9uCiAgTWF0ZXJpYWxpemUuZmFkZUluSW1hZ2UgPSBmdW5jdGlvbihzZWxlY3Rvck9yRWwpIHsKICAgIHZhciBlbGVtZW50OwogICAgaWYgKHR5cGVvZihzZWxlY3Rvck9yRWwpID09PSAnc3RyaW5nJykgewogICAgICBlbGVtZW50ID0gJChzZWxlY3Rvck9yRWwpOwogICAgfSBlbHNlIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgZWxlbWVudCA9IHNlbGVjdG9yT3JFbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGVsZW1lbnQuY3NzKHtvcGFjaXR5OiAwfSk7CiAgICAkKGVsZW1lbnQpLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwgewogICAgICBkdXJhdGlvbjogNjUwLAogICAgICBxdWV1ZTogZmFsc2UsCiAgICAgIGVhc2luZzogJ2Vhc2VPdXRTaW5lJwogICAgfSk7CiAgICAkKGVsZW1lbnQpLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwgewogICAgICBkdXJhdGlvbjogMTMwMCwKICAgICAgcXVldWU6IGZhbHNlLAogICAgICBlYXNpbmc6ICdzd2luZycsCiAgICAgIHN0ZXA6IGZ1bmN0aW9uKG5vdywgZngpIHsKICAgICAgICBmeC5zdGFydCA9IDEwMDsKICAgICAgICB2YXIgZ3JheXNjYWxlX3NldHRpbmcgPSBub3cvMTAwOwogICAgICAgIHZhciBicmlnaHRuZXNzX3NldHRpbmcgPSAxNTAgLSAoMTAwIC0gbm93KS8xLjc1OwoKICAgICAgICBpZiAoYnJpZ2h0bmVzc19zZXR0aW5nIDwgMTAwKSB7CiAgICAgICAgICBicmlnaHRuZXNzX3NldHRpbmcgPSAxMDA7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gMCkgewogICAgICAgICAgJCh0aGlzKS5jc3MoewogICAgICAgICAgICAgICItd2Via2l0LWZpbHRlciI6ICJncmF5c2NhbGUoIitncmF5c2NhbGVfc2V0dGluZysiKSIgKyAiYnJpZ2h0bmVzcygiK2JyaWdodG5lc3Nfc2V0dGluZysiJSkiLAogICAgICAgICAgICAgICJmaWx0ZXIiOiAiZ3JheXNjYWxlKCIrZ3JheXNjYWxlX3NldHRpbmcrIikiICsgImJyaWdodG5lc3MoIiticmlnaHRuZXNzX3NldHRpbmcrIiUpIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBIb3Jpem9udGFsIHN0YWdnZXJlZCBsaXN0CiAgTWF0ZXJpYWxpemUuc2hvd1N0YWdnZXJlZExpc3QgPSBmdW5jdGlvbihzZWxlY3Rvck9yRWwpIHsKICAgIHZhciBlbGVtZW50OwogICAgaWYgKHR5cGVvZihzZWxlY3Rvck9yRWwpID09PSAnc3RyaW5nJykgewogICAgICBlbGVtZW50ID0gJChzZWxlY3Rvck9yRWwpOwogICAgfSBlbHNlIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgZWxlbWVudCA9IHNlbGVjdG9yT3JFbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciB0aW1lID0gMDsKICAgIGVsZW1lbnQuZmluZCgnbGknKS52ZWxvY2l0eSgKICAgICAgICB7IHRyYW5zbGF0ZVg6ICItMTAwcHgifSwKICAgICAgICB7IGR1cmF0aW9uOiAwIH0pOwoKICAgIGVsZW1lbnQuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAkKHRoaXMpLnZlbG9jaXR5KAogICAgICAgIHsgb3BhY2l0eTogIjEiLCB0cmFuc2xhdGVYOiAiMCJ9LAogICAgICAgIHsgZHVyYXRpb246IDgwMCwgZGVsYXk6IHRpbWUsIGVhc2luZzogWzYwLCAxMF0gfSk7CiAgICAgIHRpbWUgKz0gMTIwOwogICAgfSk7CiAgfTsKCgogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewogICAgLy8gSGFyZGNvZGVkIC5zdGFnZ2VyZWQtbGlzdCBzY3JvbGxGaXJlCiAgICAvLyB2YXIgc3RhZ2dlcmVkTGlzdE9wdGlvbnMgPSBbXTsKICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0JykuZWFjaChmdW5jdGlvbiAoaSkgewoKICAgIC8vICAgdmFyIGxhYmVsID0gJ3Njcm9sbEZpcmUtJyArIGk7CiAgICAvLyAgICQodGhpcykuYWRkQ2xhc3MobGFiZWwpOwogICAgLy8gICBzdGFnZ2VyZWRMaXN0T3B0aW9ucy5wdXNoKAogICAgLy8gICAgIHtzZWxlY3RvcjogJ3VsLnN0YWdnZXJlZC1saXN0LicgKyBsYWJlbCwKICAgIC8vICAgICAgb2Zmc2V0OiAyMDAsCiAgICAvLyAgICAgIGNhbGxiYWNrOiAnc2hvd1N0YWdnZXJlZExpc3QoInVsLnN0YWdnZXJlZC1saXN0LicgKyBsYWJlbCArICciKSd9KTsKICAgIC8vIH0pOwogICAgLy8gc2Nyb2xsRmlyZShzdGFnZ2VyZWRMaXN0T3B0aW9ucyk7CgogICAgLy8gSGFtbWVySlMsIFN3aXBlIG5hdmlnYXRpb24KCiAgICAvLyBUb3VjaCBFdmVudAogICAgdmFyIHN3aXBlTGVmdCA9IGZhbHNlOwogICAgdmFyIHN3aXBlUmlnaHQgPSBmYWxzZTsKCgogICAgLy8gRGlzbWlzc2libGUgQ29sbGVjdGlvbnMKICAgICQoJy5kaXNtaXNzYWJsZScpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICQodGhpcykuaGFtbWVyKHsKICAgICAgICBwcmV2ZW50X2RlZmF1bHQ6IGZhbHNlCiAgICAgIH0pLm9uKCdwYW4nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PT0gInRvdWNoIikgewogICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uOwogICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuZGVsdGFYOwogICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7CgogICAgICAgICAgJHRoaXMudmVsb2NpdHkoeyB0cmFuc2xhdGVYOiB4CiAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTsKCiAgICAgICAgICAvLyBTd2lwZSBMZWZ0CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSA0ICYmICh4ID4gKCR0aGlzLmlubmVyV2lkdGgoKSAvIDIpIHx8IHZlbG9jaXR5WCA8IC0wLjc1KSkgewogICAgICAgICAgICBzd2lwZUxlZnQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFN3aXBlIFJpZ2h0CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAyICYmICh4IDwgKC0xICogJHRoaXMuaW5uZXJXaWR0aCgpIC8gMikgfHwgdmVsb2NpdHlYID4gMC43NSkpIHsKICAgICAgICAgICAgc3dpcGVSaWdodCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5vbigncGFuZW5kJywgZnVuY3Rpb24oZSkgewogICAgICAgIC8vIFJlc2V0IGlmIGNvbGxlY3Rpb24gaXMgbW92ZWQgYmFjayBpbnRvIG9yaWdpbmFsIHBvc2l0aW9uCiAgICAgICAgaWYgKE1hdGguYWJzKGUuZ2VzdHVyZS5kZWx0YVgpIDwgKCQodGhpcykuaW5uZXJXaWR0aCgpIC8gMikpIHsKICAgICAgICAgIHN3aXBlUmlnaHQgPSBmYWxzZTsKICAgICAgICAgIHN3aXBlTGVmdCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PT0gInRvdWNoIikgewogICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgICAgIGlmIChzd2lwZUxlZnQgfHwgc3dpcGVSaWdodCkgewogICAgICAgICAgICB2YXIgZnVsbFdpZHRoOwogICAgICAgICAgICBpZiAoc3dpcGVMZWZ0KSB7IGZ1bGxXaWR0aCA9ICR0aGlzLmlubmVyV2lkdGgoKTsgfQogICAgICAgICAgICBlbHNlIHsgZnVsbFdpZHRoID0gLTEgKiAkdGhpcy5pbm5lcldpZHRoKCk7IH0KCiAgICAgICAgICAgICR0aGlzLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogZnVsbFdpZHRoLAogICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMTAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgY29tcGxldGU6CiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAkdGhpcy5jc3MoJ2JvcmRlcicsICdub25lJyk7CiAgICAgICAgICAgICAgICAkdGhpcy52ZWxvY2l0eSh7IGhlaWdodDogMCwgcGFkZGluZzogMCwKICAgICAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiAyMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLCBjb21wbGV0ZToKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsgJHRoaXMucmVtb3ZlKCk7IH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAkdGhpcy52ZWxvY2l0eSh7IHRyYW5zbGF0ZVg6IDAsCiAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiAxMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7CiAgICAgICAgICB9CiAgICAgICAgICBzd2lwZUxlZnQgPSBmYWxzZTsKICAgICAgICAgIHN3aXBlUmlnaHQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgIH0pOwoKCiAgICAvLyB0aW1lID0gMAogICAgLy8gLy8gVmVydGljYWwgU3RhZ2dlcmVkIGxpc3QKICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0LnZlcnRpY2FsIGxpJykudmVsb2NpdHkoCiAgICAvLyAgICAgeyB0cmFuc2xhdGVZOiAiMTAwcHgifSwKICAgIC8vICAgICB7IGR1cmF0aW9uOiAwIH0pOwoKICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0LnZlcnRpY2FsIGxpJykuZWFjaChmdW5jdGlvbigpIHsKICAgIC8vICAgJCh0aGlzKS52ZWxvY2l0eSgKICAgIC8vICAgICB7IG9wYWNpdHk6ICIxIiwgdHJhbnNsYXRlWTogIjAifSwKICAgIC8vICAgICB7IGR1cmF0aW9uOiA4MDAsIGRlbGF5OiB0aW1lLCBlYXNpbmc6IFs2MCwgMjVdIH0pOwogICAgLy8gICB0aW1lICs9IDEyMDsKICAgIC8vIH0pOwoKICAgIC8vIC8vIEZhZGUgaW4gYW5kIFNjYWxlCiAgICAvLyAkKCcuZmFkZS1pbi5zY2FsZScpLnZlbG9jaXR5KAogICAgLy8gICAgIHsgc2NhbGVYOiAuNCwgc2NhbGVZOiAuNCwgdHJhbnNsYXRlWDogLTYwMH0sCiAgICAvLyAgICAgeyBkdXJhdGlvbjogMH0pOwogICAgLy8gJCgnLmZhZGUtaW4nKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgLy8gICAkKHRoaXMpLnZlbG9jaXR5KAogICAgLy8gICAgIHsgb3BhY2l0eTogIjEiLCBzY2FsZVg6IDEsIHNjYWxlWTogMSwgdHJhbnNsYXRlWDogMH0sCiAgICAvLyAgICAgeyBkdXJhdGlvbjogODAwLCBlYXNpbmc6IFs2MCwgMTBdIH0pOwogICAgLy8gfSk7CiAgfSk7Cn0oIGpRdWVyeSApKTsKOyhmdW5jdGlvbigkKSB7CgogIHZhciBzY3JvbGxGaXJlRXZlbnRzSGFuZGxlZCA9IGZhbHNlOwoKICAvLyBJbnB1dDogQXJyYXkgb2YgSlNPTiBvYmplY3RzIHtzZWxlY3Rvciwgb2Zmc2V0LCBjYWxsYmFja30KICBNYXRlcmlhbGl6ZS5zY3JvbGxGaXJlID0gZnVuY3Rpb24ob3B0aW9ucykgewogICAgdmFyIG9uU2Nyb2xsID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciB3aW5kb3dTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7CgogICAgICBmb3IgKHZhciBpID0gMCA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gR2V0IG9wdGlvbnMgZnJvbSBlYWNoIGxpbmUKICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW2ldOwogICAgICAgIHZhciBzZWxlY3RvciA9IHZhbHVlLnNlbGVjdG9yLAogICAgICAgICAgICBvZmZzZXQgPSB2YWx1ZS5vZmZzZXQsCiAgICAgICAgICAgIGNhbGxiYWNrID0gdmFsdWUuY2FsbGJhY2s7CgogICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICAgIGlmICggY3VycmVudEVsZW1lbnQgIT09IG51bGwpIHsKICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gY3VycmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0OwoKICAgICAgICAgIGlmICh3aW5kb3dTY3JvbGwgPiAoZWxlbWVudE9mZnNldCArIG9mZnNldCkpIHsKICAgICAgICAgICAgaWYgKHZhbHVlLmRvbmUgIT09IHRydWUpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mKGNhbGxiYWNrKSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCBjdXJyZW50RWxlbWVudCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IG5ldyBGdW5jdGlvbihjYWxsYmFjayk7CiAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMoY3VycmVudEVsZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2YWx1ZS5kb25lID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCgogICAgdmFyIHRocm90dGxlZFNjcm9sbCA9IE1hdGVyaWFsaXplLnRocm90dGxlKGZ1bmN0aW9uKCkgewogICAgICBvblNjcm9sbCgpOwogICAgfSwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApOwoKICAgIGlmICghc2Nyb2xsRmlyZUV2ZW50c0hhbmRsZWQpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRocm90dGxlZFNjcm9sbCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aHJvdHRsZWRTY3JvbGwpOwogICAgICBzY3JvbGxGaXJlRXZlbnRzSGFuZGxlZCA9IHRydWU7CiAgICB9CgogICAgLy8gcGVyZm9ybSBhIHNjYW4gb25jZSwgYWZ0ZXIgY3VycmVudCBleGVjdXRpb24gY29udGV4dCwgYW5kIGFmdGVyIGRvbSBpcyByZWFkeQogICAgc2V0VGltZW91dCh0aHJvdHRsZWRTY3JvbGwsIDApOwogIH07Cgp9KShqUXVlcnkpOwo7LyohCiAqIHBpY2thZGF0ZS5qcyB2My41LjAsIDIwMTQvMDQvMTMKICogQnkgQW1zdWwsIGh0dHA6Ly9hbXN1bC5jYQogKiBIb3N0ZWQgb24gaHR0cDovL2Ftc3VsLmdpdGh1Yi5pby9waWNrYWRhdGUuanMKICogTGljZW5zZWQgdW5kZXIgTUlUCiAqLwoKKGZ1bmN0aW9uICggZmFjdG9yeSApIHsKCiAgICAvLyBBTUQuCiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkKICAgICAgICBkZWZpbmUoICdwaWNrZXInLCBbJ2pxdWVyeSddLCBmYWN0b3J5ICkKCiAgICAvLyBOb2RlLmpzL2Jyb3dzZXJpZnkuCiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKQogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnanF1ZXJ5JykgKQoKICAgIC8vIEJyb3dzZXIgZ2xvYmFscy4KICAgIGVsc2UgdGhpcy5QaWNrZXIgPSBmYWN0b3J5KCBqUXVlcnkgKQoKfShmdW5jdGlvbiggJCApIHsKCnZhciAkd2luZG93ID0gJCggd2luZG93ICkKdmFyICRkb2N1bWVudCA9ICQoIGRvY3VtZW50ICkKdmFyICRodG1sID0gJCggZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICkKCgovKioKICogVGhlIHBpY2tlciBjb25zdHJ1Y3RvciB0aGF0IGNyZWF0ZXMgYSBibGFuayBwaWNrZXIuCiAqLwpmdW5jdGlvbiBQaWNrZXJDb25zdHJ1Y3RvciggRUxFTUVOVCwgTkFNRSwgQ09NUE9ORU5ULCBPUFRJT05TICkgewoKICAgIC8vIElmIHRoZXJl4oCZcyBubyBlbGVtZW50LCByZXR1cm4gdGhlIHBpY2tlciBjb25zdHJ1Y3Rvci4KICAgIGlmICggIUVMRU1FTlQgKSByZXR1cm4gUGlja2VyQ29uc3RydWN0b3IKCgogICAgdmFyCiAgICAgICAgSVNfREVGQVVMVF9USEVNRSA9IGZhbHNlLAoKCiAgICAgICAgLy8gVGhlIHN0YXRlIG9mIHRoZSBwaWNrZXIuCiAgICAgICAgU1RBVEUgPSB7CiAgICAgICAgICAgIGlkOiBFTEVNRU5ULmlkIHx8ICdQJyArIE1hdGguYWJzKCB+fihNYXRoLnJhbmRvbSgpICogbmV3IERhdGUoKSkgKQogICAgICAgIH0sCgoKICAgICAgICAvLyBNZXJnZSB0aGUgZGVmYXVsdHMgYW5kIG9wdGlvbnMgcGFzc2VkLgogICAgICAgIFNFVFRJTkdTID0gQ09NUE9ORU5UID8gJC5leHRlbmQoIHRydWUsIHt9LCBDT01QT05FTlQuZGVmYXVsdHMsIE9QVElPTlMgKSA6IE9QVElPTlMgfHwge30sCgoKICAgICAgICAvLyBNZXJnZSB0aGUgZGVmYXVsdCBjbGFzc2VzIHdpdGggdGhlIHNldHRpbmdzIGNsYXNzZXMuCiAgICAgICAgQ0xBU1NFUyA9ICQuZXh0ZW5kKCB7fSwgUGlja2VyQ29uc3RydWN0b3Iua2xhc3NlcygpLCBTRVRUSU5HUy5rbGFzcyApLAoKCiAgICAgICAgLy8gVGhlIGVsZW1lbnQgbm9kZSB3cmFwcGVyIGludG8gYSBqUXVlcnkgb2JqZWN0LgogICAgICAgICRFTEVNRU5UID0gJCggRUxFTUVOVCApLAoKCiAgICAgICAgLy8gUHNldWRvIHBpY2tlciBjb25zdHJ1Y3Rvci4KICAgICAgICBQaWNrZXJJbnN0YW5jZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydCgpCiAgICAgICAgfSwKCgogICAgICAgIC8vIFRoZSBwaWNrZXIgcHJvdG90eXBlLgogICAgICAgIFAgPSBQaWNrZXJJbnN0YW5jZS5wcm90b3R5cGUgPSB7CgogICAgICAgICAgICBjb25zdHJ1Y3RvcjogUGlja2VySW5zdGFuY2UsCgogICAgICAgICAgICAkbm9kZTogJEVMRU1FTlQsCgoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEluaXRpYWxpemUgZXZlcnl0aGluZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHN0YXJ0ZWQsIGRvIG5vdGhpbmcuCiAgICAgICAgICAgICAgICBpZiAoIFNUQVRFICYmIFNUQVRFLnN0YXJ0ICkgcmV0dXJuIFAKCgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwaWNrZXIgc3RhdGVzLgogICAgICAgICAgICAgICAgU1RBVEUubWV0aG9kcyA9IHt9CiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IHRydWUKICAgICAgICAgICAgICAgIFNUQVRFLm9wZW4gPSBmYWxzZQogICAgICAgICAgICAgICAgU1RBVEUudHlwZSA9IEVMRU1FTlQudHlwZQoKCiAgICAgICAgICAgICAgICAvLyBDb25maXJtIGZvY3VzIHN0YXRlLCBjb252ZXJ0IGludG8gdGV4dCBpbnB1dCB0byByZW1vdmUgVUEgc3R5bGluZ3MsCiAgICAgICAgICAgICAgICAvLyBhbmQgc2V0IGFzIHJlYWRvbmx5IHRvIHByZXZlbnQga2V5Ym9hcmQgcG9wdXAuCiAgICAgICAgICAgICAgICBFTEVNRU5ULmF1dG9mb2N1cyA9IEVMRU1FTlQgPT0gZ2V0QWN0aXZlRWxlbWVudCgpCiAgICAgICAgICAgICAgICBFTEVNRU5ULnJlYWRPbmx5ID0gIVNFVFRJTkdTLmVkaXRhYmxlCiAgICAgICAgICAgICAgICBFTEVNRU5ULmlkID0gRUxFTUVOVC5pZCB8fCBTVEFURS5pZAogICAgICAgICAgICAgICAgaWYgKCBFTEVNRU5ULnR5cGUgIT0gJ3RleHQnICkgewogICAgICAgICAgICAgICAgICAgIEVMRU1FTlQudHlwZSA9ICd0ZXh0JwogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGlja2VyIGNvbXBvbmVudCB3aXRoIHRoZSBzZXR0aW5ncy4KICAgICAgICAgICAgICAgIFAuY29tcG9uZW50ID0gbmV3IENPTVBPTkVOVChQLCBTRVRUSU5HUykKCgogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwaWNrZXIgcm9vdCB3aXRoIGEgaG9sZGVyIGFuZCB0aGVuIHByZXBhcmUgaXQuCiAgICAgICAgICAgICAgICBQLiRyb290ID0gJCggUGlja2VyQ29uc3RydWN0b3IuXy5ub2RlKCdkaXYnLCBjcmVhdGVXcmFwcGVkQ29tcG9uZW50KCksIENMQVNTRVMucGlja2VyLCAnaWQ9IicgKyBFTEVNRU5ULmlkICsgJ19yb290IiB0YWJpbmRleD0iMCInKSApCiAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudFJvb3QoKQoKCiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBmb3JtYXQgZm9yIHRoZSBoaWRkZW4gaW5wdXQgZWxlbWVudCwgY3JlYXRlIHRoZSBlbGVtZW50LgogICAgICAgICAgICAgICAgaWYgKCBTRVRUSU5HUy5mb3JtYXRTdWJtaXQgKSB7CiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnRIaWRkZW4oKQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRoZSBpbnB1dCBlbGVtZW50LgogICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnQoKQoKCiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIHJvb3QgYXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5ncy4KICAgICAgICAgICAgICAgIGlmICggU0VUVElOR1MuY29udGFpbmVyICkgJCggU0VUVElOR1MuY29udGFpbmVyICkuYXBwZW5kKCBQLiRyb290ICkKICAgICAgICAgICAgICAgIGVsc2UgJEVMRU1FTlQuYWZ0ZXIoIFAuJHJvb3QgKQoKCiAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBkZWZhdWx0IGNvbXBvbmVudCBhbmQgc2V0dGluZ3MgZXZlbnRzLgogICAgICAgICAgICAgICAgUC5vbih7CiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFAuY29tcG9uZW50Lm9uU3RhcnQsCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBQLmNvbXBvbmVudC5vblJlbmRlciwKICAgICAgICAgICAgICAgICAgICBzdG9wOiBQLmNvbXBvbmVudC5vblN0b3AsCiAgICAgICAgICAgICAgICAgICAgb3BlbjogUC5jb21wb25lbnQub25PcGVuLAogICAgICAgICAgICAgICAgICAgIGNsb3NlOiBQLmNvbXBvbmVudC5vbkNsb3NlLAogICAgICAgICAgICAgICAgICAgIHNldDogUC5jb21wb25lbnQub25TZXQKICAgICAgICAgICAgICAgIH0pLm9uKHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogU0VUVElOR1Mub25TdGFydCwKICAgICAgICAgICAgICAgICAgICByZW5kZXI6IFNFVFRJTkdTLm9uUmVuZGVyLAogICAgICAgICAgICAgICAgICAgIHN0b3A6IFNFVFRJTkdTLm9uU3RvcCwKICAgICAgICAgICAgICAgICAgICBvcGVuOiBTRVRUSU5HUy5vbk9wZW4sCiAgICAgICAgICAgICAgICAgICAgY2xvc2U6IFNFVFRJTkdTLm9uQ2xvc2UsCiAgICAgICAgICAgICAgICAgICAgc2V0OiBTRVRUSU5HUy5vblNldAogICAgICAgICAgICAgICAgfSkKCgogICAgICAgICAgICAgICAgLy8gT25jZSB3ZeKAmXJlIGFsbCBzZXQsIGNoZWNrIHRoZSB0aGVtZSBpbiB1c2UuCiAgICAgICAgICAgICAgICBJU19ERUZBVUxUX1RIRU1FID0gaXNVc2luZ0RlZmF1bHRUaGVtZSggUC4kcm9vdC5jaGlsZHJlbigpWyAwIF0gKQoKCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYXV0b2ZvY3VzLCBvcGVuIHRoZSBwaWNrZXIuCiAgICAgICAgICAgICAgICBpZiAoIEVMRU1FTlQuYXV0b2ZvY3VzICkgewogICAgICAgICAgICAgICAgICAgIFAub3BlbigpCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgcXVldWVkIHRoZSDigJxzdGFydOKAnSBhbmQg4oCccmVuZGVy4oCdIGV2ZW50cy4KICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdzdGFydCcgKS50cmlnZ2VyKCAncmVuZGVyJyApCiAgICAgICAgICAgIH0sIC8vc3RhcnQKCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogUmVuZGVyIGEgbmV3IHBpY2tlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiggZW50aXJlQ29tcG9uZW50ICkgewoKICAgICAgICAgICAgICAgIC8vIEluc2VydCBhIG5ldyBjb21wb25lbnQgaG9sZGVyIGluIHRoZSByb290IG9yIGJveC4KICAgICAgICAgICAgICAgIGlmICggZW50aXJlQ29tcG9uZW50ICkgUC4kcm9vdC5odG1sKCBjcmVhdGVXcmFwcGVkQ29tcG9uZW50KCkgKQogICAgICAgICAgICAgICAgZWxzZSBQLiRyb290LmZpbmQoICcuJyArIENMQVNTRVMuYm94ICkuaHRtbCggUC5jb21wb25lbnQubm9kZXMoIFNUQVRFLm9wZW4gKSApCgogICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnHJlbmRlcuKAnSBldmVudHMuCiAgICAgICAgICAgICAgICByZXR1cm4gUC50cmlnZ2VyKCAncmVuZGVyJyApCiAgICAgICAgICAgIH0sIC8vcmVuZGVyCgoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlc3Ryb3kgZXZlcnl0aGluZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFscmVhZHkgc3RvcHBlZCwgZG8gbm90aGluZy4KICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLnN0YXJ0ICkgcmV0dXJuIFAKCiAgICAgICAgICAgICAgICAvLyBUaGVuIGNsb3NlIHRoZSBwaWNrZXIuCiAgICAgICAgICAgICAgICBQLmNsb3NlKCkKCiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGhpZGRlbiBmaWVsZC4KICAgICAgICAgICAgICAgIGlmICggUC5faGlkZGVuICkgewogICAgICAgICAgICAgICAgICAgIFAuX2hpZGRlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBQLl9oaWRkZW4gKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcm9vdC4KICAgICAgICAgICAgICAgIFAuJHJvb3QucmVtb3ZlKCkKCiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGlucHV0IGNsYXNzLCByZW1vdmUgdGhlIHN0b3JlZCBkYXRhLCBhbmQgdW5iaW5kCiAgICAgICAgICAgICAgICAvLyB0aGUgZXZlbnRzIChhZnRlciBhIHRpY2sgZm9yIElFIC0gc2VlIGBQLmNsb3NlYCkuCiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5pbnB1dCApLnJlbW92ZURhdGEoIE5BTUUgKQogICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJEVMRU1FTlQub2ZmKCAnLicgKyBTVEFURS5pZCApCiAgICAgICAgICAgICAgICB9LCAwKQoKICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIGVsZW1lbnQgc3RhdGUKICAgICAgICAgICAgICAgIEVMRU1FTlQudHlwZSA9IFNUQVRFLnR5cGUKICAgICAgICAgICAgICAgIEVMRU1FTlQucmVhZE9ubHkgPSBmYWxzZQoKICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxzdG9w4oCdIGV2ZW50cy4KICAgICAgICAgICAgICAgIFAudHJpZ2dlciggJ3N0b3AnICkKCiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgcGlja2VyIHN0YXRlcy4KICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHMgPSB7fQogICAgICAgICAgICAgICAgU1RBVEUuc3RhcnQgPSBmYWxzZQoKICAgICAgICAgICAgICAgIHJldHVybiBQCiAgICAgICAgICAgIH0sIC8vc3RvcAoKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBPcGVuIHVwIHRoZSBwaWNrZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uKCBkb250R2l2ZUZvY3VzICkgewoKICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IG9wZW4sIGRvIG5vdGhpbmcuCiAgICAgICAgICAgICAgICBpZiAoIFNUQVRFLm9wZW4gKSByZXR1cm4gUAoKICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg4oCcYWN0aXZl4oCdIGNsYXNzLgogICAgICAgICAgICAgICAgJEVMRU1FTlQuYWRkQ2xhc3MoIENMQVNTRVMuYWN0aXZlICkKICAgICAgICAgICAgICAgIGFyaWEoIEVMRU1FTlQsICdleHBhbmRlZCcsIHRydWUgKQoKICAgICAgICAgICAgICAgIC8vICogQSBGaXJlZm94IGJ1Zywgd2hlbiBgaHRtbGAgaGFzIGBvdmVyZmxvdzpoaWRkZW5gLCByZXN1bHRzIGluCiAgICAgICAgICAgICAgICAvLyAgIGtpbGxpbmcgdHJhbnNpdGlvbnMgOiguIFNvIGFkZCB0aGUg4oCcb3BlbmVk4oCdIHN0YXRlIG9uIHRoZSBuZXh0IHRpY2suCiAgICAgICAgICAgICAgICAvLyAgIEJ1ZzogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjI1Mjg5CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxvcGVuZWTigJ0gY2xhc3MgdG8gdGhlIHBpY2tlciByb290LgogICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuYWRkQ2xhc3MoIENMQVNTRVMub3BlbmVkICkKICAgICAgICAgICAgICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgZmFsc2UgKQoKICAgICAgICAgICAgICAgIH0sIDAgKQoKICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgdG8gZ2l2ZSBmb2N1cywgYmluZCB0aGUgZWxlbWVudCBhbmQgZG9jIGV2ZW50cy4KICAgICAgICAgICAgICAgIGlmICggZG9udEdpdmVGb2N1cyAhPT0gZmFsc2UgKSB7CgogICAgICAgICAgICAgICAgICAgIC8vIFNldCBpdCBhcyBvcGVuLgogICAgICAgICAgICAgICAgICAgIFNUQVRFLm9wZW4gPSB0cnVlCgogICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcuCiAgICAgICAgICAgICAgICAgICAgaWYgKCBJU19ERUZBVUxUX1RIRU1FICkgewogICAgICAgICAgICAgICAgICAgICAgICAkaHRtbC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyggJ292ZXJmbG93JywgJ2hpZGRlbicgKS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyggJ3BhZGRpbmctcmlnaHQnLCAnKz0nICsgZ2V0U2Nyb2xsYmFyV2lkdGgoKSApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGZvY3VzIHRvIHRoZSByb290IGVsZW1lbnTigJlzIGpRdWVyeSBvYmplY3QuCiAgICAgICAgICAgICAgICAgICAgLy8gKiBXb3JrYXJvdW5kIGZvciBpT1M4IHRvIGJyaW5nIHRoZSBwaWNrZXLigJlzIHJvb3QgaW50byB2aWV3LgogICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuZXEoMCkuZm9jdXMoKQoKICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBkb2N1bWVudCBldmVudHMuCiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCAnY2xpY2suJyArIFNUQVRFLmlkICsgJyBmb2N1c2luLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgaXMgbm90IHRoZSBlbGVtZW50LCBjbG9zZSB0aGUgcGlja2VyIHBpY2tlci4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiBEb27igJl0IHdvcnJ5IGFib3V0IGNsaWNrcyBvciBmb2N1c2lucyBvbiB0aGUgcm9vdCBiZWNhdXNlIHRob3NlIGRvbuKAmXQgYnViYmxlIHVwLgogICAgICAgICAgICAgICAgICAgICAgICAvLyAgIEFsc28sIGZvciBGaXJlZm94LCBhIGNsaWNrIG9uIGFuIGBvcHRpb25gIGVsZW1lbnQgYnViYmxlcyB1cCBkaXJlY3RseQogICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRvIHRoZSBkb2MuIFNvIG1ha2Ugc3VyZSB0aGUgdGFyZ2V0IHdhc24ndCB0aGUgZG9jLgogICAgICAgICAgICAgICAgICAgICAgICAvLyAqIEluIEZpcmVmb3ggc3RvcFByb3BhZ2F0aW9uKCkgZG9lc27igJl0IHByZXZlbnQgcmlnaHQtY2xpY2sgZXZlbnRzIGZyb20gYnViYmxpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hpY2ggY2F1c2VzIHRoZSBwaWNrZXIgdG8gdW5leHBlY3RlZGx5IGNsb3NlIHdoZW4gcmlnaHQtY2xpY2tpbmcgaXQuIFNvIG1ha2UKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBzdXJlIHRoZSBldmVudCB3YXNu4oCZdCBhIHJpZ2h0LWNsaWNrLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRhcmdldCAhPSBFTEVNRU5UICYmIHRhcmdldCAhPSBkb2N1bWVudCAmJiBldmVudC53aGljaCAhPSAzICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgd2FzIHRoZSBob2xkZXIgdGhhdCBjb3ZlcnMgdGhlIHNjcmVlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGVsZW1lbnQgZm9jdXNlZCB0byBtYWludGFpbiB0YWJpbmRleC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY2xvc2UoIHRhcmdldCA9PT0gUC4kcm9vdC5jaGlsZHJlbigpWzBdICkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9KS5vbiggJ2tleWRvd24uJyArIFNUQVRFLmlkLCBmdW5jdGlvbiggZXZlbnQgKSB7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUga2V5Y29kZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWNvZGUgPSBldmVudC5rZXlDb2RlLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zbGF0ZSB0aGF0IHRvIGEgc2VsZWN0aW9uIGNoYW5nZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWNvZGVUb01vdmUgPSBQLmNvbXBvbmVudC5rZXlbIGtleWNvZGUgXSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSB0YXJnZXQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBldmVudC50YXJnZXQKCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBlc2NhcGUsIGNsb3NlIHRoZSBwaWNrZXIgYW5kIGdpdmUgZm9jdXMuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgga2V5Y29kZSA9PSAyNyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY2xvc2UoIHRydWUgKQogICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBrZXkgbW92ZW1lbnQgb3Ig4oCcZW50ZXLigJ0ga2V5cHJlc3Mgb24gdGhlIGVsZW1lbnQuCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXQgPT0gUC4kcm9vdFswXSAmJiAoIGtleWNvZGVUb01vdmUgfHwga2V5Y29kZSA9PSAxMyApICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIHRvIHN0b3AgcGFnZSBtb3ZlbWVudC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBrZXkgbW92ZW1lbnQgYWN0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXljb2RlVG9Nb3ZlICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlciggUC5jb21wb25lbnQua2V5LmdvLCBQLCBbIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlcigga2V5Y29kZVRvTW92ZSApIF0gKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIOKAnGVudGVy4oCdLCBpZiB0aGUgaGlnaGxpZ2h0ZWQgaXRlbSBpc27igJl0IGRpc2FibGVkLCBzZXQgdGhlIHZhbHVlIGFuZCBjbG9zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCAhUC4kcm9vdC5maW5kKCAnLicgKyBDTEFTU0VTLmhpZ2hsaWdodGVkICkuaGFzQ2xhc3MoIENMQVNTRVMuZGlzYWJsZWQgKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0ICkuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBpcyB3aXRoaW4gdGhlIHJvb3QgYW5kIOKAnGVudGVy4oCdIGlzIHByZXNzZWQsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIGFuZCB0cmlnZ2VyIGEgY2xpY2sgb24gdGhlIHRhcmdldCBpbnN0ZWFkLgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggJC5jb250YWlucyggUC4kcm9vdFswXSwgdGFyZ2V0ICkgJiYga2V5Y29kZSA9PSAxMyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxvcGVu4oCdIGV2ZW50cy4KICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdvcGVuJyApCiAgICAgICAgICAgIH0sIC8vb3BlbgoKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDbG9zZSB0aGUgcGlja2VyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oIGdpdmVGb2N1cyApIHsKCiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIGdpdmUgZm9jdXMsIGRvIGl0IGJlZm9yZSBjaGFuZ2luZyBzdGF0ZXMuCiAgICAgICAgICAgICAgICBpZiAoIGdpdmVGb2N1cyApIHsKICAgICAgICAgICAgICAgICAgICAvLyAuLi4uYWggeWVzISBJdCB3b3VsZOKAmXZlIGJlZW4gaW5jb21wbGV0ZSB3aXRob3V0IGEgY3Jhenkgd29ya2Fyb3VuZCBmb3IgSUUgOnwKICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZm9jdXMgaXMgdHJpZ2dlcmVkICphZnRlciogdGhlIGNsb3NlIGhhcyBjb21wbGV0ZWQgLSBjYXVzaW5nIGl0CiAgICAgICAgICAgICAgICAgICAgLy8gdG8gb3BlbiBhZ2Fpbi4gU28gdW5iaW5kIGFuZCByZWJpbmQgdGhlIGV2ZW50IGF0IHRoZSBuZXh0IHRpY2suCiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5vZmYoICdmb2N1cy50b09wZW4nICkuZXEoMCkuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBQLiRyb290Lm9uKCAnZm9jdXMudG9PcGVuJywgaGFuZGxlRm9jdXNUb09wZW5FdmVudCApCiAgICAgICAgICAgICAgICAgICAgfSwgMCApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSDigJxhY3RpdmXigJ0gY2xhc3MuCiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKQogICAgICAgICAgICAgICAgYXJpYSggRUxFTUVOVCwgJ2V4cGFuZGVkJywgZmFsc2UgKQoKICAgICAgICAgICAgICAgIC8vICogQSBGaXJlZm94IGJ1Zywgd2hlbiBgaHRtbGAgaGFzIGBvdmVyZmxvdzpoaWRkZW5gLCByZXN1bHRzIGluCiAgICAgICAgICAgICAgICAvLyAgIGtpbGxpbmcgdHJhbnNpdGlvbnMgOiguIFNvIHJlbW92ZSB0aGUg4oCcb3BlbmVk4oCdIHN0YXRlIG9uIHRoZSBuZXh0IHRpY2suCiAgICAgICAgICAgICAgICAvLyAgIEJ1ZzogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjI1Mjg5CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSDigJxvcGVuZWTigJ0gYW5kIOKAnGZvY3VzZWTigJ0gY2xhc3MgZnJvbSB0aGUgcGlja2VyIHJvb3QuCiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKyAnICcgKyBDTEFTU0VTLmZvY3VzZWQgKQogICAgICAgICAgICAgICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCB0cnVlICkKCiAgICAgICAgICAgICAgICB9LCAwICkKCiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBjbG9zZWQsIGRvIG5vdGhpbmcgbW9yZS4KICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLm9wZW4gKSByZXR1cm4gUAoKICAgICAgICAgICAgICAgIC8vIFNldCBpdCBhcyBjbG9zZWQuCiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2UKCiAgICAgICAgICAgICAgICAvLyBBbGxvdyB0aGUgcGFnZSB0byBzY3JvbGwuCiAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7CiAgICAgICAgICAgICAgICAgICAgJGh0bWwuCiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyggJ292ZXJmbG93JywgJycgKS4KICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICctPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpICkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBVbmJpbmQgdGhlIGRvY3VtZW50IGV2ZW50cy4KICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoICcuJyArIFNUQVRFLmlkICkKCiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBxdWV1ZWQg4oCcY2xvc2XigJ0gZXZlbnRzLgogICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ2Nsb3NlJyApCiAgICAgICAgICAgIH0sIC8vY2xvc2UKCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ2xlYXIgdGhlIHZhbHVlcwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCBvcHRpb25zICkgewogICAgICAgICAgICAgICAgcmV0dXJuIFAuc2V0KCAnY2xlYXInLCBudWxsLCBvcHRpb25zICkKICAgICAgICAgICAgfSwgLy9jbGVhcgoKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBTZXQgc29tZXRoaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCB0aGluZywgdmFsdWUsIG9wdGlvbnMgKSB7CgogICAgICAgICAgICAgICAgdmFyIHRoaW5nSXRlbSwgdGhpbmdWYWx1ZSwKICAgICAgICAgICAgICAgICAgICB0aGluZ0lzT2JqZWN0ID0gJC5pc1BsYWluT2JqZWN0KCB0aGluZyApLAogICAgICAgICAgICAgICAgICAgIHRoaW5nT2JqZWN0ID0gdGhpbmdJc09iamVjdCA/IHRoaW5nIDoge30KCiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSB1c2FibGUgb3B0aW9ucy4KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB0aGluZ0lzT2JqZWN0ICYmICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSA/IHZhbHVlIDogb3B0aW9ucyB8fCB7fQoKICAgICAgICAgICAgICAgIGlmICggdGhpbmcgKSB7CgogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0aGluZyBpc27igJl0IGFuIG9iamVjdCwgbWFrZSBpdCBvbmUuCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpbmdJc09iamVjdCApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3RbIHRoaW5nIF0gPSB2YWx1ZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgdGhpbmdzIG9mIGl0ZW1zIHRvIHNldC4KICAgICAgICAgICAgICAgICAgICBmb3IgKCB0aGluZ0l0ZW0gaW4gdGhpbmdPYmplY3QgKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSB2YWx1ZSBvZiB0aGUgdGhpbmcuCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nVmFsdWUgPSB0aGluZ09iamVjdFsgdGhpbmdJdGVtIF0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0LCBpZiB0aGUgaXRlbSBleGlzdHMgYW5kIHRoZXJl4oCZcyBhIHZhbHVlLCBzZXQgaXQuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdJdGVtIGluIFAuY29tcG9uZW50Lml0ZW0gKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nVmFsdWUgPT09IHVuZGVmaW5lZCApIHRoaW5nVmFsdWUgPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNvbXBvbmVudC5zZXQoIHRoaW5nSXRlbSwgdGhpbmdWYWx1ZSwgb3B0aW9ucyApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZW4sIGNoZWNrIHRvIHVwZGF0ZSB0aGUgZWxlbWVudCB2YWx1ZSBhbmQgYnJvYWRjYXN0IGEgY2hhbmdlLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nSXRlbSA9PSAnc2VsZWN0JyB8fCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCggdGhpbmdJdGVtID09ICdjbGVhcicgPyAnJyA6IFAuZ2V0KCB0aGluZ0l0ZW0sIFNFVFRJTkdTLmZvcm1hdCApICkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciggJ2NoYW5nZScgKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYSBuZXcgcGlja2VyLgogICAgICAgICAgICAgICAgICAgIFAucmVuZGVyKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBtZXRob2QgaXNu4oCZdCBtdXRlZCwgdHJpZ2dlciBxdWV1ZWQg4oCcc2V04oCdIGV2ZW50cyBhbmQgcGFzcyB0aGUgYHRoaW5nT2JqZWN0YC4KICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm11dGVkID8gUCA6IFAudHJpZ2dlciggJ3NldCcsIHRoaW5nT2JqZWN0ICkKICAgICAgICAgICAgfSwgLy9zZXQKCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogR2V0IHNvbWV0aGluZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggdGhpbmcsIGZvcm1hdCApIHsKCiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlcmXigJlzIHNvbWV0aGluZyB0byBnZXQuCiAgICAgICAgICAgICAgICB0aGluZyA9IHRoaW5nIHx8ICd2YWx1ZScKCiAgICAgICAgICAgICAgICAvLyBJZiBhIHBpY2tlciBzdGF0ZSBleGlzdHMsIHJldHVybiB0aGF0LgogICAgICAgICAgICAgICAgaWYgKCBTVEFURVsgdGhpbmcgXSAhPSBudWxsICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURVsgdGhpbmcgXQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc3VibWlzc2lvbiB2YWx1ZSwgaWYgdGhhdC4KICAgICAgICAgICAgICAgIGlmICggdGhpbmcgPT0gJ3ZhbHVlU3VibWl0JyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIFAuX2hpZGRlbiApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuX2hpZGRlbi52YWx1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGluZyA9ICd2YWx1ZScKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlLCBpZiB0aGF0LgogICAgICAgICAgICAgICAgaWYgKCB0aGluZyA9PSAndmFsdWUnICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBFTEVNRU5ULnZhbHVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYSBjb21wb25lbnQgaXRlbSBleGlzdHMsIHJldHVybiB0aGF0LgogICAgICAgICAgICAgICAgaWYgKCB0aGluZyBpbiBQLmNvbXBvbmVudC5pdGVtICkgewogICAgICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGZvcm1hdCA9PSAnc3RyaW5nJyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaW5nVmFsdWUgPSBQLmNvbXBvbmVudC5nZXQoIHRoaW5nICkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaW5nVmFsdWUgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LmZvcm1hdHMudG9TdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyBmb3JtYXQsIHRoaW5nVmFsdWUgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICcnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBQLmNvbXBvbmVudC5nZXQoIHRoaW5nICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgLy9nZXQKCgoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEJpbmQgZXZlbnRzIG9uIHRoZSB0aGluZ3MuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBvbjogZnVuY3Rpb24oIHRoaW5nLCBtZXRob2QsIGludGVybmFsICkgewoKICAgICAgICAgICAgICAgIHZhciB0aGluZ05hbWUsIHRoaW5nTWV0aG9kLAogICAgICAgICAgICAgICAgICAgIHRoaW5nSXNPYmplY3QgPSAkLmlzUGxhaW5PYmplY3QoIHRoaW5nICksCiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fQoKICAgICAgICAgICAgICAgIGlmICggdGhpbmcgKSB7CgogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0aGluZyBpc27igJl0IGFuIG9iamVjdCwgbWFrZSBpdCBvbmUuCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpbmdJc09iamVjdCApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3RbIHRoaW5nIF0gPSBtZXRob2QKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHRoaW5ncyB0byBiaW5kIHRvLgogICAgICAgICAgICAgICAgICAgIGZvciAoIHRoaW5nTmFtZSBpbiB0aGluZ09iamVjdCApIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIG1ldGhvZCBvZiB0aGUgdGhpbmcuCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nTWV0aG9kID0gdGhpbmdPYmplY3RbIHRoaW5nTmFtZSBdCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCB3YXMgYW4gaW50ZXJuYWwgYmluZGluZywgcHJlZml4IGl0LgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGludGVybmFsICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdOYW1lID0gJ18nICsgdGhpbmdOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdGhpbmcgbWV0aG9kcyBjb2xsZWN0aW9uIGV4aXN0cy4KICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEUubWV0aG9kc1sgdGhpbmdOYW1lIF0gPSBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXSB8fCBbXQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBtZXRob2QgdG8gdGhlIHJlbGF0aXZlIG1ldGhvZCBjb2xsZWN0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXS5wdXNoKCB0aGluZ01ldGhvZCApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBQCiAgICAgICAgICAgIH0sIC8vb24KCgoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFVuYmluZCBldmVudHMgb24gdGhlIHRoaW5ncy4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgdGhpbmdOYW1lLAogICAgICAgICAgICAgICAgICAgIG5hbWVzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIG5hbWVzQ291bnQgPSBuYW1lcy5sZW5ndGg7IGkgPCBuYW1lc0NvdW50OyBpICs9IDEgKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpbmdOYW1lID0gbmFtZXNbaV0KICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nTmFtZSBpbiBTVEFURS5tZXRob2RzICkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgU1RBVEUubWV0aG9kc1t0aGluZ05hbWVdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFAKICAgICAgICAgICAgfSwKCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRmlyZSBvZmYgbWV0aG9kIGV2ZW50cy4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCBuYW1lLCBkYXRhICkgewogICAgICAgICAgICAgICAgdmFyIF90cmlnZ2VyID0gZnVuY3Rpb24oIG5hbWUgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZExpc3QgPSBTVEFURS5tZXRob2RzWyBuYW1lIF0KICAgICAgICAgICAgICAgICAgICBpZiAoIG1ldGhvZExpc3QgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZExpc3QubWFwKCBmdW5jdGlvbiggbWV0aG9kICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBtZXRob2QsIFAsIFsgZGF0YSBdICkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdHJpZ2dlciggJ18nICsgbmFtZSApCiAgICAgICAgICAgICAgICBfdHJpZ2dlciggbmFtZSApCiAgICAgICAgICAgICAgICByZXR1cm4gUAogICAgICAgICAgICB9IC8vdHJpZ2dlcgogICAgICAgIH0gLy9QaWNrZXJJbnN0YW5jZS5wcm90b3R5cGUKCgogICAgLyoqCiAgICAgKiBXcmFwIHRoZSBwaWNrZXIgaG9sZGVyIGNvbXBvbmVudHMgdG9nZXRoZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZWRDb21wb25lbnQoKSB7CgogICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciB3cmFwcGVyIGhvbGRlcgogICAgICAgIHJldHVybiBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLAoKICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIHdyYXBwZXIgbm9kZQogICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLAoKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciBmcmFtZQogICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy5ub2RlKCAnZGl2JywKCiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIGJveCBub2RlCiAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy5ub2RlKCAnZGl2JywKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29tcG9uZW50cyBub2Rlcy4KICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQubm9kZXMoIFNUQVRFLm9wZW4gKSwKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBwaWNrZXIgYm94IGNsYXNzCiAgICAgICAgICAgICAgICAgICAgICAgIENMQVNTRVMuYm94CiAgICAgICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICAgICAgLy8gUGlja2VyIHdyYXAgY2xhc3MKICAgICAgICAgICAgICAgICAgICBDTEFTU0VTLndyYXAKICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgLy8gUGlja2VyIGZyYW1lIGNsYXNzCiAgICAgICAgICAgICAgICBDTEFTU0VTLmZyYW1lCiAgICAgICAgICAgICksCgogICAgICAgICAgICAvLyBQaWNrZXIgaG9sZGVyIGNsYXNzCiAgICAgICAgICAgIENMQVNTRVMuaG9sZGVyCiAgICAgICAgKSAvL2VuZHJldHVybgogICAgfSAvL2NyZWF0ZVdyYXBwZWRDb21wb25lbnQKCgoKICAgIC8qKgogICAgICogUHJlcGFyZSB0aGUgaW5wdXQgZWxlbWVudCB3aXRoIGFsbCBiaW5kaW5ncy4KICAgICAqLwogICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnQoKSB7CgogICAgICAgICRFTEVNRU5ULgoKICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHBpY2tlciBkYXRhIGJ5IGNvbXBvbmVudCBuYW1lLgogICAgICAgICAgICBkYXRhKE5BTUUsIFApLgoKICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxpbnB1dOKAnSBjbGFzcyBuYW1lLgogICAgICAgICAgICBhZGRDbGFzcyhDTEFTU0VTLmlucHV0KS4KCiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdGFiaW5kZXguCiAgICAgICAgICAgIGF0dHIoJ3RhYmluZGV4JywgLTEpLgoKICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgYGRhdGEtdmFsdWVgLCB1cGRhdGUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50LgogICAgICAgICAgICB2YWwoICRFTEVNRU5ULmRhdGEoJ3ZhbHVlJykgPwogICAgICAgICAgICAgICAgUC5nZXQoJ3NlbGVjdCcsIFNFVFRJTkdTLmZvcm1hdCkgOgogICAgICAgICAgICAgICAgRUxFTUVOVC52YWx1ZQogICAgICAgICAgICApCgoKICAgICAgICAvLyBPbmx5IGJpbmQga2V5ZG93biBldmVudHMgaWYgdGhlIGVsZW1lbnQgaXNu4oCZdCBlZGl0YWJsZS4KICAgICAgICBpZiAoICFTRVRUSU5HUy5lZGl0YWJsZSApIHsKCiAgICAgICAgICAgICRFTEVNRU5ULgoKICAgICAgICAgICAgICAgIC8vIE9uIGZvY3VzL2NsaWNrLCBmb2N1cyBvbnRvIHRoZSByb290IHRvIG9wZW4gaXQgdXAuCiAgICAgICAgICAgICAgICBvbiggJ2ZvY3VzLicgKyBTVEFURS5pZCArICcgY2xpY2suJyArIFNUQVRFLmlkLCBmdW5jdGlvbiggZXZlbnQgKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuZXEoMCkuZm9jdXMoKQogICAgICAgICAgICAgICAgfSkuCgogICAgICAgICAgICAgICAgLy8gSGFuZGxlIGtleWJvYXJkIGV2ZW50IGJhc2VkIG9uIHRoZSBwaWNrZXIgYmVpbmcgb3BlbmVkIG9yIG5vdC4KICAgICAgICAgICAgICAgIG9uKCAna2V5ZG93bi4nICsgU1RBVEUuaWQsIGhhbmRsZUtleWRvd25FdmVudCApCiAgICAgICAgfQoKCiAgICAgICAgLy8gVXBkYXRlIHRoZSBhcmlhIGF0dHJpYnV0ZXMuCiAgICAgICAgYXJpYShFTEVNRU5ULCB7CiAgICAgICAgICAgIGhhc3BvcHVwOiB0cnVlLAogICAgICAgICAgICBleHBhbmRlZDogZmFsc2UsCiAgICAgICAgICAgIHJlYWRvbmx5OiBmYWxzZSwKICAgICAgICAgICAgb3duczogRUxFTUVOVC5pZCArICdfcm9vdCcKICAgICAgICB9KQogICAgfQoKCiAgICAvKioKICAgICAqIFByZXBhcmUgdGhlIHJvb3QgcGlja2VyIGVsZW1lbnQgd2l0aCBhbGwgYmluZGluZ3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHByZXBhcmVFbGVtZW50Um9vdCgpIHsKCiAgICAgICAgUC4kcm9vdC4KCiAgICAgICAgICAgIG9uKHsKCiAgICAgICAgICAgICAgICAvLyBGb3IgaU9TOC4KICAgICAgICAgICAgICAgIGtleWRvd246IGhhbmRsZUtleWRvd25FdmVudCwKCiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWV0aGluZyB3aXRoaW4gdGhlIHJvb3QgaXMgZm9jdXNlZCwgc3RvcCBmcm9tIGJ1YmJsaW5nCiAgICAgICAgICAgICAgICAvLyB0byB0aGUgZG9jIGFuZCByZW1vdmUgdGhlIOKAnGZvY3VzZWTigJ0gc3RhdGUgZnJvbSB0aGUgcm9vdC4KICAgICAgICAgICAgICAgIGZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHsKICAgICAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZUNsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKQogICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIC8vIFdoZW4gc29tZXRoaW5nIHdpdGhpbiB0aGUgcm9vdCBob2xkZXIgaXMgY2xpY2tlZCwgc3RvcCBpdAogICAgICAgICAgICAgICAgLy8gZnJvbSBidWJibGluZyB0byB0aGUgZG9jLgogICAgICAgICAgICAgICAgJ21vdXNlZG93biBjbGljayc6IGZ1bmN0aW9uKCBldmVudCApIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoKICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHRhcmdldCBpc27igJl0IHRoZSByb290IGhvbGRlciBzbyBpdCBjYW4gYnViYmxlIHVwLgogICAgICAgICAgICAgICAgICAgIGlmICggdGFyZ2V0ICE9IFAuJHJvb3QuY2hpbGRyZW4oKVsgMCBdICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogRm9yIG1vdXNlZG93biBldmVudHMsIGNhbmNlbCB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gb3JkZXIgdG8KICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBwcmV2ZW50IGNhc2VzIHdoZXJlIGZvY3VzIGlzIHNoaWZ0ZWQgb250byBleHRlcm5hbCBlbGVtZW50cwogICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHdoZW4gdXNpbmcgdGhpbmdzIGxpa2UgalF1ZXJ5IG1vYmlsZSBvciBNYWduaWZpY1BvcHVwIChyZWY6ICMyNDkgJiAjMTIwKS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBBbHNvLCBmb3IgRmlyZWZveCwgZG9u4oCZdCBwcmV2ZW50IGFjdGlvbiBvbiB0aGUgYG9wdGlvbmAgZWxlbWVudC4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBldmVudC50eXBlID09ICdtb3VzZWRvd24nICYmICEkKCB0YXJnZXQgKS5pcyggJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBidXR0b24sIG9wdGlvbicgKSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZS1mb2N1cyBvbnRvIHRoZSByb290IHNvIHRoYXQgdXNlcnMgY2FuIGNsaWNrIGF3YXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZWxlbWVudHMgZm9jdXNlZCB3aXRoaW4gdGhlIHBpY2tlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuZXEoMCkuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS4KCiAgICAgICAgICAgIC8vIEFkZC9yZW1vdmUgdGhlIOKAnHRhcmdldOKAnSBjbGFzcyBvbiBmb2N1cyBhbmQgYmx1ci4KICAgICAgICAgICAgb24oewogICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULmFkZENsYXNzKCBDTEFTU0VTLnRhcmdldCApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJEVMRU1FTlQucmVtb3ZlQ2xhc3MoIENMQVNTRVMudGFyZ2V0ICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuCgogICAgICAgICAgICAvLyBPcGVuIHRoZSBwaWNrZXIgYW5kIGFkanVzdCB0aGUgcm9vdCDigJxmb2N1c2Vk4oCdIHN0YXRlCiAgICAgICAgICAgIG9uKCAnZm9jdXMudG9PcGVuJywgaGFuZGxlRm9jdXNUb09wZW5FdmVudCApLgoKICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgY2xpY2sgb24gYW4gYWN0aW9uYWJsZSBlbGVtZW50LCBjYXJyeSBvdXQgdGhlIGFjdGlvbnMuCiAgICAgICAgICAgIG9uKCAnY2xpY2snLCAnW2RhdGEtcGlja10sIFtkYXRhLW5hdl0sIFtkYXRhLWNsZWFyXSwgW2RhdGEtY2xvc2VdJywgZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSAkKCB0aGlzICksCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9ICR0YXJnZXQuZGF0YSgpLAogICAgICAgICAgICAgICAgICAgIHRhcmdldERpc2FibGVkID0gJHRhcmdldC5oYXNDbGFzcyggQ0xBU1NFUy5uYXZEaXNhYmxlZCApIHx8ICR0YXJnZXQuaGFzQ2xhc3MoIENMQVNTRVMuZGlzYWJsZWQgKSwKCiAgICAgICAgICAgICAgICAgICAgLy8gKiBGb3IgSUUsIG5vbi1mb2N1c2FibGUgZWxlbWVudHMgY2FuIGJlIGFjdGl2ZSBlbGVtZW50cyBhcyB3ZWxsCiAgICAgICAgICAgICAgICAgICAgLy8gICAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY4NDU2MSkuCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudCA9IGdldEFjdGl2ZUVsZW1lbnQoKQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50ICYmICggYWN0aXZlRWxlbWVudC50eXBlIHx8IGFjdGl2ZUVsZW1lbnQuaHJlZiApCgogICAgICAgICAgICAgICAgLy8gSWYgaXTigJlzIGRpc2FibGVkIG9yIG5vdGhpbmcgaW5zaWRlIGlzIGFjdGl2ZWx5IGZvY3VzZWQsIHJlLWZvY3VzIHRoZSBlbGVtZW50LgogICAgICAgICAgICAgICAgaWYgKCB0YXJnZXREaXNhYmxlZCB8fCBhY3RpdmVFbGVtZW50ICYmICEkLmNvbnRhaW5zKCBQLiRyb290WzBdLCBhY3RpdmVFbGVtZW50ICkgKSB7CiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5lcSgwKS5mb2N1cygpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHN1cGVyZmljaWFsbHkgY2hhbmdlZCwgdXBkYXRlIHRoZSBgaGlnaGxpZ2h0YCBiYXNlZCBvbiB0aGUgYG5hdmAuCiAgICAgICAgICAgICAgICBpZiAoICF0YXJnZXREaXNhYmxlZCAmJiB0YXJnZXREYXRhLm5hdiApIHsKICAgICAgICAgICAgICAgICAgICBQLnNldCggJ2hpZ2hsaWdodCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0LCB7IG5hdjogdGFyZ2V0RGF0YS5uYXYgfSApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHBpY2tlZCwgc2V0IGBzZWxlY3RgIHRoZW4gY2xvc2Ugd2l0aCBmb2N1cy4KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCAhdGFyZ2V0RGlzYWJsZWQgJiYgJ3BpY2snIGluIHRhcmdldERhdGEgKSB7CiAgICAgICAgICAgICAgICAgICAgUC5zZXQoICdzZWxlY3QnLCB0YXJnZXREYXRhLnBpY2sgKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIElmIGEg4oCcY2xlYXLigJ0gYnV0dG9uIGlzIHByZXNzZWQsIGVtcHR5IHRoZSB2YWx1ZXMgYW5kIGNsb3NlIHdpdGggZm9jdXMuCiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGFyZ2V0RGF0YS5jbGVhciApIHsKICAgICAgICAgICAgICAgICAgICBQLmNsZWFyKCkuY2xvc2UoIHRydWUgKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXREYXRhLmNsb3NlICkgewogICAgICAgICAgICAgICAgICAgIFAuY2xvc2UoIHRydWUgKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSkgLy9QLiRyb290CgogICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCB0cnVlICkKICAgIH0KCgogICAgIC8qKgogICAgICAqIFByZXBhcmUgdGhlIGhpZGRlbiBpbnB1dCBlbGVtZW50IGFsb25nIHdpdGggYWxsIGJpbmRpbmdzLgogICAgICAqLwogICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnRIaWRkZW4oKSB7CgogICAgICAgIHZhciBuYW1lCgogICAgICAgIGlmICggU0VUVElOR1MuaGlkZGVuTmFtZSA9PT0gdHJ1ZSApIHsKICAgICAgICAgICAgbmFtZSA9IEVMRU1FTlQubmFtZQogICAgICAgICAgICBFTEVNRU5ULm5hbWUgPSAnJwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbmFtZSA9IFsKICAgICAgICAgICAgICAgIHR5cGVvZiBTRVRUSU5HUy5oaWRkZW5QcmVmaXggPT0gJ3N0cmluZycgPyBTRVRUSU5HUy5oaWRkZW5QcmVmaXggOiAnJywKICAgICAgICAgICAgICAgIHR5cGVvZiBTRVRUSU5HUy5oaWRkZW5TdWZmaXggPT0gJ3N0cmluZycgPyBTRVRUSU5HUy5oaWRkZW5TdWZmaXggOiAnX3N1Ym1pdCcKICAgICAgICAgICAgXQogICAgICAgICAgICBuYW1lID0gbmFtZVswXSArIEVMRU1FTlQubmFtZSArIG5hbWVbMV0KICAgICAgICB9CgogICAgICAgIFAuX2hpZGRlbiA9ICQoCiAgICAgICAgICAgICc8aW5wdXQgJyArCiAgICAgICAgICAgICd0eXBlPWhpZGRlbiAnICsKCiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbmFtZSB1c2luZyB0aGUgb3JpZ2luYWwgaW5wdXTigJlzIHdpdGggYSBwcmVmaXggYW5kIHN1ZmZpeC4KICAgICAgICAgICAgJ25hbWU9IicgKyBuYW1lICsgJyInICsKCiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIHZhbHVlLCBzZXQgdGhlIGhpZGRlbiB2YWx1ZSBhcyB3ZWxsLgogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAkRUxFTUVOVC5kYXRhKCd2YWx1ZScpIHx8IEVMRU1FTlQudmFsdWUgPwogICAgICAgICAgICAgICAgICAgICcgdmFsdWU9IicgKyBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0U3VibWl0KSArICciJyA6CiAgICAgICAgICAgICAgICAgICAgJycKICAgICAgICAgICAgKSArCiAgICAgICAgICAgICc+JwogICAgICAgIClbMF0KCiAgICAgICAgJEVMRU1FTlQuCgogICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgY2hhbmdlcywgdXBkYXRlIHRoZSBoaWRkZW4gaW5wdXQgd2l0aCB0aGUgY29ycmVjdCBmb3JtYXQuCiAgICAgICAgICAgIG9uKCdjaGFuZ2UuJyArIFNUQVRFLmlkLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIFAuX2hpZGRlbi52YWx1ZSA9IEVMRU1FTlQudmFsdWUgPwogICAgICAgICAgICAgICAgICAgIFAuZ2V0KCdzZWxlY3QnLCBTRVRUSU5HUy5mb3JtYXRTdWJtaXQpIDoKICAgICAgICAgICAgICAgICAgICAnJwogICAgICAgICAgICB9KQoKCiAgICAgICAgLy8gSW5zZXJ0IHRoZSBoaWRkZW4gaW5wdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5ncy4KICAgICAgICBpZiAoIFNFVFRJTkdTLmNvbnRhaW5lciApICQoIFNFVFRJTkdTLmNvbnRhaW5lciApLmFwcGVuZCggUC5faGlkZGVuICkKICAgICAgICBlbHNlICRFTEVNRU5ULmFmdGVyKCBQLl9oaWRkZW4gKQogICAgfQoKCiAgICAvLyBGb3IgaU9TOC4KICAgIGZ1bmN0aW9uIGhhbmRsZUtleWRvd25FdmVudCggZXZlbnQgKSB7CgogICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZSwKCiAgICAgICAgICAgIC8vIENoZWNrIGlmIG9uZSBvZiB0aGUgZGVsZXRlIGtleXMgd2FzIHByZXNzZWQuCiAgICAgICAgICAgIGlzS2V5Y29kZURlbGV0ZSA9IC9eKDh8NDYpJC8udGVzdChrZXljb2RlKQoKICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gSUUgY2xlYXJzIHRoZSBpbnB1dCB2YWx1ZSBvbiDigJxlc2NhcGXigJ0uCiAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkgewogICAgICAgICAgICBQLmNsb3NlKCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBpZiBgc3BhY2VgIG9yIGBkZWxldGVgIHdhcyBwcmVzc2VkIG9yIHRoZSBwaWNrZXIgaXMgY2xvc2VkIHdpdGggYSBrZXkgbW92ZW1lbnQuCiAgICAgICAgaWYgKCBrZXljb2RlID09IDMyIHx8IGlzS2V5Y29kZURlbGV0ZSB8fCAhU1RBVEUub3BlbiAmJiBQLmNvbXBvbmVudC5rZXlba2V5Y29kZV0gKSB7CgogICAgICAgICAgICAvLyBQcmV2ZW50IGl0IGZyb20gbW92aW5nIHRoZSBwYWdlIGFuZCBidWJibGluZyB0byBkb2MuCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKCiAgICAgICAgICAgIC8vIElmIGBkZWxldGVgIHdhcyBwcmVzc2VkLCBjbGVhciB0aGUgdmFsdWVzIGFuZCBjbG9zZSB0aGUgcGlja2VyLgogICAgICAgICAgICAvLyBPdGhlcndpc2Ugb3BlbiB0aGUgcGlja2VyLgogICAgICAgICAgICBpZiAoIGlzS2V5Y29kZURlbGV0ZSApIHsgUC5jbGVhcigpLmNsb3NlKCkgfQogICAgICAgICAgICBlbHNlIHsgUC5vcGVuKCkgfQogICAgICAgIH0KICAgIH0KCgogICAgLy8gU2VwYXJhdGVkIGZvciBJRQogICAgZnVuY3Rpb24gaGFuZGxlRm9jdXNUb09wZW5FdmVudCggZXZlbnQgKSB7CgogICAgICAgIC8vIFN0b3AgdGhlIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gdGhlIGRvYy4KICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKQoKICAgICAgICAvLyBJZiBpdOKAmXMgYSBmb2N1cyBldmVudCwgYWRkIHRoZSDigJxmb2N1c2Vk4oCdIGNsYXNzIHRvIHRoZSByb290LgogICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnZm9jdXMnICkgewogICAgICAgICAgICBQLiRyb290LmFkZENsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKQogICAgICAgIH0KCiAgICAgICAgLy8gQW5kIHRoZW4gZmluYWxseSBvcGVuIHRoZSBwaWNrZXIuCiAgICAgICAgUC5vcGVuKCkKICAgIH0KCgogICAgLy8gUmV0dXJuIGEgbmV3IHBpY2tlciBpbnN0YW5jZS4KICAgIHJldHVybiBuZXcgUGlja2VySW5zdGFuY2UoKQp9IC8vUGlja2VyQ29uc3RydWN0b3IKCgoKLyoqCiAqIFRoZSBkZWZhdWx0IGNsYXNzZXMgYW5kIHByZWZpeCB0byB1c2UgZm9yIHRoZSBIVE1MIGNsYXNzZXMuCiAqLwpQaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzID0gZnVuY3Rpb24oIHByZWZpeCApIHsKICAgIHByZWZpeCA9IHByZWZpeCB8fCAncGlja2VyJwogICAgcmV0dXJuIHsKCiAgICAgICAgcGlja2VyOiBwcmVmaXgsCiAgICAgICAgb3BlbmVkOiBwcmVmaXggKyAnLS1vcGVuZWQnLAogICAgICAgIGZvY3VzZWQ6IHByZWZpeCArICctLWZvY3VzZWQnLAoKICAgICAgICBpbnB1dDogcHJlZml4ICsgJ19faW5wdXQnLAogICAgICAgIGFjdGl2ZTogcHJlZml4ICsgJ19faW5wdXQtLWFjdGl2ZScsCiAgICAgICAgdGFyZ2V0OiBwcmVmaXggKyAnX19pbnB1dC0tdGFyZ2V0JywKCiAgICAgICAgaG9sZGVyOiBwcmVmaXggKyAnX19ob2xkZXInLAoKICAgICAgICBmcmFtZTogcHJlZml4ICsgJ19fZnJhbWUnLAogICAgICAgIHdyYXA6IHByZWZpeCArICdfX3dyYXAnLAoKICAgICAgICBib3g6IHByZWZpeCArICdfX2JveCcKICAgIH0KfSAvL1BpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXMKCgoKLyoqCiAqIENoZWNrIGlmIHRoZSBkZWZhdWx0IHRoZW1lIGlzIGJlaW5nIHVzZWQuCiAqLwpmdW5jdGlvbiBpc1VzaW5nRGVmYXVsdFRoZW1lKCBlbGVtZW50ICkgewoKICAgIHZhciB0aGVtZSwKICAgICAgICBwcm9wID0gJ3Bvc2l0aW9uJwoKICAgIC8vIEZvciBJRS4KICAgIGlmICggZWxlbWVudC5jdXJyZW50U3R5bGUgKSB7CiAgICAgICAgdGhlbWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXQogICAgfQoKICAgIC8vIEZvciBub3JtYWwgYnJvd3NlcnMuCiAgICBlbHNlIGlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7CiAgICAgICAgdGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50IClbcHJvcF0KICAgIH0KCiAgICByZXR1cm4gdGhlbWUgPT0gJ2ZpeGVkJwp9CgoKCi8qKgogKiBHZXQgdGhlIHdpZHRoIG9mIHRoZSBicm93c2Vy4oCZcyBzY3JvbGxiYXIuCiAqIFRha2VuIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9Wb2RrYUJlYXJzL1JlbW9kYWwvYmxvYi9tYXN0ZXIvc3JjL2pxdWVyeS5yZW1vZGFsLmpzCiAqLwpmdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHsKCiAgICBpZiAoICRodG1sLmhlaWdodCgpIDw9ICR3aW5kb3cuaGVpZ2h0KCkgKSB7CiAgICAgICAgcmV0dXJuIDAKICAgIH0KCiAgICB2YXIgJG91dGVyID0gJCggJzxkaXYgc3R5bGU9InZpc2liaWxpdHk6aGlkZGVuO3dpZHRoOjEwMHB4IiAvPicgKS4KICAgICAgICBhcHBlbmRUbyggJ2JvZHknICkKCiAgICAvLyBHZXQgdGhlIHdpZHRoIHdpdGhvdXQgc2Nyb2xsYmFycy4KICAgIHZhciB3aWR0aFdpdGhvdXRTY3JvbGwgPSAkb3V0ZXJbMF0ub2Zmc2V0V2lkdGgKCiAgICAvLyBGb3JjZSBhZGRpbmcgc2Nyb2xsYmFycy4KICAgICRvdXRlci5jc3MoICdvdmVyZmxvdycsICdzY3JvbGwnICkKCiAgICAvLyBBZGQgdGhlIGlubmVyIGRpdi4KICAgIHZhciAkaW5uZXIgPSAkKCAnPGRpdiBzdHlsZT0id2lkdGg6MTAwJSIgLz4nICkuYXBwZW5kVG8oICRvdXRlciApCgogICAgLy8gR2V0IHRoZSB3aWR0aCB3aXRoIHNjcm9sbGJhcnMuCiAgICB2YXIgd2lkdGhXaXRoU2Nyb2xsID0gJGlubmVyWzBdLm9mZnNldFdpZHRoCgogICAgLy8gUmVtb3ZlIHRoZSBkaXZzLgogICAgJG91dGVyLnJlbW92ZSgpCgogICAgLy8gUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHdpZHRocy4KICAgIHJldHVybiB3aWR0aFdpdGhvdXRTY3JvbGwgLSB3aWR0aFdpdGhTY3JvbGwKfQoKCgovKioKICogUGlja2VyQ29uc3RydWN0b3IgaGVscGVyIG1ldGhvZHMuCiAqLwpQaWNrZXJDb25zdHJ1Y3Rvci5fID0gewoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgZ3JvdXAgb2Ygbm9kZXMuIEV4cGVjdHM6CiAgICAgKiBgCiAgICAgICAgewogICAgICAgICAgICBtaW46ICAgIHtJbnRlZ2VyfSwKICAgICAgICAgICAgbWF4OiAgICB7SW50ZWdlcn0sCiAgICAgICAgICAgIGk6ICAgICAge0ludGVnZXJ9LAogICAgICAgICAgICBub2RlOiAgIHtTdHJpbmd9LAogICAgICAgICAgICBpdGVtOiAgIHtGdW5jdGlvbn0KICAgICAgICB9CiAgICAgKiBgCiAgICAgKi8KICAgIGdyb3VwOiBmdW5jdGlvbiggZ3JvdXBPYmplY3QgKSB7CgogICAgICAgIHZhcgogICAgICAgICAgICAvLyBTY29wZSBmb3IgdGhlIGxvb3BlZCBvYmplY3QKICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlLAoKICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBub2RlcyBsaXN0CiAgICAgICAgICAgIG5vZGVzTGlzdCA9ICcnLAoKICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgc3RhcnRzIGZyb20gdGhlIGBtaW5gCiAgICAgICAgICAgIGNvdW50ZXIgPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lm1pbiwgZ3JvdXBPYmplY3QgKQoKCiAgICAgICAgLy8gTG9vcCBmcm9tIHRoZSBgbWluYCB0byBgbWF4YCwgaW5jcmVtZW50aW5nIGJ5IGBpYAogICAgICAgIGZvciAoIDsgY291bnRlciA8PSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lm1heCwgZ3JvdXBPYmplY3QsIFsgY291bnRlciBdICk7IGNvdW50ZXIgKz0gZ3JvdXBPYmplY3QuaSApIHsKCiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGBpdGVtYCBmdW5jdGlvbiB3aXRoaW4gc2NvcGUgb2YgdGhlIG9iamVjdAogICAgICAgICAgICBsb29wT2JqZWN0U2NvcGUgPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lml0ZW0sIGdyb3VwT2JqZWN0LCBbIGNvdW50ZXIgXSApCgogICAgICAgICAgICAvLyBTcGxpY2UgdGhlIHN1Ymdyb3VwIGFuZCBjcmVhdGUgbm9kZXMgb3V0IG9mIHRoZSBzdWIgbm9kZXMKICAgICAgICAgICAgbm9kZXNMaXN0ICs9IFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSgKICAgICAgICAgICAgICAgIGdyb3VwT2JqZWN0Lm5vZGUsCiAgICAgICAgICAgICAgICBsb29wT2JqZWN0U2NvcGVbIDAgXSwgICAvLyB0aGUgbm9kZQogICAgICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlWyAxIF0sICAgLy8gdGhlIGNsYXNzZXMKICAgICAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZVsgMiBdICAgIC8vIHRoZSBhdHRyaWJ1dGVzCiAgICAgICAgICAgICkKICAgICAgICB9CgogICAgICAgIC8vIFJldHVybiB0aGUgbGlzdCBvZiBub2RlcwogICAgICAgIHJldHVybiBub2Rlc0xpc3QKICAgIH0sIC8vZ3JvdXAKCgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBkb20gbm9kZSBzdHJpbmcKICAgICAqLwogICAgbm9kZTogZnVuY3Rpb24oIHdyYXBwZXIsIGl0ZW0sIGtsYXNzLCBhdHRyaWJ1dGUgKSB7CgogICAgICAgIC8vIElmIHRoZSBpdGVtIGlzIGZhbHNlLXksIGp1c3QgcmV0dXJuIGFuIGVtcHR5IHN0cmluZwogICAgICAgIGlmICggIWl0ZW0gKSByZXR1cm4gJycKCiAgICAgICAgLy8gSWYgdGhlIGl0ZW0gaXMgYW4gYXJyYXksIGRvIGEgam9pbgogICAgICAgIGl0ZW0gPSAkLmlzQXJyYXkoIGl0ZW0gKSA/IGl0ZW0uam9pbiggJycgKSA6IGl0ZW0KCiAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBjbGFzcwogICAgICAgIGtsYXNzID0ga2xhc3MgPyAnIGNsYXNzPSInICsga2xhc3MgKyAnIicgOiAnJwoKICAgICAgICAvLyBDaGVjayBmb3IgYW55IGF0dHJpYnV0ZXMKICAgICAgICBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGUgPyAnICcgKyBhdHRyaWJ1dGUgOiAnJwoKICAgICAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZWQgaXRlbQogICAgICAgIHJldHVybiAnPCcgKyB3cmFwcGVyICsga2xhc3MgKyBhdHRyaWJ1dGUgKyAnPicgKyBpdGVtICsgJzwvJyArIHdyYXBwZXIgKyAnPicKICAgIH0sIC8vbm9kZQoKCiAgICAvKioKICAgICAqIExlYWQgbnVtYmVycyBiZWxvdyAxMCB3aXRoIGEgemVyby4KICAgICAqLwogICAgbGVhZDogZnVuY3Rpb24oIG51bWJlciApIHsKICAgICAgICByZXR1cm4gKCBudW1iZXIgPCAxMCA/ICcwJzogJycgKSArIG51bWJlcgogICAgfSwKCgogICAgLyoqCiAgICAgKiBUcmlnZ2VyIGEgZnVuY3Rpb24gb3RoZXJ3aXNlIHJldHVybiB0aGUgdmFsdWUuCiAgICAgKi8KICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgc2NvcGUsIGFyZ3MgKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nID8gY2FsbGJhY2suYXBwbHkoIHNjb3BlLCBhcmdzIHx8IFtdICkgOiBjYWxsYmFjawogICAgfSwKCgogICAgLyoqCiAgICAgKiBJZiB0aGUgc2Vjb25kIGNoYXJhY3RlciBpcyBhIGRpZ2l0LCBsZW5ndGggaXMgMiBvdGhlcndpc2UgMS4KICAgICAqLwogICAgZGlnaXRzOiBmdW5jdGlvbiggc3RyaW5nICkgewogICAgICAgIHJldHVybiAoIC9cZC8gKS50ZXN0KCBzdHJpbmdbIDEgXSApID8gMiA6IDEKICAgIH0sCgoKICAgIC8qKgogICAgICogVGVsbCBpZiBzb21ldGhpbmcgaXMgYSBkYXRlIG9iamVjdC4KICAgICAqLwogICAgaXNEYXRlOiBmdW5jdGlvbiggdmFsdWUgKSB7CiAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoIHZhbHVlICkuaW5kZXhPZiggJ0RhdGUnICkgPiAtMSAmJiB0aGlzLmlzSW50ZWdlciggdmFsdWUuZ2V0RGF0ZSgpICkKICAgIH0sCgoKICAgIC8qKgogICAgICogVGVsbCBpZiBzb21ldGhpbmcgaXMgYW4gaW50ZWdlci4KICAgICAqLwogICAgaXNJbnRlZ2VyOiBmdW5jdGlvbiggdmFsdWUgKSB7CiAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoIHZhbHVlICkuaW5kZXhPZiggJ051bWJlcicgKSA+IC0xICYmIHZhbHVlICUgMSA9PT0gMAogICAgfSwKCgogICAgLyoqCiAgICAgKiBDcmVhdGUgQVJJQSBhdHRyaWJ1dGUgc3RyaW5ncy4KICAgICAqLwogICAgYXJpYUF0dHI6IGFyaWFBdHRyCn0gLy9QaWNrZXJDb25zdHJ1Y3Rvci5fCgoKCi8qKgogKiBFeHRlbmQgdGhlIHBpY2tlciB3aXRoIGEgY29tcG9uZW50IGFuZCBkZWZhdWx0cy4KICovClBpY2tlckNvbnN0cnVjdG9yLmV4dGVuZCA9IGZ1bmN0aW9uKCBuYW1lLCBDb21wb25lbnQgKSB7CgogICAgLy8gRXh0ZW5kIGpRdWVyeS4KICAgICQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBhY3Rpb24gKSB7CgogICAgICAgIC8vIEdyYWIgdGhlIGNvbXBvbmVudCBkYXRhLgogICAgICAgIHZhciBjb21wb25lbnREYXRhID0gdGhpcy5kYXRhKCBuYW1lICkKCiAgICAgICAgLy8gSWYgdGhlIHBpY2tlciBpcyByZXF1ZXN0ZWQsIHJldHVybiB0aGUgZGF0YSBvYmplY3QuCiAgICAgICAgaWYgKCBvcHRpb25zID09ICdwaWNrZXInICkgewogICAgICAgICAgICByZXR1cm4gY29tcG9uZW50RGF0YQogICAgICAgIH0KCiAgICAgICAgLy8gSWYgdGhlIGNvbXBvbmVudCBkYXRhIGV4aXN0cyBhbmQgYG9wdGlvbnNgIGlzIGEgc3RyaW5nLCBjYXJyeSBvdXQgdGhlIGFjdGlvbi4KICAgICAgICBpZiAoIGNvbXBvbmVudERhdGEgJiYgdHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycgKSB7CiAgICAgICAgICAgIHJldHVybiBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGNvbXBvbmVudERhdGFbIG9wdGlvbnMgXSwgY29tcG9uZW50RGF0YSwgWyBhY3Rpb24gXSApCiAgICAgICAgfQoKICAgICAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCBlYWNoIG1hdGNoZWQgZWxlbWVudCBhbmQgaWYgdGhlIGNvbXBvbmVudAogICAgICAgIC8vIGRvZXNu4oCZdCBleGlzdCwgY3JlYXRlIGEgbmV3IHBpY2tlciB1c2luZyBgdGhpc2AgZWxlbWVudAogICAgICAgIC8vIGFuZCBtZXJnaW5nIHRoZSBkZWZhdWx0cyBhbmQgb3B0aW9ucyB3aXRoIGEgZGVlcCBjb3B5LgogICAgICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgJHRoaXMgPSAkKCB0aGlzICkKICAgICAgICAgICAgaWYgKCAhJHRoaXMuZGF0YSggbmFtZSApICkgewogICAgICAgICAgICAgICAgbmV3IFBpY2tlckNvbnN0cnVjdG9yKCB0aGlzLCBuYW1lLCBDb21wb25lbnQsIG9wdGlvbnMgKQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0KCiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzLgogICAgJC5mblsgbmFtZSBdLmRlZmF1bHRzID0gQ29tcG9uZW50LmRlZmF1bHRzCn0gLy9QaWNrZXJDb25zdHJ1Y3Rvci5leHRlbmQKCgoKZnVuY3Rpb24gYXJpYShlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKSB7CiAgICBpZiAoICQuaXNQbGFpbk9iamVjdChhdHRyaWJ1dGUpICkgewogICAgICAgIGZvciAoIHZhciBrZXkgaW4gYXR0cmlidXRlICkgewogICAgICAgICAgICBhcmlhU2V0KGVsZW1lbnQsIGtleSwgYXR0cmlidXRlW2tleV0pCiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgYXJpYVNldChlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKQogICAgfQp9CmZ1bmN0aW9uIGFyaWFTZXQoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkgewogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoCiAgICAgICAgKGF0dHJpYnV0ZSA9PSAncm9sZScgPyAnJyA6ICdhcmlhLScpICsgYXR0cmlidXRlLAogICAgICAgIHZhbHVlCiAgICApCn0KZnVuY3Rpb24gYXJpYUF0dHIoYXR0cmlidXRlLCBkYXRhKSB7CiAgICBpZiAoICEkLmlzUGxhaW5PYmplY3QoYXR0cmlidXRlKSApIHsKICAgICAgICBhdHRyaWJ1dGUgPSB7IGF0dHJpYnV0ZTogZGF0YSB9CiAgICB9CiAgICBkYXRhID0gJycKICAgIGZvciAoIHZhciBrZXkgaW4gYXR0cmlidXRlICkgewogICAgICAgIHZhciBhdHRyID0gKGtleSA9PSAncm9sZScgPyAnJyA6ICdhcmlhLScpICsga2V5LAogICAgICAgICAgICBhdHRyVmFsID0gYXR0cmlidXRlW2tleV0KICAgICAgICBkYXRhICs9IGF0dHJWYWwgPT0gbnVsbCA/ICcnIDogYXR0ciArICc9IicgKyBhdHRyaWJ1dGVba2V5XSArICciJwogICAgfQogICAgcmV0dXJuIGRhdGEKfQoKLy8gSUU4IGJ1ZyB0aHJvd3MgYW4gZXJyb3IgZm9yIGFjdGl2ZUVsZW1lbnRzIHdpdGhpbiBpZnJhbWVzLgpmdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgewogICAgdHJ5IHsKICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudAogICAgfSBjYXRjaCAoIGVyciApIHsgfQp9CgoKCi8vIEV4cG9zZSB0aGUgcGlja2VyIGNvbnN0cnVjdG9yLgpyZXR1cm4gUGlja2VyQ29uc3RydWN0b3IKCgp9KSk7Cgo7LyohCiAqIERhdGUgcGlja2VyIGZvciBwaWNrYWRhdGUuanMgdjMuNS4wCiAqIGh0dHA6Ly9hbXN1bC5naXRodWIuaW8vcGlja2FkYXRlLmpzL2RhdGUuaHRtCiAqLwoKKGZ1bmN0aW9uICggZmFjdG9yeSApIHsKCiAgICAvLyBBTUQuCiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkKICAgICAgICBkZWZpbmUoIFsncGlja2VyJywgJ2pxdWVyeSddLCBmYWN0b3J5ICkKCiAgICAvLyBOb2RlLmpzL2Jyb3dzZXJpZnkuCiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKQogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnLi9waWNrZXIuanMnKSwgcmVxdWlyZSgnanF1ZXJ5JykgKQoKICAgIC8vIEJyb3dzZXIgZ2xvYmFscy4KICAgIGVsc2UgZmFjdG9yeSggUGlja2VyLCBqUXVlcnkgKQoKfShmdW5jdGlvbiggUGlja2VyLCAkICkgewoKCi8qKgogKiBHbG9iYWxzIGFuZCBjb25zdGFudHMKICovCnZhciBEQVlTX0lOX1dFRUsgPSA3LAogICAgV0VFS1NfSU5fQ0FMRU5EQVIgPSA2LAogICAgXyA9IFBpY2tlci5fOwoKCgovKioKICogVGhlIGRhdGUgcGlja2VyIGNvbnN0cnVjdG9yCiAqLwpmdW5jdGlvbiBEYXRlUGlja2VyKCBwaWNrZXIsIHNldHRpbmdzICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMsCiAgICAgICAgZWxlbWVudCA9IHBpY2tlci4kbm9kZVsgMCBdLAogICAgICAgIGVsZW1lbnRWYWx1ZSA9IGVsZW1lbnQudmFsdWUsCiAgICAgICAgZWxlbWVudERhdGFWYWx1ZSA9IHBpY2tlci4kbm9kZS5kYXRhKCAndmFsdWUnICksCiAgICAgICAgdmFsdWVTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlIHx8IGVsZW1lbnRWYWx1ZSwKICAgICAgICBmb3JtYXRTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlID8gc2V0dGluZ3MuZm9ybWF0U3VibWl0IDogc2V0dGluZ3MuZm9ybWF0LAogICAgICAgIGlzUlRMID0gZnVuY3Rpb24oKSB7CgogICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jdXJyZW50U3R5bGUgPwoKICAgICAgICAgICAgICAgIC8vIEZvciBJRS4KICAgICAgICAgICAgICAgIGVsZW1lbnQuY3VycmVudFN0eWxlLmRpcmVjdGlvbiA9PSAncnRsJyA6CgogICAgICAgICAgICAgICAgLy8gRm9yIG5vcm1hbCBicm93c2Vycy4KICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoIHBpY2tlci4kcm9vdFswXSApLmRpcmVjdGlvbiA9PSAncnRsJwogICAgICAgIH0KCiAgICBjYWxlbmRhci5zZXR0aW5ncyA9IHNldHRpbmdzCiAgICBjYWxlbmRhci4kbm9kZSA9IHBpY2tlci4kbm9kZQoKICAgIC8vIFRoZSBxdWV1ZSBvZiBtZXRob2RzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIGl0ZW0gb2JqZWN0cy4KICAgIGNhbGVuZGFyLnF1ZXVlID0gewogICAgICAgIG1pbjogJ21lYXN1cmUgY3JlYXRlJywKICAgICAgICBtYXg6ICdtZWFzdXJlIGNyZWF0ZScsCiAgICAgICAgbm93OiAnbm93IGNyZWF0ZScsCiAgICAgICAgc2VsZWN0OiAncGFyc2UgY3JlYXRlIHZhbGlkYXRlJywKICAgICAgICBoaWdobGlnaHQ6ICdwYXJzZSBuYXZpZ2F0ZSBjcmVhdGUgdmFsaWRhdGUnLAogICAgICAgIHZpZXc6ICdwYXJzZSBjcmVhdGUgdmFsaWRhdGUgdmlld3NldCcsCiAgICAgICAgZGlzYWJsZTogJ2RlYWN0aXZhdGUnLAogICAgICAgIGVuYWJsZTogJ2FjdGl2YXRlJwogICAgfQoKICAgIC8vIFRoZSBjb21wb25lbnQncyBpdGVtIG9iamVjdC4KICAgIGNhbGVuZGFyLml0ZW0gPSB7fQoKICAgIGNhbGVuZGFyLml0ZW0uY2xlYXIgPSBudWxsCiAgICBjYWxlbmRhci5pdGVtLmRpc2FibGUgPSAoIHNldHRpbmdzLmRpc2FibGUgfHwgW10gKS5zbGljZSggMCApCiAgICBjYWxlbmRhci5pdGVtLmVuYWJsZSA9IC0oZnVuY3Rpb24oIGNvbGxlY3Rpb25EaXNhYmxlZCApIHsKICAgICAgICByZXR1cm4gY29sbGVjdGlvbkRpc2FibGVkWyAwIF0gPT09IHRydWUgPyBjb2xsZWN0aW9uRGlzYWJsZWQuc2hpZnQoKSA6IC0xCiAgICB9KSggY2FsZW5kYXIuaXRlbS5kaXNhYmxlICkKCiAgICBjYWxlbmRhci4KICAgICAgICBzZXQoICdtaW4nLCBzZXR0aW5ncy5taW4gKS4KICAgICAgICBzZXQoICdtYXgnLCBzZXR0aW5ncy5tYXggKS4KICAgICAgICBzZXQoICdub3cnICkKCiAgICAvLyBXaGVuIHRoZXJl4oCZcyBhIHZhbHVlLCBzZXQgdGhlIGBzZWxlY3RgLCB3aGljaCBpbiB0dXJuCiAgICAvLyBhbHNvIHNldHMgdGhlIGBoaWdobGlnaHRgIGFuZCBgdmlld2AuCiAgICBpZiAoIHZhbHVlU3RyaW5nICkgewogICAgICAgIGNhbGVuZGFyLnNldCggJ3NlbGVjdCcsIHZhbHVlU3RyaW5nLCB7IGZvcm1hdDogZm9ybWF0U3RyaW5nIH0pCiAgICB9CgogICAgLy8gSWYgdGhlcmXigJlzIG5vIHZhbHVlLCBkZWZhdWx0IHRvIGhpZ2hsaWdodGluZyDigJx0b2RheeKAnS4KICAgIGVsc2UgewogICAgICAgIGNhbGVuZGFyLgogICAgICAgICAgICBzZXQoICdzZWxlY3QnLCBudWxsICkuCiAgICAgICAgICAgIHNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFyLml0ZW0ubm93ICkKICAgIH0KCgogICAgLy8gVGhlIGtleWNvZGUgdG8gbW92ZW1lbnQgbWFwcGluZy4KICAgIGNhbGVuZGFyLmtleSA9IHsKICAgICAgICA0MDogNywgLy8gRG93bgogICAgICAgIDM4OiAtNywgLy8gVXAKICAgICAgICAzOTogZnVuY3Rpb24oKSB7IHJldHVybiBpc1JUTCgpID8gLTEgOiAxIH0sIC8vIFJpZ2h0CiAgICAgICAgMzc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNSVEwoKSA/IDEgOiAtMSB9LCAvLyBMZWZ0CiAgICAgICAgZ286IGZ1bmN0aW9uKCB0aW1lQ2hhbmdlICkgewogICAgICAgICAgICB2YXIgaGlnaGxpZ2h0ZWRPYmplY3QgPSBjYWxlbmRhci5pdGVtLmhpZ2hsaWdodCwKICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSggaGlnaGxpZ2h0ZWRPYmplY3QueWVhciwgaGlnaGxpZ2h0ZWRPYmplY3QubW9udGgsIGhpZ2hsaWdodGVkT2JqZWN0LmRhdGUgKyB0aW1lQ2hhbmdlICkKICAgICAgICAgICAgY2FsZW5kYXIuc2V0KAogICAgICAgICAgICAgICAgJ2hpZ2hsaWdodCcsCiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLAogICAgICAgICAgICAgICAgeyBpbnRlcnZhbDogdGltZUNoYW5nZSB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKQogICAgICAgIH0KICAgIH0KCgogICAgLy8gQmluZCBzb21lIHBpY2tlciBldmVudHMuCiAgICBwaWNrZXIuCiAgICAgICAgb24oICdyZW5kZXInLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdE1vbnRoICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWUKICAgICAgICAgICAgICAgIGlmICggdmFsdWUgKSB7CiAgICAgICAgICAgICAgICAgICAgcGlja2VyLnNldCggJ2hpZ2hsaWdodCcsIFsgcGlja2VyLmdldCggJ3ZpZXcnICkueWVhciwgdmFsdWUsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdICkKICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS50cmlnZ2VyKCAnZm9jdXMnICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZQogICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSApIHsKICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyB2YWx1ZSwgcGlja2VyLmdldCggJ3ZpZXcnICkubW9udGgsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdICkKICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciApLnRyaWdnZXIoICdmb2N1cycgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sIDEgKS4KICAgICAgICBvbiggJ29wZW4nLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGluY2x1ZGVUb2RheSA9ICcnCiAgICAgICAgICAgIGlmICggY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFyLmdldCgnbm93JykgKSApIHsKICAgICAgICAgICAgICAgIGluY2x1ZGVUb2RheSA9ICc6bm90KC4nICsgc2V0dGluZ3Mua2xhc3MuYnV0dG9uVG9kYXkgKyAnKScKICAgICAgICAgICAgfQogICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJ2J1dHRvbicgKyBpbmNsdWRlVG9kYXkgKyAnLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgZmFsc2UgKQogICAgICAgIH0sIDEgKS4KICAgICAgICBvbiggJ2Nsb3NlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHBpY2tlci4kcm9vdC5maW5kKCAnYnV0dG9uLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgdHJ1ZSApCiAgICAgICAgfSwgMSApCgp9IC8vRGF0ZVBpY2tlcgoKCi8qKgogKiBTZXQgYSBkYXRlcGlja2VyIGl0ZW0gb2JqZWN0LgogKi8KRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMsCiAgICAgICAgY2FsZW5kYXJJdGVtID0gY2FsZW5kYXIuaXRlbQoKICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAganVzdCBzZXQgaXQgaW1tZWRpYXRlbHkuCiAgICBpZiAoIHZhbHVlID09PSBudWxsICkgewogICAgICAgIGlmICggdHlwZSA9PSAnY2xlYXInICkgdHlwZSA9ICdzZWxlY3QnCiAgICAgICAgY2FsZW5kYXJJdGVtWyB0eXBlIF0gPSB2YWx1ZQogICAgICAgIHJldHVybiBjYWxlbmRhcgogICAgfQoKICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBxdWV1ZSBvZiBtZXRob2RzLCBhbmQgaW52b2tlIHRoZSBmdW5jdGlvbnMuCiAgICAvLyBVcGRhdGUgdGhpcyBhcyB0aGUgdGltZSB1bml0LCBhbmQgc2V0IHRoZSBmaW5hbCB2YWx1ZSBhcyB0aGlzIGl0ZW0uCiAgICAvLyAqIEluIHRoZSBjYXNlIG9mIGBlbmFibGVgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBkaXNhYmxlYCBpbnN0ZWFkLgogICAgLy8gICBBbmQgaW4gdGhlIGNhc2Ugb2YgYGZsaXBgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBlbmFibGVgIGluc3RlYWQuCiAgICBjYWxlbmRhckl0ZW1bICggdHlwZSA9PSAnZW5hYmxlJyA/ICdkaXNhYmxlJyA6IHR5cGUgPT0gJ2ZsaXAnID8gJ2VuYWJsZScgOiB0eXBlICkgXSA9IGNhbGVuZGFyLnF1ZXVlWyB0eXBlIF0uc3BsaXQoICcgJyApLm1hcCggZnVuY3Rpb24oIG1ldGhvZCApIHsKICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyWyBtZXRob2QgXSggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKQogICAgICAgIHJldHVybiB2YWx1ZQogICAgfSkucG9wKCkKCiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNhc2NhZGUgdGhyb3VnaCBtb3JlIHVwZGF0ZXMuCiAgICBpZiAoIHR5cGUgPT0gJ3NlbGVjdCcgKSB7CiAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLnNlbGVjdCwgb3B0aW9ucyApCiAgICB9CiAgICBlbHNlIGlmICggdHlwZSA9PSAnaGlnaGxpZ2h0JyApIHsKICAgICAgICBjYWxlbmRhci5zZXQoICd2aWV3JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApCiAgICB9CiAgICBlbHNlIGlmICggdHlwZS5tYXRjaCggL14oZmxpcHxtaW58bWF4fGRpc2FibGV8ZW5hYmxlKSQvICkgKSB7CiAgICAgICAgaWYgKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICYmIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICkgKSB7CiAgICAgICAgICAgIGNhbGVuZGFyLnNldCggJ3NlbGVjdCcsIGNhbGVuZGFySXRlbS5zZWxlY3QsIG9wdGlvbnMgKQogICAgICAgIH0KICAgICAgICBpZiAoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgKSApIHsKICAgICAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApCiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBjYWxlbmRhcgp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0CgoKLyoqCiAqIEdldCBhIGRhdGVwaWNrZXIgaXRlbSBvYmplY3QuCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiggdHlwZSApIHsKICAgIHJldHVybiB0aGlzLml0ZW1bIHR5cGUgXQp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZ2V0CgoKLyoqCiAqIENyZWF0ZSBhIHBpY2tlciBkYXRlIG9iamVjdC4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHsKCiAgICB2YXIgaXNJbmZpbml0ZVZhbHVlLAogICAgICAgIGNhbGVuZGFyID0gdGhpcwoKICAgIC8vIElmIHRoZXJl4oCZcyBubyB2YWx1ZSwgdXNlIHRoZSB0eXBlIGFzIHRoZSB2YWx1ZS4KICAgIHZhbHVlID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHR5cGUgOiB2YWx1ZQoKCiAgICAvLyBJZiBpdOKAmXMgaW5maW5pdHksIHVwZGF0ZSB0aGUgdmFsdWUuCiAgICBpZiAoIHZhbHVlID09IC1JbmZpbml0eSB8fCB2YWx1ZSA9PSBJbmZpbml0eSApIHsKICAgICAgICBpc0luZmluaXRlVmFsdWUgPSB2YWx1ZQogICAgfQoKICAgIC8vIElmIGl04oCZcyBhbiBvYmplY3QsIHVzZSB0aGUgbmF0aXZlIGRhdGUgb2JqZWN0LgogICAgZWxzZSBpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSAmJiBfLmlzSW50ZWdlciggdmFsdWUucGljayApICkgewogICAgICAgIHZhbHVlID0gdmFsdWUub2JqCiAgICB9CgogICAgLy8gSWYgaXTigJlzIGFuIGFycmF5LCBjb252ZXJ0IGl0IGludG8gYSBkYXRlIGFuZCBtYWtlIHN1cmUKICAgIC8vIHRoYXQgaXTigJlzIGEgdmFsaWQgZGF0ZSDigJMgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdG9kYXkuCiAgICBlbHNlIGlmICggJC5pc0FycmF5KCB2YWx1ZSApICkgewogICAgICAgIHZhbHVlID0gbmV3IERhdGUoIHZhbHVlWyAwIF0sIHZhbHVlWyAxIF0sIHZhbHVlWyAyIF0gKQogICAgICAgIHZhbHVlID0gXy5pc0RhdGUoIHZhbHVlICkgPyB2YWx1ZSA6IGNhbGVuZGFyLmNyZWF0ZSgpLm9iagogICAgfQoKICAgIC8vIElmIGl04oCZcyBhIG51bWJlciBvciBkYXRlIG9iamVjdCwgbWFrZSBhIG5vcm1hbGl6ZWQgZGF0ZS4KICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdmFsdWUgKSB8fCBfLmlzRGF0ZSggdmFsdWUgKSApIHsKICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vcm1hbGl6ZSggbmV3IERhdGUoIHZhbHVlICksIG9wdGlvbnMgKQogICAgfQoKICAgIC8vIElmIGl04oCZcyBhIGxpdGVyYWwgdHJ1ZSBvciBhbnkgb3RoZXIgY2FzZSwgc2V0IGl0IHRvIG5vdy4KICAgIGVsc2UgLyppZiAoIHZhbHVlID09PSB0cnVlICkqLyB7CiAgICAgICAgdmFsdWUgPSBjYWxlbmRhci5ub3coIHR5cGUsIHZhbHVlLCBvcHRpb25zICkKICAgIH0KCiAgICAvLyBSZXR1cm4gdGhlIGNvbXBpbGVkIG9iamVjdC4KICAgIHJldHVybiB7CiAgICAgICAgeWVhcjogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgbW9udGg6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXRNb250aCgpLAogICAgICAgIGRhdGU6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXREYXRlKCksCiAgICAgICAgZGF5OiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUuZ2V0RGF5KCksCiAgICAgICAgb2JqOiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUsCiAgICAgICAgcGljazogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldFRpbWUoKQogICAgfQp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlCgoKLyoqCiAqIENyZWF0ZSBhIHJhbmdlIGxpbWl0IG9iamVjdCB1c2luZyBhbiBhcnJheSwgZGF0ZSBvYmplY3QsCiAqIGxpdGVyYWwg4oCcdHJ1ZeKAnSwgb3IgaW50ZWdlciByZWxhdGl2ZSB0byBhbm90aGVyIHRpbWUuCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZSA9IGZ1bmN0aW9uKCBmcm9tLCB0byApIHsKCiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLAogICAgICAgIGNyZWF0ZURhdGUgPSBmdW5jdGlvbiggZGF0ZSApIHsKICAgICAgICAgICAgaWYgKCBkYXRlID09PSB0cnVlIHx8ICQuaXNBcnJheSggZGF0ZSApIHx8IF8uaXNEYXRlKCBkYXRlICkgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FsZW5kYXIuY3JlYXRlKCBkYXRlICkKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGF0ZQogICAgICAgIH0KCiAgICAvLyBDcmVhdGUgb2JqZWN0cyBpZiBwb3NzaWJsZS4KICAgIGlmICggIV8uaXNJbnRlZ2VyKCBmcm9tICkgKSB7CiAgICAgICAgZnJvbSA9IGNyZWF0ZURhdGUoIGZyb20gKQogICAgfQogICAgaWYgKCAhXy5pc0ludGVnZXIoIHRvICkgKSB7CiAgICAgICAgdG8gPSBjcmVhdGVEYXRlKCB0byApCiAgICB9CgogICAgLy8gQ3JlYXRlIHJlbGF0aXZlIGRhdGVzLgogICAgaWYgKCBfLmlzSW50ZWdlciggZnJvbSApICYmICQuaXNQbGFpbk9iamVjdCggdG8gKSApIHsKICAgICAgICBmcm9tID0gWyB0by55ZWFyLCB0by5tb250aCwgdG8uZGF0ZSArIGZyb20gXTsKICAgIH0KICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdG8gKSAmJiAkLmlzUGxhaW5PYmplY3QoIGZyb20gKSApIHsKICAgICAgICB0byA9IFsgZnJvbS55ZWFyLCBmcm9tLm1vbnRoLCBmcm9tLmRhdGUgKyB0byBdOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgICAgZnJvbTogY3JlYXRlRGF0ZSggZnJvbSApLAogICAgICAgIHRvOiBjcmVhdGVEYXRlKCB0byApCiAgICB9Cn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZQoKCi8qKgogKiBDaGVjayBpZiBhIGRhdGUgdW5pdCBmYWxscyB3aXRoaW4gYSBkYXRlIHJhbmdlIG9iamVjdC4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLndpdGhpblJhbmdlID0gZnVuY3Rpb24oIHJhbmdlLCBkYXRlVW5pdCApIHsKICAgIHJhbmdlID0gdGhpcy5jcmVhdGVSYW5nZShyYW5nZS5mcm9tLCByYW5nZS50bykKICAgIHJldHVybiBkYXRlVW5pdC5waWNrID49IHJhbmdlLmZyb20ucGljayAmJiBkYXRlVW5pdC5waWNrIDw9IHJhbmdlLnRvLnBpY2sKfQoKCi8qKgogKiBDaGVjayBpZiB0d28gZGF0ZSByYW5nZSBvYmplY3RzIG92ZXJsYXAuCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5vdmVybGFwUmFuZ2VzID0gZnVuY3Rpb24oIG9uZSwgdHdvICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMKCiAgICAvLyBDb252ZXJ0IHRoZSByYW5nZXMgaW50byBjb21wYXJhYmxlIGRhdGVzLgogICAgb25lID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIG9uZS5mcm9tLCBvbmUudG8gKQogICAgdHdvID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIHR3by5mcm9tLCB0d28udG8gKQoKICAgIHJldHVybiBjYWxlbmRhci53aXRoaW5SYW5nZSggb25lLCB0d28uZnJvbSApIHx8IGNhbGVuZGFyLndpdGhpblJhbmdlKCBvbmUsIHR3by50byApIHx8CiAgICAgICAgY2FsZW5kYXIud2l0aGluUmFuZ2UoIHR3bywgb25lLmZyb20gKSB8fCBjYWxlbmRhci53aXRoaW5SYW5nZSggdHdvLCBvbmUudG8gKQp9CgoKLyoqCiAqIEdldCB0aGUgZGF0ZSB0b2RheS4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHsKICAgIHZhbHVlID0gbmV3IERhdGUoKQogICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucmVsICkgewogICAgICAgIHZhbHVlLnNldERhdGUoIHZhbHVlLmdldERhdGUoKSArIG9wdGlvbnMucmVsICkKICAgIH0KICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggdmFsdWUsIG9wdGlvbnMgKQp9CgoKLyoqCiAqIE5hdmlnYXRlIHRvIG5leHQvcHJldiBtb250aC4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkgewoKICAgIHZhciB0YXJnZXREYXRlT2JqZWN0LAogICAgICAgIHRhcmdldFllYXIsCiAgICAgICAgdGFyZ2V0TW9udGgsCiAgICAgICAgdGFyZ2V0RGF0ZSwKICAgICAgICBpc1RhcmdldEFycmF5ID0gJC5pc0FycmF5KCB2YWx1ZSApLAogICAgICAgIGlzVGFyZ2V0T2JqZWN0ID0gJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApLAogICAgICAgIHZpZXdzZXRPYmplY3QgPSB0aGlzLml0ZW0udmlldy8qLAogICAgICAgIHNhZmV0eSA9IDEwMCovCgoKICAgIGlmICggaXNUYXJnZXRBcnJheSB8fCBpc1RhcmdldE9iamVjdCApIHsKCiAgICAgICAgaWYgKCBpc1RhcmdldE9iamVjdCApIHsKICAgICAgICAgICAgdGFyZ2V0WWVhciA9IHZhbHVlLnllYXIKICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2YWx1ZS5tb250aAogICAgICAgICAgICB0YXJnZXREYXRlID0gdmFsdWUuZGF0ZQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGFyZ2V0WWVhciA9ICt2YWx1ZVswXQogICAgICAgICAgICB0YXJnZXRNb250aCA9ICt2YWx1ZVsxXQogICAgICAgICAgICB0YXJnZXREYXRlID0gK3ZhbHVlWzJdCiAgICAgICAgfQoKICAgICAgICAvLyBJZiB3ZeKAmXJlIG5hdmlnYXRpbmcgbW9udGhzIGJ1dCB0aGUgdmlldyBpcyBpbiBhIGRpZmZlcmVudAogICAgICAgIC8vIG1vbnRoLCBuYXZpZ2F0ZSB0byB0aGUgdmlld+KAmXMgeWVhciBhbmQgbW9udGguCiAgICAgICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMubmF2ICYmIHZpZXdzZXRPYmplY3QgJiYgdmlld3NldE9iamVjdC5tb250aCAhPT0gdGFyZ2V0TW9udGggKSB7CiAgICAgICAgICAgIHRhcmdldFllYXIgPSB2aWV3c2V0T2JqZWN0LnllYXIKICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2aWV3c2V0T2JqZWN0Lm1vbnRoCiAgICAgICAgfQoKICAgICAgICAvLyBGaWd1cmUgb3V0IHRoZSBleHBlY3RlZCB0YXJnZXQgeWVhciBhbmQgbW9udGguCiAgICAgICAgdGFyZ2V0RGF0ZU9iamVjdCA9IG5ldyBEYXRlKCB0YXJnZXRZZWFyLCB0YXJnZXRNb250aCArICggb3B0aW9ucyAmJiBvcHRpb25zLm5hdiA/IG9wdGlvbnMubmF2IDogMCApLCAxICkKICAgICAgICB0YXJnZXRZZWFyID0gdGFyZ2V0RGF0ZU9iamVjdC5nZXRGdWxsWWVhcigpCiAgICAgICAgdGFyZ2V0TW9udGggPSB0YXJnZXREYXRlT2JqZWN0LmdldE1vbnRoKCkKCiAgICAgICAgLy8gSWYgdGhlIG1vbnRoIHdl4oCZcmUgZ29pbmcgdG8gZG9lc27igJl0IGhhdmUgZW5vdWdoIGRheXMsCiAgICAgICAgLy8ga2VlcCBkZWNyZWFzaW5nIHRoZSBkYXRlIHVudGlsIHdlIHJlYWNoIHRoZSBtb250aOKAmXMgbGFzdCBkYXRlLgogICAgICAgIHdoaWxlICggLypzYWZldHkgJiYqLyBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGgsIHRhcmdldERhdGUgKS5nZXRNb250aCgpICE9PSB0YXJnZXRNb250aCApIHsKICAgICAgICAgICAgdGFyZ2V0RGF0ZSAtPSAxCiAgICAgICAgICAgIC8qc2FmZXR5IC09IDEKICAgICAgICAgICAgaWYgKCAhc2FmZXR5ICkgewogICAgICAgICAgICAgICAgdGhyb3cgJ0ZlbGwgaW50byBhbiBpbmZpbml0ZSBsb29wIHdoaWxlIG5hdmlnYXRpbmcgdG8gJyArIG5ldyBEYXRlKCB0YXJnZXRZZWFyLCB0YXJnZXRNb250aCwgdGFyZ2V0RGF0ZSApICsgJy4nCiAgICAgICAgICAgIH0qLwogICAgICAgIH0KCiAgICAgICAgdmFsdWUgPSBbIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlIF0KICAgIH0KCiAgICByZXR1cm4gdmFsdWUKfSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlCgoKLyoqCiAqIE5vcm1hbGl6ZSBhIGRhdGUgYnkgc2V0dGluZyB0aGUgaG91cnMgdG8gbWlkbmlnaHQuCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiggdmFsdWUvKiwgb3B0aW9ucyovICkgewogICAgdmFsdWUuc2V0SG91cnMoIDAsIDAsIDAsIDAgKQogICAgcmV0dXJuIHZhbHVlCn0KCgovKioKICogTWVhc3VyZSB0aGUgcmFuZ2Ugb2YgZGF0ZXMuCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLyosIG9wdGlvbnMqLyApIHsKCiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzCgogICAgLy8gSWYgaXTigJlzIGFueXRoaW5nIGZhbHNlLXksIHJlbW92ZSB0aGUgbGltaXRzLgogICAgaWYgKCAhdmFsdWUgKSB7CiAgICAgICAgdmFsdWUgPSB0eXBlID09ICdtaW4nID8gLUluZmluaXR5IDogSW5maW5pdHkKICAgIH0KCiAgICAvLyBJZiBpdOKAmXMgYSBzdHJpbmcsIHBhcnNlIGl0LgogICAgZWxzZSBpZiAoIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyApIHsKICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLnBhcnNlKCB0eXBlLCB2YWx1ZSApCiAgICB9CgogICAgLy8gSWYgaXQncyBhbiBpbnRlZ2VyLCBnZXQgYSBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LgogICAgZWxzZSBpZiAoIF8uaXNJbnRlZ2VyKCB2YWx1ZSApICkgewogICAgICAgIHZhbHVlID0gY2FsZW5kYXIubm93KCB0eXBlLCB2YWx1ZSwgeyByZWw6IHZhbHVlIH0gKQogICAgfQoKICAgIHJldHVybiB2YWx1ZQp9IC8vL0RhdGVQaWNrZXIucHJvdG90eXBlLm1lYXN1cmUKCgovKioKICogQ3JlYXRlIGEgdmlld3NldCBvYmplY3QgYmFzZWQgb24gbmF2aWdhdGlvbi4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLnZpZXdzZXQgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdC8qLCBvcHRpb25zKi8gKSB7CiAgICByZXR1cm4gdGhpcy5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIDEgXSkKfQoKCi8qKgogKiBWYWxpZGF0ZSBhIGRhdGUgYXMgZW5hYmxlZCBhbmQgc2hpZnQgaWYgbmVlZGVkLgogKi8KRGF0ZVBpY2tlci5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdCwgb3B0aW9ucyApIHsKCiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLAoKICAgICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBkYXRlLgogICAgICAgIG9yaWdpbmFsRGF0ZU9iamVjdCA9IGRhdGVPYmplY3QsCgogICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFuIGludGVydmFsLgogICAgICAgIGludGVydmFsID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVydmFsID8gb3B0aW9ucy5pbnRlcnZhbCA6IDEsCgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBlbmFibGVkIGRhdGVzIGFyZSBpbnZlcnRlZC4KICAgICAgICBpc0ZsaXBwZWRCYXNlID0gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xLAoKICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFueSBlbmFibGVkIGRhdGVzIGFmdGVyL2JlZm9yZSBub3cuCiAgICAgICAgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCwgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0LAoKICAgICAgICAvLyBUaGUgbWluICYgbWF4IGxpbWl0cy4KICAgICAgICBtaW5MaW1pdE9iamVjdCA9IGNhbGVuZGFyLml0ZW0ubWluLAogICAgICAgIG1heExpbWl0T2JqZWN0ID0gY2FsZW5kYXIuaXRlbS5tYXgsCgogICAgICAgIC8vIENoZWNrIGlmIHdl4oCZdmUgcmVhY2hlZCB0aGUgbGltaXQgZHVyaW5nIHNoaWZ0aW5nLgogICAgICAgIHJlYWNoZWRNaW4sIHJlYWNoZWRNYXgsCgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBpcyBpbnZlcnRlZCBhbmQgYXQgbGVhc3Qgb25lIHdlZWtkYXkgaXMgZW5hYmxlZC4KICAgICAgICBoYXNFbmFibGVkV2Vla2RheXMgPSBpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5maWx0ZXIoIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCiAgICAgICAgICAgIC8vIElmIHRoZXJl4oCZcyBhIGRhdGUsIGNoZWNrIHdoZXJlIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQuCiAgICAgICAgICAgIGlmICggJC5pc0FycmF5KCB2YWx1ZSApICkgewogICAgICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gY2FsZW5kYXIuY3JlYXRlKCB2YWx1ZSApLnBpY2sKICAgICAgICAgICAgICAgIGlmICggZGF0ZVRpbWUgPCBkYXRlT2JqZWN0LnBpY2sgKSBoYXNFbmFibGVkQmVmb3JlVGFyZ2V0ID0gdHJ1ZQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIGRhdGVUaW1lID4gZGF0ZU9iamVjdC5waWNrICkgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0ID0gdHJ1ZQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBSZXR1cm4gb25seSBpbnRlZ2VycyBmb3IgZW5hYmxlZCB3ZWVrZGF5cy4KICAgICAgICAgICAgcmV0dXJuIF8uaXNJbnRlZ2VyKCB2YWx1ZSApCiAgICAgICAgfSkubGVuZ3RoLyosCgogICAgICAgIHNhZmV0eSA9IDEwMCovCgoKCiAgICAvLyBDYXNlcyB0byB2YWxpZGF0ZSBmb3I6CiAgICAvLyBbMV0gTm90IGludmVydGVkIGFuZCBkYXRlIGRpc2FibGVkLgogICAgLy8gWzJdIEludmVydGVkIGFuZCBzb21lIGRhdGVzIGVuYWJsZWQuCiAgICAvLyBbM10gTm90IGludmVydGVkIGFuZCBvdXQgb2YgcmFuZ2UuCiAgICAvLwogICAgLy8gQ2FzZXMgdG8gKipub3QqKiB2YWxpZGF0ZSBmb3I6CiAgICAvLyDigKIgTmF2aWdhdGluZyBtb250aHMuCiAgICAvLyDigKIgTm90IGludmVydGVkIGFuZCBkYXRlIGVuYWJsZWQuCiAgICAvLyDigKIgSW52ZXJ0ZWQgYW5kIGFsbCBkYXRlcyBkaXNhYmxlZC4KICAgIC8vIOKAoiAuLmFuZCBhbnl0aGluZyBlbHNlLgogICAgaWYgKCAhb3B0aW9ucyB8fCAhb3B0aW9ucy5uYXYgKSBpZiAoCiAgICAgICAgLyogMSAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB8fAogICAgICAgIC8qIDIgKi8gKCBpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgJiYgKCBoYXNFbmFibGVkV2Vla2RheXMgfHwgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCB8fCBoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgKSApIHx8CiAgICAgICAgLyogMyAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIChkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayB8fCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljaykgKQogICAgKSB7CgoKICAgICAgICAvLyBXaGVuIGludmVydGVkLCBmbGlwIHRoZSBkaXJlY3Rpb24gaWYgdGhlcmUgYXJlbuKAmXQgYW55IGVuYWJsZWQgd2Vla2RheXMKICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIG5vIGVuYWJsZWQgZGF0ZXMgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgaW50ZXJ2YWwuCiAgICAgICAgaWYgKCBpc0ZsaXBwZWRCYXNlICYmICFoYXNFbmFibGVkV2Vla2RheXMgJiYgKCAoICFoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgJiYgaW50ZXJ2YWwgPiAwICkgfHwgKCAhaGFzRW5hYmxlZEJlZm9yZVRhcmdldCAmJiBpbnRlcnZhbCA8IDAgKSApICkgewogICAgICAgICAgICBpbnRlcnZhbCAqPSAtMQogICAgICAgIH0KCgogICAgICAgIC8vIEtlZXAgbG9vcGluZyB1bnRpbCB3ZSByZWFjaCBhbiBlbmFibGVkIGRhdGUuCiAgICAgICAgd2hpbGUgKCAvKnNhZmV0eSAmJiovIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB7CgogICAgICAgICAgICAvKnNhZmV0eSAtPSAxCiAgICAgICAgICAgIGlmICggIXNhZmV0eSApIHsKICAgICAgICAgICAgICAgIHRocm93ICdGZWxsIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGlsZSB2YWxpZGF0aW5nICcgKyBkYXRlT2JqZWN0Lm9iaiArICcuJwogICAgICAgICAgICB9Ki8KCgogICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIGxvb3BlZCBpbnRvIHRoZSBuZXh0L3ByZXYgbW9udGggd2l0aCBhIGxhcmdlIGludGVydmFsLCByZXR1cm4gdG8gdGhlIG9yaWdpbmFsIGRhdGUgYW5kIGZsYXR0ZW4gdGhlIGludGVydmFsLgogICAgICAgICAgICBpZiAoIE1hdGguYWJzKCBpbnRlcnZhbCApID4gMSAmJiAoIGRhdGVPYmplY3QubW9udGggPCBvcmlnaW5hbERhdGVPYmplY3QubW9udGggfHwgZGF0ZU9iamVjdC5tb250aCA+IG9yaWdpbmFsRGF0ZU9iamVjdC5tb250aCApICkgewogICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG9yaWdpbmFsRGF0ZU9iamVjdAogICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBpbnRlcnZhbCA+IDAgPyAxIDogLTEKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIC8vIElmIHdl4oCZdmUgcmVhY2hlZCB0aGUgbWluL21heCBsaW1pdCwgcmV2ZXJzZSB0aGUgZGlyZWN0aW9uLCBmbGF0dGVuIHRoZSBpbnRlcnZhbCBhbmQgc2V0IGl0IHRvIHRoZSBsaW1pdC4KICAgICAgICAgICAgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayApIHsKICAgICAgICAgICAgICAgIHJlYWNoZWRNaW4gPSB0cnVlCiAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IDEKICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoWwogICAgICAgICAgICAgICAgICAgIG1pbkxpbWl0T2JqZWN0LnllYXIsCiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QubW9udGgsCiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QuZGF0ZSArIChkYXRlT2JqZWN0LnBpY2sgPT09IG1pbkxpbWl0T2JqZWN0LnBpY2sgPyAwIDogLTEpCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljayApIHsKICAgICAgICAgICAgICAgIHJlYWNoZWRNYXggPSB0cnVlCiAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IC0xCiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gY2FsZW5kYXIuY3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICBtYXhMaW1pdE9iamVjdC55ZWFyLAogICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0Lm1vbnRoLAogICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0LmRhdGUgKyAoZGF0ZU9iamVjdC5waWNrID09PSBtYXhMaW1pdE9iamVjdC5waWNrID8gMCA6IDEpCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICB9CgoKICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSByZWFjaGVkIGJvdGggbGltaXRzLCBqdXN0IGJyZWFrIG91dCBvZiB0aGUgbG9vcC4KICAgICAgICAgICAgaWYgKCByZWFjaGVkTWluICYmIHJlYWNoZWRNYXggKSB7CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CgoKICAgICAgICAgICAgLy8gRmluYWxseSwgY3JlYXRlIHRoZSBzaGlmdGVkIGRhdGUgdXNpbmcgdGhlIGludGVydmFsIGFuZCBrZWVwIGxvb3BpbmcuCiAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIGRhdGVPYmplY3QuZGF0ZSArIGludGVydmFsIF0pCiAgICAgICAgfQoKICAgIH0gLy9lbmRpZgoKCiAgICAvLyBSZXR1cm4gdGhlIGRhdGUgb2JqZWN0IHNldHRsZWQgb24uCiAgICByZXR1cm4gZGF0ZU9iamVjdAp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUudmFsaWRhdGUKCgovKioKICogQ2hlY2sgaWYgYSBkYXRlIGlzIGRpc2FibGVkLgogKi8KRGF0ZVBpY2tlci5wcm90b3R5cGUuZGlzYWJsZWQgPSBmdW5jdGlvbiggZGF0ZVRvVmVyaWZ5ICkgewoKICAgIHZhcgogICAgICAgIGNhbGVuZGFyID0gdGhpcywKCiAgICAgICAgLy8gRmlsdGVyIHRocm91Z2ggdGhlIGRpc2FibGVkIGRhdGVzIHRvIGNoZWNrIGlmIHRoaXMgaXMgb25lLgogICAgICAgIGlzRGlzYWJsZWRNYXRjaCA9IGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5maWx0ZXIoIGZ1bmN0aW9uKCBkYXRlVG9EaXNhYmxlICkgewoKICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGUgaXMgYSBudW1iZXIsIG1hdGNoIHRoZSB3ZWVrZGF5IHdpdGggMGluZGV4IGFuZCBgZmlyc3REYXlgIGNoZWNrLgogICAgICAgICAgICBpZiAoIF8uaXNJbnRlZ2VyKCBkYXRlVG9EaXNhYmxlICkgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LmRheSA9PT0gKCBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IGRhdGVUb0Rpc2FibGUgOiBkYXRlVG9EaXNhYmxlIC0gMSApICUgNwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiBpdOKAmXMgYW4gYXJyYXkgb3IgYSBuYXRpdmUgSlMgZGF0ZSwgY3JlYXRlIGFuZCBtYXRjaCB0aGUgZXhhY3QgZGF0ZS4KICAgICAgICAgICAgaWYgKCAkLmlzQXJyYXkoIGRhdGVUb0Rpc2FibGUgKSB8fCBfLmlzRGF0ZSggZGF0ZVRvRGlzYWJsZSApICkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVUb1ZlcmlmeS5waWNrID09PSBjYWxlbmRhci5jcmVhdGUoIGRhdGVUb0Rpc2FibGUgKS5waWNrCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbiBvYmplY3QsIG1hdGNoIGEgZGF0ZSB3aXRoaW4gdGhlIOKAnGZyb23igJ0gYW5kIOKAnHRv4oCdIHJhbmdlLgogICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLndpdGhpblJhbmdlKCBkYXRlVG9EaXNhYmxlLCBkYXRlVG9WZXJpZnkgKQogICAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAvLyBJZiB0aGlzIGRhdGUgbWF0Y2hlcyBhIGRpc2FibGVkIGRhdGUsIGNvbmZpcm0gaXTigJlzIG5vdCBpbnZlcnRlZC4KICAgIGlzRGlzYWJsZWRNYXRjaCA9IGlzRGlzYWJsZWRNYXRjaC5sZW5ndGggJiYgIWlzRGlzYWJsZWRNYXRjaC5maWx0ZXIoZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7CiAgICAgICAgcmV0dXJuICQuaXNBcnJheSggZGF0ZVRvRGlzYWJsZSApICYmIGRhdGVUb0Rpc2FibGVbM10gPT0gJ2ludmVydGVkJyB8fAogICAgICAgICAgICAkLmlzUGxhaW5PYmplY3QoIGRhdGVUb0Rpc2FibGUgKSAmJiBkYXRlVG9EaXNhYmxlLmludmVydGVkCiAgICB9KS5sZW5ndGgKCiAgICAvLyBDaGVjayB0aGUgY2FsZW5kYXIg4oCcZW5hYmxlZOKAnSBmbGFnIGFuZCByZXNwZWN0aXZlbHkgZmxpcCB0aGUKICAgIC8vIGRpc2FibGVkIHN0YXRlLiBUaGVuIGFsc28gY2hlY2sgaWYgaXTigJlzIGJleW9uZCB0aGUgbWluL21heCBsaW1pdHMuCiAgICByZXR1cm4gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xID8gIWlzRGlzYWJsZWRNYXRjaCA6IGlzRGlzYWJsZWRNYXRjaCB8fAogICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrIDwgY2FsZW5kYXIuaXRlbS5taW4ucGljayB8fAogICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrID4gY2FsZW5kYXIuaXRlbS5tYXgucGljawoKfSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkCgoKLyoqCiAqIFBhcnNlIGEgc3RyaW5nIGludG8gYSB1c2FibGUgdHlwZS4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMsCiAgICAgICAgcGFyc2luZ09iamVjdCA9IHt9CgogICAgLy8gSWYgaXTigJlzIGFscmVhZHkgcGFyc2VkLCB3ZeKAmXJlIGdvb2QuCiAgICBpZiAoICF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycgKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICB9CgogICAgLy8gV2UgbmVlZCBhIGAuZm9ybWF0YCB0byBwYXJzZSB0aGUgdmFsdWUgd2l0aC4KICAgIGlmICggISggb3B0aW9ucyAmJiBvcHRpb25zLmZvcm1hdCApICkgewogICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9CiAgICAgICAgb3B0aW9ucy5mb3JtYXQgPSBjYWxlbmRhci5zZXR0aW5ncy5mb3JtYXQKICAgIH0KCiAgICAvLyBDb252ZXJ0IHRoZSBmb3JtYXQgaW50byBhbiBhcnJheSBhbmQgdGhlbiBtYXAgdGhyb3VnaCBpdC4KICAgIGNhbGVuZGFyLmZvcm1hdHMudG9BcnJheSggb3B0aW9ucy5mb3JtYXQgKS5tYXAoIGZ1bmN0aW9uKCBsYWJlbCApIHsKCiAgICAgICAgdmFyCiAgICAgICAgICAgIC8vIEdyYWIgdGhlIGZvcm1hdHRpbmcgbGFiZWwuCiAgICAgICAgICAgIGZvcm1hdHRpbmdMYWJlbCA9IGNhbGVuZGFyLmZvcm1hdHNbIGxhYmVsIF0sCgogICAgICAgICAgICAvLyBUaGUgZm9ybWF0IGxlbmd0aCBpcyBmcm9tIHRoZSBmb3JtYXR0aW5nIGxhYmVsIGZ1bmN0aW9uIG9yIHRoZQogICAgICAgICAgICAvLyBsYWJlbCBsZW5ndGggd2l0aG91dCB0aGUgZXNjYXBpbmcgZXhjbGFtYXRpb24gKCEpIG1hcmsuCiAgICAgICAgICAgIGZvcm1hdExlbmd0aCA9IGZvcm1hdHRpbmdMYWJlbCA/IF8udHJpZ2dlciggZm9ybWF0dGluZ0xhYmVsLCBjYWxlbmRhciwgWyB2YWx1ZSwgcGFyc2luZ09iamVjdCBdICkgOiBsYWJlbC5yZXBsYWNlKCAvXiEvLCAnJyApLmxlbmd0aAoKICAgICAgICAvLyBJZiB0aGVyZSdzIGEgZm9ybWF0IGxhYmVsLCBzcGxpdCB0aGUgdmFsdWUgdXAgdG8gdGhlIGZvcm1hdCBsZW5ndGguCiAgICAgICAgLy8gVGhlbiBhZGQgaXQgdG8gdGhlIHBhcnNpbmcgb2JqZWN0IHdpdGggYXBwcm9wcmlhdGUgbGFiZWwuCiAgICAgICAgaWYgKCBmb3JtYXR0aW5nTGFiZWwgKSB7CiAgICAgICAgICAgIHBhcnNpbmdPYmplY3RbIGxhYmVsIF0gPSB2YWx1ZS5zdWJzdHIoIDAsIGZvcm1hdExlbmd0aCApCiAgICAgICAgfQoKICAgICAgICAvLyBVcGRhdGUgdGhlIHZhbHVlIGFzIHRoZSBzdWJzdHJpbmcgZnJvbSBmb3JtYXQgbGVuZ3RoIHRvIGVuZC4KICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0ciggZm9ybWF0TGVuZ3RoICkKICAgIH0pCgogICAgLy8gQ29tcGVuc2F0ZSBmb3IgbW9udGggMGluZGV4LgogICAgcmV0dXJuIFsKICAgICAgICBwYXJzaW5nT2JqZWN0Lnl5eXkgfHwgcGFyc2luZ09iamVjdC55eSwKICAgICAgICArKCBwYXJzaW5nT2JqZWN0Lm1tIHx8IHBhcnNpbmdPYmplY3QubSApIC0gMSwKICAgICAgICBwYXJzaW5nT2JqZWN0LmRkIHx8IHBhcnNpbmdPYmplY3QuZAogICAgXQp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2UKCgovKioKICogVmFyaW91cyBmb3JtYXRzIHRvIGRpc3BsYXkgdGhlIG9iamVjdCBpbi4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHMgPSAoZnVuY3Rpb24oKSB7CgogICAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQgaW4gYSBjb2xsZWN0aW9uLgogICAgZnVuY3Rpb24gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSB7CgogICAgICAgIC8vIEdyYWIgdGhlIGZpcnN0IHdvcmQgZnJvbSB0aGUgc3RyaW5nLgogICAgICAgIHZhciB3b3JkID0gc3RyaW5nLm1hdGNoKCAvXHcrLyApWyAwIF0KCiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBtb250aCBpbmRleCwgYWRkIGl0IHRvIHRoZSBkYXRlIG9iamVjdAogICAgICAgIGlmICggIWRhdGVPYmplY3QubW0gJiYgIWRhdGVPYmplY3QubSApIHsKICAgICAgICAgICAgZGF0ZU9iamVjdC5tID0gY29sbGVjdGlvbi5pbmRleE9mKCB3b3JkICkgKyAxCiAgICAgICAgfQoKICAgICAgICAvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgd29yZC4KICAgICAgICByZXR1cm4gd29yZC5sZW5ndGgKICAgIH0KCiAgICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIHN0cmluZy4KICAgIGZ1bmN0aW9uIGdldEZpcnN0V29yZExlbmd0aCggc3RyaW5nICkgewogICAgICAgIHJldHVybiBzdHJpbmcubWF0Y2goIC9cdysvIClbIDAgXS5sZW5ndGgKICAgIH0KCiAgICByZXR1cm4gewoKICAgICAgICBkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkgewoKICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBkaWdpdHMgbGVuZ3RoLgogICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBkYXRlLgogICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gXy5kaWdpdHMoIHN0cmluZyApIDogZGF0ZU9iamVjdC5kYXRlCiAgICAgICAgfSwKICAgICAgICBkZDogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgMi4KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgZGF0ZSB3aXRoIGEgbGVhZGluZyB6ZXJvLgogICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6IF8ubGVhZCggZGF0ZU9iamVjdC5kYXRlICkKICAgICAgICB9LAogICAgICAgIGRkZDogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQuCiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNob3J0IHNlbGVjdGVkIHdlZWtkYXkuCiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIDogdGhpcy5zZXR0aW5ncy53ZWVrZGF5c1Nob3J0WyBkYXRlT2JqZWN0LmRheSBdCiAgICAgICAgfSwKICAgICAgICBkZGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkgewoKICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiBnZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZC4KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgZnVsbCBzZWxlY3RlZCB3ZWVrZGF5LgogICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gZ2V0Rmlyc3RXb3JkTGVuZ3RoKCBzdHJpbmcgKSA6IHRoaXMuc2V0dGluZ3Mud2Vla2RheXNGdWxsWyBkYXRlT2JqZWN0LmRheSBdCiAgICAgICAgfSwKICAgICAgICBtOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkgewoKICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiBnZXQgdGhlIGxlbmd0aCBvZiB0aGUgZGlnaXRzCiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIHdpdGggMGluZGV4IGNvbXBlbnNhdGlvbi4KICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IF8uZGlnaXRzKCBzdHJpbmcgKSA6IGRhdGVPYmplY3QubW9udGggKyAxCiAgICAgICAgfSwKICAgICAgICBtbTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgMi4KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgbW9udGggd2l0aCAwaW5kZXggYW5kIGxlYWRpbmcgemVyby4KICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDIgOiBfLmxlYWQoIGRhdGVPYmplY3QubW9udGggKyAxICkKICAgICAgICB9LAogICAgICAgIG1tbTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5zZXR0aW5ncy5tb250aHNTaG9ydAoKICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgZ2V0IGxlbmd0aCBvZiB0aGUgcmVsZXZhbnQgbW9udGggZnJvbSB0aGUgc2hvcnQKICAgICAgICAgICAgLy8gbW9udGhzIGNvbGxlY3Rpb24uIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIGZyb20gdGhhdCBjb2xsZWN0aW9uLgogICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSA6IGNvbGxlY3Rpb25bIGRhdGVPYmplY3QubW9udGggXQogICAgICAgIH0sCiAgICAgICAgbW1tbTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5zZXR0aW5ncy5tb250aHNGdWxsCgogICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCBnZXQgbGVuZ3RoIG9mIHRoZSByZWxldmFudCBtb250aCBmcm9tIHRoZSBmdWxsCiAgICAgICAgICAgIC8vIG1vbnRocyBjb2xsZWN0aW9uLiBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCBmcm9tIHRoYXQgY29sbGVjdGlvbi4KICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IGdldFdvcmRMZW5ndGhGcm9tQ29sbGVjdGlvbiggc3RyaW5nLCBjb2xsZWN0aW9uLCBkYXRlT2JqZWN0ICkgOiBjb2xsZWN0aW9uWyBkYXRlT2JqZWN0Lm1vbnRoIF0KICAgICAgICB9LAogICAgICAgIHl5OiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkgewoKICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyAyLgogICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCB5ZWFyIGJ5IHNsaWNpbmcgb3V0IHRoZSBmaXJzdCAyIGRpZ2l0cy4KICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDIgOiAoICcnICsgZGF0ZU9iamVjdC55ZWFyICkuc2xpY2UoIDIgKQogICAgICAgIH0sCiAgICAgICAgeXl5eTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgNC4KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgeWVhci4KICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDQgOiBkYXRlT2JqZWN0LnllYXIKICAgICAgICB9LAoKICAgICAgICAvLyBDcmVhdGUgYW4gYXJyYXkgYnkgc3BsaXR0aW5nIHRoZSBmb3JtYXR0aW5nIHN0cmluZyBwYXNzZWQuCiAgICAgICAgdG9BcnJheTogZnVuY3Rpb24oIGZvcm1hdFN0cmluZyApIHsgcmV0dXJuIGZvcm1hdFN0cmluZy5zcGxpdCggLyhkezEsNH18bXsxLDR9fHl7NH18eXl8IS4pL2cgKSB9LAoKICAgICAgICAvLyBGb3JtYXQgYW4gb2JqZWN0IGludG8gYSBzdHJpbmcgdXNpbmcgdGhlIGZvcm1hdHRpbmcgb3B0aW9ucy4KICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKCBmb3JtYXRTdHJpbmcsIGl0ZW1PYmplY3QgKSB7CiAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IHRoaXMKICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmZvcm1hdHMudG9BcnJheSggZm9ybWF0U3RyaW5nICkubWFwKCBmdW5jdGlvbiggbGFiZWwgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gXy50cmlnZ2VyKCBjYWxlbmRhci5mb3JtYXRzWyBsYWJlbCBdLCBjYWxlbmRhciwgWyAwLCBpdGVtT2JqZWN0IF0gKSB8fCBsYWJlbC5yZXBsYWNlKCAvXiEvLCAnJyApCiAgICAgICAgICAgIH0pLmpvaW4oICcnICkKICAgICAgICB9CiAgICB9Cn0pKCkgLy9EYXRlUGlja2VyLnByb3RvdHlwZS5mb3JtYXRzCgoKCgovKioKICogQ2hlY2sgaWYgdHdvIGRhdGUgdW5pdHMgYXJlIHRoZSBleGFjdC4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmlzRGF0ZUV4YWN0ID0gZnVuY3Rpb24oIG9uZSwgdHdvICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMKCiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHdlZWtkYXlzLCBkbyBhIGRpcmVjdCBjb21wYXJpc29uLgogICAgaWYgKAogICAgICAgICggXy5pc0ludGVnZXIoIG9uZSApICYmIF8uaXNJbnRlZ2VyKCB0d28gKSApIHx8CiAgICAgICAgKCB0eXBlb2Ygb25lID09ICdib29sZWFuJyAmJiB0eXBlb2YgdHdvID09ICdib29sZWFuJyApCiAgICAgKSB7CiAgICAgICAgcmV0dXJuIG9uZSA9PT0gdHdvCiAgICB9CgogICAgLy8gV2hlbiB3ZeKAmXJlIHdvcmtpbmcgd2l0aCBkYXRlIHJlcHJlc2VudGF0aW9ucywgY29tcGFyZSB0aGUg4oCccGlja+KAnSB2YWx1ZS4KICAgIGlmICgKICAgICAgICAoIF8uaXNEYXRlKCBvbmUgKSB8fCAkLmlzQXJyYXkoIG9uZSApICkgJiYKICAgICAgICAoIF8uaXNEYXRlKCB0d28gKSB8fCAkLmlzQXJyYXkoIHR3byApICkKICAgICkgewogICAgICAgIHJldHVybiBjYWxlbmRhci5jcmVhdGUoIG9uZSApLnBpY2sgPT09IGNhbGVuZGFyLmNyZWF0ZSggdHdvICkucGljawogICAgfQoKICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggcmFuZ2Ugb2JqZWN0cywgY29tcGFyZSB0aGUg4oCcZnJvbeKAnSBhbmQg4oCcdG/igJ0uCiAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggb25lICkgJiYgJC5pc1BsYWluT2JqZWN0KCB0d28gKSApIHsKICAgICAgICByZXR1cm4gY2FsZW5kYXIuaXNEYXRlRXhhY3QoIG9uZS5mcm9tLCB0d28uZnJvbSApICYmIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBvbmUudG8sIHR3by50byApCiAgICB9CgogICAgcmV0dXJuIGZhbHNlCn0KCgovKioKICogQ2hlY2sgaWYgdHdvIGRhdGUgdW5pdHMgb3ZlcmxhcC4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmlzRGF0ZU92ZXJsYXAgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7CgogICAgdmFyIGNhbGVuZGFyID0gdGhpcywKICAgICAgICBmaXJzdERheSA9IGNhbGVuZGFyLnNldHRpbmdzLmZpcnN0RGF5ID8gMSA6IDAKCiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGEgd2Vla2RheSBpbmRleCwgY29tcGFyZSB0aGUgZGF5cy4KICAgIGlmICggXy5pc0ludGVnZXIoIG9uZSApICYmICggXy5pc0RhdGUoIHR3byApIHx8ICQuaXNBcnJheSggdHdvICkgKSApIHsKICAgICAgICBvbmUgPSBvbmUgJSA3ICsgZmlyc3REYXkKICAgICAgICByZXR1cm4gb25lID09PSBjYWxlbmRhci5jcmVhdGUoIHR3byApLmRheSArIDEKICAgIH0KICAgIGlmICggXy5pc0ludGVnZXIoIHR3byApICYmICggXy5pc0RhdGUoIG9uZSApIHx8ICQuaXNBcnJheSggb25lICkgKSApIHsKICAgICAgICB0d28gPSB0d28gJSA3ICsgZmlyc3REYXkKICAgICAgICByZXR1cm4gdHdvID09PSBjYWxlbmRhci5jcmVhdGUoIG9uZSApLmRheSArIDEKICAgIH0KCiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHJhbmdlIG9iamVjdHMsIGNoZWNrIGlmIHRoZSByYW5nZXMgb3ZlcmxhcC4KICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvbmUgKSAmJiAkLmlzUGxhaW5PYmplY3QoIHR3byApICkgewogICAgICAgIHJldHVybiBjYWxlbmRhci5vdmVybGFwUmFuZ2VzKCBvbmUsIHR3byApCiAgICB9CgogICAgcmV0dXJuIGZhbHNlCn0KCgovKioKICogRmxpcCB0aGUg4oCcZW5hYmxlZOKAnSBzdGF0ZS4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmZsaXBFbmFibGUgPSBmdW5jdGlvbih2YWwpIHsKICAgIHZhciBpdGVtT2JqZWN0ID0gdGhpcy5pdGVtCiAgICBpdGVtT2JqZWN0LmVuYWJsZSA9IHZhbCB8fCAoaXRlbU9iamVjdC5lbmFibGUgPT0gLTEgPyAxIDogLTEpCn0KCgovKioKICogTWFyayBhIGNvbGxlY3Rpb24gb2YgZGF0ZXMgYXMg4oCcZGlzYWJsZWTigJ0uCiAqLwpEYXRlUGlja2VyLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVzVG9EaXNhYmxlICkgewoKICAgIHZhciBjYWxlbmRhciA9IHRoaXMsCiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5zbGljZSgwKQoKCiAgICAvLyBJZiB3ZeKAmXJlIGZsaXBwaW5nLCB0aGF04oCZcyBhbGwgd2UgbmVlZCB0byBkby4KICAgIGlmICggZGF0ZXNUb0Rpc2FibGUgPT0gJ2ZsaXAnICkgewogICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoKQogICAgfQoKICAgIGVsc2UgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PT0gZmFsc2UgKSB7CiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgxKQogICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXQogICAgfQoKICAgIGVsc2UgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PT0gdHJ1ZSApIHsKICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKQogICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXQogICAgfQoKICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBkYXRlcyB0byBkaXNhYmxlLgogICAgZWxzZSB7CgogICAgICAgIGRhdGVzVG9EaXNhYmxlLm1hcChmdW5jdGlvbiggdW5pdFRvRGlzYWJsZSApIHsKCiAgICAgICAgICAgIHZhciBtYXRjaEZvdW5kCgogICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgZGlzYWJsZWQgaXRlbXMsIGNoZWNrIGZvciBtYXRjaGVzLgogICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgbWF0Y2hlZCwgaW1tZWRpYXRlbHkgYnJlYWsgb3V0LgogICAgICAgICAgICBmb3IgKCB2YXIgaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXMubGVuZ3RoOyBpbmRleCArPSAxICkgewogICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggdW5pdFRvRGlzYWJsZSwgZGlzYWJsZWRJdGVtc1tpbmRleF0gKSApIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kLCBhZGQgdGhlIHZhbGlkYXRlZCB1bml0IHRvIHRoZSBjb2xsZWN0aW9uLgogICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kICkgewogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIF8uaXNJbnRlZ2VyKCB1bml0VG9EaXNhYmxlICkgfHwKICAgICAgICAgICAgICAgICAgICBfLmlzRGF0ZSggdW5pdFRvRGlzYWJsZSApIHx8CiAgICAgICAgICAgICAgICAgICAgJC5pc0FycmF5KCB1bml0VG9EaXNhYmxlICkgfHwKICAgICAgICAgICAgICAgICAgICAoICQuaXNQbGFpbk9iamVjdCggdW5pdFRvRGlzYWJsZSApICYmIHVuaXRUb0Rpc2FibGUuZnJvbSAmJiB1bml0VG9EaXNhYmxlLnRvICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXMucHVzaCggdW5pdFRvRGlzYWJsZSApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfQoKICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBjb2xsZWN0aW9uLgogICAgcmV0dXJuIGRpc2FibGVkSXRlbXMKfSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmRlYWN0aXZhdGUKCgovKioKICogTWFyayBhIGNvbGxlY3Rpb24gb2YgZGF0ZXMgYXMg4oCcZW5hYmxlZOKAnS4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVzVG9FbmFibGUgKSB7CgogICAgdmFyIGNhbGVuZGFyID0gdGhpcywKICAgICAgICBkaXNhYmxlZEl0ZW1zID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLAogICAgICAgIGRpc2FibGVkSXRlbXNDb3VudCA9IGRpc2FibGVkSXRlbXMubGVuZ3RoCgogICAgLy8gSWYgd2XigJlyZSBmbGlwcGluZywgdGhhdOKAmXMgYWxsIHdlIG5lZWQgdG8gZG8uCiAgICBpZiAoIGRhdGVzVG9FbmFibGUgPT0gJ2ZsaXAnICkgewogICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoKQogICAgfQoKICAgIGVsc2UgaWYgKCBkYXRlc1RvRW5hYmxlID09PSB0cnVlICkgewogICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoMSkKICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW10KICAgIH0KCiAgICBlbHNlIGlmICggZGF0ZXNUb0VuYWJsZSA9PT0gZmFsc2UgKSB7CiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgtMSkKICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW10KICAgIH0KCiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgZGlzYWJsZWQgZGF0ZXMuCiAgICBlbHNlIHsKCiAgICAgICAgZGF0ZXNUb0VuYWJsZS5tYXAoZnVuY3Rpb24oIHVuaXRUb0VuYWJsZSApIHsKCiAgICAgICAgICAgIHZhciBtYXRjaEZvdW5kLAogICAgICAgICAgICAgICAgZGlzYWJsZWRVbml0LAogICAgICAgICAgICAgICAgaW5kZXgsCiAgICAgICAgICAgICAgICBpc0V4YWN0UmFuZ2UKCiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGRpc2FibGVkIGl0ZW1zIGFuZCB0cnkgdG8gZmluZCBhIG1hdGNoLgogICAgICAgICAgICBmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgZGlzYWJsZWRJdGVtc0NvdW50OyBpbmRleCArPSAxICkgewoKICAgICAgICAgICAgICAgIGRpc2FibGVkVW5pdCA9IGRpc2FibGVkSXRlbXNbaW5kZXhdCgogICAgICAgICAgICAgICAgLy8gV2hlbiBhbiBleGFjdCBtYXRjaCBpcyBmb3VuZCwgcmVtb3ZlIGl0IGZyb20gdGhlIGNvbGxlY3Rpb24uCiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBkaXNhYmxlZFVuaXQsIHVuaXRUb0VuYWJsZSApICkgewogICAgICAgICAgICAgICAgICAgIG1hdGNoRm91bmQgPSBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGwKICAgICAgICAgICAgICAgICAgICBpc0V4YWN0UmFuZ2UgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBXaGVuIGFuIG92ZXJsYXBwZWQgbWF0Y2ggaXMgZm91bmQsIGFkZCB0aGUg4oCcaW52ZXJ0ZWTigJ0gc3RhdGUgdG8gaXQuCiAgICAgICAgICAgICAgICBlbHNlIGlmICggY2FsZW5kYXIuaXNEYXRlT3ZlcmxhcCggZGlzYWJsZWRVbml0LCB1bml0VG9FbmFibGUgKSApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggdW5pdFRvRW5hYmxlICkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUb0VuYWJsZS5pbnZlcnRlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IHVuaXRUb0VuYWJsZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggJC5pc0FycmF5KCB1bml0VG9FbmFibGUgKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IHVuaXRUb0VuYWJsZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kWzNdICkgbWF0Y2hGb3VuZC5wdXNoKCAnaW52ZXJ0ZWQnICkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIF8uaXNEYXRlKCB1bml0VG9FbmFibGUgKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IFsgdW5pdFRvRW5hYmxlLmdldEZ1bGxZZWFyKCksIHVuaXRUb0VuYWJsZS5nZXRNb250aCgpLCB1bml0VG9FbmFibGUuZ2V0RGF0ZSgpLCAnaW52ZXJ0ZWQnIF0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gSWYgYSBtYXRjaCB3YXMgZm91bmQsIHJlbW92ZSBhIHByZXZpb3VzIGR1cGxpY2F0ZSBlbnRyeS4KICAgICAgICAgICAgaWYgKCBtYXRjaEZvdW5kICkgZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXNDb3VudDsgaW5kZXggKz0gMSApIHsKICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlRXhhY3QoIGRpc2FibGVkSXRlbXNbaW5kZXhdLCB1bml0VG9FbmFibGUgKSApIHsKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGwKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJbiB0aGUgZXZlbnQgdGhhdCB3ZeKAmXJlIGRlYWxpbmcgd2l0aCBhbiBleGFjdCByYW5nZSBvZiBkYXRlcywKICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlIGFyZSBubyDigJxpbnZlcnRlZOKAnSBkYXRlcyBiZWNhdXNlIG9mIGl0LgogICAgICAgICAgICBpZiAoIGlzRXhhY3RSYW5nZSApIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7CiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZU92ZXJsYXAoIGRpc2FibGVkSXRlbXNbaW5kZXhdLCB1bml0VG9FbmFibGUgKSApIHsKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGwKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgc3RpbGwgbWF0Y2hlZCwgYWRkIGl0IGludG8gdGhlIGNvbGxlY3Rpb24uCiAgICAgICAgICAgIGlmICggbWF0Y2hGb3VuZCApIHsKICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXMucHVzaCggbWF0Y2hGb3VuZCApCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfQoKICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBjb2xsZWN0aW9uLgogICAgcmV0dXJuIGRpc2FibGVkSXRlbXMuZmlsdGVyKGZ1bmN0aW9uKCB2YWwgKSB7IHJldHVybiB2YWwgIT0gbnVsbCB9KQp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuYWN0aXZhdGUKCgovKioKICogQ3JlYXRlIGEgc3RyaW5nIGZvciB0aGUgbm9kZXMgaW4gdGhlIHBpY2tlci4KICovCkRhdGVQaWNrZXIucHJvdG90eXBlLm5vZGVzID0gZnVuY3Rpb24oIGlzT3BlbiApIHsKCiAgICB2YXIKICAgICAgICBjYWxlbmRhciA9IHRoaXMsCiAgICAgICAgc2V0dGluZ3MgPSBjYWxlbmRhci5zZXR0aW5ncywKICAgICAgICBjYWxlbmRhckl0ZW0gPSBjYWxlbmRhci5pdGVtLAogICAgICAgIG5vd09iamVjdCA9IGNhbGVuZGFySXRlbS5ub3csCiAgICAgICAgc2VsZWN0ZWRPYmplY3QgPSBjYWxlbmRhckl0ZW0uc2VsZWN0LAogICAgICAgIGhpZ2hsaWdodGVkT2JqZWN0ID0gY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwKICAgICAgICB2aWV3c2V0T2JqZWN0ID0gY2FsZW5kYXJJdGVtLnZpZXcsCiAgICAgICAgZGlzYWJsZWRDb2xsZWN0aW9uID0gY2FsZW5kYXJJdGVtLmRpc2FibGUsCiAgICAgICAgbWluTGltaXRPYmplY3QgPSBjYWxlbmRhckl0ZW0ubWluLAogICAgICAgIG1heExpbWl0T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm1heCwKCgogICAgICAgIC8vIENyZWF0ZSB0aGUgY2FsZW5kYXIgdGFibGUgaGVhZCB1c2luZyBhIGNvcHkgb2Ygd2Vla2RheSBsYWJlbHMgY29sbGVjdGlvbi4KICAgICAgICAvLyAqIFdlIGRvIGEgY29weSBzbyB3ZSBkb24ndCBtdXRhdGUgdGhlIG9yaWdpbmFsIGFycmF5LgogICAgICAgIHRhYmxlSGVhZCA9IChmdW5jdGlvbiggY29sbGVjdGlvbiwgZnVsbENvbGxlY3Rpb24gKSB7CgogICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IHNob3VsZCBiZSBNb25kYXksIG1vdmUgU3VuZGF5IHRvIHRoZSBlbmQuCiAgICAgICAgICAgIGlmICggc2V0dGluZ3MuZmlyc3REYXkgKSB7CiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2goIGNvbGxlY3Rpb24uc2hpZnQoKSApCiAgICAgICAgICAgICAgICBmdWxsQ29sbGVjdGlvbi5wdXNoKCBmdWxsQ29sbGVjdGlvbi5zaGlmdCgpICkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIHRhYmxlIGhlYWQgZ3JvdXAuCiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoCiAgICAgICAgICAgICAgICAndGhlYWQnLAogICAgICAgICAgICAgICAgXy5ub2RlKAogICAgICAgICAgICAgICAgICAgICd0cicsCiAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBEQVlTX0lOX1dFRUsgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICBpOiAxLAogICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAndGgnLAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggY291bnRlciApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblsgY291bnRlciBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLndlZWtkYXlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzY29wZT1jb2wgdGl0bGU9IicgKyBmdWxsQ29sbGVjdGlvblsgY291bnRlciBdICsgJyInCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApIC8vZW5kcmV0dXJuCgogICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkCiAgICAgICAgfSkoICggc2V0dGluZ3Muc2hvd1dlZWtkYXlzRnVsbCA/IHNldHRpbmdzLndlZWtkYXlzRnVsbCA6IHNldHRpbmdzLndlZWtkYXlzTGV0dGVyICkuc2xpY2UoIDAgKSwgc2V0dGluZ3Mud2Vla2RheXNGdWxsLnNsaWNlKCAwICkgKSwgLy90YWJsZUhlYWQKCgogICAgICAgIC8vIENyZWF0ZSB0aGUgbmF2IGZvciBuZXh0L3ByZXYgbW9udGguCiAgICAgICAgY3JlYXRlTW9udGhOYXYgPSBmdW5jdGlvbiggbmV4dCApIHsKCiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBjcmVhdGVkIG1vbnRoIHRhZy4KICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSgKICAgICAgICAgICAgICAgICdkaXYnLAogICAgICAgICAgICAgICAgJyAnLAogICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3NbICduYXYnICsgKCBuZXh0ID8gJ05leHQnIDogJ1ByZXYnICkgXSArICgKCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZvY3VzZWQgbW9udGggaXMgb3V0c2lkZSB0aGUgcmFuZ2UsIGRpc2FibGVkIHRoZSBidXR0b24uCiAgICAgICAgICAgICAgICAgICAgKCBuZXh0ICYmIHZpZXdzZXRPYmplY3QueWVhciA+PSBtYXhMaW1pdE9iamVjdC55ZWFyICYmIHZpZXdzZXRPYmplY3QubW9udGggPj0gbWF4TGltaXRPYmplY3QubW9udGggKSB8fAogICAgICAgICAgICAgICAgICAgICggIW5leHQgJiYgdmlld3NldE9iamVjdC55ZWFyIDw9IG1pbkxpbWl0T2JqZWN0LnllYXIgJiYgdmlld3NldE9iamVjdC5tb250aCA8PSBtaW5MaW1pdE9iamVjdC5tb250aCApID8KICAgICAgICAgICAgICAgICAgICAnICcgKyBzZXR0aW5ncy5rbGFzcy5uYXZEaXNhYmxlZCA6ICcnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgJ2RhdGEtbmF2PScgKyAoIG5leHQgfHwgLTEgKSArICcgJyArCiAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHsKICAgICAgICAgICAgICAgICAgICByb2xlOiAnYnV0dG9uJywKICAgICAgICAgICAgICAgICAgICBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQgKyAnX3RhYmxlJwogICAgICAgICAgICAgICAgfSkgKyAnICcgKwogICAgICAgICAgICAgICAgJ3RpdGxlPSInICsgKG5leHQgPyBzZXR0aW5ncy5sYWJlbE1vbnRoTmV4dCA6IHNldHRpbmdzLmxhYmVsTW9udGhQcmV2ICkgKyAnIicKICAgICAgICAgICAgKSAvL2VuZHJldHVybgogICAgICAgIH0sIC8vY3JlYXRlTW9udGhOYXYKCgogICAgICAgIC8vIENyZWF0ZSB0aGUgbW9udGggbGFiZWwuCiAgICAgICAgLy9NYXRlcmlhbGl6ZSBtb2RpZmllZAogICAgICAgIGNyZWF0ZU1vbnRoTGFiZWwgPSBmdW5jdGlvbihvdmVycmlkZSkgewoKICAgICAgICAgICAgdmFyIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5zaG93TW9udGhzU2hvcnQgPyBzZXR0aW5ncy5tb250aHNTaG9ydCA6IHNldHRpbmdzLm1vbnRoc0Z1bGwKCiAgICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZAogICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT0gInNob3J0X21vbnRocyIpIHsKICAgICAgICAgICAgICBtb250aHNDb2xsZWN0aW9uID0gc2V0dGluZ3MubW9udGhzU2hvcnQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb250aHMgdG8gc2VsZWN0LCBhZGQgYSBkcm9wZG93biBtZW51LgogICAgICAgICAgICBpZiAoIHNldHRpbmdzLnNlbGVjdE1vbnRocyAgJiYgb3ZlcnJpZGUgPT0gdW5kZWZpbmVkKSB7CgogICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMSwKICAgICAgICAgICAgICAgICAgICAgICAgaTogMSwKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ29wdGlvbicsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCBsb29wZWRNb250aCApIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9vcGVkIG1vbnRoIGFuZCBubyBjbGFzc2VzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoc0NvbGxlY3Rpb25bIGxvb3BlZE1vbnRoIF0sIDAsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgdmFsdWUgYW5kIHNlbGVjdGVkIGluZGV4LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZT0nICsgbG9vcGVkTW9udGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC5tb250aCA9PSBsb29wZWRNb250aCA/ICcgc2VsZWN0ZWQnIDogJycgKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIHZpZXdzZXRPYmplY3QueWVhciA9PSBtaW5MaW1pdE9iamVjdC55ZWFyICYmIGxvb3BlZE1vbnRoIDwgbWluTGltaXRPYmplY3QubW9udGggKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCB2aWV3c2V0T2JqZWN0LnllYXIgPT0gbWF4TGltaXRPYmplY3QueWVhciAmJiBsb29wZWRNb250aCA+IG1heExpbWl0T2JqZWN0Lm1vbnRoICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGlzYWJsZWQnIDogJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5zZWxlY3RNb250aCArICcgYnJvd3Nlci1kZWZhdWx0JywKICAgICAgICAgICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJ2Rpc2FibGVkJyApICsgJyAnICsKICAgICAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgKwogICAgICAgICAgICAgICAgICAgICd0aXRsZT0iJyArIHNldHRpbmdzLmxhYmVsTW9udGhTZWxlY3QgKyAnIicKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWQKICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09ICJzaG9ydF9tb250aHMiKQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbW9udGhzQ29sbGVjdGlvblsgc2VsZWN0ZWRPYmplY3QubW9udGggXTsKICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIG1vbnRoc0NvbGxlY3Rpb25bIHZpZXdzZXRPYmplY3QubW9udGggXTsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBuZWVkIGZvciBhIG1vbnRoIHNlbGVjdG9yCiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBtb250aHNDb2xsZWN0aW9uWyB2aWV3c2V0T2JqZWN0Lm1vbnRoIF0sIHNldHRpbmdzLmtsYXNzLm1vbnRoICkKICAgICAgICB9LCAvL2NyZWF0ZU1vbnRoTGFiZWwKCgogICAgICAgIC8vIENyZWF0ZSB0aGUgeWVhciBsYWJlbC4KICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZAogICAgICAgIGNyZWF0ZVllYXJMYWJlbCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7CgogICAgICAgICAgICB2YXIgZm9jdXNlZFllYXIgPSB2aWV3c2V0T2JqZWN0LnllYXIsCgogICAgICAgICAgICAvLyBJZiB5ZWFycyBzZWxlY3RvciBpcyBzZXQgdG8gYSBsaXRlcmFsICJ0cnVlIiwgc2V0IGl0IHRvIDUuIE90aGVyd2lzZQogICAgICAgICAgICAvLyBkaXZpZGUgaW4gaGFsZiB0byBnZXQgaGFsZiBiZWZvcmUgYW5kIGhhbGYgYWZ0ZXIgZm9jdXNlZCB5ZWFyLgogICAgICAgICAgICBudW1iZXJZZWFycyA9IHNldHRpbmdzLnNlbGVjdFllYXJzID09PSB0cnVlID8gNSA6IH5+KCBzZXR0aW5ncy5zZWxlY3RZZWFycyAvIDIgKQoKICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHllYXJzIHRvIHNlbGVjdCwgYWRkIGEgZHJvcGRvd24gbWVudS4KICAgICAgICAgICAgaWYgKCBudW1iZXJZZWFycyApIHsKCiAgICAgICAgICAgICAgICB2YXIKICAgICAgICAgICAgICAgICAgICBtaW5ZZWFyID0gbWluTGltaXRPYmplY3QueWVhciwKICAgICAgICAgICAgICAgICAgICBtYXhZZWFyID0gbWF4TGltaXRPYmplY3QueWVhciwKICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyID0gZm9jdXNlZFllYXIgLSBudW1iZXJZZWFycywKICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciA9IGZvY3VzZWRZZWFyICsgbnVtYmVyWWVhcnMKCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWluIHllYXIgaXMgZ3JlYXRlciB0aGFuIHRoZSBsb3dlc3QgeWVhciwgaW5jcmVhc2UgdGhlIGhpZ2hlc3QgeWVhcgogICAgICAgICAgICAgICAgLy8gYnkgdGhlIGRpZmZlcmVuY2UgYW5kIHNldCB0aGUgbG93ZXN0IHllYXIgdG8gdGhlIG1pbiB5ZWFyLgogICAgICAgICAgICAgICAgaWYgKCBtaW5ZZWFyID4gbG93ZXN0WWVhciApIHsKICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciArPSBtaW5ZZWFyIC0gbG93ZXN0WWVhcgogICAgICAgICAgICAgICAgICAgIGxvd2VzdFllYXIgPSBtaW5ZZWFyCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1heCB5ZWFyIGlzIGxlc3MgdGhhbiB0aGUgaGlnaGVzdCB5ZWFyLCBkZWNyZWFzZSB0aGUgbG93ZXN0IHllYXIKICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb3dlciBvZiB0aGUgdHdvOiBhdmFpbGFibGUgYW5kIG5lZWRlZCB5ZWFycy4gVGhlbiBzZXQgdGhlCiAgICAgICAgICAgICAgICAvLyBoaWdoZXN0IHllYXIgdG8gdGhlIG1heCB5ZWFyLgogICAgICAgICAgICAgICAgaWYgKCBtYXhZZWFyIDwgaGlnaGVzdFllYXIgKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBhdmFpbGFibGVZZWFycyA9IGxvd2VzdFllYXIgLSBtaW5ZZWFyLAogICAgICAgICAgICAgICAgICAgICAgICBuZWVkZWRZZWFycyA9IGhpZ2hlc3RZZWFyIC0gbWF4WWVhcgoKICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyIC09IGF2YWlsYWJsZVllYXJzID4gbmVlZGVkWWVhcnMgPyBuZWVkZWRZZWFycyA6IGF2YWlsYWJsZVllYXJzCiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdFllYXIgPSBtYXhZZWFyCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCBzZXR0aW5ncy5zZWxlY3RZZWFycyAgJiYgb3ZlcnJpZGUgPT0gdW5kZWZpbmVkICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbG93ZXN0WWVhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogaGlnaGVzdFllYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ29wdGlvbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggbG9vcGVkWWVhciApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCB5ZWFyIGFuZCBubyBjbGFzc2VzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wZWRZZWFyLCAwLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBhbmQgc2VsZWN0ZWQgaW5kZXguCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZT0nICsgbG9vcGVkWWVhciArICggZm9jdXNlZFllYXIgPT0gbG9vcGVkWWVhciA/ICcgc2VsZWN0ZWQnIDogJycgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKyAnIGJyb3dzZXItZGVmYXVsdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgKyBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgKwogICAgICAgICAgICAgICAgICAgICAgICAndGl0bGU9IicgKyBzZXR0aW5ncy5sYWJlbFllYXJTZWxlY3QgKyAnIicKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkCiAgICAgICAgICAgIGlmIChvdmVycmlkZSA9PSAicmF3IikKICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBmb2N1c2VkWWVhciApCgogICAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCByZXR1cm4gdGhlIHllYXIgZm9jdXNlZAogICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgZm9jdXNlZFllYXIsIHNldHRpbmdzLmtsYXNzLnllYXIgKQogICAgICAgIH0gLy9jcmVhdGVZZWFyTGFiZWwKCgogICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkCiAgICAgICAgY3JlYXRlRGF5TGFiZWwgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE9iamVjdC5kYXRlCiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBub3dPYmplY3QuZGF0ZQogICAgICAgICAgICB9CiAgICAgICAgY3JlYXRlV2Vla2RheUxhYmVsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBkaXNwbGF5X2RheTsKCiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKQogICAgICAgICAgICAgICAgZGlzcGxheV9kYXkgPSBzZWxlY3RlZE9iamVjdC5kYXk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gbm93T2JqZWN0LmRheTsKICAgICAgICAgICAgdmFyIHdlZWtkYXkgPSBzZXR0aW5ncy53ZWVrZGF5c1Nob3J0WyBkaXNwbGF5X2RheSBdOwogICAgICAgICAgICByZXR1cm4gd2Vla2RheQogICAgICAgIH0KCgogIC8vIENyZWF0ZSBhbmQgcmV0dXJuIHRoZSBlbnRpcmUgY2FsZW5kYXIuCgpyZXR1cm4gXy5ub2RlKAogICAgICAgIC8vIERhdGUgcHJlc2VudGF0aW9uIFZpZXcKICAgICAgICAnZGl2JywKICAgICAgICAgICAgXy5ub2RlKAogICAgICAgICAgICAgICAgLy8gRGl2IGZvciBZZWFyCiAgICAgICAgICAgICAgICAnZGl2JywKICAgICAgICAgICAgICAgIGNyZWF0ZVllYXJMYWJlbCgicmF3IikgLAogICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3MueWVhcl9kaXNwbGF5CiAgICAgICAgICAgICkrCiAgICAgICAgICAgIF8ubm9kZSgKICAgICAgICAgICAgICAgICdzcGFuJywKICAgICAgICAgICAgICAgIGNyZWF0ZVdlZWtkYXlMYWJlbCgpICsgJywgJywKICAgICAgICAgICAgICAgICJwaWNrZXJfX3dlZWtkYXktZGlzcGxheSIKICAgICAgICAgICAgKSsKICAgICAgICAgICAgXy5ub2RlKAogICAgICAgICAgICAgICAgLy8gRGl2IGZvciBzaG9ydCBNb250aAogICAgICAgICAgICAgICAgJ3NwYW4nLAogICAgICAgICAgICAgICAgY3JlYXRlTW9udGhMYWJlbCgic2hvcnRfbW9udGhzIikgKyAnICcsCiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5tb250aF9kaXNwbGF5CiAgICAgICAgICAgICkrCiAgICAgICAgICAgIF8ubm9kZSgKICAgICAgICAgICAgICAvLyBEaXYgZm9yIERheQogICAgICAgICAgICAgICdzcGFuJywKICAgICAgICAgICAgICBjcmVhdGVEYXlMYWJlbCgpICwKICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5kYXlfZGlzcGxheQogICAgICAgICAgICApLAogICAgICAgIHNldHRpbmdzLmtsYXNzLmRhdGVfZGlzcGxheQogICAgKSsKICAgIC8vIENhbGVuZGFyIGNvbnRhaW5lcgogICAgXy5ub2RlKCdkaXYnLAoJICAgIF8ubm9kZSgnZGl2JywKCQlfLm5vZGUoJ2RpdicsCgkJKCBzZXR0aW5ncy5zZWxlY3RZZWFycyA/ICBjcmVhdGVNb250aExhYmVsKCkgKyBjcmVhdGVZZWFyTGFiZWwoKSA6IGNyZWF0ZU1vbnRoTGFiZWwoKSArIGNyZWF0ZVllYXJMYWJlbCgpICkgKwoJCWNyZWF0ZU1vbnRoTmF2KCkgKyBjcmVhdGVNb250aE5hdiggMSApLAoJCXNldHRpbmdzLmtsYXNzLmhlYWRlcgoJICAgICkgKyBfLm5vZGUoCgkJJ3RhYmxlJywKCQl0YWJsZUhlYWQgKwoJCV8ubm9kZSgKCQkgICAgJ3Rib2R5JywKCQkgICAgXy5ncm91cCh7CgkJICAgICAgICBtaW46IDAsCgkJICAgICAgICBtYXg6IFdFRUtTX0lOX0NBTEVOREFSIC0gMSwKCQkgICAgICAgIGk6IDEsCgkJICAgICAgICBub2RlOiAndHInLAoJCSAgICAgICAgaXRlbTogZnVuY3Rpb24oIHJvd0NvdW50ZXIgKSB7CgoJCSAgICAgICAgICAgIC8vIElmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IGFuZCB0aGUgbW9udGggc3RhcnRzIG9uIFN1bmRheSwgc2hpZnQgdGhlIGRhdGUgYmFjayBhIHdlZWsuCgkJICAgICAgICAgICAgdmFyIHNoaWZ0RGF0ZUJ5ID0gc2V0dGluZ3MuZmlyc3REYXkgJiYgY2FsZW5kYXIuY3JlYXRlKFsgdmlld3NldE9iamVjdC55ZWFyLCB2aWV3c2V0T2JqZWN0Lm1vbnRoLCAxIF0pLmRheSA9PT0gMCA/IC03IDogMAoKCQkgICAgICAgICAgICByZXR1cm4gWwoJCSAgICAgICAgICAgICAgICBfLmdyb3VwKHsKCQkgICAgICAgICAgICAgICAgICAgIG1pbjogREFZU19JTl9XRUVLICogcm93Q291bnRlciAtIHZpZXdzZXRPYmplY3QuZGF5ICsgc2hpZnREYXRlQnkgKyAxLCAvLyBBZGQgMSBmb3Igd2Vla2RheSAwaW5kZXgKCQkgICAgICAgICAgICAgICAgICAgIG1heDogZnVuY3Rpb24oKSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWluICsgREFZU19JTl9XRUVLIC0gMQoJCSAgICAgICAgICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICAgICAgICAgIGk6IDEsCgkJICAgICAgICAgICAgICAgICAgICBub2RlOiAndGQnLAoJCSAgICAgICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIHRhcmdldERhdGUgKSB7CgoJCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHRpbWUgZGF0ZSBmcm9tIGEgcmVsYXRpdmUgZGF0ZSB0byBhIHRhcmdldCBkYXRlLgoJCSAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSBjYWxlbmRhci5jcmVhdGUoWyB2aWV3c2V0T2JqZWN0LnllYXIsIHZpZXdzZXRPYmplY3QubW9udGgsIHRhcmdldERhdGUgKyAoIHNldHRpbmdzLmZpcnN0RGF5ID8gMSA6IDAgKSBdKQoKCQkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNTZWxlY3RlZCA9IHNlbGVjdGVkT2JqZWN0ICYmIHNlbGVjdGVkT2JqZWN0LnBpY2sgPT0gdGFyZ2V0RGF0ZS5waWNrLAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkID0gaGlnaGxpZ2h0ZWRPYmplY3QgJiYgaGlnaGxpZ2h0ZWRPYmplY3QucGljayA9PSB0YXJnZXREYXRlLnBpY2ssCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgPSBkaXNhYmxlZENvbGxlY3Rpb24gJiYgY2FsZW5kYXIuZGlzYWJsZWQoIHRhcmdldERhdGUgKSB8fCB0YXJnZXREYXRlLnBpY2sgPCBtaW5MaW1pdE9iamVjdC5waWNrIHx8IHRhcmdldERhdGUucGljayA+IG1heExpbWl0T2JqZWN0LnBpY2ssCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZERhdGUgPSBfLnRyaWdnZXIoIGNhbGVuZGFyLmZvcm1hdHMudG9TdHJpbmcsIGNhbGVuZGFyLCBbIHNldHRpbmdzLmZvcm1hdCwgdGFyZ2V0RGF0ZSBdICkKCgkJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5ub2RlKAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlLmRhdGUsCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oIGtsYXNzZXMgKSB7CgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGluZm9jdXNgIG9yIGBvdXRmb2N1c2AgY2xhc3NlcyBiYXNlZCBvbiBtb250aCBpbiB2aWV3LgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggdmlld3NldE9iamVjdC5tb250aCA9PSB0YXJnZXREYXRlLm1vbnRoID8gc2V0dGluZ3Mua2xhc3MuaW5mb2N1cyA6IHNldHRpbmdzLmtsYXNzLm91dGZvY3VzICkKCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgdG9kYXlgIGNsYXNzIGlmIG5lZWRlZC4KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vd09iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayApIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2xhc3Nlcy5wdXNoKCBzZXR0aW5ncy5rbGFzcy5ub3cgKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgc2VsZWN0ZWRgIGNsYXNzIGlmIHNvbWV0aGluZydzIHNlbGVjdGVkIGFuZCB0aGUgdGltZSBtYXRjaGVzLgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNTZWxlY3RlZCApIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2xhc3Nlcy5wdXNoKCBzZXR0aW5ncy5rbGFzcy5zZWxlY3RlZCApCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBoaWdobGlnaHRlZGAgY2xhc3MgaWYgc29tZXRoaW5nJ3MgaGlnaGxpZ2h0ZWQgYW5kIHRoZSB0aW1lIG1hdGNoZXMuCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpc0hpZ2hsaWdodGVkICkgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLmhpZ2hsaWdodGVkICkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGRpc2FibGVkYCBjbGFzcyBpZiBzb21ldGhpbmcncyBkaXNhYmxlZCBhbmQgdGhlIG9iamVjdCBtYXRjaGVzLgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNEaXNhYmxlZCApIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2xhc3Nlcy5wdXNoKCBzZXR0aW5ncy5rbGFzcy5kaXNhYmxlZCApCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2xhc3Nlcy5qb2luKCAnICcgKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoWyBzZXR0aW5ncy5rbGFzcy5kYXkgXSksCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1waWNrPScgKyB0YXJnZXREYXRlLnBpY2sgKyAnICcgKyBfLmFyaWFBdHRyKHsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAnZ3JpZGNlbGwnLAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmb3JtYXR0ZWREYXRlLAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpc1NlbGVjdGVkICYmIGNhbGVuZGFyLiRub2RlLnZhbCgpID09PSBmb3JtYXR0ZWREYXRlID8gdHJ1ZSA6IG51bGwsCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlZGVzY2VuZGFudDogaXNIaWdobGlnaHRlZCA/IHRydWUgOiBudWxsLAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkID8gdHJ1ZSA6IG51bGwKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHsgcm9sZTogJ3ByZXNlbnRhdGlvbicgfSkKCQkgICAgICAgICAgICAgICAgICAgICAgICBdIC8vZW5kcmV0dXJuCgkJICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIH0pCgkJICAgICAgICAgICAgXSAvL2VuZHJldHVybgoJCSAgICAgICAgfQoJCSAgICB9KQoJCSksCgkJc2V0dGluZ3Mua2xhc3MudGFibGUsCgkJJ2lkPSInICsgY2FsZW5kYXIuJG5vZGVbMF0uaWQgKyAnX3RhYmxlJyArICciICcgKyBfLmFyaWFBdHRyKHsKCQkgICAgcm9sZTogJ2dyaWQnLAoJCSAgICBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQsCgkJICAgIHJlYWRvbmx5OiB0cnVlCgkJfSkKCSAgICApCgkgICAgLCBzZXR0aW5ncy5rbGFzcy5jYWxlbmRhcl9jb250YWluZXIpIC8vIGVuZCBjYWxlbmRhcgoKCSAgICAgKwoKCSAgICAvLyAqIEZvciBGaXJlZm94IGZvcm1zIHRvIHN1Ym1pdCwgbWFrZSBzdXJlIHRvIHNldCB0aGUgYnV0dG9uc+KAmSBgdHlwZWAgYXR0cmlidXRlcyBhcyDigJxidXR0b27igJ0uCgkgICAgXy5ub2RlKAoJCSdkaXYnLAoJCV8ubm9kZSggJ2J1dHRvbicsIHNldHRpbmdzLnRvZGF5LCAiYnRuLWZsYXQgcGlja2VyX190b2RheSB3YXZlcy1lZmZlY3QiLAoJCSAgICAndHlwZT1idXR0b24gZGF0YS1waWNrPScgKyBub3dPYmplY3QucGljayArCgkJICAgICggaXNPcGVuICYmICFjYWxlbmRhci5kaXNhYmxlZChub3dPYmplY3QpID8gJycgOiAnIGRpc2FibGVkJyApICsgJyAnICsKCQkgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApICsKCQlfLm5vZGUoICdidXR0b24nLCBzZXR0aW5ncy5jbGVhciwgImJ0bi1mbGF0IHBpY2tlcl9fY2xlYXIgd2F2ZXMtZWZmZWN0IiwKCQkgICAgJ3R5cGU9YnV0dG9uIGRhdGEtY2xlYXI9MScgKwoJCSAgICAoIGlzT3BlbiA/ICcnIDogJyBkaXNhYmxlZCcgKSArICcgJyArCgkJICAgIF8uYXJpYUF0dHIoeyBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQgfSkgKSArCgkJXy5ub2RlKCdidXR0b24nLCBzZXR0aW5ncy5jbG9zZSwgImJ0bi1mbGF0IHBpY2tlcl9fY2xvc2Ugd2F2ZXMtZWZmZWN0IiwKCQkgICAgJ3R5cGU9YnV0dG9uIGRhdGEtY2xvc2U9dHJ1ZSAnICsKCQkgICAgKCBpc09wZW4gPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgKwoJCSAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkIH0pICksCgkJc2V0dGluZ3Mua2xhc3MuZm9vdGVyCgkgICAgKSwgJ3BpY2tlcl9fY29udGFpbmVyX193cmFwcGVyJwoJKSAvL2VuZHJldHVybgp9IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXMKCgoKCi8qKgogKiBUaGUgZGF0ZSBwaWNrZXIgZGVmYXVsdHMuCiAqLwpEYXRlUGlja2VyLmRlZmF1bHRzID0gKGZ1bmN0aW9uKCBwcmVmaXggKSB7CgogICAgcmV0dXJuIHsKCiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIG1vbnRoIG5hdiBidXR0b25zCiAgICAgICAgbGFiZWxNb250aE5leHQ6ICdOZXh0IG1vbnRoJywKICAgICAgICBsYWJlbE1vbnRoUHJldjogJ1ByZXZpb3VzIG1vbnRoJywKCiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIGRyb3Bkb3duIHNlbGVjdG9ycwogICAgICAgIGxhYmVsTW9udGhTZWxlY3Q6ICdTZWxlY3QgYSBtb250aCcsCiAgICAgICAgbGFiZWxZZWFyU2VsZWN0OiAnU2VsZWN0IGEgeWVhcicsCgogICAgICAgIC8vIE1vbnRocyBhbmQgd2Vla2RheXMKICAgICAgICBtb250aHNGdWxsOiBbICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdLAogICAgICAgIG1vbnRoc1Nob3J0OiBbICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYycgXSwKICAgICAgICB3ZWVrZGF5c0Z1bGw6IFsgJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5JyBdLAogICAgICAgIHdlZWtkYXlzU2hvcnQ6IFsgJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcgXSwKCiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWQKICAgICAgICB3ZWVrZGF5c0xldHRlcjogWyAnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUycgXSwKCiAgICAgICAgLy8gVG9kYXkgYW5kIGNsZWFyCiAgICAgICAgdG9kYXk6ICdUb2RheScsCiAgICAgICAgY2xlYXI6ICdDbGVhcicsCiAgICAgICAgY2xvc2U6ICdPaycsCgogICAgICAgIC8vIFRoZSBmb3JtYXQgdG8gc2hvdyBvbiB0aGUgYGlucHV0YCBlbGVtZW50CiAgICAgICAgZm9ybWF0OiAnZCBtbW1tLCB5eXl5JywKCiAgICAgICAgLy8gQ2xhc3NlcwogICAgICAgIGtsYXNzOiB7CgogICAgICAgICAgICB0YWJsZTogcHJlZml4ICsgJ3RhYmxlJywKCiAgICAgICAgICAgIGhlYWRlcjogcHJlZml4ICsgJ2hlYWRlcicsCgoKICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgQWRkZWQga2xhc3NlcwogICAgICAgICAgICBkYXRlX2Rpc3BsYXk6IHByZWZpeCArICdkYXRlLWRpc3BsYXknLAogICAgICAgICAgICBkYXlfZGlzcGxheTogcHJlZml4ICsgJ2RheS1kaXNwbGF5JywKICAgICAgICAgICAgbW9udGhfZGlzcGxheTogcHJlZml4ICsgJ21vbnRoLWRpc3BsYXknLAogICAgICAgICAgICB5ZWFyX2Rpc3BsYXk6IHByZWZpeCArICd5ZWFyLWRpc3BsYXknLAogICAgICAgICAgICBjYWxlbmRhcl9jb250YWluZXI6IHByZWZpeCArICdjYWxlbmRhci1jb250YWluZXInLAogICAgICAgICAgICAvLyBlbmQKCgoKICAgICAgICAgICAgbmF2UHJldjogcHJlZml4ICsgJ25hdi0tcHJldicsCiAgICAgICAgICAgIG5hdk5leHQ6IHByZWZpeCArICduYXYtLW5leHQnLAogICAgICAgICAgICBuYXZEaXNhYmxlZDogcHJlZml4ICsgJ25hdi0tZGlzYWJsZWQnLAoKICAgICAgICAgICAgbW9udGg6IHByZWZpeCArICdtb250aCcsCiAgICAgICAgICAgIHllYXI6IHByZWZpeCArICd5ZWFyJywKCiAgICAgICAgICAgIHNlbGVjdE1vbnRoOiBwcmVmaXggKyAnc2VsZWN0LS1tb250aCcsCiAgICAgICAgICAgIHNlbGVjdFllYXI6IHByZWZpeCArICdzZWxlY3QtLXllYXInLAoKICAgICAgICAgICAgd2Vla2RheXM6IHByZWZpeCArICd3ZWVrZGF5JywKCiAgICAgICAgICAgIGRheTogcHJlZml4ICsgJ2RheScsCiAgICAgICAgICAgIGRpc2FibGVkOiBwcmVmaXggKyAnZGF5LS1kaXNhYmxlZCcsCiAgICAgICAgICAgIHNlbGVjdGVkOiBwcmVmaXggKyAnZGF5LS1zZWxlY3RlZCcsCiAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBwcmVmaXggKyAnZGF5LS1oaWdobGlnaHRlZCcsCiAgICAgICAgICAgIG5vdzogcHJlZml4ICsgJ2RheS0tdG9kYXknLAogICAgICAgICAgICBpbmZvY3VzOiBwcmVmaXggKyAnZGF5LS1pbmZvY3VzJywKICAgICAgICAgICAgb3V0Zm9jdXM6IHByZWZpeCArICdkYXktLW91dGZvY3VzJywKCiAgICAgICAgICAgIGZvb3RlcjogcHJlZml4ICsgJ2Zvb3RlcicsCgogICAgICAgICAgICBidXR0b25DbGVhcjogcHJlZml4ICsgJ2J1dHRvbi0tY2xlYXInLAogICAgICAgICAgICBidXR0b25Ub2RheTogcHJlZml4ICsgJ2J1dHRvbi0tdG9kYXknLAogICAgICAgICAgICBidXR0b25DbG9zZTogcHJlZml4ICsgJ2J1dHRvbi0tY2xvc2UnCiAgICAgICAgfQogICAgfQp9KSggUGlja2VyLmtsYXNzZXMoKS5waWNrZXIgKyAnX18nICkKCgoKCgovKioKICogRXh0ZW5kIHRoZSBwaWNrZXIgdG8gYWRkIHRoZSBkYXRlIHBpY2tlci4KICovClBpY2tlci5leHRlbmQoICdwaWNrYWRhdGUnLCBEYXRlUGlja2VyICkKCgp9KSk7CjsvKiEKICogQ2xvY2tQaWNrZXIgdjAuMC43IChodHRwOi8vd2VhcmVvdXRtYW4uZ2l0aHViLmlvL2Nsb2NrcGlja2VyLykKICogQ29weXJpZ2h0IDIwMTQgV2FuZyBTaGVud2VpLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWFyZW91dG1hbi9jbG9ja3BpY2tlci9ibG9iL2doLXBhZ2VzL0xJQ0VOU0UpCiAqCiAqIEZ1cnRoZXIgbW9kaWZpZWQKICogQ29weXJpZ2h0IDIwMTUgQ2hpbmcgWWF3IEhhby4KICovCgo7KGZ1bmN0aW9uKCl7Cgl2YXIgJCA9IHdpbmRvdy5qUXVlcnksCgkJCSR3aW4gPSAkKHdpbmRvdyksCgkJCSRkb2MgPSAkKGRvY3VtZW50KTsKCgkvLyBDYW4gSSB1c2UgaW5saW5lIHN2ZyA/Cgl2YXIgc3ZnTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLAoJCSAgc3ZnU3VwcG9ydGVkID0gJ1NWR0FuZ2xlJyBpbiB3aW5kb3cgJiYgKGZ1bmN0aW9uKCkgewoJCQkgIHZhciBzdXBwb3J0ZWQsCgkJCQllbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJCQkJZWwuaW5uZXJIVE1MID0gJzxzdmcvPic7CgkJCQlzdXBwb3J0ZWQgPSAoZWwuZmlyc3RDaGlsZCAmJiBlbC5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSkgPT0gc3ZnTlM7CgkJCQllbC5pbm5lckhUTUwgPSAnJzsKCQkJCXJldHVybiBzdXBwb3J0ZWQ7CgkJCX0pKCk7CgoJLy8gQ2FuIEkgdXNlIHRyYW5zaXRpb24gPwoJdmFyIHRyYW5zaXRpb25TdXBwb3J0ZWQgPSAoZnVuY3Rpb24oKSB7CgkJdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7CgkJcmV0dXJuICd0cmFuc2l0aW9uJyBpbiBzdHlsZSB8fAoJCQkJCSAnV2Via2l0VHJhbnNpdGlvbicgaW4gc3R5bGUgfHwKCQkJCSAgICdNb3pUcmFuc2l0aW9uJyBpbiBzdHlsZSB8fAoJCQkJCSAnbXNUcmFuc2l0aW9uJyBpbiBzdHlsZSB8fAoJCQkJCSAnT1RyYW5zaXRpb24nIGluIHN0eWxlOwoJfSkoKTsKCgkvLyBMaXN0ZW4gdG91Y2ggZXZlbnRzIGluIHRvdWNoIHNjcmVlbiBkZXZpY2UsIGluc3RlYWQgb2YgbW91c2UgZXZlbnRzIGluIGRlc2t0b3AuCgl2YXIgdG91Y2hTdXBwb3J0ZWQgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3csCgkJCW1vdXNlZG93bkV2ZW50ID0gJ21vdXNlZG93bicgKyAoIHRvdWNoU3VwcG9ydGVkID8gJyB0b3VjaHN0YXJ0JyA6ICcnKSwKCQkJbW91c2Vtb3ZlRXZlbnQgPSAnbW91c2Vtb3ZlLmNsb2NrcGlja2VyJyArICggdG91Y2hTdXBwb3J0ZWQgPyAnIHRvdWNobW92ZS5jbG9ja3BpY2tlcicgOiAnJyksCgkJCW1vdXNldXBFdmVudCA9ICdtb3VzZXVwLmNsb2NrcGlja2VyJyArICggdG91Y2hTdXBwb3J0ZWQgPyAnIHRvdWNoZW5kLmNsb2NrcGlja2VyJyA6ICcnKTsKCgkvLyBWaWJyYXRlIHRoZSBkZXZpY2UgaWYgc3VwcG9ydGVkCgl2YXIgdmlicmF0ZSA9IG5hdmlnYXRvci52aWJyYXRlID8gJ3ZpYnJhdGUnIDogbmF2aWdhdG9yLndlYmtpdFZpYnJhdGUgPyAnd2Via2l0VmlicmF0ZScgOiBudWxsOwoKCWZ1bmN0aW9uIGNyZWF0ZVN2Z0VsZW1lbnQobmFtZSkgewoJCXJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIG5hbWUpOwoJfQoKCWZ1bmN0aW9uIGxlYWRpbmdaZXJvKG51bSkgewoJCXJldHVybiAobnVtIDwgMTAgPyAnMCcgOiAnJykgKyBudW07Cgl9CgoJLy8gR2V0IGEgdW5pcXVlIGlkCgl2YXIgaWRDb3VudGVyID0gMDsKCWZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkgewoJCXZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7CgkJcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7Cgl9CgoJLy8gQ2xvY2sgc2l6ZQoJdmFyIGRpYWxSYWRpdXMgPSAxMzUsCgkJCW91dGVyUmFkaXVzID0gMTA1LAoJCQkvLyBpbm5lclJhZGl1cyA9IDgwIG9uIDEyIGhvdXIgY2xvY2sKCQkJaW5uZXJSYWRpdXMgPSA4MCwKCQkJdGlja1JhZGl1cyA9IDIwLAoJCQlkaWFtZXRlciA9IGRpYWxSYWRpdXMgKiAyLAoJCQlkdXJhdGlvbiA9IHRyYW5zaXRpb25TdXBwb3J0ZWQgPyAzNTAgOiAxOwoKCS8vIFBvcG92ZXIgdGVtcGxhdGUKCXZhciB0cGwgPSBbCgkJJzxkaXYgY2xhc3M9ImNsb2NrcGlja2VyIHBpY2tlciI+JywKCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9faG9sZGVyIj4nLAoJCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9fZnJhbWUiPicsCgkJCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9fd3JhcCI+JywKCQkJCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9fYm94Ij4nLAoJCQkJCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9fZGF0ZS1kaXNwbGF5Ij4nLAoJCQkJCQkJCSc8ZGl2IGNsYXNzPSJjbG9ja3BpY2tlci1kaXNwbGF5Ij4nLAoJCQkJCQkJCQknPGRpdiBjbGFzcz0iY2xvY2twaWNrZXItZGlzcGxheS1jb2x1bW4iPicsCgkJCQkJCQkJCQknPHNwYW4gY2xhc3M9ImNsb2NrcGlja2VyLXNwYW4taG91cnMgdGV4dC1wcmltYXJ5Ij48L3NwYW4+JywKCQkJCQkJCQkJCSc6JywKCQkJCQkJCQkJCSc8c3BhbiBjbGFzcz0iY2xvY2twaWNrZXItc3Bhbi1taW51dGVzIj48L3NwYW4+JywKCQkJCQkJCQkJJzwvZGl2PicsCgkJCQkJCQkJCSc8ZGl2IGNsYXNzPSJjbG9ja3BpY2tlci1kaXNwbGF5LWNvbHVtbiBjbG9ja3BpY2tlci1kaXNwbGF5LWFtLXBtIj4nLAoJCQkJCQkJCQkJJzxkaXYgY2xhc3M9ImNsb2NrcGlja2VyLXNwYW4tYW0tcG0iPjwvZGl2PicsCgkJCQkJCQkJCSc8L2Rpdj4nLAoJCQkJCQkJCSc8L2Rpdj4nLAoJCQkJCQkJJzwvZGl2PicsCgkJCQkJCQknPGRpdiBjbGFzcz0icGlja2VyX19jb250YWluZXJfX3dyYXBwZXIiPicsCgkJCQkJCQkJJzxkaXYgY2xhc3M9InBpY2tlcl9fY2FsZW5kYXItY29udGFpbmVyIj4nLAoJCQkJCQkJCQknPGRpdiBjbGFzcz0iY2xvY2twaWNrZXItcGxhdGUiPicsCgkJCQkJCQkJCQknPGRpdiBjbGFzcz0iY2xvY2twaWNrZXItY2FudmFzIj48L2Rpdj4nLAoJCQkJCQkJCQkJJzxkaXYgY2xhc3M9ImNsb2NrcGlja2VyLWRpYWwgY2xvY2twaWNrZXItaG91cnMiPjwvZGl2PicsCgkJCQkJCQkJCQknPGRpdiBjbGFzcz0iY2xvY2twaWNrZXItZGlhbCBjbG9ja3BpY2tlci1taW51dGVzIGNsb2NrcGlja2VyLWRpYWwtb3V0Ij48L2Rpdj4nLAoJCQkJCQkJCQknPC9kaXY+JywKCQkJCQkJCQkJJzxkaXYgY2xhc3M9ImNsb2NrcGlja2VyLWFtLXBtLWJsb2NrIj4nLAoJCQkJCQkJCQknPC9kaXY+JywKCQkJCQkJCQknPC9kaXY+JywKCQkJCQkJCQknPGRpdiBjbGFzcz0icGlja2VyX19mb290ZXIiPicsCgkJCQkJCQkJJzwvZGl2PicsCgkJCQkJCQknPC9kaXY+JywKCQkJCQkJJzwvZGl2PicsCgkJCQkJJzwvZGl2PicsCgkJCQknPC9kaXY+JywKCQkJJzwvZGl2PicsCgkJJzwvZGl2PicKCV0uam9pbignJyk7CgoJLy8gQ2xvY2tQaWNrZXIKCWZ1bmN0aW9uIENsb2NrUGlja2VyKGVsZW1lbnQsIG9wdGlvbnMpIHsKCQl2YXIgcG9wb3ZlciA9ICQodHBsKSwKCQkJCXBsYXRlID0gcG9wb3Zlci5maW5kKCcuY2xvY2twaWNrZXItcGxhdGUnKSwKCQkJCWhvbGRlciA9IHBvcG92ZXIuZmluZCgnLnBpY2tlcl9faG9sZGVyJyksCgkJCQlob3Vyc1ZpZXcgPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1ob3VycycpLAoJCQkJbWludXRlc1ZpZXcgPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1taW51dGVzJyksCgkJCQlhbVBtQmxvY2sgPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1hbS1wbS1ibG9jaycpLAoJCQkJaXNJbnB1dCA9IGVsZW1lbnQucHJvcCgndGFnTmFtZScpID09PSAnSU5QVVQnLAoJCQkJaW5wdXQgPSBpc0lucHV0ID8gZWxlbWVudCA6IGVsZW1lbnQuZmluZCgnaW5wdXQnKSwKCQkJCWxhYmVsID0gJCgibGFiZWxbZm9yPSIgKyBpbnB1dC5hdHRyKCJpZCIpICsgIl0iKSwKCQkJCXNlbGYgPSB0aGlzOwoKCQl0aGlzLmlkID0gdW5pcXVlSWQoJ2NwJyk7CgkJdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKCQl0aGlzLmhvbGRlciA9IGhvbGRlcjsKCQl0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoJCXRoaXMuaXNBcHBlbmRlZCA9IGZhbHNlOwoJCXRoaXMuaXNTaG93biA9IGZhbHNlOwoJCXRoaXMuY3VycmVudFZpZXcgPSAnaG91cnMnOwoJCXRoaXMuaXNJbnB1dCA9IGlzSW5wdXQ7CgkJdGhpcy5pbnB1dCA9IGlucHV0OwoJCXRoaXMubGFiZWwgPSBsYWJlbDsKCQl0aGlzLnBvcG92ZXIgPSBwb3BvdmVyOwoJCXRoaXMucGxhdGUgPSBwbGF0ZTsKCQl0aGlzLmhvdXJzVmlldyA9IGhvdXJzVmlldzsKCQl0aGlzLm1pbnV0ZXNWaWV3ID0gbWludXRlc1ZpZXc7CgkJdGhpcy5hbVBtQmxvY2sgPSBhbVBtQmxvY2s7CgkJdGhpcy5zcGFuSG91cnMgPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1zcGFuLWhvdXJzJyk7CgkJdGhpcy5zcGFuTWludXRlcyA9IHBvcG92ZXIuZmluZCgnLmNsb2NrcGlja2VyLXNwYW4tbWludXRlcycpOwoJCXRoaXMuc3BhbkFtUG0gPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1zcGFuLWFtLXBtJyk7CgkJdGhpcy5mb290ZXIgPSBwb3BvdmVyLmZpbmQoJy5waWNrZXJfX2Zvb3RlcicpOwoJCXRoaXMuYW1PclBtID0gIlBNIjsKCgkJLy8gU2V0dXAgZm9yIGZvciAxMiBob3VyIGNsb2NrIGlmIG9wdGlvbiBpcyBzZWxlY3RlZAoJCWlmIChvcHRpb25zLnR3ZWx2ZWhvdXIpIHsKCQkJaWYgKCFvcHRpb25zLmFtcG1jbGlja2FibGUpIHsKCQkJCXRoaXMuc3BhbkFtUG0uZW1wdHkoKTsKCQkJCSQoJzxkaXYgaWQ9ImNsaWNrLWFtIj5BTTwvZGl2PicpLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pOwoJCQkJJCgnPGRpdiBpZD0iY2xpY2stcG0iPlBNPC9kaXY+JykuYXBwZW5kVG8odGhpcy5zcGFuQW1QbSk7CgkJCX0KCQkJZWxzZSB7CgkJCQl0aGlzLnNwYW5BbVBtLmVtcHR5KCk7CgkJCQkkKCc8ZGl2IGlkPSJjbGljay1hbSI+QU08L2Rpdj4nKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQlzZWxmLnNwYW5BbVBtLmNoaWxkcmVuKCcjY2xpY2stYW0nKS5hZGRDbGFzcygidGV4dC1wcmltYXJ5Iik7CgkJCQkJc2VsZi5zcGFuQW1QbS5jaGlsZHJlbignI2NsaWNrLXBtJykucmVtb3ZlQ2xhc3MoInRleHQtcHJpbWFyeSIpOwoJCQkJCXNlbGYuYW1PclBtID0gIkFNIjsKCQkJCX0pLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pOwoJCQkJJCgnPGRpdiBpZD0iY2xpY2stcG0iPlBNPC9kaXY+Jykub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJc2VsZi5zcGFuQW1QbS5jaGlsZHJlbignI2NsaWNrLXBtJykuYWRkQ2xhc3MoInRleHQtcHJpbWFyeSIpOwoJCQkJCXNlbGYuc3BhbkFtUG0uY2hpbGRyZW4oJyNjbGljay1hbScpLnJlbW92ZUNsYXNzKCJ0ZXh0LXByaW1hcnkiKTsKCQkJCQlzZWxmLmFtT3JQbSA9ICdQTSc7CgkJCQl9KS5hcHBlbmRUbyh0aGlzLnNwYW5BbVBtKTsKCQkJfQoJCX0KCgkJLy8gQWRkIGJ1dHRvbnMgdG8gZm9vdGVyCgkJJCgnPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tZmxhdCBwaWNrZXJfX2NsZWFyIiB0YWJpbmRleD0iJyArIChvcHRpb25zLnR3ZWx2ZWhvdXI/ICczJyA6ICcxJykgKyAnIj4nICsgb3B0aW9ucy5jbGVhcnRleHQgKyAnPC9idXR0b24+JykuY2xpY2soJC5wcm94eSh0aGlzLmNsZWFyLCB0aGlzKSkuYXBwZW5kVG8odGhpcy5mb290ZXIpOwoJCSQoJzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuLWZsYXQgcGlja2VyX19jbG9zZSIgdGFiaW5kZXg9IicgKyAob3B0aW9ucy50d2VsdmVob3VyPyAnMycgOiAnMScpICsgJyI+JyArIG9wdGlvbnMuY2FuY2VsdGV4dCArICc8L2J1dHRvbj4nKS5jbGljaygkLnByb3h5KHRoaXMuaGlkZSwgdGhpcykpLmFwcGVuZFRvKHRoaXMuZm9vdGVyKTsKCQkkKCc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1mbGF0IHBpY2tlcl9fY2xvc2UiIHRhYmluZGV4PSInICsgKG9wdGlvbnMudHdlbHZlaG91cj8gJzMnIDogJzEnKSArICciPicgKyBvcHRpb25zLmRvbmV0ZXh0ICsgJzwvYnV0dG9uPicpLmNsaWNrKCQucHJveHkodGhpcy5kb25lLCB0aGlzKSkuYXBwZW5kVG8odGhpcy5mb290ZXIpOwoKCQl0aGlzLnNwYW5Ib3Vycy5jbGljaygkLnByb3h5KHRoaXMudG9nZ2xlVmlldywgdGhpcywgJ2hvdXJzJykpOwoJCXRoaXMuc3Bhbk1pbnV0ZXMuY2xpY2soJC5wcm94eSh0aGlzLnRvZ2dsZVZpZXcsIHRoaXMsICdtaW51dGVzJykpOwoKCQkvLyBTaG93IG9yIHRvZ2dsZQoJCWlucHV0Lm9uKCdmb2N1cy5jbG9ja3BpY2tlciBjbGljay5jbG9ja3BpY2tlcicsICQucHJveHkodGhpcy5zaG93LCB0aGlzKSk7CgoJCS8vIEJ1aWxkIHRpY2tzCgkJdmFyIHRpY2tUcGwgPSAkKCc8ZGl2IGNsYXNzPSJjbG9ja3BpY2tlci10aWNrIj48L2Rpdj4nKSwKCQkJCWksIHRpY2ssIHJhZGlhbiwgcmFkaXVzOwoKCQkvLyBIb3VycyB2aWV3CgkJaWYgKG9wdGlvbnMudHdlbHZlaG91cikgewoJCQlmb3IgKGkgPSAxOyBpIDwgMTM7IGkgKz0gMSkgewoJCQkJdGljayA9IHRpY2tUcGwuY2xvbmUoKTsKCQkJCXJhZGlhbiA9IGkgLyA2ICogTWF0aC5QSTsKCQkJCXJhZGl1cyA9IG91dGVyUmFkaXVzOwoJCQkJdGljay5jc3MoewoJCQkJCWxlZnQ6IGRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzIC0gdGlja1JhZGl1cywKCQkJCQl0b3A6IGRpYWxSYWRpdXMgLSBNYXRoLmNvcyhyYWRpYW4pICogcmFkaXVzIC0gdGlja1JhZGl1cwoJCQkJfSk7CgkJCQl0aWNrLmh0bWwoaSA9PT0gMCA/ICcwMCcgOiBpKTsKCQkJCWhvdXJzVmlldy5hcHBlbmQodGljayk7CgkJCQl0aWNrLm9uKG1vdXNlZG93bkV2ZW50LCBtb3VzZWRvd24pOwoJCQl9CgkJfSBlbHNlIHsKCQkJZm9yIChpID0gMDsgaSA8IDI0OyBpICs9IDEpIHsKCQkJCXRpY2sgPSB0aWNrVHBsLmNsb25lKCk7CgkJCQlyYWRpYW4gPSBpIC8gNiAqIE1hdGguUEk7CgkJCQl2YXIgaW5uZXIgPSBpID4gMCAmJiBpIDwgMTM7CgkJCQlyYWRpdXMgPSBpbm5lciA/IGlubmVyUmFkaXVzIDogb3V0ZXJSYWRpdXM7CgkJCQl0aWNrLmNzcyh7CgkJCQkJbGVmdDogZGlhbFJhZGl1cyArIE1hdGguc2luKHJhZGlhbikgKiByYWRpdXMgLSB0aWNrUmFkaXVzLAoJCQkJCXRvcDogZGlhbFJhZGl1cyAtIE1hdGguY29zKHJhZGlhbikgKiByYWRpdXMgLSB0aWNrUmFkaXVzCgkJCQl9KTsKCQkJCXRpY2suaHRtbChpID09PSAwID8gJzAwJyA6IGkpOwoJCQkJaG91cnNWaWV3LmFwcGVuZCh0aWNrKTsKCQkJCXRpY2sub24obW91c2Vkb3duRXZlbnQsIG1vdXNlZG93bik7CgkJCX0KCQl9CgoJCS8vIE1pbnV0ZXMgdmlldwoJCWZvciAoaSA9IDA7IGkgPCA2MDsgaSArPSA1KSB7CgkJCXRpY2sgPSB0aWNrVHBsLmNsb25lKCk7CgkJCXJhZGlhbiA9IGkgLyAzMCAqIE1hdGguUEk7CgkJCXRpY2suY3NzKHsKCQkJCWxlZnQ6IGRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogb3V0ZXJSYWRpdXMgLSB0aWNrUmFkaXVzLAoJCQkJdG9wOiBkaWFsUmFkaXVzIC0gTWF0aC5jb3MocmFkaWFuKSAqIG91dGVyUmFkaXVzIC0gdGlja1JhZGl1cwoJCQl9KTsKCQkJdGljay5odG1sKGxlYWRpbmdaZXJvKGkpKTsKCQkJbWludXRlc1ZpZXcuYXBwZW5kKHRpY2spOwoJCQl0aWNrLm9uKG1vdXNlZG93bkV2ZW50LCBtb3VzZWRvd24pOwoJCX0KCgkJLy8gQ2xpY2tpbmcgb24gbWludXRlcyB2aWV3IHNwYWNlCgkJcGxhdGUub24obW91c2Vkb3duRXZlbnQsIGZ1bmN0aW9uKGUpIHsKCQkJaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jbG9ja3BpY2tlci10aWNrJykubGVuZ3RoID09PSAwKSB7CgkJCQltb3VzZWRvd24oZSwgdHJ1ZSk7CiAgICAgIH0KCQl9KTsKCgkJLy8gTW91c2Vkb3duIG9yIHRvdWNoc3RhcnQKCQlmdW5jdGlvbiBtb3VzZWRvd24oZSwgc3BhY2UpIHsKCQkJdmFyIG9mZnNldCA9IHBsYXRlLm9mZnNldCgpLAoJCQkJCWlzVG91Y2ggPSAvXnRvdWNoLy50ZXN0KGUudHlwZSksCgkJCQkJeDAgPSBvZmZzZXQubGVmdCArIGRpYWxSYWRpdXMsCgkJCQkJeTAgPSBvZmZzZXQudG9wICsgZGlhbFJhZGl1cywKCQkJCQlkeCA9IChpc1RvdWNoID8gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gOiBlKS5wYWdlWCAtIHgwLAoJCQkJCWR5ID0gKGlzVG91Y2ggPyBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSA6IGUpLnBhZ2VZIC0geTAsCgkJCQkJeiA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSksCgkJCQkJbW92ZWQgPSBmYWxzZTsKCgkJCS8vIFdoZW4gY2xpY2tpbmcgb24gbWludXRlcyB2aWV3IHNwYWNlLCBjaGVjayB0aGUgbW91c2UgcG9zaXRpb24KCQkJaWYgKHNwYWNlICYmICh6IDwgb3V0ZXJSYWRpdXMgLSB0aWNrUmFkaXVzIHx8IHogPiBvdXRlclJhZGl1cyArIHRpY2tSYWRpdXMpKSB7CgkJCQlyZXR1cm47CiAgICAgIH0KCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJLy8gU2V0IGN1cnNvciBzdHlsZSBvZiBib2R5IGFmdGVyIDIwMG1zCgkJCXZhciBtb3ZpbmdUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKCQkJCXNlbGYucG9wb3Zlci5hZGRDbGFzcygnY2xvY2twaWNrZXItbW92aW5nJyk7CgkJCX0sIDIwMCk7CgoJCQkvLyBDbG9jawoJCQlzZWxmLnNldEhhbmQoZHgsIGR5LCAhc3BhY2UsIHRydWUpOwoKCQkJLy8gTW91c2Vtb3ZlIG9uIGRvY3VtZW50CgkJCSRkb2Mub2ZmKG1vdXNlbW92ZUV2ZW50KS5vbihtb3VzZW1vdmVFdmVudCwgZnVuY3Rpb24oZSl7CgkJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCQl2YXIgaXNUb3VjaCA9IC9edG91Y2gvLnRlc3QoZS50eXBlKSwKCQkJCQkJeCA9IChpc1RvdWNoID8gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gOiBlKS5wYWdlWCAtIHgwLAoJCQkJCQl5ID0gKGlzVG91Y2ggPyBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSA6IGUpLnBhZ2VZIC0geTA7CgkJCQlpZiAoISBtb3ZlZCAmJiB4ID09PSBkeCAmJiB5ID09PSBkeSkgewoJCQkJCS8vIENsaWNraW5nIGluIGNocm9tZSBvbiB3aW5kb3dzIHdpbGwgdHJpZ2dlciBhIG1vdXNlbW92ZSBldmVudAoJCQkJCXJldHVybjsKICAgICAgICB9CgkJCQltb3ZlZCA9IHRydWU7CgkJCQlzZWxmLnNldEhhbmQoeCwgeSwgZmFsc2UsIHRydWUpOwoJCQl9KTsKCgkJCS8vIE1vdXNldXAgb24gZG9jdW1lbnQKCQkJJGRvYy5vZmYobW91c2V1cEV2ZW50KS5vbihtb3VzZXVwRXZlbnQsIGZ1bmN0aW9uKGUpIHsKCQkJCSRkb2Mub2ZmKG1vdXNldXBFdmVudCk7CgkJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCQl2YXIgaXNUb3VjaCA9IC9edG91Y2gvLnRlc3QoZS50eXBlKSwKCQkJCQkJeCA9IChpc1RvdWNoID8gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdIDogZSkucGFnZVggLSB4MCwKCQkJCQkJeSA9IChpc1RvdWNoID8gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdIDogZSkucGFnZVkgLSB5MDsKCQkJCWlmICgoc3BhY2UgfHwgbW92ZWQpICYmIHggPT09IGR4ICYmIHkgPT09IGR5KSB7CgkJCQkJc2VsZi5zZXRIYW5kKHgsIHkpOwogICAgICAgIH0KCgkJCQlpZiAoc2VsZi5jdXJyZW50VmlldyA9PT0gJ2hvdXJzJykgewoJCQkJCXNlbGYudG9nZ2xlVmlldygnbWludXRlcycsIGR1cmF0aW9uIC8gMik7CiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmF1dG9jbG9zZSkgewoJCQkJCXNlbGYubWludXRlc1ZpZXcuYWRkQ2xhc3MoJ2Nsb2NrcGlja2VyLWRpYWwtb3V0Jyk7CgkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpewoJCQkJCQlzZWxmLmRvbmUoKTsKCQkJCQl9LCBkdXJhdGlvbiAvIDIpOwogICAgICAgIH0KCQkJCXBsYXRlLnByZXBlbmQoY2FudmFzKTsKCgkJCQkvLyBSZXNldCBjdXJzb3Igc3R5bGUgb2YgYm9keQoJCQkJY2xlYXJUaW1lb3V0KG1vdmluZ1RpbWVyKTsKCQkJCXNlbGYucG9wb3Zlci5yZW1vdmVDbGFzcygnY2xvY2twaWNrZXItbW92aW5nJyk7CgoJCQkJLy8gVW5iaW5kIG1vdXNlbW92ZSBldmVudAoJCQkJJGRvYy5vZmYobW91c2Vtb3ZlRXZlbnQpOwoJCQl9KTsKCQl9CgoJCWlmIChzdmdTdXBwb3J0ZWQpIHsKCQkJLy8gRHJhdyBjbG9jayBoYW5kcyBhbmQgb3RoZXJzCgkJCXZhciBjYW52YXMgPSBwb3BvdmVyLmZpbmQoJy5jbG9ja3BpY2tlci1jYW52YXMnKSwKCQkJCQlzdmcgPSBjcmVhdGVTdmdFbGVtZW50KCdzdmcnKTsKCQkJc3ZnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY2xvY2twaWNrZXItc3ZnJyk7CgkJCXN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgZGlhbWV0ZXIpOwoJCQlzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBkaWFtZXRlcik7CgkJCXZhciBnID0gY3JlYXRlU3ZnRWxlbWVudCgnZycpOwoJCQlnLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgZGlhbFJhZGl1cyArICcsJyArIGRpYWxSYWRpdXMgKyAnKScpOwoJCQl2YXIgYmVhcmluZyA9IGNyZWF0ZVN2Z0VsZW1lbnQoJ2NpcmNsZScpOwoJCQliZWFyaW5nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY2xvY2twaWNrZXItY2FudmFzLWJlYXJpbmcnKTsKCQkJYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2N4JywgMCk7CgkJCWJlYXJpbmcuc2V0QXR0cmlidXRlKCdjeScsIDApOwoJCQliZWFyaW5nLnNldEF0dHJpYnV0ZSgncicsIDQpOwoJCQl2YXIgaGFuZCA9IGNyZWF0ZVN2Z0VsZW1lbnQoJ2xpbmUnKTsKCQkJaGFuZC5zZXRBdHRyaWJ1dGUoJ3gxJywgMCk7CgkJCWhhbmQuc2V0QXR0cmlidXRlKCd5MScsIDApOwoJCQl2YXIgYmcgPSBjcmVhdGVTdmdFbGVtZW50KCdjaXJjbGUnKTsKCQkJYmcuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjbG9ja3BpY2tlci1jYW52YXMtYmcnKTsKCQkJYmcuc2V0QXR0cmlidXRlKCdyJywgdGlja1JhZGl1cyk7CgkJCWcuYXBwZW5kQ2hpbGQoaGFuZCk7CgkJCWcuYXBwZW5kQ2hpbGQoYmcpOwoJCQlnLmFwcGVuZENoaWxkKGJlYXJpbmcpOwoJCQlzdmcuYXBwZW5kQ2hpbGQoZyk7CgkJCWNhbnZhcy5hcHBlbmQoc3ZnKTsKCgkJCXRoaXMuaGFuZCA9IGhhbmQ7CgkJCXRoaXMuYmcgPSBiZzsKCQkJdGhpcy5iZWFyaW5nID0gYmVhcmluZzsKCQkJdGhpcy5nID0gZzsKCQkJdGhpcy5jYW52YXMgPSBjYW52YXM7CgkJfQoKCQlyYWlzZUNhbGxiYWNrKHRoaXMub3B0aW9ucy5pbml0KTsKCX0KCglmdW5jdGlvbiByYWlzZUNhbGxiYWNrKGNhbGxiYWNrRnVuY3Rpb24pIHsKCQlpZiAoY2FsbGJhY2tGdW5jdGlvbiAmJiB0eXBlb2YgY2FsbGJhY2tGdW5jdGlvbiA9PT0gImZ1bmN0aW9uIikKCQkJY2FsbGJhY2tGdW5jdGlvbigpOwoJfQoKCS8vIERlZmF1bHQgb3B0aW9ucwoJQ2xvY2tQaWNrZXIuREVGQVVMVFMgPSB7CgkJJ2RlZmF1bHQnOiAnJywgICAgICAgICAvLyBkZWZhdWx0IHRpbWUsICdub3cnIG9yICcxMzoxNCcgZS5nLgoJCWZyb21ub3c6IDAsICAgICAgICAgICAgLy8gc2V0IGRlZmF1bHQgdGltZSB0byAqIG1pbGxpc2Vjb25kcyBmcm9tIG5vdyAodXNpbmcgd2l0aCBkZWZhdWx0ID0gJ25vdycpCgkJZG9uZXRleHQ6ICdPaycsICAgICAgLy8gZG9uZSBidXR0b24gdGV4dAoJCWNsZWFydGV4dDogJ0NsZWFyJywKCQljYW5jZWx0ZXh0OiAnQ2FuY2VsJywKCQlhdXRvY2xvc2U6IGZhbHNlLCAgICAgIC8vIGF1dG8gY2xvc2Ugd2hlbiBtaW51dGUgaXMgc2VsZWN0ZWQKCQlhbXBtY2xpY2thYmxlOiB0cnVlLCAgLy8gc2V0IGFtL3BtIGJ1dHRvbiBvbiBpdHNlbGYKCQlkYXJrdGhlbWU6IGZhbHNlLAkJCSAvLyBzZXQgdG8gZGFyayB0aGVtZQoJCXR3ZWx2ZWhvdXI6IHRydWUsICAgICAgLy8gY2hhbmdlIHRvIDEyIGhvdXIgQU0vUE0gY2xvY2sgZnJvbSAyNCBob3VyCgkJdmlicmF0ZTogdHJ1ZSAgICAgICAgICAvLyB2aWJyYXRlIHRoZSBkZXZpY2Ugd2hlbiBkcmFnZ2luZyBjbG9jayBoYW5kCgl9OwoKCS8vIFNob3cgb3IgaGlkZSBwb3BvdmVyCglDbG9ja1BpY2tlci5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24oKSB7CgkJdGhpc1t0aGlzLmlzU2hvd24gPyAnaGlkZScgOiAnc2hvdyddKCk7Cgl9OwoKCS8vIFNldCBwb3BvdmVyIHBvc2l0aW9uCglDbG9ja1BpY2tlci5wcm90b3R5cGUubG9jYXRlID0gZnVuY3Rpb24oKSB7CgkJdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsCgkJCQlwb3BvdmVyID0gdGhpcy5wb3BvdmVyLAoJCQkJb2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKSwKCQkJCXdpZHRoID0gZWxlbWVudC5vdXRlcldpZHRoKCksCgkJCQloZWlnaHQgPSBlbGVtZW50Lm91dGVySGVpZ2h0KCksCgkJCQlhbGlnbiA9IHRoaXMub3B0aW9ucy5hbGlnbiwKCQkJCXNlbGYgPSB0aGlzOwoKCQlwb3BvdmVyLnNob3coKTsKCX07CgoJLy8gU2hvdyBwb3BvdmVyCglDbG9ja1BpY2tlci5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGUpewoJCS8vIE5vdCBzaG93IGFnYWluCgkJaWYgKHRoaXMuaXNTaG93bikgewoJCQlyZXR1cm47CgkJfQoJCXJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZVNob3cpOwoJCSQoJzppbnB1dCcpLmVhY2goZnVuY3Rpb24oKSB7CgkJCSQodGhpcykuYXR0cigndGFiaW5kZXgnLCAtMSk7CgkJfSkKCQl2YXIgc2VsZiA9IHRoaXM7CgkJLy8gSW5pdGlhbGl6ZQoJCXRoaXMuaW5wdXQuYmx1cigpOwoJCXRoaXMucG9wb3Zlci5hZGRDbGFzcygncGlja2VyLS1vcGVuZWQnKTsKCQl0aGlzLmlucHV0LmFkZENsYXNzKCdwaWNrZXJfX2lucHV0IHBpY2tlcl9faW5wdXQtLWFjdGl2ZScpOwoJCSQoZG9jdW1lbnQuYm9keSkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTsKCQkvLyBHZXQgdGhlIHRpbWUKCQl2YXIgdmFsdWUgPSAoKHRoaXMuaW5wdXQucHJvcCgndmFsdWUnKSB8fCB0aGlzLm9wdGlvbnNbJ2RlZmF1bHQnXSB8fCAnJykgKyAnJykuc3BsaXQoJzonKTsKCQlpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZWhvdXIgJiYgISh0eXBlb2YgdmFsdWVbMV0gPT09ICd1bmRlZmluZWQnKSkgewoJCQlpZiAodmFsdWVbMV0uaW5kZXhPZigiQU0iKSA+IDApewoJCQkJdGhpcy5hbU9yUG0gPSAnQU0nOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5hbU9yUG0gPSAnUE0nOwoJCQl9CgkJCXZhbHVlWzFdID0gdmFsdWVbMV0ucmVwbGFjZSgiQU0iLCAiIikucmVwbGFjZSgiUE0iLCAiIik7CgkJfQoJCWlmICh2YWx1ZVswXSA9PT0gJ25vdycpIHsKCQkJdmFyIG5vdyA9IG5ldyBEYXRlKCsgbmV3IERhdGUoKSArIHRoaXMub3B0aW9ucy5mcm9tbm93KTsKCQkJdmFsdWUgPSBbCgkJCQlub3cuZ2V0SG91cnMoKSwKCQkJCW5vdy5nZXRNaW51dGVzKCkKCQkJXTsKCQl9CgkJdGhpcy5ob3VycyA9ICsgdmFsdWVbMF0gfHwgMDsKCQl0aGlzLm1pbnV0ZXMgPSArIHZhbHVlWzFdIHx8IDA7CgkJdGhpcy5zcGFuSG91cnMuaHRtbCh0aGlzLmhvdXJzKTsKCQl0aGlzLnNwYW5NaW51dGVzLmh0bWwobGVhZGluZ1plcm8odGhpcy5taW51dGVzKSk7CgkJaWYgKCF0aGlzLmlzQXBwZW5kZWQpIHsKCQkJLy8gQXBwZW5kIHBvcG92ZXIgdG8gYm9keQoJCQl0aGlzLnBvcG92ZXIuaW5zZXJ0QWZ0ZXIodGhpcy5pbnB1dCk7CgkJCWlmICh0aGlzLm9wdGlvbnMudHdlbHZlaG91cikgewoJCQkJaWYgKHRoaXMuYW1PclBtID09PSAnUE0nKXsKCQkJCQl0aGlzLnNwYW5BbVBtLmNoaWxkcmVuKCcjY2xpY2stcG0nKS5hZGRDbGFzcygidGV4dC1wcmltYXJ5Iik7CgkJCQkJdGhpcy5zcGFuQW1QbS5jaGlsZHJlbignI2NsaWNrLWFtJykucmVtb3ZlQ2xhc3MoInRleHQtcHJpbWFyeSIpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLnNwYW5BbVBtLmNoaWxkcmVuKCcjY2xpY2stYW0nKS5hZGRDbGFzcygidGV4dC1wcmltYXJ5Iik7CgkJCQkJdGhpcy5zcGFuQW1QbS5jaGlsZHJlbignI2NsaWNrLXBtJykucmVtb3ZlQ2xhc3MoInRleHQtcHJpbWFyeSIpOwoJCQkJfQoJCQl9CgkJCS8vIFJlc2V0IHBvc2l0aW9uIHdoZW4gcmVzaXplCgkJCSR3aW4ub24oJ3Jlc2l6ZS5jbG9ja3BpY2tlcicgKyB0aGlzLmlkLCBmdW5jdGlvbigpIHsKCQkJCWlmIChzZWxmLmlzU2hvd24pIHsKCQkJCQlzZWxmLmxvY2F0ZSgpOwoJCQkJfQoJCQl9KTsKCQkJdGhpcy5pc0FwcGVuZGVkID0gdHJ1ZTsKCQl9CgkJLy8gVG9nZ2xlIHRvIGhvdXJzIHZpZXcKCQl0aGlzLnRvZ2dsZVZpZXcoJ2hvdXJzJyk7CgkJLy8gU2V0IHBvc2l0aW9uCgkJdGhpcy5sb2NhdGUoKTsKCQl0aGlzLmlzU2hvd24gPSB0cnVlOwoJCS8vIEhpZGUgd2hlbiBjbGlja2luZyBvciB0YWJiaW5nIG9uIGFueSBlbGVtZW50IGV4Y2VwdCB0aGUgY2xvY2sgYW5kIGlucHV0CgkJJGRvYy5vbignY2xpY2suY2xvY2twaWNrZXIuJyArIHRoaXMuaWQgKyAnIGZvY3VzaW4uY2xvY2twaWNrZXIuJyArIHRoaXMuaWQsIGZ1bmN0aW9uKGUpIHsKCQkJdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpOwoJCQlpZiAodGFyZ2V0LmNsb3Nlc3Qoc2VsZi5wb3BvdmVyLmZpbmQoJy5waWNrZXJfX3dyYXAnKSkubGVuZ3RoID09PSAwICYmIHRhcmdldC5jbG9zZXN0KHNlbGYuaW5wdXQpLmxlbmd0aCA9PT0gMCkgewoJCQkJc2VsZi5oaWRlKCk7CiAgICAgIH0KCQl9KTsKCQkvLyBIaWRlIHdoZW4gRVNDIGlzIHByZXNzZWQKCQkkZG9jLm9uKCdrZXl1cC5jbG9ja3BpY2tlci4nICsgdGhpcy5pZCwgZnVuY3Rpb24oZSl7CgkJCWlmIChlLmtleUNvZGUgPT09IDI3KSB7CgkJCQlzZWxmLmhpZGUoKTsKICAgICAgfQoJCX0pOwoJCXJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyU2hvdyk7Cgl9OwoJLy8gSGlkZSBwb3BvdmVyCglDbG9ja1BpY2tlci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkgewoJCXJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZUhpZGUpOwoJCXRoaXMuaW5wdXQucmVtb3ZlQ2xhc3MoJ3BpY2tlcl9faW5wdXQgcGlja2VyX19pbnB1dC0tYWN0aXZlJyk7CgkJdGhpcy5wb3BvdmVyLnJlbW92ZUNsYXNzKCdwaWNrZXItLW9wZW5lZCcpOwoJCSQoZG9jdW1lbnQuYm9keSkuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7CgkJdGhpcy5pc1Nob3duID0gZmFsc2U7CgkJJCgnOmlucHV0JykuZWFjaChmdW5jdGlvbihpbmRleCkgewoJCQkkKHRoaXMpLmF0dHIoJ3RhYmluZGV4JywgaW5kZXggKyAxKTsKCQl9KTsKCQkvLyBVbmJpbmRpbmcgZXZlbnRzIG9uIGRvY3VtZW50CgkJJGRvYy5vZmYoJ2NsaWNrLmNsb2NrcGlja2VyLicgKyB0aGlzLmlkICsgJyBmb2N1c2luLmNsb2NrcGlja2VyLicgKyB0aGlzLmlkKTsKCQkkZG9jLm9mZigna2V5dXAuY2xvY2twaWNrZXIuJyArIHRoaXMuaWQpOwoJCXRoaXMucG9wb3Zlci5oaWRlKCk7CgkJcmFpc2VDYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJIaWRlKTsKCX07CgkvLyBUb2dnbGUgdG8gaG91cnMgb3IgbWludXRlcyB2aWV3CglDbG9ja1BpY2tlci5wcm90b3R5cGUudG9nZ2xlVmlldyA9IGZ1bmN0aW9uKHZpZXcsIGRlbGF5KSB7CgkJdmFyIHJhaXNlQWZ0ZXJIb3VyU2VsZWN0ID0gZmFsc2U7CgkJaWYgKHZpZXcgPT09ICdtaW51dGVzJyAmJiAkKHRoaXMuaG91cnNWaWV3KS5jc3MoInZpc2liaWxpdHkiKSA9PT0gInZpc2libGUiKSB7CgkJCXJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZUhvdXJTZWxlY3QpOwoJCQlyYWlzZUFmdGVySG91clNlbGVjdCA9IHRydWU7CgkJfQoJCXZhciBpc0hvdXJzID0gdmlldyA9PT0gJ2hvdXJzJywKCQkJCW5leHRWaWV3ID0gaXNIb3VycyA/IHRoaXMuaG91cnNWaWV3IDogdGhpcy5taW51dGVzVmlldywKCQkJCWhpZGVWaWV3ID0gaXNIb3VycyA/IHRoaXMubWludXRlc1ZpZXcgOiB0aGlzLmhvdXJzVmlldzsKCQl0aGlzLmN1cnJlbnRWaWV3ID0gdmlldzsKCgkJdGhpcy5zcGFuSG91cnMudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIGlzSG91cnMpOwoJCXRoaXMuc3Bhbk1pbnV0ZXMudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsICEgaXNIb3Vycyk7CgoJCS8vIExldCdzIG1ha2UgdHJhbnNpdGlvbnMKCQloaWRlVmlldy5hZGRDbGFzcygnY2xvY2twaWNrZXItZGlhbC1vdXQnKTsKCQluZXh0Vmlldy5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpLnJlbW92ZUNsYXNzKCdjbG9ja3BpY2tlci1kaWFsLW91dCcpOwoKCQkvLyBSZXNldCBjbG9jayBoYW5kCgkJdGhpcy5yZXNldENsb2NrKGRlbGF5KTsKCgkJLy8gQWZ0ZXIgdHJhbnNpdGlvbnMgZW5kZWQKCQljbGVhclRpbWVvdXQodGhpcy50b2dnbGVWaWV3VGltZXIpOwoJCXRoaXMudG9nZ2xlVmlld1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJaGlkZVZpZXcuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpOwoJCX0sIGR1cmF0aW9uKTsKCgkJaWYgKHJhaXNlQWZ0ZXJIb3VyU2VsZWN0KSB7CgkJCXJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVySG91clNlbGVjdCk7CiAgICB9Cgl9OwoKCS8vIFJlc2V0IGNsb2NrIGhhbmQKCUNsb2NrUGlja2VyLnByb3RvdHlwZS5yZXNldENsb2NrID0gZnVuY3Rpb24oZGVsYXkpIHsKCQl2YXIgdmlldyA9IHRoaXMuY3VycmVudFZpZXcsCgkJCQl2YWx1ZSA9IHRoaXNbdmlld10sCgkJCQlpc0hvdXJzID0gdmlldyA9PT0gJ2hvdXJzJywKCQkJCXVuaXQgPSBNYXRoLlBJIC8gKGlzSG91cnMgPyA2IDogMzApLAoJCQkJcmFkaWFuID0gdmFsdWUgKiB1bml0LAoJCQkJcmFkaXVzID0gaXNIb3VycyAmJiB2YWx1ZSA+IDAgJiYgdmFsdWUgPCAxMyA/IGlubmVyUmFkaXVzIDogb3V0ZXJSYWRpdXMsCgkJCQl4ID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cywKCQkJCXkgPSAtIE1hdGguY29zKHJhZGlhbikgKiByYWRpdXMsCgkJCQlzZWxmID0gdGhpczsKCgkJaWYgKHN2Z1N1cHBvcnRlZCAmJiBkZWxheSkgewoJCQlzZWxmLmNhbnZhcy5hZGRDbGFzcygnY2xvY2twaWNrZXItY2FudmFzLW91dCcpOwoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CgkJCQlzZWxmLmNhbnZhcy5yZW1vdmVDbGFzcygnY2xvY2twaWNrZXItY2FudmFzLW91dCcpOwoJCQkJc2VsZi5zZXRIYW5kKHgsIHkpOwoJCQl9LCBkZWxheSk7CgkJfSBlbHNlCgkJCXRoaXMuc2V0SGFuZCh4LCB5KTsKCX07CgoJLy8gU2V0IGNsb2NrIGhhbmQgdG8gKHgsIHkpCglDbG9ja1BpY2tlci5wcm90b3R5cGUuc2V0SGFuZCA9IGZ1bmN0aW9uKHgsIHksIHJvdW5kQnk1LCBkcmFnZ2luZykgewoJCXZhciByYWRpYW4gPSBNYXRoLmF0YW4yKHgsIC0geSksCgkJCQlpc0hvdXJzID0gdGhpcy5jdXJyZW50VmlldyA9PT0gJ2hvdXJzJywKCQkJCXVuaXQgPSBNYXRoLlBJIC8gKGlzSG91cnMgfHwgcm91bmRCeTU/IDYgOiAzMCksCgkJCQl6ID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpLAoJCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJCWlubmVyID0gaXNIb3VycyAmJiB6IDwgKG91dGVyUmFkaXVzICsgaW5uZXJSYWRpdXMpIC8gMiwKCQkJCXJhZGl1cyA9IGlubmVyID8gaW5uZXJSYWRpdXMgOiBvdXRlclJhZGl1cywKCQkJCXZhbHVlOwoKCQlpZiAob3B0aW9ucy50d2VsdmVob3VyKSB7CgkJCXJhZGl1cyA9IG91dGVyUmFkaXVzOwogICAgfQoKCQkvLyBSYWRpYW4gc2hvdWxkIGluIHJhbmdlIFswLCAyUEldCgkJaWYgKHJhZGlhbiA8IDApIHsKCQkJcmFkaWFuID0gTWF0aC5QSSAqIDIgKyByYWRpYW47CiAgICB9CgoJCS8vIEdldCB0aGUgcm91bmQgdmFsdWUKCQl2YWx1ZSA9IE1hdGgucm91bmQocmFkaWFuIC8gdW5pdCk7CgoJCS8vIEdldCB0aGUgcm91bmQgcmFkaWFuCgkJcmFkaWFuID0gdmFsdWUgKiB1bml0OwoKCQkvLyBDb3JyZWN0IHRoZSBob3VycyBvciBtaW51dGVzCgkJaWYgKG9wdGlvbnMudHdlbHZlaG91cikgewoJCQlpZiAoaXNIb3VycykgewoJCQkJaWYgKHZhbHVlID09PSAwKQoJCQkJCXZhbHVlID0gMTI7CgkJCX0gZWxzZSB7CgkJCQlpZiAocm91bmRCeTUpCgkJCQkJdmFsdWUgKj0gNTsKCQkJCWlmICh2YWx1ZSA9PT0gNjApCgkJCQkJdmFsdWUgPSAwOwoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKGlzSG91cnMpIHsKCQkJCWlmICh2YWx1ZSA9PT0gMTIpCgkJCQkJdmFsdWUgPSAwOwoJCQkJdmFsdWUgPSBpbm5lciA/ICh2YWx1ZSA9PT0gMCA/IDEyIDogdmFsdWUpIDogdmFsdWUgPT09IDAgPyAwIDogdmFsdWUgKyAxMjsKCQkJfSBlbHNlIHsKCQkJCWlmIChyb3VuZEJ5NSkKCQkJCQl2YWx1ZSAqPSA1OwoJCQkJaWYgKHZhbHVlID09PSA2MCkKCQkJCQl2YWx1ZSA9IDA7CgkJCX0KCQl9CgoJCS8vIE9uY2UgaG91cnMgb3IgbWludXRlcyBjaGFuZ2VkLCB2aWJyYXRlIHRoZSBkZXZpY2UKCQlpZiAodGhpc1t0aGlzLmN1cnJlbnRWaWV3XSAhPT0gdmFsdWUpIHsKCQkJaWYgKHZpYnJhdGUgJiYgdGhpcy5vcHRpb25zLnZpYnJhdGUpIHsKCQkJCS8vIERvIG5vdCB2aWJyYXRlIHRvbyBmcmVxdWVudGx5CgkJCQlpZiAoIXRoaXMudmlicmF0ZVRpbWVyKSB7CgkJCQkJbmF2aWdhdG9yW3ZpYnJhdGVdKDEwKTsKCQkJCQl0aGlzLnZpYnJhdGVUaW1lciA9IHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpewoJCQkJCQl0aGlzLnZpYnJhdGVUaW1lciA9IG51bGw7CgkJCQkJfSwgdGhpcyksIDEwMCk7CgkJCQl9CiAgICAgIH0KICAgIH0KCgkJdGhpc1t0aGlzLmN1cnJlbnRWaWV3XSA9IHZhbHVlOwogICAgaWYgKGlzSG91cnMpIHsKICAgICAgdGhpc1snc3BhbkhvdXJzJ10uaHRtbCh2YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzWydzcGFuTWludXRlcyddLmh0bWwobGVhZGluZ1plcm8odmFsdWUpKTsKICAgIH0KCgkJLy8gSWYgc3ZnIGlzIG5vdCBzdXBwb3J0ZWQsIGp1c3QgYWRkIGFuIGFjdGl2ZSBjbGFzcyB0byB0aGUgdGljawoJCWlmICghc3ZnU3VwcG9ydGVkKSB7CgkJCXRoaXNbaXNIb3VycyA/ICdob3Vyc1ZpZXcnIDogJ21pbnV0ZXNWaWV3J10uZmluZCgnLmNsb2NrcGlja2VyLXRpY2snKS5lYWNoKGZ1bmN0aW9uKCl7CgkJCQl2YXIgdGljayA9ICQodGhpcyk7CgkJCQl0aWNrLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCB2YWx1ZSA9PT0gKyB0aWNrLmh0bWwoKSk7CgkJCX0pOwoJCQlyZXR1cm47CgkJfQoKCQkvLyBTZXQgY2xvY2sgaGFuZCBhbmQgb3RoZXJzJyBwb3NpdGlvbgoJCXZhciBjeDEgPSBNYXRoLnNpbihyYWRpYW4pICogKHJhZGl1cyAtIHRpY2tSYWRpdXMpLAoJCQkgIGN5MSA9IC0gTWF0aC5jb3MocmFkaWFuKSAqIChyYWRpdXMgLSB0aWNrUmFkaXVzKSwKCQkgICAgY3gyID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cywKCQkJICBjeTIgPSAtIE1hdGguY29zKHJhZGlhbikgKiByYWRpdXM7CgkJdGhpcy5oYW5kLnNldEF0dHJpYnV0ZSgneDInLCBjeDEpOwoJCXRoaXMuaGFuZC5zZXRBdHRyaWJ1dGUoJ3kyJywgY3kxKTsKCQl0aGlzLmJnLnNldEF0dHJpYnV0ZSgnY3gnLCBjeDIpOwoJCXRoaXMuYmcuc2V0QXR0cmlidXRlKCdjeScsIGN5Mik7Cgl9OwoKCS8vIEhvdXJzIGFuZCBtaW51dGVzIGFyZSBzZWxlY3RlZAoJQ2xvY2tQaWNrZXIucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbigpIHsKCQlyYWlzZUNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVEb25lKTsKCQl0aGlzLmhpZGUoKTsKCQl0aGlzLmxhYmVsLmFkZENsYXNzKCdhY3RpdmUnKTsKCgkJdmFyIGxhc3QgPSB0aGlzLmlucHV0LnByb3AoJ3ZhbHVlJyksCgkJCQl2YWx1ZSA9IGxlYWRpbmdaZXJvKHRoaXMuaG91cnMpICsgJzonICsgbGVhZGluZ1plcm8odGhpcy5taW51dGVzKTsKCQlpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZWhvdXIpIHsKCQkJdmFsdWUgPSB2YWx1ZSArIHRoaXMuYW1PclBtOwogICAgfQoKCQl0aGlzLmlucHV0LnByb3AoJ3ZhbHVlJywgdmFsdWUpOwoJCWlmICh2YWx1ZSAhPT0gbGFzdCkgewoJCQl0aGlzLmlucHV0LnRyaWdnZXJIYW5kbGVyKCdjaGFuZ2UnKTsKCQkJaWYgKCF0aGlzLmlzSW5wdXQpIHsKCQkJCXRoaXMuZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgfQoJCX0KCgkJaWYgKHRoaXMub3B0aW9ucy5hdXRvY2xvc2UpCgkJCXRoaXMuaW5wdXQudHJpZ2dlcignYmx1cicpOwoKCQlyYWlzZUNhbGxiYWNrKHRoaXMub3B0aW9ucy5hZnRlckRvbmUpOwoJfTsKCgkvLyBDbGVhciBpbnB1dCBmaWVsZAoJQ2xvY2tQaWNrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7CgkJdGhpcy5oaWRlKCk7CgkJdGhpcy5sYWJlbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CgoJCXZhciBsYXN0ID0gdGhpcy5pbnB1dC5wcm9wKCd2YWx1ZScpLAoJCQkgIHZhbHVlID0gJyc7CgoJCXRoaXMuaW5wdXQucHJvcCgndmFsdWUnLCB2YWx1ZSk7CgkJaWYgKHZhbHVlICE9PSBsYXN0KSB7CgkJCXRoaXMuaW5wdXQudHJpZ2dlckhhbmRsZXIoJ2NoYW5nZScpOwoJCQlpZiAoISB0aGlzLmlzSW5wdXQpIHsKCQkJCXRoaXMuZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTsKCQkJfQoJCX0KCgkJaWYgKHRoaXMub3B0aW9ucy5hdXRvY2xvc2UpIHsKCQkJdGhpcy5pbnB1dC50cmlnZ2VyKCdibHVyJyk7CgkJfQoJfTsKCgkvLyBSZW1vdmUgY2xvY2twaWNrZXIgZnJvbSBpbnB1dAoJQ2xvY2tQaWNrZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudC5yZW1vdmVEYXRhKCdjbG9ja3BpY2tlcicpOwoJCXRoaXMuaW5wdXQub2ZmKCdmb2N1cy5jbG9ja3BpY2tlciBjbGljay5jbG9ja3BpY2tlcicpOwoJCWlmICh0aGlzLmlzU2hvd24pIHsKCQkJdGhpcy5oaWRlKCk7CiAgICB9CgkJaWYgKHRoaXMuaXNBcHBlbmRlZCkgewoJCQkkd2luLm9mZigncmVzaXplLmNsb2NrcGlja2VyJyArIHRoaXMuaWQpOwoJCQl0aGlzLnBvcG92ZXIucmVtb3ZlKCk7CgkJfQoJfTsKCgkvLyBFeHRlbmRzICQuZm4uY2xvY2twaWNrZXIKCSQuZm4ucGlja2F0aW1lID0gZnVuY3Rpb24ob3B0aW9uKXsKCQl2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CgkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpewoJCQl2YXIgJHRoaXMgPSAkKHRoaXMpLAoJCQkJCWRhdGEgPSAkdGhpcy5kYXRhKCdjbG9ja3BpY2tlcicpOwoJCQlpZiAoIWRhdGEpIHsKCQkJCXZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIENsb2NrUGlja2VyLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKTsKCQkJCSR0aGlzLmRhdGEoJ2Nsb2NrcGlja2VyJywgbmV3IENsb2NrUGlja2VyKCR0aGlzLCBvcHRpb25zKSk7CgkJCX0gZWxzZSB7CgkJCQkvLyBNYW51YWwgb3BlcmF0c2lvbnMuIHNob3csIGhpZGUsIHJlbW92ZSwgZS5nLgoJCQkJaWYgKHR5cGVvZiBkYXRhW29wdGlvbl0gPT09ICdmdW5jdGlvbicpIHsKCQkJCQlkYXRhW29wdGlvbl0uYXBwbHkoZGF0YSwgYXJncyk7CiAgICAgICAgfQoJCQl9CgkJfSk7Cgl9Owp9KCkpOwo7KGZ1bmN0aW9uICgkKSB7CgogICQuZm4uY2hhcmFjdGVyQ291bnRlciA9IGZ1bmN0aW9uKCl7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgIHZhciAkaW5wdXQgPSAkKHRoaXMpOwogICAgICB2YXIgJGNvdW50ZXJFbGVtZW50ID0gJGlucHV0LnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9ImNoYXJhY3Rlci1jb3VudGVyIl0nKTsKCiAgICAgIC8vIGNoYXJhY3RlciBjb3VudGVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQgYXBwZW5kZWQgdG8gdGhlIHBhcmVudCBjb250YWluZXIKICAgICAgaWYgKCRjb3VudGVyRWxlbWVudC5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdEhhc0xlbmd0aEF0dHJpYnV0ZSA9ICRpbnB1dC5hdHRyKCdkYXRhLWxlbmd0aCcpICE9PSB1bmRlZmluZWQ7CgogICAgICBpZihpdEhhc0xlbmd0aEF0dHJpYnV0ZSl7CiAgICAgICAgJGlucHV0Lm9uKCdpbnB1dCcsIHVwZGF0ZUNvdW50ZXIpOwogICAgICAgICRpbnB1dC5vbignZm9jdXMnLCB1cGRhdGVDb3VudGVyKTsKICAgICAgICAkaW5wdXQub24oJ2JsdXInLCByZW1vdmVDb3VudGVyRWxlbWVudCk7CgogICAgICAgIGFkZENvdW50ZXJFbGVtZW50KCRpbnB1dCk7CiAgICAgIH0KCiAgICB9KTsKICB9OwoKICBmdW5jdGlvbiB1cGRhdGVDb3VudGVyKCl7CiAgICB2YXIgbWF4TGVuZ3RoICAgICA9ICskKHRoaXMpLmF0dHIoJ2RhdGEtbGVuZ3RoJyksCiAgICBhY3R1YWxMZW5ndGggICAgICA9ICskKHRoaXMpLnZhbCgpLmxlbmd0aCwKICAgIGlzVmFsaWRMZW5ndGggICAgID0gYWN0dWFsTGVuZ3RoIDw9IG1heExlbmd0aDsKCiAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9ImNoYXJhY3Rlci1jb3VudGVyIl0nKQogICAgICAgICAgICAgICAgICAgIC5odG1sKCBhY3R1YWxMZW5ndGggKyAnLycgKyBtYXhMZW5ndGgpOwoKICAgIGFkZElucHV0U3R5bGUoaXNWYWxpZExlbmd0aCwgJCh0aGlzKSk7CiAgfQoKICBmdW5jdGlvbiBhZGRDb3VudGVyRWxlbWVudCgkaW5wdXQpIHsKICAgIHZhciAkY291bnRlckVsZW1lbnQgPSAkaW5wdXQucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz0iY2hhcmFjdGVyLWNvdW50ZXIiXScpOwoKICAgIGlmICgkY291bnRlckVsZW1lbnQubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAkY291bnRlckVsZW1lbnQgPSAkKCc8c3Bhbi8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFyYWN0ZXItY291bnRlcicpCiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Zsb2F0JywncmlnaHQnKQogICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdmb250LXNpemUnLCcxMnB4JykKICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnaGVpZ2h0JywgMSk7CgogICAgJGlucHV0LnBhcmVudCgpLmFwcGVuZCgkY291bnRlckVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQ291bnRlckVsZW1lbnQoKXsKICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz0iY2hhcmFjdGVyLWNvdW50ZXIiXScpLmh0bWwoJycpOwogIH0KCiAgZnVuY3Rpb24gYWRkSW5wdXRTdHlsZShpc1ZhbGlkTGVuZ3RoLCAkaW5wdXQpewogICAgdmFyIGlucHV0SGFzSW52YWxpZENsYXNzID0gJGlucHV0Lmhhc0NsYXNzKCdpbnZhbGlkJyk7CiAgICBpZiAoaXNWYWxpZExlbmd0aCAmJiBpbnB1dEhhc0ludmFsaWRDbGFzcykgewogICAgICAkaW5wdXQucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTsKICAgIH0KICAgIGVsc2UgaWYoIWlzVmFsaWRMZW5ndGggJiYgIWlucHV0SGFzSW52YWxpZENsYXNzKXsKICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCd2YWxpZCcpOwogICAgICAkaW5wdXQuYWRkQ2xhc3MoJ2ludmFsaWQnKTsKICAgIH0KICB9CgogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7CiAgICAkKCdpbnB1dCwgdGV4dGFyZWEnKS5jaGFyYWN0ZXJDb3VudGVyKCk7CiAgfSk7Cgp9KCBqUXVlcnkgKSk7CjsoZnVuY3Rpb24gKCQpIHsKCiAgdmFyIG1ldGhvZHMgPSB7CgogICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgIGR1cmF0aW9uOiAyMDAsIC8vIG1zCiAgICAgICAgZGlzdDogLTEwMCwgLy8gem9vbSBzY2FsZSBUT0RPOiBtYWtlIHRoaXMgbW9yZSBpbnR1aXRpdmUgYXMgYW4gb3B0aW9uCiAgICAgICAgc2hpZnQ6IDAsIC8vIHNwYWNpbmcgZm9yIGNlbnRlciBpbWFnZQogICAgICAgIHBhZGRpbmc6IDAsIC8vIFBhZGRpbmcgYmV0d2VlbiBub24gY2VudGVyIGl0ZW1zCiAgICAgICAgZnVsbFdpZHRoOiBmYWxzZSwgLy8gQ2hhbmdlIHRvIGZ1bGwgd2lkdGggc3R5bGVzCiAgICAgICAgaW5kaWNhdG9yczogZmFsc2UsIC8vIFRvZ2dsZSBpbmRpY2F0b3JzCiAgICAgICAgbm9XcmFwOiBmYWxzZSwgLy8gRG9uJ3Qgd3JhcCBhcm91bmQgYW5kIGN5Y2xlIHRocm91Z2ggaXRlbXMuCiAgICAgICAgb25DeWNsZVRvOiBudWxsIC8vIENhbGxiYWNrIGZvciB3aGVuIGEgbmV3IHNsaWRlIGlzIGN5Y2xlZCB0by4KICAgICAgfTsKICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTsKICAgICAgdmFyIG5hbWVzcGFjZSA9IE1hdGVyaWFsaXplLm9iamVjdFNlbGVjdG9yU3RyaW5nKCQodGhpcykpOwoKICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKSB7CgogICAgICAgIHZhciB1bmlxdWVOYW1lc3BhY2UgPSBuYW1lc3BhY2UraTsKICAgICAgICB2YXIgaW1hZ2VzLCBpdGVtX3dpZHRoLCBpdGVtX2hlaWdodCwgb2Zmc2V0LCBjZW50ZXIsIHByZXNzZWQsIGRpbSwgY291bnQsCiAgICAgICAgICAgIHJlZmVyZW5jZSwgcmVmZXJlbmNlWSwgYW1wbGl0dWRlLCB0YXJnZXQsIHZlbG9jaXR5LCBzY3JvbGxpbmcsCiAgICAgICAgICAgIHhmb3JtLCBmcmFtZSwgdGltZXN0YW1wLCB0aWNrZXIsIGRyYWdnZWQsIHZlcnRpY2FsX2RyYWdnZWQ7CiAgICAgICAgdmFyICRpbmRpY2F0b3JzID0gJCgnPHVsIGNsYXNzPSJpbmRpY2F0b3JzIj48L3VsPicpOwogICAgICAgIHZhciBzY3JvbGxpbmdUaW1lb3V0ID0gbnVsbDsKICAgICAgICB2YXIgb25lVGltZUNhbGxiYWNrID0gbnVsbDsKCgogICAgICAgIC8vIEluaXRpYWxpemUKICAgICAgICB2YXIgdmlldyA9ICQodGhpcyk7CiAgICAgICAgdmFyIHNob3dJbmRpY2F0b3JzID0gdmlldy5hdHRyKCdkYXRhLWluZGljYXRvcnMnKSB8fCBvcHRpb25zLmluZGljYXRvcnM7CgoKICAgICAgICAvLyBPcHRpb25zCiAgICAgICAgdmFyIHNldENhcm91c2VsSGVpZ2h0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgZmlyc3RJbWFnZSA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0gaW1nJykuZmlyc3QoKTsKICAgICAgICAgIGlmIChmaXJzdEltYWdlLmxlbmd0aCkgewogICAgICAgICAgICBpZiAoZmlyc3RJbWFnZS5wcm9wKCdjb21wbGV0ZScpKSB7CiAgICAgICAgICAgICAgdmlldy5jc3MoJ2hlaWdodCcsIGZpcnN0SW1hZ2UuaGVpZ2h0KCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZpcnN0SW1hZ2Uub24oJ2xvYWQnLCBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmlldy5jc3MoJ2hlaWdodCcsICQodGhpcykuaGVpZ2h0KCkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgaW1hZ2VIZWlnaHQgPSB2aWV3LmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5oZWlnaHQoKTsKICAgICAgICAgICAgdmlldy5jc3MoJ2hlaWdodCcsIGltYWdlSGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAob3B0aW9ucy5mdWxsV2lkdGgpIHsKICAgICAgICAgIG9wdGlvbnMuZGlzdCA9IDA7CiAgICAgICAgICBzZXRDYXJvdXNlbEhlaWdodCgpOwoKICAgICAgICAgIC8vIE9mZnNldCBmaXhlZCBpdGVtcyB3aGVuIGluZGljYXRvcnMuCiAgICAgICAgICBpZiAoc2hvd0luZGljYXRvcnMpIHsKICAgICAgICAgICAgdmlldy5maW5kKCcuY2Fyb3VzZWwtZml4ZWQtaXRlbScpLmFkZENsYXNzKCd3aXRoLWluZGljYXRvcnMnKTsKICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICAvLyBEb24ndCBkb3VibGUgaW5pdGlhbGl6ZS4KICAgICAgICBpZiAodmlldy5oYXNDbGFzcygnaW5pdGlhbGl6ZWQnKSkgewogICAgICAgICAgLy8gUmVjYWxjdWxhdGUgdmFyaWFibGVzCiAgICAgICAgICAkKHdpbmRvdykudHJpZ2dlcigncmVzaXplJyk7CgogICAgICAgICAgLy8gUmVkcmF3IGNhcm91c2VsLgogICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjYXJvdXNlbE5leHQnLCBbMC4wMDAwMDFdKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCgogICAgICAgIHZpZXcuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7CiAgICAgICAgcHJlc3NlZCA9IGZhbHNlOwogICAgICAgIG9mZnNldCA9IHRhcmdldCA9IDA7CiAgICAgICAgaW1hZ2VzID0gW107CiAgICAgICAgaXRlbV93aWR0aCA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmlubmVyV2lkdGgoKTsKICAgICAgICBpdGVtX2hlaWdodCA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmlubmVySGVpZ2h0KCk7CiAgICAgICAgZGltID0gaXRlbV93aWR0aCAqIDIgKyBvcHRpb25zLnBhZGRpbmc7CgogICAgICAgIHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICBpbWFnZXMucHVzaCgkKHRoaXMpWzBdKTsKICAgICAgICAgIGlmIChzaG93SW5kaWNhdG9ycykgewogICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz0iaW5kaWNhdG9yLWl0ZW0iPjwvbGk+Jyk7CgogICAgICAgICAgICAvLyBBZGQgYWN0aXZlIHRvIGZpcnN0IGJ5IGRlZmF1bHQuCiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgJGluZGljYXRvci5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEhhbmRsZSBjbGlja3Mgb24gaW5kaWNhdG9ycy4KICAgICAgICAgICAgJGluZGljYXRvci5jbGljayhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgICAgICAgIHZhciBpbmRleCA9ICQodGhpcykuaW5kZXgoKTsKICAgICAgICAgICAgICBjeWNsZVRvKGluZGV4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICRpbmRpY2F0b3JzLmFwcGVuZCgkaW5kaWNhdG9yKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKHNob3dJbmRpY2F0b3JzKSB7CiAgICAgICAgICB2aWV3LmFwcGVuZCgkaW5kaWNhdG9ycyk7CiAgICAgICAgfQogICAgICAgIGNvdW50ID0gaW1hZ2VzLmxlbmd0aDsKCgogICAgICAgIGZ1bmN0aW9uIHNldHVwRXZlbnRzKCkgewogICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0YXApOwogICAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGRyYWcpOwogICAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgcmVsZWFzZSk7CiAgICAgICAgICB9CiAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRhcCk7CiAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpOwogICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgcmVsZWFzZSk7CiAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCByZWxlYXNlKTsKICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB4cG9zKGUpIHsKICAgICAgICAgIC8vIHRvdWNoIGV2ZW50CiAgICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpKSB7CiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBtb3VzZSBldmVudAogICAgICAgICAgcmV0dXJuIGUuY2xpZW50WDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHlwb3MoZSkgewogICAgICAgICAgLy8gdG91Y2ggZXZlbnQKICAgICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkpIHsKICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIG1vdXNlIGV2ZW50CiAgICAgICAgICByZXR1cm4gZS5jbGllbnRZOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gd3JhcCh4KSB7CiAgICAgICAgICByZXR1cm4gKHggPj0gY291bnQpID8gKHggJSBjb3VudCkgOiAoeCA8IDApID8gd3JhcChjb3VudCArICh4ICUgY291bnQpKSA6IHg7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzY3JvbGwoeCkgewogICAgICAgICAgLy8gVHJhY2sgc2Nyb2xsaW5nIHN0YXRlCiAgICAgICAgICBzY3JvbGxpbmcgPSB0cnVlOwogICAgICAgICAgaWYgKCF2aWV3Lmhhc0NsYXNzKCdzY3JvbGxpbmcnKSkgewogICAgICAgICAgICB2aWV3LmFkZENsYXNzKCdzY3JvbGxpbmcnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzY3JvbGxpbmdUaW1lb3V0ICE9IG51bGwpIHsKICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChzY3JvbGxpbmdUaW1lb3V0KTsKICAgICAgICAgIH0KICAgICAgICAgIHNjcm9sbGluZ1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2Nyb2xsaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHZpZXcucmVtb3ZlQ2xhc3MoJ3Njcm9sbGluZycpOwogICAgICAgICAgfSwgb3B0aW9ucy5kdXJhdGlvbik7CgogICAgICAgICAgLy8gU3RhcnQgYWN0dWFsIHNjcm9sbAogICAgICAgICAgdmFyIGksIGhhbGYsIGRlbHRhLCBkaXIsIHR3ZWVuLCBlbCwgYWxpZ25tZW50LCB4VHJhbnNsYXRpb247CiAgICAgICAgICB2YXIgbGFzdENlbnRlciA9IGNlbnRlcjsKCiAgICAgICAgICBvZmZzZXQgPSAodHlwZW9mIHggPT09ICdudW1iZXInKSA/IHggOiBvZmZzZXQ7CiAgICAgICAgICBjZW50ZXIgPSBNYXRoLmZsb29yKChvZmZzZXQgKyBkaW0gLyAyKSAvIGRpbSk7CiAgICAgICAgICBkZWx0YSA9IG9mZnNldCAtIGNlbnRlciAqIGRpbTsKICAgICAgICAgIGRpciA9IChkZWx0YSA8IDApID8gMSA6IC0xOwogICAgICAgICAgdHdlZW4gPSAtZGlyICogZGVsdGEgKiAyIC8gZGltOwogICAgICAgICAgaGFsZiA9IGNvdW50ID4+IDE7CgogICAgICAgICAgaWYgKCFvcHRpb25zLmZ1bGxXaWR0aCkgewogICAgICAgICAgICBhbGlnbm1lbnQgPSAndHJhbnNsYXRlWCgnICsgKHZpZXdbMF0uY2xpZW50V2lkdGggLSBpdGVtX3dpZHRoKSAvIDIgKyAncHgpICc7CiAgICAgICAgICAgIGFsaWdubWVudCArPSAndHJhbnNsYXRlWSgnICsgKHZpZXdbMF0uY2xpZW50SGVpZ2h0IC0gaXRlbV9oZWlnaHQpIC8gMiArICdweCknOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoMCknOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFNldCBpbmRpY2F0b3IgYWN0aXZlCiAgICAgICAgICBpZiAoc2hvd0luZGljYXRvcnMpIHsKICAgICAgICAgICAgdmFyIGRpZmYgPSAoY2VudGVyICUgY291bnQpOwogICAgICAgICAgICB2YXIgYWN0aXZlSW5kaWNhdG9yID0gJGluZGljYXRvcnMuZmluZCgnLmluZGljYXRvci1pdGVtLmFjdGl2ZScpOwogICAgICAgICAgICBpZiAoYWN0aXZlSW5kaWNhdG9yLmluZGV4KCkgIT09IGRpZmYpIHsKICAgICAgICAgICAgICBhY3RpdmVJbmRpY2F0b3IucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICRpbmRpY2F0b3JzLmZpbmQoJy5pbmRpY2F0b3ItaXRlbScpLmVxKGRpZmYpLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGNlbnRlcgogICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLgogICAgICAgICAgaWYgKCFvcHRpb25zLm5vV3JhcCB8fCAoY2VudGVyID49IDAgJiYgY2VudGVyIDwgY291bnQpKSB7CiAgICAgICAgICAgIGVsID0gaW1hZ2VzW3dyYXAoY2VudGVyKV07CgogICAgICAgICAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGNlbnRlciBpdGVtLgogICAgICAgICAgICBpZiAoISQoZWwpLmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgICAgICAgIHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsLnN0eWxlW3hmb3JtXSA9IGFsaWdubWVudCArCiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoLWRlbHRhIC8gMikgKyAncHgpJyArCiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoZGlyICogb3B0aW9ucy5zaGlmdCAqIHR3ZWVuICogaSkgKyAncHgpJyArCiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyAob3B0aW9ucy5kaXN0ICogdHdlZW4pICsgJ3B4KSc7CiAgICAgICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IDA7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmZ1bGxXaWR0aCkgeyB0d2VlbmVkT3BhY2l0eSA9IDE7IH0KICAgICAgICAgICAgZWxzZSB7IHR3ZWVuZWRPcGFjaXR5ID0gMSAtIDAuMiAqIHR3ZWVuOyB9CiAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB0d2VlbmVkT3BhY2l0eTsKICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChpID0gMTsgaSA8PSBoYWxmOyArK2kpIHsKICAgICAgICAgICAgLy8gcmlnaHQgc2lkZQogICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsV2lkdGgpIHsKICAgICAgICAgICAgICB6VHJhbnNsYXRpb24gPSBvcHRpb25zLmRpc3Q7CiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAoaSA9PT0gaGFsZiAmJiBkZWx0YSA8IDApID8gMSAtIHR3ZWVuIDogMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB6VHJhbnNsYXRpb24gPSBvcHRpb25zLmRpc3QgKiAoaSAqIDIgKyB0d2VlbiAqIGRpcik7CiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAxIC0gMC4yICogKGkgKiAyICsgdHdlZW4gKiBkaXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy4KICAgICAgICAgICAgaWYgKCFvcHRpb25zLm5vV3JhcCB8fCBjZW50ZXIgKyBpIDwgY291bnQpIHsKICAgICAgICAgICAgICBlbCA9IGltYWdlc1t3cmFwKGNlbnRlciArIGkpXTsKICAgICAgICAgICAgICBlbC5zdHlsZVt4Zm9ybV0gPSBhbGlnbm1lbnQgKwogICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAob3B0aW9ucy5zaGlmdCArIChkaW0gKiBpIC0gZGVsdGEpIC8gMikgKyAncHgpJyArCiAgICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVooJyArIHpUcmFuc2xhdGlvbiArICdweCknOwogICAgICAgICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IC1pOwogICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB0d2VlbmVkT3BhY2l0eTsKICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIC8vIGxlZnQgc2lkZQogICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsV2lkdGgpIHsKICAgICAgICAgICAgICB6VHJhbnNsYXRpb24gPSBvcHRpb25zLmRpc3Q7CiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAoaSA9PT0gaGFsZiAmJiBkZWx0YSA+IDApID8gMSAtIHR3ZWVuIDogMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB6VHJhbnNsYXRpb24gPSBvcHRpb25zLmRpc3QgKiAoaSAqIDIgLSB0d2VlbiAqIGRpcik7CiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAxIC0gMC4yICogKGkgKiAyIC0gdHdlZW4gKiBkaXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy4KICAgICAgICAgICAgaWYgKCFvcHRpb25zLm5vV3JhcCB8fCBjZW50ZXIgLSBpID49IDApIHsKICAgICAgICAgICAgICBlbCA9IGltYWdlc1t3cmFwKGNlbnRlciAtIGkpXTsKICAgICAgICAgICAgICBlbC5zdHlsZVt4Zm9ybV0gPSBhbGlnbm1lbnQgKwogICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoLW9wdGlvbnMuc2hpZnQgKyAoLWRpbSAqIGkgLSBkZWx0YSkgLyAyKSArICdweCknICsKICAgICAgICAgICAgICAgICcgdHJhbnNsYXRlWignICsgelRyYW5zbGF0aW9uICsgJ3B4KSc7CiAgICAgICAgICAgICAgZWwuc3R5bGUuekluZGV4ID0gLWk7CiAgICAgICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IHR3ZWVuZWRPcGFjaXR5OwogICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgLy8gY2VudGVyCiAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuCiAgICAgICAgICBpZiAoIW9wdGlvbnMubm9XcmFwIHx8IChjZW50ZXIgPj0gMCAmJiBjZW50ZXIgPCBjb3VudCkpIHsKICAgICAgICAgICAgZWwgPSBpbWFnZXNbd3JhcChjZW50ZXIpXTsKICAgICAgICAgICAgZWwuc3R5bGVbeGZvcm1dID0gYWxpZ25tZW50ICsKICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArICgtZGVsdGEgLyAyKSArICdweCknICsKICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArIChkaXIgKiBvcHRpb25zLnNoaWZ0ICogdHdlZW4pICsgJ3B4KScgKwogICAgICAgICAgICAgICcgdHJhbnNsYXRlWignICsgKG9wdGlvbnMuZGlzdCAqIHR3ZWVuKSArICdweCknOwogICAgICAgICAgICBlbC5zdHlsZS56SW5kZXggPSAwOwogICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsV2lkdGgpIHsgdHdlZW5lZE9wYWNpdHkgPSAxOyB9CiAgICAgICAgICAgIGVsc2UgeyB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiB0d2VlbjsgfQogICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gdHdlZW5lZE9wYWNpdHk7CiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIG9uQ3ljbGVUbyBjYWxsYmFjawogICAgICAgICAgaWYgKGxhc3RDZW50ZXIgIT09IGNlbnRlciAmJgogICAgICAgICAgICAgIHR5cGVvZihvcHRpb25zLm9uQ3ljbGVUbykgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgdmFyICRjdXJyX2l0ZW0gPSB2aWV3LmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZXEod3JhcChjZW50ZXIpKTsKICAgICAgICAgICAgb3B0aW9ucy5vbkN5Y2xlVG8uY2FsbCh0aGlzLCAkY3Vycl9pdGVtLCBkcmFnZ2VkKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBPbmUgdGltZSBjYWxsYmFjawogICAgICAgICAgaWYgKHR5cGVvZihvbmVUaW1lQ2FsbGJhY2spID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIG9uZVRpbWVDYWxsYmFjay5jYWxsKHRoaXMsICRjdXJyX2l0ZW0sIGRyYWdnZWQpOwogICAgICAgICAgICBvbmVUaW1lQ2FsbGJhY2sgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdHJhY2soKSB7CiAgICAgICAgICB2YXIgbm93LCBlbGFwc2VkLCBkZWx0YSwgdjsKCiAgICAgICAgICBub3cgPSBEYXRlLm5vdygpOwogICAgICAgICAgZWxhcHNlZCA9IG5vdyAtIHRpbWVzdGFtcDsKICAgICAgICAgIHRpbWVzdGFtcCA9IG5vdzsKICAgICAgICAgIGRlbHRhID0gb2Zmc2V0IC0gZnJhbWU7CiAgICAgICAgICBmcmFtZSA9IG9mZnNldDsKCiAgICAgICAgICB2ID0gMTAwMCAqIGRlbHRhIC8gKDEgKyBlbGFwc2VkKTsKICAgICAgICAgIHZlbG9jaXR5ID0gMC44ICogdiArIDAuMiAqIHZlbG9jaXR5OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbCgpIHsKICAgICAgICAgIHZhciBlbGFwc2VkLCBkZWx0YTsKCiAgICAgICAgICBpZiAoYW1wbGl0dWRlKSB7CiAgICAgICAgICAgIGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wOwogICAgICAgICAgICBkZWx0YSA9IGFtcGxpdHVkZSAqIE1hdGguZXhwKC1lbGFwc2VkIC8gb3B0aW9ucy5kdXJhdGlvbik7CiAgICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikgewogICAgICAgICAgICAgICAgc2Nyb2xsKHRhcmdldCAtIGRlbHRhKTsKICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhdXRvU2Nyb2xsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNjcm9sbCh0YXJnZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGljayhlKSB7CiAgICAgICAgICAvLyBEaXNhYmxlIGNsaWNrcyBpZiBjYXJvdXNlbCB3YXMgZHJhZ2dlZC4KICAgICAgICAgIGlmIChkcmFnZ2VkKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuZnVsbFdpZHRoKSB7CiAgICAgICAgICAgIHZhciBjbGlja2VkSW5kZXggPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2Fyb3VzZWwtaXRlbScpLmluZGV4KCk7CiAgICAgICAgICAgIHZhciBkaWZmID0gd3JhcChjZW50ZXIpIC0gY2xpY2tlZEluZGV4OwoKICAgICAgICAgICAgLy8gRGlzYWJsZSBjbGlja3MgaWYgY2Fyb3VzZWwgd2FzIHNoaWZ0ZWQgYnkgY2xpY2sKICAgICAgICAgICAgaWYgKGRpZmYgIT09IDApIHsKICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjeWNsZVRvKGNsaWNrZWRJbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjeWNsZVRvKG4pIHsKICAgICAgICAgIHZhciBkaWZmID0gKGNlbnRlciAlIGNvdW50KSAtIG47CgogICAgICAgICAgLy8gQWNjb3VudCBmb3Igd3JhcGFyb3VuZC4KICAgICAgICAgIGlmICghb3B0aW9ucy5ub1dyYXApIHsKICAgICAgICAgICAgaWYgKGRpZmYgPCAwKSB7CiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgKyBjb3VudCkgPCBNYXRoLmFicyhkaWZmKSkgeyBkaWZmICs9IGNvdW50OyB9CgogICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7CiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgLSBjb3VudCkgPCBkaWZmKSB7IGRpZmYgLT0gY291bnQ7IH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIENhbGwgcHJldiBvciBuZXh0IGFjY29yZGluZ2x5LgogICAgICAgICAgaWYgKGRpZmYgPCAwKSB7CiAgICAgICAgICAgIHZpZXcudHJpZ2dlcignY2Fyb3VzZWxOZXh0JywgW01hdGguYWJzKGRpZmYpXSk7CgogICAgICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkgewogICAgICAgICAgICB2aWV3LnRyaWdnZXIoJ2Nhcm91c2VsUHJldicsIFtkaWZmXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0YXAoZSkgewogICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgfQogICAgICAgICAgcHJlc3NlZCA9IHRydWU7CiAgICAgICAgICBkcmFnZ2VkID0gZmFsc2U7CiAgICAgICAgICB2ZXJ0aWNhbF9kcmFnZ2VkID0gZmFsc2U7CiAgICAgICAgICByZWZlcmVuY2UgPSB4cG9zKGUpOwogICAgICAgICAgcmVmZXJlbmNlWSA9IHlwb3MoZSk7CgogICAgICAgICAgdmVsb2NpdHkgPSBhbXBsaXR1ZGUgPSAwOwogICAgICAgICAgZnJhbWUgPSBvZmZzZXQ7CiAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpOwogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWNrZXIpOwogICAgICAgICAgdGlja2VyID0gc2V0SW50ZXJ2YWwodHJhY2ssIDEwMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkcmFnKGUpIHsKICAgICAgICAgIHZhciB4LCBkZWx0YSwgZGVsdGFZOwogICAgICAgICAgaWYgKHByZXNzZWQpIHsKICAgICAgICAgICAgeCA9IHhwb3MoZSk7CiAgICAgICAgICAgIHkgPSB5cG9zKGUpOwogICAgICAgICAgICBkZWx0YSA9IHJlZmVyZW5jZSAtIHg7CiAgICAgICAgICAgIGRlbHRhWSA9IE1hdGguYWJzKHJlZmVyZW5jZVkgLSB5KTsKICAgICAgICAgICAgaWYgKGRlbHRhWSA8IDMwICYmICF2ZXJ0aWNhbF9kcmFnZ2VkKSB7CiAgICAgICAgICAgICAgLy8gSWYgdmVydGljYWwgc2Nyb2xsaW5nIGRvbid0IGFsbG93IGRyYWdnaW5nLgogICAgICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikgewogICAgICAgICAgICAgICAgZHJhZ2dlZCA9IHRydWU7CiAgICAgICAgICAgICAgICByZWZlcmVuY2UgPSB4OwogICAgICAgICAgICAgICAgc2Nyb2xsKG9mZnNldCArIGRlbHRhKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGVsc2UgaWYgKGRyYWdnZWQpIHsKICAgICAgICAgICAgICAvLyBJZiBkcmFnZ2luZyBkb24ndCBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGwuCiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBWZXJ0aWNhbCBzY3JvbGxpbmcuCiAgICAgICAgICAgICAgdmVydGljYWxfZHJhZ2dlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZHJhZ2dlZCkgewogICAgICAgICAgICAvLyBJZiBkcmFnZ2luZyBkb24ndCBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGwuCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVsZWFzZShlKSB7CiAgICAgICAgICBpZiAocHJlc3NlZCkgewogICAgICAgICAgICBwcmVzc2VkID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWNrZXIpOwogICAgICAgICAgdGFyZ2V0ID0gb2Zmc2V0OwogICAgICAgICAgaWYgKHZlbG9jaXR5ID4gMTAgfHwgdmVsb2NpdHkgPCAtMTApIHsKICAgICAgICAgICAgYW1wbGl0dWRlID0gMC45ICogdmVsb2NpdHk7CiAgICAgICAgICAgIHRhcmdldCA9IG9mZnNldCArIGFtcGxpdHVkZTsKICAgICAgICAgIH0KICAgICAgICAgIHRhcmdldCA9IE1hdGgucm91bmQodGFyZ2V0IC8gZGltKSAqIGRpbTsKCiAgICAgICAgICAvLyBObyB3cmFwIG9mIGl0ZW1zLgogICAgICAgICAgaWYgKG9wdGlvbnMubm9XcmFwKSB7CiAgICAgICAgICAgIGlmICh0YXJnZXQgPj0gZGltICogKGNvdW50IC0gMSkpIHsKICAgICAgICAgICAgICB0YXJnZXQgPSBkaW0gKiAoY291bnQgLSAxKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPCAwKSB7CiAgICAgICAgICAgICAgdGFyZ2V0ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYW1wbGl0dWRlID0gdGFyZ2V0IC0gb2Zmc2V0OwogICAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhdXRvU2Nyb2xsKTsKCiAgICAgICAgICBpZiAoZHJhZ2dlZCkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB4Zm9ybSA9ICd0cmFuc2Zvcm0nOwogICAgICAgIFsnd2Via2l0JywgJ01veicsICdPJywgJ21zJ10uZXZlcnkoZnVuY3Rpb24gKHByZWZpeCkgewogICAgICAgICAgdmFyIGUgPSBwcmVmaXggKyAnVHJhbnNmb3JtJzsKICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZVtlXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgeGZvcm0gPSBlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KTsKCgogICAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZS5jYXJvdXNlbC0nK3VuaXF1ZU5hbWVzcGFjZSkub24oJ3Jlc2l6ZS5jYXJvdXNlbC0nK3VuaXF1ZU5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsV2lkdGgpIHsKICAgICAgICAgICAgaXRlbV93aWR0aCA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmlubmVyV2lkdGgoKTsKICAgICAgICAgICAgaXRlbV9oZWlnaHQgPSB2aWV3LmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lckhlaWdodCgpOwogICAgICAgICAgICBkaW0gPSBpdGVtX3dpZHRoICogMiArIG9wdGlvbnMucGFkZGluZzsKICAgICAgICAgICAgb2Zmc2V0ID0gY2VudGVyICogMiAqIGl0ZW1fd2lkdGg7CiAgICAgICAgICAgIHRhcmdldCA9IG9mZnNldDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNjcm9sbCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBzZXR1cEV2ZW50cygpOwogICAgICAgIHNjcm9sbChvZmZzZXQpOwoKICAgICAgICAkKHRoaXMpLm9uKCdjYXJvdXNlbE5leHQnLCBmdW5jdGlvbihlLCBuLCBjYWxsYmFjaykgewogICAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBuID0gMTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIG9uZVRpbWVDYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgICAgfQoKICAgICAgICAgIHRhcmdldCA9IChkaW0gKiBNYXRoLnJvdW5kKG9mZnNldCAvIGRpbSkpICsgKGRpbSAqIG4pOwogICAgICAgICAgaWYgKG9mZnNldCAhPT0gdGFyZ2V0KSB7CiAgICAgICAgICAgIGFtcGxpdHVkZSA9IHRhcmdldCAtIG9mZnNldDsKICAgICAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKHRoaXMpLm9uKCdjYXJvdXNlbFByZXYnLCBmdW5jdGlvbihlLCBuLCBjYWxsYmFjaykgewogICAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBuID0gMTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIG9uZVRpbWVDYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgICAgfQoKICAgICAgICAgIHRhcmdldCA9IChkaW0gKiBNYXRoLnJvdW5kKG9mZnNldCAvIGRpbSkpIC0gKGRpbSAqIG4pOwogICAgICAgICAgaWYgKG9mZnNldCAhPT0gdGFyZ2V0KSB7CiAgICAgICAgICAgIGFtcGxpdHVkZSA9IHRhcmdldCAtIG9mZnNldDsKICAgICAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKHRoaXMpLm9uKCdjYXJvdXNlbFNldCcsIGZ1bmN0aW9uKGUsIG4sIGNhbGxiYWNrKSB7CiAgICAgICAgICBpZiAobiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG4gPSAwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHR5cGVvZihjYWxsYmFjaykgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgb25lVGltZUNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgICAgICB9CgogICAgICAgICAgY3ljbGVUbyhuKTsKICAgICAgICB9KTsKCiAgICAgIH0pOwoKCgogICAgfSwKICAgIG5leHQgOiBmdW5jdGlvbihuLCBjYWxsYmFjaykgewogICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nhcm91c2VsTmV4dCcsIFtuLCBjYWxsYmFja10pOwogICAgfSwKICAgIHByZXYgOiBmdW5jdGlvbihuLCBjYWxsYmFjaykgewogICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nhcm91c2VsUHJldicsIFtuLCBjYWxsYmFja10pOwogICAgfSwKICAgIHNldCA6IGZ1bmN0aW9uKG4sIGNhbGxiYWNrKSB7CiAgICAgICQodGhpcykudHJpZ2dlcignY2Fyb3VzZWxTZXQnLCBbbiwgY2FsbGJhY2tdKTsKICAgIH0KICB9OwoKCiAgICAkLmZuLmNhcm91c2VsID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7CiAgICAgIGlmICggbWV0aG9kc1ttZXRob2RPck9wdGlvbnNdICkgewogICAgICAgIHJldHVybiBtZXRob2RzWyBtZXRob2RPck9wdGlvbnMgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTsKICAgICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7CiAgICAgICAgLy8gRGVmYXVsdCB0byAiaW5pdCIKICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuY2Fyb3VzZWwnICk7CiAgICAgIH0KICAgIH07IC8vIFBsdWdpbiBlbmQKfSggalF1ZXJ5ICkpOwo7KGZ1bmN0aW9uICgkKSB7CgogIHZhciBtZXRob2RzID0gewogIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgdmFyIG9yaWdpbiA9ICQoJyMnKyQodGhpcykuYXR0cignZGF0YS1hY3RpdmF0ZXMnKSk7CiAgICB2YXIgc2NyZWVuID0gJCgnYm9keScpOwoKICAgIC8vIENyZWF0aW5nIHRhcCB0YXJnZXQKICAgIHZhciB0YXBUYXJnZXRFbCA9ICQodGhpcyk7CiAgICB2YXIgdGFwVGFyZ2V0V3JhcHBlciA9IHRhcFRhcmdldEVsLnBhcmVudCgnLnRhcC10YXJnZXQtd3JhcHBlcicpOwogICAgdmFyIHRhcFRhcmdldFdhdmUgPSB0YXBUYXJnZXRXcmFwcGVyLmZpbmQoJy50YXAtdGFyZ2V0LXdhdmUnKTsKICAgIHZhciB0YXBUYXJnZXRPcmlnaW5FbCA9IHRhcFRhcmdldFdyYXBwZXIuZmluZCgnLnRhcC10YXJnZXQtb3JpZ2luJyk7CiAgICB2YXIgdGFwVGFyZ2V0Q29udGVudEVsID0gdGFwVGFyZ2V0RWwuZmluZCgnLnRhcC10YXJnZXQtY29udGVudCcpOwoKICAgIC8vIENyZWF0aW5nIHdyYXBwZXIKICAgIGlmICghdGFwVGFyZ2V0V3JhcHBlci5sZW5ndGgpIHsKICAgICAgdGFwVGFyZ2V0V3JhcHBlciA9IHRhcFRhcmdldEVsLndyYXAoJCgnPGRpdiBjbGFzcz0idGFwLXRhcmdldC13cmFwcGVyIj48L2Rpdj4nKSkucGFyZW50KCk7CiAgICB9CgogICAgLy8gQ3JlYXRpbmcgY29udGVudAogICAgaWYgKCF0YXBUYXJnZXRDb250ZW50RWwubGVuZ3RoKSB7CiAgICAgIHRhcFRhcmdldENvbnRlbnRFbCA9ICQoJzxkaXYgY2xhc3M9InRhcC10YXJnZXQtY29udGVudCI+PC9kaXY+Jyk7CiAgICAgIHRhcFRhcmdldEVsLmFwcGVuZCh0YXBUYXJnZXRDb250ZW50RWwpOwogICAgfQoKICAgIC8vIENyZWF0aW5nIGZvcmVncm91bmQgd2F2ZQogICAgaWYgKCF0YXBUYXJnZXRXYXZlLmxlbmd0aCkgewogICAgICB0YXBUYXJnZXRXYXZlID0gJCgnPGRpdiBjbGFzcz0idGFwLXRhcmdldC13YXZlIj48L2Rpdj4nKTsKCiAgICAgIC8vIENyZWF0aW5nIG9yaWdpbgogICAgICBpZiAoIXRhcFRhcmdldE9yaWdpbkVsLmxlbmd0aCkgewogICAgICAgIHRhcFRhcmdldE9yaWdpbkVsID0gb3JpZ2luLmNsb25lKHRydWUsIHRydWUpOwogICAgICAgIHRhcFRhcmdldE9yaWdpbkVsLmFkZENsYXNzKCd0YXAtdGFyZ2V0LW9yaWdpbicpOwogICAgICAgIHRhcFRhcmdldE9yaWdpbkVsLnJlbW92ZUF0dHIoJ2lkJyk7CiAgICAgICAgdGFwVGFyZ2V0T3JpZ2luRWwucmVtb3ZlQXR0cignc3R5bGUnKTsKICAgICAgICB0YXBUYXJnZXRXYXZlLmFwcGVuZCh0YXBUYXJnZXRPcmlnaW5FbCk7CiAgICAgIH0KCiAgICAgIHRhcFRhcmdldFdyYXBwZXIuYXBwZW5kKHRhcFRhcmdldFdhdmUpOwogICAgfQoKICAgIC8vIE9wZW4KICAgIHZhciBvcGVuVGFwVGFyZ2V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0YXBUYXJnZXRXcmFwcGVyLmlzKCcub3BlbicpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBBZGRpbmcgb3BlbiBjbGFzcwogICAgICB0YXBUYXJnZXRXcmFwcGVyLmFkZENsYXNzKCdvcGVuJyk7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHRhcFRhcmdldE9yaWdpbkVsLm9mZignY2xpY2sudGFwVGFyZ2V0Jykub24oJ2NsaWNrLnRhcFRhcmdldCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGNsb3NlVGFwVGFyZ2V0KCk7CiAgICAgICAgICB0YXBUYXJnZXRPcmlnaW5FbC5vZmYoJ2NsaWNrLnRhcFRhcmdldCcpOwogICAgICAgIH0pOwoKICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLnRhcFRhcmdldCcpLm9uKCdjbGljay50YXBUYXJnZXQnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICBjbG9zZVRhcFRhcmdldCgpOwogICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay50YXBUYXJnZXQnKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIHRocm90dGxlZENhbGMgPSBNYXRlcmlhbGl6ZS50aHJvdHRsZShmdW5jdGlvbigpIHsKICAgICAgICAgIGNhbGN1bGF0ZVRhcFRhcmdldCgpOwogICAgICAgIH0sIDIwMCk7CiAgICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLnRhcFRhcmdldCcpLm9uKCdyZXNpemUudGFwVGFyZ2V0JywgdGhyb3R0bGVkQ2FsYyk7CiAgICAgIH0sIDApOwogICAgfTsKCiAgICAvLyBDbG9zZQogICAgdmFyIGNsb3NlVGFwVGFyZ2V0ID0gZnVuY3Rpb24oKXsKICAgICAgaWYgKCF0YXBUYXJnZXRXcmFwcGVyLmlzKCcub3BlbicpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0YXBUYXJnZXRXcmFwcGVyLnJlbW92ZUNsYXNzKCdvcGVuJyk7CiAgICAgIHRhcFRhcmdldE9yaWdpbkVsLm9mZignY2xpY2sudGFwVGFyZ2V0JykKICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay50YXBUYXJnZXQnKTsKICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLnRhcFRhcmdldCcpOwogICAgfTsKCiAgICAvLyBQcmUgY2FsY3VsYXRlCiAgICB2YXIgY2FsY3VsYXRlVGFwVGFyZ2V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIC8vIEVsZW1lbnQgb3IgcGFyZW50IGlzIGZpeGVkIHBvc2l0aW9uPwogICAgICB2YXIgaXNGaXhlZCA9IG9yaWdpbi5jc3MoJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCc7CiAgICAgIGlmICghaXNGaXhlZCkgewogICAgICAgIHZhciBwYXJlbnRzID0gb3JpZ2luLnBhcmVudHMoKTsKICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaXNGaXhlZCA9ICQocGFyZW50c1tpXSkuY3NzKCdwb3NpdGlvbicpID09ICdmaXhlZCc7CiAgICAgICAgICBpZiAoaXNGaXhlZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIENhbGN1bGF0aW5nIG9yaWdpbgogICAgICB2YXIgb3JpZ2luV2lkdGggPSBvcmlnaW4ub3V0ZXJXaWR0aCgpOwogICAgICB2YXIgb3JpZ2luSGVpZ2h0ID0gb3JpZ2luLm91dGVySGVpZ2h0KCk7CiAgICAgIHZhciBvcmlnaW5Ub3AgPSBpc0ZpeGVkID8gb3JpZ2luLm9mZnNldCgpLnRvcCAtICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDogb3JpZ2luLm9mZnNldCgpLnRvcDsKICAgICAgdmFyIG9yaWdpbkxlZnQgPSBpc0ZpeGVkID8gb3JpZ2luLm9mZnNldCgpLmxlZnQgLSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgOiBvcmlnaW4ub2Zmc2V0KCkubGVmdDsKCiAgICAgIC8vIENhbGN1bGF0aW5nIHNjcmVlbgogICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgICAgdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTsKICAgICAgdmFyIGNlbnRlclggPSB3aW5kb3dXaWR0aCAvIDI7CiAgICAgIHZhciBjZW50ZXJZID0gd2luZG93SGVpZ2h0IC8gMjsKICAgICAgdmFyIGlzTGVmdCA9IG9yaWdpbkxlZnQgPD0gY2VudGVyWDsKICAgICAgdmFyIGlzUmlnaHQgPSBvcmlnaW5MZWZ0ID4gY2VudGVyWDsKICAgICAgdmFyIGlzVG9wID0gb3JpZ2luVG9wIDw9IGNlbnRlclk7CiAgICAgIHZhciBpc0JvdHRvbSA9IG9yaWdpblRvcCA+IGNlbnRlclk7CiAgICAgIHZhciBpc0NlbnRlclggPSBvcmlnaW5MZWZ0ID49IHdpbmRvd1dpZHRoKjAuMjUgJiYgb3JpZ2luTGVmdCA8PSB3aW5kb3dXaWR0aCowLjc1OwogICAgICB2YXIgaXNDZW50ZXJZID0gb3JpZ2luVG9wID49IHdpbmRvd0hlaWdodCowLjI1ICYmIG9yaWdpblRvcCA8PSB3aW5kb3dIZWlnaHQqMC43NTsKCiAgICAgIC8vIENhbGN1bGF0aW5nIHRhcCB0YXJnZXQKICAgICAgdmFyIHRhcFRhcmdldFdpZHRoID0gdGFwVGFyZ2V0RWwub3V0ZXJXaWR0aCgpOwogICAgICB2YXIgdGFwVGFyZ2V0SGVpZ2h0ID0gdGFwVGFyZ2V0RWwub3V0ZXJIZWlnaHQoKTsKICAgICAgdmFyIHRhcFRhcmdldFRvcCA9IG9yaWdpblRvcCArIG9yaWdpbkhlaWdodC8yIC0gdGFwVGFyZ2V0SGVpZ2h0LzI7CiAgICAgIHZhciB0YXBUYXJnZXRMZWZ0ID0gb3JpZ2luTGVmdCArIG9yaWdpbldpZHRoLzIgLSB0YXBUYXJnZXRXaWR0aC8yOwogICAgICB2YXIgdGFwVGFyZ2V0UG9zaXRpb24gPSBpc0ZpeGVkID8gJ2ZpeGVkJyA6ICdhYnNvbHV0ZSc7CgogICAgICAvLyBDYWxjdWxhdGluZyBjb250ZW50CiAgICAgIHZhciB0YXBUYXJnZXRUZXh0V2lkdGggPSBpc0NlbnRlclggPyB0YXBUYXJnZXRXaWR0aCA6IHRhcFRhcmdldFdpZHRoLzIgKyBvcmlnaW5XaWR0aDsKICAgICAgdmFyIHRhcFRhcmdldFRleHRIZWlnaHQgPSB0YXBUYXJnZXRIZWlnaHQvMjsKICAgICAgdmFyIHRhcFRhcmdldFRleHRUb3AgPSBpc1RvcCA/IHRhcFRhcmdldEhlaWdodC8yIDogMDsKICAgICAgdmFyIHRhcFRhcmdldFRleHRCb3R0b20gPSAwOwogICAgICB2YXIgdGFwVGFyZ2V0VGV4dExlZnQgPSBpc0xlZnQgJiYgIWlzQ2VudGVyWCA/IHRhcFRhcmdldFdpZHRoLzIgLSBvcmlnaW5XaWR0aCA6IDA7CiAgICAgIHZhciB0YXBUYXJnZXRUZXh0UmlnaHQgPSAwOwogICAgICB2YXIgdGFwVGFyZ2V0VGV4dFBhZGRpbmcgPSBvcmlnaW5XaWR0aDsKICAgICAgdmFyIHRhcFRhcmdldFRleHRBbGlnbiA9IGlzQm90dG9tID8gJ2JvdHRvbScgOiAndG9wJzsKCiAgICAgIC8vIENhbGN1bGF0aW5nIHdhdmUKICAgICAgdmFyIHRhcFRhcmdldFdhdmVXaWR0aCA9IG9yaWdpbldpZHRoID4gb3JpZ2luSGVpZ2h0ID8gb3JpZ2luV2lkdGgqMiA6IG9yaWdpbldpZHRoKjI7CiAgICAgIHZhciB0YXBUYXJnZXRXYXZlSGVpZ2h0ID0gdGFwVGFyZ2V0V2F2ZVdpZHRoOwogICAgICB2YXIgdGFwVGFyZ2V0V2F2ZVRvcCA9IHRhcFRhcmdldEhlaWdodC8yIC0gdGFwVGFyZ2V0V2F2ZUhlaWdodC8yOwogICAgICB2YXIgdGFwVGFyZ2V0V2F2ZUxlZnQgPSB0YXBUYXJnZXRXaWR0aC8yIC0gdGFwVGFyZ2V0V2F2ZVdpZHRoLzI7CgogICAgICAvLyBTZXR0aW5nIHRhcCB0YXJnZXQKICAgICAgdmFyIHRhcFRhcmdldFdyYXBwZXJDc3NPYmogPSB7fTsKICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai50b3AgPSBpc1RvcCA/IHRhcFRhcmdldFRvcCA6ICcnOwogICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLnJpZ2h0ID0gaXNSaWdodCA/IHdpbmRvd1dpZHRoIC0gdGFwVGFyZ2V0TGVmdCAtIHRhcFRhcmdldFdpZHRoIDogJyc7CiAgICAgIHRhcFRhcmdldFdyYXBwZXJDc3NPYmouYm90dG9tID0gaXNCb3R0b20gPyB3aW5kb3dIZWlnaHQgLSB0YXBUYXJnZXRUb3AgLSB0YXBUYXJnZXRIZWlnaHQgOiAnJzsKICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5sZWZ0ID0gaXNMZWZ0ID8gdGFwVGFyZ2V0TGVmdCA6ICcnOwogICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLnBvc2l0aW9uID0gdGFwVGFyZ2V0UG9zaXRpb247CiAgICAgIHRhcFRhcmdldFdyYXBwZXIuY3NzKHRhcFRhcmdldFdyYXBwZXJDc3NPYmopOwoKICAgICAgLy8gU2V0dGluZyBjb250ZW50CiAgICAgIHRhcFRhcmdldENvbnRlbnRFbC5jc3MoewogICAgICAgIHdpZHRoOiB0YXBUYXJnZXRUZXh0V2lkdGgsCiAgICAgICAgaGVpZ2h0OiB0YXBUYXJnZXRUZXh0SGVpZ2h0LAogICAgICAgIHRvcDogdGFwVGFyZ2V0VGV4dFRvcCwKICAgICAgICByaWdodDogdGFwVGFyZ2V0VGV4dFJpZ2h0LAogICAgICAgIGJvdHRvbTogdGFwVGFyZ2V0VGV4dEJvdHRvbSwKICAgICAgICBsZWZ0OiB0YXBUYXJnZXRUZXh0TGVmdCwKICAgICAgICBwYWRkaW5nOiB0YXBUYXJnZXRUZXh0UGFkZGluZywKICAgICAgICB2ZXJ0aWNhbEFsaWduOiB0YXBUYXJnZXRUZXh0QWxpZ24KICAgICAgfSk7CgogICAgICAvLyBTZXR0aW5nIHdhdmUKICAgICAgdGFwVGFyZ2V0V2F2ZS5jc3MoewogICAgICAgIHRvcDogdGFwVGFyZ2V0V2F2ZVRvcCwKICAgICAgICBsZWZ0OiB0YXBUYXJnZXRXYXZlTGVmdCwKICAgICAgICB3aWR0aDogdGFwVGFyZ2V0V2F2ZVdpZHRoLAogICAgICAgIGhlaWdodDogdGFwVGFyZ2V0V2F2ZUhlaWdodAogICAgICB9KTsKICAgIH0KCiAgICBpZiAob3B0aW9ucyA9PSAnb3BlbicpIHsKICAgICAgY2FsY3VsYXRlVGFwVGFyZ2V0KCk7CiAgICAgIG9wZW5UYXBUYXJnZXQoKTsKICAgIH0KCiAgICBpZiAob3B0aW9ucyA9PSAnY2xvc2UnKQogICAgICBjbG9zZVRhcFRhcmdldCgpOwogICAgfSk7CiAgfSwKICBvcGVuOiBmdW5jdGlvbigpIHt9LAogIGNsb3NlOiBmdW5jdGlvbigpIHt9CiAgfTsKCiAgJC5mbi50YXBUYXJnZXQgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHsKICBpZiAobWV0aG9kc1ttZXRob2RPck9wdGlvbnNdIHx8IHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnKQogICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgogICQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2RPck9wdGlvbnMgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS50YXAtdGFyZ2V0JyApOwogIH07Cgp9KCBqUXVlcnkgKSk7Cg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="31" hostname="learning2.pflb.ru:56902" path="/js/page/authorisation.js" url="http://learning2.pflb.ru:56902/js/page/authorisation.js" ip="94.159.69.182" port="56902" client_ip="192.168.1.2" client_port="52234" connectionId="2108" origin="HTML" encodingType="ANSI" ordinal="9" startDateTime="2020-02-23T18:01:14.549+04:00" startTime="4800" endTime="4839" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyL2xvZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Requested-With" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="dnt" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjkscnUtUlU7cT0wLjgscnU7cT0wLjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0Q=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9wYWdlL2F1dGhvcmlzYXRpb24uanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi9sb2dpbg0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCmRudDogMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc5LjAuMzk0NS4xMzAgU2FmYXJpLzUzNy4zNiBPUFIvNjYuMC4zNTE1LjEwMw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45LHJ1LVJVO3E9MC44LHJ1O3E9MC43DQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbGVhcm5pbmcyLnBmbGIucnU6NTY5MDINCkNvb2tpZTogc2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbDsgZmlsdGVyU2V0dGluZz0lN0IlMjJwYWdlJTIyJTNBJTIyaHR0cCUzQSUyRiUyRmxlYXJuaW5nMi5wZmxiLnJ1JTNBNTY5MDIlMkYlMjN0aWNrZXRzJTNGc3RhdGUlM0RvcGVuZWQlMjZwYWdlJTNEMSUyMiUyQyUyMnNtaG8lMjIlM0FudWxsJTJDJTIyZGF0ZVN0YXJ0JTIyJTNBJTIyJTIyJTJDJTIyZGF0ZUVuZCUyMiUzQSUyMiUyMiUyQyUyMmNhdDElMjIlM0FudWxsJTJDJTIyY2F0MiUyMiUzQW51bGwlMkMlMjJjYXQzJTIyJTNBbnVsbCUyQyUyMmNhdDQlMjIlM0FudWxsJTJDJTIydGhlbWUlMjIlM0FudWxsJTJDJTIyb3ZlcmR1ZSUyMiUzQWZhbHNlJTJDJTIyZmlsdGVycyUyMiUzQSU3QiUyMm5ld0NoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmFwcG9pbnRlZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMnBlcmZvcm1lZENoZWNrYm94JTIyJTNBdHJ1ZSUyQyUyMmNvbnRyb2xDaGVja2JveCUyMiUzQXRydWUlN0QlN0QNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="sessionExpired" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZmFsc2U=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="PFLB.pre.login.link" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bnVsbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="filterSetting" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>JTdCJTIycGFnZSUyMiUzQSUyMmh0dHAlM0ElMkYlMkZsZWFybmluZzIucGZsYi5ydSUzQTU2OTAyJTJGJTIzdGlja2V0cyUzRnN0YXRlJTNEb3BlbmVkJTI2cGFnZSUzRDElMjIlMkMlMjJzbWhvJTIyJTNBbnVsbCUyQyUyMmRhdGVTdGFydCUyMiUzQSUyMiUyMiUyQyUyMmRhdGVFbmQlMjIlM0ElMjIlMjIlMkMlMjJjYXQxJTIyJTNBbnVsbCUyQyUyMmNhdDIlMjIlM0FudWxsJTJDJTIyY2F0MyUyMiUzQW51bGwlMkMlMjJjYXQ0JTIyJTNBbnVsbCUyQyUyMnRoZW1lJTIyJTNBbnVsbCUyQyUyMm92ZXJkdWUlMjIlM0FmYWxzZSUyQyUyMmZpbHRlcnMlMjIlM0ElN0IlMjJuZXdDaGVja2JveCUyMiUzQXRydWUlMkMlMjJhcHBvaW50ZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJwZXJmb3JtZWRDaGVja2JveCUyMiUzQXRydWUlMkMlMjJjb250cm9sQ2hlY2tib3glMjIlM0F0cnVlJTdEJTdE</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3989</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Last-Modified" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mzk4OQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAyMyBGZWIgMjAyMCAxNDowMTo0MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDM5ODkNCkRhdGU6IFN1biwgMjMgRmViIDIwMjAgMTQ6MDE6NDEgR01UDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgJC5jb29raWUoJ2ZpbHRlclNldHRpbmcnLCAnJywgeyBleHBpcmVzOiAtMSB9KTsKICAgICQuYWpheCh7CiAgICAgICAgdXJsOiAndHBsL2xvZ2luL2xvZ2luLmR1c3QnLAogICAgICAgIGNvbnRlbnRUeXBlOiAiY2hhcnNldD11dGYtOCIKICAgIH0pLmRvbmUoZnVuY3Rpb24gKHRlbXBsYXRlKSB7CiAgICAgICAgdmFyIGNvbXBhbnlJZDsKICAgICAgICAkLmNvb2tpZSgnY3VycmVudENvbXBhbnknKSAhPSB1bmRlZmluZWQgPyBjb21wYW55SWQgPSAkLmNvb2tpZSgnY3VycmVudENvbXBhbnknKSA6IGNvbXBhbnlJZCA9IDA7CiAgICAgICAgZHVzdC5yZW5kZXJTb3VyY2UodGVtcGxhdGUsIHtjb21wYW55OiBjb21wYW55SWR9LCBmdW5jdGlvbiAoZXJyLCBvdXQpIHsKICAgICAgICAgICAgdmFyICRsb2dpbiA9ICQoIiNsb2dpbl9wYWdlX3dyYXBwZXIiKTsKICAgICAgICAgICAgJGxvZ2luLmVtcHR5KCk7CiAgICAgICAgICAgICRsb2dpbi5hcHBlbmQob3V0KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCQuY29va2llKCdzZXNzaW9uRXhwaXJlZCcpID09ICJ0cnVlIikgewogICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgn0KHQtdGB0YHQuNGPINC40YHRgtC10LrQu9CwLCDQv9C+0LbQsNC70YPQudGB0YLQsCwg0LDQstGC0L7RgNC40LfRg9C50YLQtdGB0YwnLCAzMDAwKTsKICAgICAgICAgICAgJC5jb29raWUoJ3Nlc3Npb25FeHBpcmVkJywgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGxvZ2luRmllbGQgPSAkKCcjbG9naW5fZmllbGQnKTsKICAgICAgICB2YXIgcGFzc3dvcmRGaWVsZCA9ICQoJyNwYXNzd29yZF9maWVsZCcpOwogICAgICAgIHZhciByZW1lbWJlck1lRmllbGQgPSAkKCcjcmVtZW1iZXJfbWVfZmllbGQnKTsKICAgICAgICAkKCcjYXV0aF9mb3JtJykuc3VibWl0KGZ1bmN0aW9uIChldmVudCkgewoKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgaWYgKGZvcm1WYWxpZGF0aW9uKGxvZ2luRmllbGQsIHBhc3N3b3JkRmllbGQpKSB7CiAgICAgICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB1cmw6ICJhcGkvbG9naW4iLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9naW46IGxvZ2luRmllbGQudmFsKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZEZpZWxkLnZhbCgpLAogICAgICAgICAgICAgICAgICAgICAgICByZW1lbWJlck1lOiByZW1lbWJlck1lRmllbGQucHJvcCgiY2hlY2tlZCIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIC8vZGVidWdnZXI7CiAgICAgICAgICAgICAgICAgICAgLy/Qn9C+0LvRg9GH0LDQtdC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC1INC00LDQvdC90YvQtQogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZShkYXRhKSwKICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueUlkID0gdXNlci5jb21wYW55SWQgPyB1c2VyLmNvbXBhbnlJZCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lID0gdXNlci5mdWxsTmFtZSA/IHVzZXIuZnVsbE5hbWUgOiB1c2VyLmxvZ2luOwoKICAgICAgICAgICAgICAgICAgICAvL9Cb0L7QstC40Lwg0YHQsNC/0LAKICAgICAgICAgICAgICAgICAgICB2YXIgdXNlclN1cHBvcnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5yb2xlcykgewogICAgICAgICAgICAgICAgICAgICAgICB1c2VyLnJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb2xlLm5hbWUgPT0gIlJPTEVfU1VQUE9SVCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyU3VwcG9ydCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkLmNvb2tpZSgnY3VycmVudENvbXBhbnknLCBjb21wYW55SWQsIHtleHBpcmVzOiA2NjZ9KTsKICAgICAgICAgICAgICAgICAgICAkLmNvb2tpZSgnY3VycmVudFVzZXInLCB1c2VyTmFtZSwge2V4cGlyZXM6IDY2Nn0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAobG9naW5GaWVsZC5oYXNDbGFzcygnaW52YWxpZCcpKSBsb2dpbkZpZWxkLnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3N3b3JkRmllbGQuaGFzQ2xhc3MoJ2ludmFsaWQnKSkgcGFzc3dvcmRGaWVsZC5yZW1vdmVDbGFzcygnaW52YWxpZCcpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVMb2dpbkxpbmsgPSBKU09OLnBhcnNlKCQuY29va2llKCdQRkxCLnByZS5sb2dpbi5saW5rJykpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlTG9naW5MaW5rLnVybCB8fCBwcmVMb2dpbkxpbmsudXJsICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBwcmVMb2dpbkxpbmsudXJsICsgd2luZG93LmxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvJzsKCiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgJC5jb29raWUoJ1BGTEIucHJlLmxvZ2luLmxpbmsnLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoWEhSKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2dpbkZpZWxkLmhhc0NsYXNzKCdpbnZhbGlkJykpIGxvZ2luRmllbGQuYWRkQ2xhc3MoJ2ludmFsaWQnKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXBhc3N3b3JkRmllbGQuaGFzQ2xhc3MoJ2ludmFsaWQnKSkgcGFzc3dvcmRGaWVsZC5hZGRDbGFzcygnaW52YWxpZCcpOwogICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KFhIUi5yZXNwb25zZUpTT04ubWVzc2FnZSwgMzAwMCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKfSk7CgovL9CS0LDQu9C40LTQuNGA0YPQtdC8INGE0L7RgNC80YMg0LDQstGC0L7RgNC40LfQsNGG0LjQuApmdW5jdGlvbiBmb3JtVmFsaWRhdGlvbihsb2dpbkZpZWxkLCBwYXNzd29yZEZpZWxkKSB7CiAgICBpZiAobG9naW5GaWVsZC52YWwoKSA9PSAnJykgewogICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCfQktCy0LXQtNC40YLQtSDQuNC80Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPJywgMzAwMCk7CiAgICAgICAgaWYgKCFsb2dpbkZpZWxkLmhhc0NsYXNzKCdpbnZhbGlkJykpIGxvZ2luRmllbGQuYWRkQ2xhc3MoJ2ludmFsaWQnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGVsc2UgaWYgKHBhc3N3b3JkRmllbGQudmFsKCkgPT0gJycpIHsKICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgn0JLQstC10LTQuNGC0LUg0L/QsNGA0L7Qu9GMJywgMzAwMCk7CiAgICAgICAgaWYgKCFwYXNzd29yZEZpZWxkLmhhc0NsYXNzKCdpbnZhbGlkJykpIHBhc3N3b3JkRmllbGQuYWRkQ2xhc3MoJ2ludmFsaWQnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGVsc2UgcmV0dXJuIHRydWU7Cn0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
</HTTPSnapshot>